{"version":3,"sources":["assets/icons/cities-logo.svg","components/general/howToRead/static/treemap.png","components/general/howToRead/static/industry_space.png","components/general/howToRead/static/swot.png","assets/icons/population.svg","assets/icons/ranking.svg","assets/icons/gdppercapita.svg","assets/icons/datareliability.svg","assets/icons/topindustries.svg","assets/icons/topknowledgecluster.svg","assets/icons/topsimilarcities.svg","assets/icons/cities-logo-dark.svg","components/templates/informationalPage/assets/github.svg","routing/routes.ts","styling/GlobalGrid.ts","styling/styleUtils.ts","styling/GlobalStyles.tsx","routing/Utils.ts","contextProviders/getFluentLocalizationContext.ts","hooks/useFluent.ts","Utils.ts","types/graphQL/graphQLTypes.ts","hooks/useCurrentCityId.ts","contextProviders/appContext.ts","components/navigation/header/index.tsx","components/standardModal/index.tsx","components/standardModal/BasicModal.tsx","pages/landing/Heading.tsx","dataProvider/index.tsx","components/general/Tooltip.tsx","hooks/useGlobalLocationData.ts","components/transitionStateComponents/SimpleLoader.tsx","components/transitionStateComponents/SimpleError.tsx","components/general/Utils.ts","styling/utils/panelSearchKeywordFormatter.tsx","pages/landing/SearchBar.tsx","pages/landing/index.tsx","components/navigation/Utils.ts","hooks/useCurrentCity.ts","components/navigation/secondaryHeader/UtilityBar.tsx","components/general/dataDisclaimer/index.tsx","components/navigation/secondaryHeader/guide/FirstTimeModal.tsx","components/navigation/secondaryHeader/guide/CitiesGuide.tsx","components/navigation/secondaryHeader/guide/index.tsx","components/navigation/secondaryHeader/share/shareFn.ts","components/navigation/secondaryHeader/share/ShareModal.tsx","components/navigation/secondaryHeader/share/index.tsx","components/general/searchIndustryInGraphDropdown/index.tsx","hooks/useGlobalIndustriesData.ts","components/transitionStateComponents/VizLoadingBlock.tsx","components/dataViz/ErrorBoundary.tsx","components/transitionStateComponents/SimpleTextLoading.tsx","utilities/rapidTooltip.ts","hooks/useAggregateIndustriesData.ts","components/transitionStateComponents/QuickError.tsx","components/dataViz/treeMap/CompositionTreeMap.tsx","hooks/useGlobalClusterData.ts","components/dataViz/treeMap/ClusterCompositionTreeMap.tsx","components/dataViz/legend/Label.tsx","components/dataViz/legend/CategoryLabels.tsx","hooks/useSectorMap.ts","hooks/useClusterMap.ts","pages/cities/profiles/economicComposition/cityComposition/DownloadImageOverlay.tsx","hooks/useQueryParams.ts","components/dataViz/legend/EducationLegend.tsx","components/dataViz/legend/WageLegend.tsx","components/general/searchIndustryInGraphDropdown/ToggleDropdown.tsx","components/general/PreChartRow.tsx","components/dataViz/settings/CurrentSettingsTooltip.tsx","components/dataViz/settings/RCAThresholdSlider.tsx","components/analytics/googleAnalyticsEvent.ts","components/dataViz/settings/index.tsx","components/general/howToRead/index.tsx","components/dataViz/comparisonBarChart/cityIndustryComparisonQuery.ts","components/general/StandardSideTextBlock.tsx","components/transitionStateComponents/StandardSideTextLoading.tsx","pages/cities/profiles/economicComposition/cityComposition/SideText.tsx","pages/cities/profiles/economicComposition/cityComposition/index.tsx","pages/cities/profiles/economicComposition/index.tsx","components/navigation/secondaryHeader/comparisons/AddComparisonModal.tsx","components/dataViz/industrySpace/chart/useRCAData.ts","pages/cities/profiles/overview/widgets/styleUtils.ts","pages/cities/profiles/overview/widgets/topRow/index.tsx","hooks/useCurrentBenchmark.ts","components/dataViz/legend/PresenceToggle.tsx","pages/cities/profiles/overview/widgets/bottomRow/TopRCA.tsx","components/dataViz/similarCitiesMap/useProximityData.ts","pages/cities/profiles/overview/widgets/bottomRow/TopCities.tsx","pages/cities/profiles/overview/widgets/bottomRow/index.tsx","pages/cities/profiles/overview/widgets/DisclaimerText.tsx","pages/cities/profiles/overview/widgets/index.tsx","pages/cities/profiles/overview/concepts/index.tsx","pages/cities/profiles/overview/map/CityMap.tsx","pages/cities/profiles/overview/map/index.tsx","pages/cities/profiles/overview/index.tsx","components/dataViz/verticalBarChart/getNiceLogValues.ts","components/dataViz/verticalBarChart/Industries.tsx","components/dataViz/verticalBarChart/Clusters.tsx","hooks/useClusterRCAData.ts","components/dataViz/legend/BenchmarkLegend.tsx","components/dataViz/verticalBarChart/RCABarChart.tsx","components/dataViz/zoomableComparisonBarChart/Chart.tsx","pages/cities/profiles/goodAt/SideText.tsx","routing/TrackedRoute.tsx","components/dataViz/comparisonBarChart/Chart.tsx","components/dataViz/comparisonBarChart/TopIndustryComparisonBarChart.tsx","pages/cities/profiles/index.tsx","components/dataViz/zoomableComparisonBarChart/IndustryZoomableBarChart.tsx","pages/cities/profiles/goodAt/absolutePresence/index.tsx","pages/cities/profiles/goodAt/index.tsx","components/navigation/secondaryHeader/CitySearch.tsx","components/navigation/secondaryHeader/index.tsx","components/navigation/sideNav/MobileMenu.tsx","components/navigation/sideNav/index.tsx","components/templates/InnerPage.tsx","components/templates/informationalPage/Footer.tsx","components/templates/informationalPage/index.tsx","components/templates/informationalPage/Content.tsx","pages/informational/about/AboutWhatIs.tsx","pages/informational/about/AboutTeam.tsx","pages/informational/about/AboutPilotUserGroup.tsx","pages/informational/about/AboutResearch.tsx","pages/informational/about/AboutGrowthLab.tsx","pages/informational/about/index.tsx","pages/informational/contact/index.tsx","pages/informational/faq/GlossaryItem.tsx","pages/informational/faq/index.tsx","pages/informational/index.tsx","App.tsx","serviceWorker.ts","index.tsx","assets/icons/benchmark_comparator.svg"],"names":["module","exports","ClusterMode","breakPointValues","medium","mediumSmall","small","breakPoints","lines","pageTop","preHeaderTop","preHeaderBottom","headerTop","headerBottom","secondaryHeaderTop","secondaryHeaderBottom","preContentTop","preContentBottom","contentTop","contentBottom","postContentTop","postContentBottom","footerTop","footerBottom","postFooterTop","postFooterBottom","pageBottom","pageLeft","navLeft","navRight","contentLeft","contentRight","pageRight","Root","styled","div","InformationalPageRoot","PrimaryHeaderContainer","SecondaryHeaderContainer","NavigationContainer","ContentContainer","DefaultContentWrapper","sectorColorMap","id","color","clusterColorMap","intensityColorRange","educationColorRange","wageColorRange","primaryFont","secondaryFont","noOutlineOnFocus","css","ContentGrid","fadeIn","keyframes","fadeInAnimation","SearchContainerDark","span","rgba","SearchContainerLight","BlockButton","button","BlockButtonHighlighted","FullPageOverlay","radioButtonCss","$checked","ContentTitle","h2","ContentParagraph","p","ButtonBase","Mult","FractionMult","GlobalStyles","createGlobalStyle","CityRoutes","CityBase","CityOverview","CityEconomicComposition","CityGoodAt","CityGoodAtAbsolutePresence","CityGoodAtAbsolutePresenceComparison","CityIndustrySpacePosition","CityGrowthOpportunities","CityGrowthOpportunitiesTable","CitySimilarCities","AboutRoutes","AboutBase","AboutWhatIs","AboutTeam","AboutPilotUserGroup","AboutResearch","AboutGrowthLab","Routes","Landing","ContactBase","FaqBase","NodeSizing","defaultClusterMode","outline","ColorBy","CityNodeSizing","defaultNodeSizing","cityEmployees","CityColorBy","ClusterLevel","AggregationMode","defaultCityNodeSizing","population","defaultAggregationMode","industries","defaultClusterLevel","C3","defaultColorBy","sector","createRoute","route","cityId","replace","messages","generateBundles","bundle","FluentBundle","_locales","addMessages","localizationAndBundle","localization","ReactLocalization","LocalizationAndBundleContext","createContext","getLocalizationInfo","appLocalizationAndBundle","AppLocalizationAndBundleContext","possessive","word","length","ordinalNumber","input","j","k","ordinalSuffix","useContext","getString","numberWithCommas","x","toString","ranges","divider","suffix","formatNumber","n","decimalPlaces","fixedRange","undefined","range","parseFloat","toFixed","rangesLong","formatNumberLong","decimalToFraction","decimal","top","bottom","Math","pow","floor","gcd","a","b","display","filterOutliers","arr","values","concat","sort","q1","q3","ceil","iqr","maxValue","minValue","filter","DigitLevel","defaultCityPool","prevCity","history","useHistory","match","matchPath","location","pathname","params","random","initialWindowDimension","width","window","innerWidth","height","innerHeight","windowDimensions","useWindowWidth","useState","setWindowDimensions","useEffect","updateWindowDimensions","debounce","addEventListener","removeEventListener","citiesLogoSVG","cityIconSVG","NavSection","Logo","h1","MobileLogo","StyledLink","Link","H2","defaultPadding","$active","MobileH2","BetaLabel","NavIcon","MobileNavIcon","MobileMenuButton","Icon","Bar","CenterBar","MobileMenu","Header","useFluent","mobileMenuOpen","setMobileMenuOpen","matchCity","useRouteMatch","matchSimilarCities","matchAbout","matchContact","matchFaq","currentCityId","useCurrentCityId","similarCitiesRoute","profileCitiesOverviewRoute","menuButtonText","closeMenu","to","aria-label","dangerouslySetInnerHTML","__html","style","transform","Boolean","onClick","zIndex","position","opacity","className","OverlayPortal","tabIndex","Overlay","Container","dimensions","Content","Modal","props","children","onClose","overlayPortalContainerNodeRef","useRef","isModalRendered","setIsModalRendered","node","document","querySelector","current","focus","closeOnEsc","e","key","createPortal","growIn","CloseButton","rest","closeButton","CityIcon","Description","h3","Or","UseMapText","MapPanIcon","WhatIsACityLinkContainer","WhatIsACityLink","ModalContent","Heading","cityModalOpen","setCityModalOpen","modal","BasicModal","StaticDataContext","data","loading","error","useStaticData","StaticDataProvider","state","setState","fetch","process","then","res","ok","Error","status","json","catch","console","Provider","value","CompositionType","defaultDigitLevel","Two","IncomeClassType","DevGroupType","DataFlagType","PeerGroup","defaultCompositionType","Employees","TooltipPosition","TooltipTheme","isValidPeerGroup","GlobalPopulation","GlobalIncome","GlobalEuclideanDistance","RegionalPopulation","RegionalIncome","RegionalEuclideanDistance","Region","regionTypeLabels","useGlobalLocationData","blsData","countries","Array","from","Set","regions","map","r","regionType","rt","countryId","code","toLowerCase","nameShortEn","cities","regionId","name","nameList","centroidLat","centroidLon","gdppc","incomeClass","region","regionPopRank","regionGdppcRank","dataFlag","GREEN","getCountryStringId","locationDataToHierarchicalTreeData","response","push","title","parent_id","level","useGlobalLocationHierarchicalTreeData","responseData","Ring","size","animation","ChildBase","baseSize","themeColor","FirstChild","SecondChild","ThirdChild","SimpleLoader","fluentMessageId","message","timeout","NewDataQualityLevel","MoreInformationI","TooltipBase","$overrideStyles","$theme","Dark","ArrowContainer","$position","Bottom","Arrow","GenericSpan","Tooltip","explanation","cursor","theme","tooltipPosition","overrideStyles","delay","rootEl","tooltipEl","isTooltipShown","setIsTooltipShown","left","coords","setCoords","useLayoutEffect","tooltipElm","rootElm","tooltipHeight","offsetHeight","tooltipWidth","offsetWidth","tooltipTopValue","tooltipLeftValue","tooltipSpacing","classList","add","remove","cssText","tooltip","overlayPortalContainerNode","arrow","ReactDOM","ref","onMouseEnter","clientY","clientX","setTimeout","onMouseLeave","clearTimeout","onMouseMove","RootDark","RootLight","KeywordText","KeywordElement","keywords","query","safeQuery","RegExp","trim","text","total","join","React","memo","setHighlighted","onPanelHover","onTraverseLevel","highlighted","focusOnRender","topLevelTitle","onSelect","val","onHover","selectedValue","disallowSelectionLevels","defaultPlaceholderText","showCount","resultsIdentation","matchingKeywordFormatter","CenterPanel","SearchContainer","LoadingContainer","QuickLinks","QuickLink","Attribution","searchBar","navigateToRegion","useCallback","SimpleError","searchData","d","gdp","href","target","rel","columnsToRowsBreakpoint","UtilityBarButtonBase","SvgBase","Text","LargeSvg","TooltipContent","useCurrentCity","city","find","c","collapsedSizeMediaQueryValues","min","max","collapsedSizeMediaQuery","textClassName","ExpandingButton","DownloadType","dataQualityColors","Map","LOW","MEDIUM","HIGH","getNewDataQualityLevel","assignedNewDataQualityLevel","YELLOW","ORANGE","RED","DisclaimerSvg","$flagColor","DisclaimerSvgLarge","Title","Para","EnlargedTextLabel","LargeDot","DataDisclaimer","currentCity","modalOpen","setModalOpen","flagColor","alertTitle","description","dataQualityLevel","get","backgroundColor","img","StartGuideButton","DismissButton","CheckboxLabel","label","Checkbox","localStorageKey","dismissedSinceSession","FirstTimeModal","startGuide","initialCheckedValue","parseInt","localStorage","getItem","isNaN","checked","setChecked","closeModal","setItem","newCheckedCount","src","CityverseLogoURL","htmlFor","type","onChange","joyrideClassNames","steps","content","disableBeacon","placement","CitiesGuide","run","filteredSteps","element","offsetParent","continuous","showProgress","spotlightClicks","locale","back","close","last","next","skip","styles","options","primaryColor","callback","action","floaterProps","disableAnimation","Guide","runTutorial","setRunTutorial","getShareWindowParams","getShareFunctions","url","shareFacebook","shareURL","encodeURIComponent","open","shareTwitter","shareLinkedIn","summary","source","shareEmail","subjectCopy","bodyBeforeLineBreakCopy","bodyAfterLineBreakCopy","subject","bodyBeforeLineBreak","bodyAfterLineBreak","SectionTitle","CopyUrlBar","CopyIcon","UrlText","CopyButton","SocialMediaContainer","SocialMediaButton","copied","setCopied","copyText","navigator","clipboard","writeText","Share","ShareModal","UtilityBarRoot","UtilityBarPortal","Mode","UtilityBar","onDownloadImageButtonClick","onDownloadDataButtonClick","returnInline","hideGuide","secondaryHeaderUtilityBarContainerNodeRef","isUtilityBarRendered","setIsUtilityBarRendered","screenfull","isEnabled","isFullscreen","setIsFullscreen","downloadDataButton","downloadImageButton","expandButton","onFullscreenClose","exit","off","request","on","guide","useGlobalIndustriesData","occupations","occ","socCode","naicsId","parentId","naicsIdTopParent","majorGroupId","tradable","useGlobalIndustryMap","forEach","industry","industryDataToMap","LoadingOverlay","LoadingBlock","ErrorBoundary","hasError","errorInfo","this","_error","Component","Spinner","bounceDelay","Bounce","Bounce1","Bounce2","RapidTooltipRoot","getStandardTooltip","columnCount","rows","i","row","underline","underlineRows","includes","ii","alignment","boldColumns","grid","additionalContent","additionalHTML","hideArrow","titleStyle","simple","defaultMinMax","minSumNumCompany","maxSumNumCompany","minSumNumEmploy","maxSumNumEmploy","minAvgNumCompany","maxAvgNumCompany","minAvgNumEmploy","maxAvgNumEmploy","minYearsEducation","maxYearsEducation","minHourlyWage","maxHourlyWage","medianHourlyWage","medianYearsEducation","useAggregateIndustryMap","variables","clusters","globalMinMax","clusterMinMax","yearStr","year","aggregates","byOccupation","wages","Object","o","avgWage","complexities","avgComplexity","wagesFiltered","complexitiesFiltered","sortedWages","sortedComplexities","medianWage","round","medianComplexity","minWage","maxWage","minComplexity","maxComplexity","entries","occData","yearsEducation","hourlyWage","yearsEducationRank","hourlyWageRank","sumNumCompany","sumNumEmploy","totalEmploy","avgNumCompany","avgNumEmploy","majorGroups","mg","matchingOccs","groupId","reduce","s","clusterId","QuickError","closeError","duration","TreeMapContainer","useEconomicCompositionQuery","regionData","yearData","numCompany","numEmploy","totEmp","digitLevel","compositionType","hiddenSectors","colorBy","setIndicatorContent","industryMap","rootRef","tooltipContentRef","highlightedTooltipRef","setDimensions","aggregateIndustryDataMap","getBoundingClientRect","dataToUse","prevData","usePrevious","output","indicator","tooltipContent","education","wage","SimpleTextLoading","colorScale","treeMapData","companies","employees","Companies","topLevelParentId","scaleLinear","domain","fill","transformed","transformData","colorMap","loadingOverlay","highlightedCell","treeMapCells","industryWithData","share","shareString","targetValue","innerHTML","pointerEvents","x0","x1","y0","clearHighlighted","highlightErrorPopup","fallbackTitle","cells","numCellsTier","chartContainerWidth","chartContainerHeight","onCellClick","noop","onMouseOverCell","onMouseLeaveChart","useGlobalClusterData","clusterIdTopParent","useGlobalClusterMap","_options","cluster","clusterDataToMap","useClusterCompositionQuery","socToMajorGroup","majorGroupAgg","mgId","employ","agg","rcaNumCompany","rcaNumEmploy","clusterLevel","hiddenClusters","clusterMap","Six","allRCAValues","minMax","extent","scaleSymlog","clusterIndustryDatum","clusterWithData","Button","Block","HideIsolateRoot","HideIsolateContent","HideIsolateText","Hr","hr","ButtonWrapper","HideIsolateButton","Label","category","toggleCategory","isolateCategory","isHidden","isIsolated","isHovered","setIsHovered","toggleButton","isolateButton","hideIsolateButtons","hideIsolate","borderColor","RootBase","StandardRoot","FullWidthRoot","StandardContent","FullWidthContent","fadeAndSlideIn","fadeAndSlideDown","ResetLabelsButtonContainer","ResetLabelsButton","ReloadIcon","CategoryLabels","categories","fullWidth","allowToggle","hiddenCategories","resetCategories","resetText","labels","resetButton","treeMapCellsNode","cityName","aggregationMode","industryResponse","clusterResponse","effectRan","setEffectRan","boundingRect","canvas","createElement","context","getContext","cell","beginPath","rect","y1","fillStyle","strokeStyle","stroke","html2canvas","allowTaint","cellLabels","drawImage","link","download","toDataURL","click","queryString","parse","search","Labels","IntensityLegend","jumpIn","DropdownContainer","ToggleButton","rerenderKey","isDropdownVisible","setIsDropdownVisible","internalSelectedValue","setInternalSelectedValue","dropdown","maxResults","VizNavStyle","hierarchalSearchData","tiers","searchPanel","hiddenParents","mode","hidden","sectorMap","useSectorMap","useClusterMap","industrySearchData","industryDataToHierarchicalTreeData","useGlobalIndustryHierarchicalTreeData","clusterSearchData","clusterDataToHierarchicalTreeData","useGlobalClusterHierarchicalTreeData","locationSearchData","useWindowSize","naics","keys","geo","ToggleDropdown","visibility","Segment","Subtitle","em","CurrentSettingsTooltip","nodeSizingValue","settingsOptions","useQueryParams","compositionText","composition_type","aggregationText","upperFirst","aggregation","detailLevel","digit_level","sixDigitOnlyMessage","cluster_overlay","hideClusters","clusterOverlayMode","nodeSizing","node_sizing","rca","sizeBy","defaultColorByText","nodes","color_by","citySizeBy","cityNodeSizing","city_node_sizing","cityColorBy","city_color_by","proximity","rcaThreshold","rca_threshold","SliderContainer","RCAThresholdSlider","updateValue","initialValue","logScale","scaleLog","logScaleWithZero","convertValue","logValue","invert","ReactSlider","thumbClassName","trackClassName","defaultValue","renderThumb","valueNow","onAfterChange","v","googleAnalyticsEvent","_category","_action","_label","slideIn","ContentRoot","SettingGrid","SettingsInputContainer","DisabledSettingsInputContainer","CompostionButtonBase","CompostionButtonHighlight","DisabledLabel","DigitLevelButton","$selected","DigitLevelSoloButton","ResetButton","Settings","compositionOptions","digitLevelOptions","clusterLevelOptions","clusterOverlayToggle","nodeSizingOptions","colorByOptions","cityColorByOptions","cityNodeSizingOptions","updateSetting","param","stringify","newUrl","CompanyButton","EmployeeButton","InputContainer","LabelContainer","tooltipText","disabledOptions","ClusterButton","NaicButton","Sector","Three","Four","Five","C1","cluster_level","overlay","none","nodeSizingActive","currentValue","sizeByRca","cityCompanies","uniform","globalEmployees","globalCompanies","labelText","defaultIsSelected","gdpPpp","Image","HowToRead","isTreemap","isIndustrySpace","isSwot","isExact","TreemapPNG","IndustrySpacePNG","SwotPNG","$hasIndicator","RowBase","LeftColumn","IndicatorTooltipContainer","RightColumn","IndicatorRoot","SettingsButton","NavButton","HighlightedNavButton","UnderlineNavButton","UnderlineHighlightedNavButton","NavButtonTooltip","ButtonNavContainer","RegionGroup","searchInGraphOptions","vizNavigation","vizNavigationStyle","settingsOpen","setSettingsOpen","indicatorTooltip","indicatorElm","rightColumnStyle","justifyContent","vizNavigationButtonElms","Underline","active","vizNavigationButtons","searchInGraph","settingsButton","settingsPanel","ScrollContainer","StandardSideTextBlock","clearStyles","Fragment","alignItems","flickerAnimation","TitleBar","ParaBar","StandardSideTextLoading","marginBottom","SideText","locations","composition","cityNamePlural","country","allSectors","count","largestSector","orderBy","secondLargestSector","para1","para2","Helmet","property","TreeMapRoot","EconomicComposition","prevHighlighted","setHiddenSectors","setHiddenClusters","legend","activeDownload","setActiveDownload","indicatorContent","treeMapRef","globalLocationData","isClusterTreeMap","cellsNode","targetCity","DownloadImageOverlay","EducationLegend","WageLegend","sId","sectorId","treeMapViz","ClusterCompositionTreeMap","ComparisonType","useComparisonQuery","primaryId","primaryCity","primaryRegionData","primaryYearData","primaryCityIndustries","industryId","secondaryCityIndustries","comparison","World","secondaryId","secondaryRegionData","secondaryYearData","nationalData","nationalYearData","H1","Grid","ContinueButtonContainer","ContinueButton","ContainerTitle","AboutText","AddComparisonModal","comparisonType","continueButtonRef","globalData","benchmark","otherParams","intialSelected","selected","setSelected","prevValue","closeModalWithoutConfirming","Relative","selectCityTitle","about","Absolute","BenchmarkSVG","neverEmpty","disabled","TitleBase","globalBreakPoints","WrappableText","YearText","ValueBase","ListItem","DataLegend","SmallDot","LegendContainer","LegendRow","TopRow","cityLoading","dataQualityTooltip","toUpperCase","PopulationSVG","GdpPerCapitaSVG","RankingSVG","DataReliabilitySVG","useCurrentBenchmark","benchmarkName","benchmarkNameShort","StringBoolean","Highlighted","useClusterIntensityQuery","blsLoading","naicsData","naicsRca","clusterData","c1Rca","c3Rca","useRCAData","variable","peerGroup","partnerCityIds","Cell","TopRCA","topIndustriesElement","topClustersElement","industriesGreaterThan1","dd","topIndustries","slice","clustersGreaterThan1","topClusters","TopIndustriesSVG","TopClustersSVG","useProximityData","cityPartnerEucdistScale","minGlobalEucdist","p20GlobalEucdist","p40GlobalEucdist","p60GlobalEucdist","p80GlobalEucdist","maxGlobalEucdist","TopCities","topCitiesElement","globalLocations","minPop","maxPop","topLocations","partnerId","cntry","countryText","TopCitiesSVG","BottomRow","DisclaimerText","cityPeerGroupCountsRegion","regionName","cityPeerGroupCounts","Row","Widgets","disclaimer","SectionHeader","Section","Concepts","Placeholder","CityMap","_props","MapRoot","fitBounds","bounds","padding","right","ContentBlock","WidgetContainer","MapContainer","ConceptsContainer","SimilarCities","tickMarksForMinMax","Industries","highlightError","setHighlightError","tooltipRef","filteredIndustryRCA","scale","nice","numberOfXAxisTicks","highPresenceScale","lowPresenceScale","highPresenceData","lowPresenceData","colorDatum","datum","primaryData","secondaryData","formatValue","direction","scaleToUse","Direction","Over","scaledValue","onRowHover","mouseCoords","y","onHighlightError","nValuesToShow","expandCollapseText","toExpand","toCollapse","Clusters","filteredClusterRCA","ButtonsRoot","OneTimeTooltip","DismissTooltipButton","HighlightedTooltipText","EquationContainer","Division","Subtraction","Top","BenchmarkText","PresenceToggle","togglePresence","highlight","showArrows","onButtonClick","initialShowOverviewTooltip","TRUE","showOverviewTooltip","setShowOverviewTooltip","highlightedStyles","relativePresenceTooltip","absolutePresenceTooltip","presenceButtons","relative","absolute","arrowLeft","arrowRight","oneTimeTooltip","rotate","strong","BenchmarkLegend","benchmarkModal","newBenchmark","LeftAxisRoot","BottomAxisRoot","BenchmarkRoot","AxisLabelBase","AxisLabelLeft","AxisLabelRight","AxisLabelHigh","VizRoot","VizContainer","RCABarChart","isClusterView","industryData","viz","Group","prefix","benchmarkType","cityNamePossessive","its","the","peerGroupName","peerGroupPossessive","industrialKnowledgeCluster","industrysClusters","industryCluster","para3","para4","TrackedRoute","formatAxisValue","filteredPrimaryData","filteredSecondaryData","primaryTotal","secondaryTotal","primaryCityId","secondaryCityId","secondaryDatum","d2","difference","primaryDatum","secondaryCityName","primaryCityDatum","primaryCityName","secondaryCityDatum","primaryDiffValue","secondaryDiffValue","primaryValue","secondaryValue","primaryValueText","secondaryValueText","primaryDiff","secondaryDiff","layout","Layout","Left","TopIndustryComparisonBarChart","aggregateData","globalAggregateData","industryOrClusterMap","parentField","hiddenIndustriesOrClusters","topParent","textLeft","other","textRight","whiteSpace","primaryName","secondaryName","setHovered","filteredData","groupName","Primary","Secondary","removeHovered","allYValues","dataWithHover","maxY","prevMaxY","vizType","VizType","ClusterBarChart","axisLabels","formatAxis","animateBars","axisMinMax","minY","animateAxis","animationDuration","startMaxY","startMinY","chartTitle","SizingContainer","BreadCrumbList","ul","BreadCrumb","li","BreadCrumbLink","PrimarySecondaryLegend","LegendItem","LegendBlock","LegendText","IndustryZoomableBarChart","idField","highlightIndustry","highlightedParent","barChartData","sortedData","breadCrumbList","currentParentId","breadCrumbs","reverse","industryName","topLevelText","topLevelBreadCrumb","CompositionComparison","secondaryCity","isIndustryComparison","path","render","matchZoomableBarChart","StyledSelect","select","CountrySelect","YearSelect","RegionSelect","CitySearch","years","metadata","currentYear","nationals","localeCompare","metros","states","SecondaryHeader","component","MobileButtonContainer","MobileButton","ChevronSVG","arrowStyles","ArrowBase","DisabledArrow","NextSvg","PrevSvg","DownArrow","UpArrow","baseLinkData","toggleMenu","warn","linkIndex","findIndex","pageTitle","prevLink","nextLink","toggleArrow","rootWidth","LinkContainer","acitveLinkClass","NavLink","BetaIcon","CollapseButton","CollapsedMenu","CollapsedLink","ExpandButton","ExtendArrow","SideNavigation","collapsed","setCollapsed","AppContext","linkData","setLinkData","containerHovered","setContainerHovered","circle_0","circle_1","circle_2","circle_3","circle_4","l","absoluteTop","refArray","offset","documentElement","scrollTop","body","offsetTop","newLinkDatum","tooltips","links","beta","removeParams","newParams","LinkRoot","mobileMenu","collapseButton","menu","xmlns","viewBox","cx","cy","InnerPage","City","getStringWithNewLines","matchOverview","prevCityId","dismissed","Overview","GoodAt","ColumnOrRow","CityverseLogo","h4","CityverseVersion","CenteredColumn","InternalLinksColumn","ExternalLinksColumn","CityverseLogoColumn","AttributionColumn","AttributionInfo","GitHubLink","GitHubIcon","linkStyles","StyledInternalLink","StyledExternalLink","LicenseAndReadme","StandardFooter","CityverseLogoSVG","alt","REACT_APP_METROVERSE_VERSION","GitHubIconSVG","marginTop","rootId","ContentStandard","ContentFull","InformationalPage","contentFull","Footer","StickyContainer","LinkBase","sections","firstRender","setFirstRender","onScroll","currentSection","section","root","scrollTo","behavior","scrollIntoView","navLinks","contentSections","About","Contact","LargeTerm","dt","SmallTerm","Definition","Paragraph","GlossaryItem","term","definition","smallLabel","domElmHeight","setDomElmHeight","expandedHeight","setExpandedHeight","icon","setIcon","definitionElm","clientHeight","Term","Faq","pairs","question","answer","index","App","defaultMetaTitle","exact","Informational","isLocalhost","hostname","registerValidSW","swUrl","config","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","log","onUpdate","onSuccess","fluentValue","getElementById","URL","origin","headers","contentType","indexOf","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.f9d08756.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/cities-logo.15ef040b.svg\";","module.exports = __webpack_public_path__ + \"static/media/treemap.21370ddc.png\";","module.exports = __webpack_public_path__ + \"static/media/industry_space.fe933ea1.png\";","module.exports = __webpack_public_path__ + \"static/media/swot.5175caea.png\";","module.exports = __webpack_public_path__ + \"static/media/population.510f7828.svg\";","module.exports = __webpack_public_path__ + \"static/media/ranking.b15df652.svg\";","module.exports = __webpack_public_path__ + \"static/media/gdppercapita.b6ad9a64.svg\";","module.exports = __webpack_public_path__ + \"static/media/datareliability.37b910ab.svg\";","module.exports = __webpack_public_path__ + \"static/media/topindustries.52bc3ab8.svg\";","module.exports = __webpack_public_path__ + \"static/media/topknowledgecluster.85228d9d.svg\";","module.exports = __webpack_public_path__ + \"static/media/topsimilarcities.1e1a8756.svg\";","module.exports = __webpack_public_path__ + \"static/media/cities-logo-dark.f92ed258.svg\";","module.exports = __webpack_public_path__ + \"static/media/github.35accb26.svg\";","import { CompositionType } from \"../types/graphQL/graphQLTypes\";\n\n// param must be specified in each route in order to enforce typechecking\nexport const cityIdParam = \"cityId\";\n\nexport const CityRoutes = {\n  CityBase: \"/city/:cityId\",\n  CityOverview: \"/city/:cityId/overview\",\n  CityEconomicComposition: \"/city/:cityId/economic-composition\",\n  CityGoodAt: \"/city/:cityId/good-at\",\n  CityGoodAtAbsolutePresence: \"/city/:cityId/good-at/absolute\",\n  CityGoodAtAbsolutePresenceComparison:\n    \"/city/:cityId/good-at/absolute/comparison\",\n  CityIndustrySpacePosition: \"/city/:cityId/industry-position\",\n  CityGrowthOpportunities: \"/city/:cityId/growth-opportunities\",\n  CityGrowthOpportunitiesTable: \"/city/:cityId/growth-opportunities/table\",\n  CitySimilarCities: \"/city/:cityId/similar-cities\",\n} as const;\n\nexport const AboutRoutes = {\n  AboutBase: \"/about\",\n  AboutWhatIs: \"/about/what-is-metroverse\",\n  AboutTeam: \"/about/team\",\n  AboutPilotUserGroup: \"/about/pilot-user-group\",\n  AboutResearch: \"/about/research\",\n  AboutGrowthLab: \"/about/growth-lab\",\n};\n\nexport const ContactRoutes = {\n  ContactBase: \"/contact\",\n};\n\nexport const FaqRoutes = {\n  FaqBase: \"/faq\",\n};\n\nexport const Routes = {\n  Landing: \"/\",\n  ...CityRoutes,\n  ...AboutRoutes,\n  ...ContactRoutes,\n  ...FaqRoutes,\n} as const;\n\nexport enum ClusterMode {\n  outline = \"outline\",\n  overlay = \"overlay\",\n  none = \"none\",\n}\n\nexport const defaultClusterMode: ClusterMode = ClusterMode.outline;\n\nexport enum NodeSizing {\n  uniform = \"uniform\",\n  rca = \"rca\",\n  globalCompanies = \"global_companies\",\n  globalEmployees = \"global_employees\",\n  cityCompanies = \"city_companies\",\n  cityEmployees = \"city_employees\",\n}\n\nexport const defaultNodeSizing: NodeSizing = NodeSizing.cityEmployees;\n\nexport enum ColorBy {\n  sector = \"sector\",\n  education = \"education\",\n  wage = \"wage\",\n}\n\nexport enum CityNodeSizing {\n  uniform = \"uniform\",\n  population = \"population\",\n  gdpPpp = \"gdpPpp\",\n}\n\nexport const defaultCityNodeSizing: CityNodeSizing = CityNodeSizing.population;\n\nexport enum CityColorBy {\n  proximity = \"proximity\",\n}\n\nexport enum ClusterLevel {\n  C1 = \"1\",\n  C2 = \"2\",\n  C3 = \"3\",\n}\n\nexport enum AggregationMode {\n  cluster = \"clusters\",\n  industries = \"industries\",\n}\n\nexport const defaultAggregationMode: AggregationMode =\n  AggregationMode.industries;\n\nexport const defaultClusterLevel: ClusterLevel = ClusterLevel.C3;\nexport const defaultColorBy: ColorBy = ColorBy.sector;\n\nexport interface GlobalQueryParams {\n  year: string | undefined;\n  country: string | undefined;\n  benchmark: string | undefined;\n  digit_level: string | undefined;\n  composition_type: CompositionType | undefined;\n  aggregation: AggregationMode | undefined;\n  cluster_overlay: ClusterMode | undefined;\n  node_sizing: NodeSizing | undefined;\n  color_by: ColorBy | undefined;\n  city_node_sizing: CityNodeSizing | undefined;\n  city_color_by: CityColorBy | undefined;\n  cluster_level: ClusterLevel | undefined;\n  rca_threshold: string | undefined;\n}\n","import styled from \"styled-components/macro\";\n\nexport const breakPointValues = {\n  width: {\n    medium: 1100,\n    mediumSmall: 900,\n    small: 800,\n  },\n  height: {\n    medium: 768,\n    mediumSmall: 550,\n    small: 500,\n  },\n};\n\nexport const breakPoints = {\n  medium: `screen and (max-width: ${breakPointValues.width.medium}px),\n           screen and (max-height: ${breakPointValues.height.medium}px)`,\n  mediumSmall: `screen and (max-width: ${breakPointValues.width.mediumSmall}px),\n           screen and (max-height: ${breakPointValues.height.mediumSmall}px)`,\n  small: `screen and (max-width: ${breakPointValues.width.small}px),\n          screen and (max-height: ${breakPointValues.height.small}px)`,\n};\n\nconst lines = {\n  rows: {\n    // Horizontal Grid Lines\n    pageTop: \"citiesAtlasGlobalGridPageTop\",\n    preHeaderTop: \"citiesAtlasGlobalGridPreHeaderTop\",\n    preHeaderBottom: \"citiesAtlasGlobalGridPreHeaderBottom\",\n    headerTop: \"citiesAtlasGlobalGridHeaderTop\",\n    headerBottom: \"citiesAtlasGlobalGridHeaderBottom\",\n    secondaryHeaderTop: \"citiesAtlasGlobalGridSecondaryHeaderTop\",\n    secondaryHeaderBottom: \"citiesAtlasGlobalGridSecondaryHeaderBottom\",\n    preContentTop: \"citiesAtlasGlobalGridPreContentTop\",\n    preContentBottom: \"citiesAtlasGlobalGridPreContentBottom\",\n    contentTop: \"citiesAtlasGlobalGridContentTop\",\n    contentBottom: \"citiesAtlasGlobalGridContentBottom\",\n    postContentTop: \"citiesAtlasGlobalGridPostContentTop\",\n    postContentBottom: \"citiesAtlasGlobalGridPostContentBottom\",\n    footerTop: \"citiesAtlasGlobalGridFooterTop\",\n    footerBottom: \"citiesAtlasGlobalGridFooterBottom\",\n    postFooterTop: \"citiesAtlasGlobalGridPostFooterTop\",\n    postFooterBottom: \"citiesAtlasGlobalGridPostFooterBottom\",\n    pageBottom: \"citiesAtlasGlobalGridPageBottom\",\n  },\n  columns: {\n    pageLeft: \"citiesAtlasGlobalGridPageLeft\",\n    navLeft: \"citiesAtlasGlobalGridNavLeft\",\n    navRight: \"citiesAtlasGlobalGridNavRight\",\n    contentLeft: \"citiesAtlasGlobalGridContentLeft\",\n    contentRight: \"citiesAtlasGlobalGridContentRight\",\n    pageRight: \"citiesAtlasGlobalGridPageRight\",\n  },\n};\n\nexport const Root = styled.div`\n  height: 100vh;\n  width: 100%;\n  overflow: hidden;\n  margin: 0;\n  padding: 0;\n  position: relative;\n  z-index: 10;\n  display: grid;\n  grid-template-rows:\n    [ ${lines.rows.pageTop} ${lines.rows.preHeaderTop}] auto\n    [ ${lines.rows.preHeaderBottom} ${lines.rows.headerTop}] auto\n    [ ${lines.rows.headerBottom} ${lines.rows.secondaryHeaderTop}] auto\n    [ ${lines.rows.secondaryHeaderBottom} ${lines.rows.preContentTop}] auto\n    [ ${lines.rows.preContentBottom} ${lines.rows.contentTop}] 1fr\n    [ ${lines.rows.contentBottom} ${lines.rows.postContentTop}] auto\n    [ ${lines.rows.postContentBottom} ${lines.rows.footerTop}] auto\n    [ ${lines.rows.footerBottom} ${lines.rows.postFooterTop}] auto\n    [ ${lines.rows.postFooterBottom} ${lines.rows.pageBottom}];\n\n  grid-template-columns:\n    [ ${lines.columns.pageLeft} ${lines.columns.navLeft}] auto\n    [ ${lines.columns.navRight} ${lines.columns.contentLeft}] 1fr\n    [ ${lines.columns.contentRight} ${lines.columns.pageRight}];\n\n  @media ${breakPoints.small} {\n    height: auto;\n    min-height: 100vh;\n    max-width: 100%;\n  }\n`;\n\n// Informational pages are the same as normal Root but without responsive adjustments\nexport const InformationalPageRoot = styled.div`\n  height: 100vh;\n  width: 100%;\n  overflow: hidden;\n  margin: 0;\n  padding: 0;\n  position: relative;\n  z-index: 10;\n  display: grid;\n  grid-template-rows:\n    [ ${lines.rows.pageTop} ${lines.rows.preHeaderTop}] auto\n    [ ${lines.rows.preHeaderBottom} ${lines.rows.headerTop}] auto\n    [ ${lines.rows.headerBottom} ${lines.rows.secondaryHeaderTop}] auto\n    [ ${lines.rows.secondaryHeaderBottom} ${lines.rows.preContentTop}] auto\n    [ ${lines.rows.preContentBottom} ${lines.rows.contentTop}] 1fr\n    [ ${lines.rows.contentBottom} ${lines.rows.postContentTop}] auto\n    [ ${lines.rows.postContentBottom} ${lines.rows.footerTop}] auto\n    [ ${lines.rows.footerBottom} ${lines.rows.postFooterTop}] auto\n    [ ${lines.rows.postFooterBottom} ${lines.rows.pageBottom}];\n\n  grid-template-columns:\n    [ ${lines.columns.pageLeft} ${lines.columns.navLeft}] auto\n    [ ${lines.columns.navRight} ${lines.columns.contentLeft}] 1fr\n    [ ${lines.columns.contentRight} ${lines.columns.pageRight}];\n`;\n\nexport const PrimaryHeaderContainer = styled.div`\n  grid-row: ${lines.rows.headerTop} / ${lines.rows.headerBottom};\n  grid-column: ${lines.columns.pageLeft} / ${lines.columns.pageRight};\n`;\nexport const SecondaryHeaderContainer = styled.div`\n  grid-row: ${lines.rows.secondaryHeaderTop} /\n    ${lines.rows.secondaryHeaderBottom};\n  grid-column: ${lines.columns.pageLeft} / ${lines.columns.pageRight};\n`;\nexport const NavigationContainer = styled.div`\n  grid-row: ${lines.rows.contentTop} / ${lines.rows.contentBottom};\n  grid-column: ${lines.columns.navLeft} / ${lines.columns.navRight};\n  display: flex;\n\n  @media ${breakPoints.small} {\n    grid-row: ${lines.rows.preContentTop} / ${lines.rows.preContentBottom};\n    grid-column: ${lines.columns.pageLeft} / ${lines.columns.pageRight};\n    display: block;\n  }\n`;\nexport const ContentContainer = styled.div`\n  grid-row: ${lines.rows.contentTop} / ${lines.rows.contentBottom};\n  grid-column: ${lines.columns.contentLeft} / ${lines.columns.contentRight};\n  background-color: #fff;\n`;\n\nexport const DefaultContentWrapper = styled.div`\n  pointer-events: all;\n  display: contents;\n`;\n\nexport const PageArrowsContainer = styled.div`\n  grid-row: ${lines.rows.postContentTop} / ${lines.rows.postContentBottom};\n  grid-column: ${lines.columns.pageLeft} / ${lines.columns.pageRight};\n`;\n","import styled, { keyframes, css } from \"styled-components/macro\";\nimport { breakPoints, breakPointValues } from \"./GlobalGrid\";\nimport { rgba } from \"polished\";\n\nexport const baseColor = \"#333333\"; // dark gray/black color for text\nexport const lightBaseColor = \"#7c7c7c\"; // light gray color for subtitles and contextual information\nexport const lightBorderColor = \"#dcdcdc\"; // really light gray color for subtle borders between elements\nexport const mapLabelColor = \"#04151b\"; // dark blue/black\n\nexport const hoverBackgroundColor = \"#f3f3f3\"; // really light gray color for use as a hover background color on cards\n\nexport const primaryColor = \"#f89570\"; // orange\nexport const primaryHoverColor = \"#ef8963\"; // slightly dark orange\nexport const primaryColorDark = \"#f56b39\"; // dark orange\nexport const primaryColorLight = \"#fdd4c7\"; // light orange\nexport const secondaryColor = \"#3b848d\"; // blue/teal\nexport const tertiaryColor = \"#cfbc3c\"; // yellow\n\nexport const backgroundMedium = \"#e6e7e8\"; // dark blue gray\nexport const backgroundDark = \"#2e353f\"; // dark blue gray\nexport const medGray = \"#4d565e\";\n\nexport const benchmarkColor = \" #32a58f\"; // greenish blue\n\nexport const linkColor = \"#6accc2\";\n\nexport const errorColor = \"#f43a16\"; // reddish color\n\nexport const primaryColorRange = [\n  primaryColor,\n  \"#f9a180\",\n  \"#faad90\",\n  \"#fbc5b1\",\n  \"#fcd1c1\",\n];\n\n// SOC Major Group color map (keyed by 2-digit SOC code)\nexport const sectorColorMap = [\n  { id: \"11\", color: \"#A973BE\" },  // Management\n  { id: \"13\", color: \"#F1866C\" },  // Business and Financial Operations\n  { id: \"15\", color: \"#488098\" },  // Computer and Mathematical\n  { id: \"17\", color: \"#6A6AAD\" },  // Architecture and Engineering\n  { id: \"19\", color: \"#77C898\" },  // Life, Physical, Social Science\n  { id: \"21\", color: \"#93CFD0\" },  // Community and Social Service\n  { id: \"23\", color: \"#D35162\" },  // Legal\n  { id: \"25\", color: \"#FFC135\" },  // Educational Instruction\n  { id: \"27\", color: \"#F28188\" },  // Arts, Design, Entertainment\n  { id: \"29\", color: \"#5B9BD5\" },  // Healthcare Practitioners\n  { id: \"31\", color: \"#70AD47\" },  // Healthcare Support\n  { id: \"33\", color: \"#BF8F00\" },  // Protective Service\n  { id: \"35\", color: \"#ED7D31\" },  // Food Preparation\n  { id: \"37\", color: \"#8DB4E2\" },  // Building and Grounds\n  { id: \"39\", color: \"#C5B0D5\" },  // Personal Care\n  { id: \"41\", color: \"#FF6B6B\" },  // Sales\n  { id: \"43\", color: \"#4ECDC4\" },  // Office and Administrative\n  { id: \"45\", color: \"#556B2F\" },  // Farming, Fishing, Forestry\n  { id: \"47\", color: \"#DAA520\" },  // Construction\n  { id: \"49\", color: \"#708090\" },  // Installation, Maintenance\n  { id: \"51\", color: \"#CD853F\" },  // Production\n  { id: \"53\", color: \"#9370DB\" },  // Transportation\n];\n\nexport const clusterColorMap = [\n  { id: \"1\", color: \"#999932\" }, // Basic Materials\n  { id: \"2\", color: \"#485999\" }, // Manufacturing\n  { id: \"3\", color: \"#37AF98\" }, // Food\n  { id: \"4\", color: \"#65CEE0\" }, // Durables\n  { id: \"5\", color: \"#873261\" }, // Logistics\n  { id: \"6\", color: \"#B76274\" }, // Services\n  { id: \"7\", color: \"#DDCC77\" }, // Finance\n];\n\nexport const intensityColorRange = [\"#c2e5fc\", \"#003e59\"];\n\nexport const educationColorRange = [\"#5aad60\", \"#eaebcc\", \"#986faa\"];\n\nexport const wageColorRange = [\"#4a7ab7\", \"#eaebcc\", \"#dc3d2d\"];\n\nexport const primaryFont = \"'Source Sans Pro', sans-serif\";\nexport const secondaryFont = \"'OfficeCodeProWeb', monospace\";\n\nexport const semiBoldFontBoldWeight = 600;\nexport const boldFontWeight = 700;\n\nexport const defaultPadding = 2; // in rems\n\nexport const noOutlineOnFocus = css`\n  &:focus:not(:focus-visible) {\n    outline: none;\n  }\n`;\n\nexport const ContentGrid = styled.div`\n  padding: 0 0.75rem 0.25rem;\n  box-sizing: border-box;\n  display: grid;\n  width: 100%;\n  min-height: 100%;\n  grid-template-rows: auto 1fr auto;\n  grid-template-columns: 1fr 21rem;\n  grid-column-gap: 2rem;\n\n  @media screen and (max-width: 1350px) {\n    grid-template-columns: 1fr 17.5rem;\n    grid-column-gap: 1rem;\n  }\n\n  @media screen and (max-width: ${breakPointValues.width.medium}px) {\n    grid-template-columns: 1fr 14.5rem;\n    grid-column-gap: 1rem;\n  }\n\n  @media screen and (max-width: ${breakPointValues.width.mediumSmall}px) {\n    grid-template-columns: 1fr 11rem;\n  }\n\n  @media ${breakPoints.small} {\n    grid-template-rows: auto auto 80vh auto;\n    grid-template-columns: 1fr;\n  }\n`;\n\nexport const ContentScrollGrid = styled.div`\n  box-sizing: border-box;\n  display: grid;\n  width: 100%;\n  min-height: 100%;\n  grid-template-columns: 21rem 1fr;\n  grid-column-gap: 2rem;\n\n  @media screen and (max-width: 1350px) {\n    grid-template-columns: 17.5rem 1fr;\n    grid-column-gap: 1rem;\n  }\n\n  @media ${breakPoints.small} {\n    grid-template-rows: auto auto;\n    grid-template-columns: 1fr;\n  }\n`;\n\nconst fadeIn = keyframes`\n  from {\n    opacity: 0;\n  }\n\n  to {\n    opacity: 1;\n  }\n`;\n\nexport const fadeInAnimation = css`\n  opacity: 0;\n  animation: ${fadeIn} 0.2s linear 1 forwards;\n`;\n\nexport const BasicLabel = styled.div`\n  text-transform: uppercase;\n  font-weight: 600;\n  font-size: 0.75rem;\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n`;\n\nexport const BasicLabelBackground = styled.span`\n  background-color: rgba(255, 255, 255, 0.7);\n  padding: 0.075rem 0.175rem;\n`;\n\nexport const SearchContainerDark = styled.div`\n  pointer-events: all;\n  width: 100%;\n  margin: 0 auto;\n\n  @media (min-width: 990px) {\n    width: 95%;\n  }\n\n  font-family: ${secondaryFont};\n\n  .react-panel-search-search-bar-input,\n  button {\n    font-family: ${secondaryFont};\n  }\n\n  .react-panel-search-search-bar-input {\n    text-transform: uppercase;\n    font-size: 0.85rem;\n    background-color: ${rgba(backgroundDark, 0.85)};\n    color: #fff;\n    border: solid 1px #fff;\n    padding-top: 1rem;\n    padding-bottom: 1rem;\n    padding-right: 3rem;\n    box-shadow: none;\n    outline: none;\n\n    &::placeholder {\n      color: #fff;\n    }\n\n    &:focus::placeholder {\n      color: rgba(0, 0, 0, 0);\n    }\n  }\n\n  .react-panel-search-search-bar-dropdown-arrow {\n    background-color: transparent;\n  }\n  .react-panel-search-current-tier-breadcrumb-outer,\n  .react-panel-search-next-button,\n  .react-panel-search-search-bar-dropdown-arrow {\n    svg polyline {\n      stroke: #fff;\n    }\n  }\n\n  .react-panel-search-search-bar-clear-button {\n    background-color: transparent;\n    color: #fff;\n  }\n\n  .react-panel-search-search-bar-search-icon {\n    svg path {\n      fill: #fff;\n    }\n  }\n\n  .react-panel-search-search-results {\n    background-color: ${rgba(backgroundDark, 0.85)};\n    border: solid 1px #fff;\n\n    ::-webkit-scrollbar-thumb {\n      background-color: rgba(255, 255, 255, 0.3);\n    }\n    ::-webkit-scrollbar-track {\n      background-color: rgba(255, 255, 255, 0.1);\n    }\n  }\n\n  .react-panel-search-current-tier-title,\n  .react-panel-search-current-tier-breadcrumb-outer {\n    color: #fff;\n    border-color: ${primaryColor};\n  }\n\n  .react-panel-search-current-tier-breadcrumb-outer:hover {\n    background-color: rgba(255, 255, 255, 0.35);\n  }\n\n  .react-panel-search-list-item {\n    background-color: transparent;\n    color: #fff;\n    &:hover {\n      background-color: rgba(255, 255, 255, 0.35);\n    }\n  }\n\n  .react-panel-search-highlighted-item {\n    background-color: rgba(255, 255, 255, 0.35);\n  }\n\n  .react-panel-search-search-results:hover {\n    .react-panel-search-highlighted-item:not(:hover) {\n      background-color: transparent;\n    }\n  }\n\n  .react-panel-search-list-item-container {\n    strong {\n      color: ${primaryColorDark};\n    }\n  }\n\n  .react-panel-search-list-no-results {\n    color: #fff;\n  }\n`;\n\nexport const SearchContainerLight = styled.div`\n  width: 100%;\n  font-family: ${secondaryFont};\n  letter-spacing: -0.3px;\n\n  .react-panel-search-search-bar-input,\n  button {\n    font-family: ${secondaryFont};\n    letter-spacing: -0.3px;\n  }\n\n  .react-panel-search-search-bar-input {\n    text-transform: uppercase;\n    font-weight: 400;\n    font-size: 0.85rem;\n    border: solid 1px ${lightBaseColor};\n    box-shadow: none;\n    outline: none;\n\n    &:focus::placeholder {\n      color: ${backgroundMedium};\n    }\n  }\n\n  .react-panel-search-current-tier-breadcrumb-outer,\n  .react-panel-search-next-button,\n  .react-panel-search-search-bar-dropdown-arrow {\n    svg polyline {\n      stroke: ${lightBaseColor};\n    }\n  }\n  .react-panel-search-search-bar-dropdown-arrow {\n    width: 1rem;\n  }\n\n  .react-panel-search-search-bar-search-icon {\n    svg path {\n      fill: ${lightBaseColor};\n    }\n  }\n\n  .react-panel-search-search-results {\n    border-left: solid 1px ${lightBaseColor};\n    border-right: solid 1px ${lightBaseColor};\n    border-bottom: solid 1px ${lightBaseColor};\n  }\n\n  .react-panel-search-list-item-container {\n    strong {\n      color: ${primaryColorDark};\n    }\n  }\n\n  .react-panel-search-current-tier-title,\n  .react-panel-search-current-tier-breadcrumb-outer {\n    border-color: ${primaryColor};\n  }\n`;\n\nexport const BlockButton = styled.button`\n  padding: 0.4rem;\n  font-size: 1rem;\n  cursor: pointer;\n  text-align: center;\n  margin-bottom: 0.75rem;\n  border: solid 1px ${backgroundDark};\n  color: ${backgroundDark};\n  background-color: #fff;\n  border-radius: 0;\n  transition: all 0.1s ease-in-out;\n\n  &:hover {\n    color: #fff;\n    background-color: ${backgroundDark};\n  }\n\n  @media ${breakPoints.medium} {\n    font-size: 0.75rem;\n  }\n`;\n\nexport const BlockButtonHighlighted = styled(BlockButton)`\n  background-color: ${backgroundDark};\n  color: #fff;\n\n  &:hover {\n    background-color: ${backgroundDark};\n  }\n`;\n\nexport const FullPageOverlay = styled.div`\n  position: fixed;\n  top: 0;\n  bottom: 0;\n  right: 0;\n  left: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: rgba(0, 0, 0, 0.5);\n  z-index: 500;\n`;\n\nexport const radioButtonCss = css<{ $checked: boolean }>`\n  display: flex;\n  align-items: center;\n  position: relative;\n\n  &:before {\n    content: \"\";\n    width: 12px;\n    height: 12px;\n    border-radius: 200px;\n    border: solid 1px #fff;\n    margin-right: 4px;\n    flex-shrink: 0;\n  }\n\n  &:after {\n    ${({ $checked }) => ($checked ? \"content: '';\" : \"\")}\n    width: 6px;\n    height: 6px;\n    border-radius: 200px;\n    background-color: #fff;\n    transform: translate(4px, 0);\n    position: absolute;\n    flex-shrink: 0;\n  }\n\n  &:hover {\n    background-color: #fff;\n    color: ${backgroundDark};\n\n    &:before {\n      border-color: ${backgroundDark};\n    }\n\n    &:after {\n      background-color: ${backgroundDark};\n    }\n  }\n`;\n\nexport const ContentTitle = styled.h2`\n  font-size: 1.25rem;\n  font-weight: 600;\n\n  @media ${breakPoints.medium} {\n    font-size: 1rem;\n  }\n\n  @media ${breakPoints.mediumSmall} {\n    font-size: 0.95rem;\n  }\n\n  @media ${breakPoints.small} {\n    font-size: 1.3rem;\n  }\n`;\n\nexport const ContentParagraph = styled.p`\n  font-size: 0.9rem;\n\n  @media ${breakPoints.medium} {\n    font-size: 0.75rem;\n  }\n\n  @media ${breakPoints.mediumSmall} {\n    font-size: 0.65rem;\n  }\n\n  @media ${breakPoints.small} {\n    font-size: 0.95rem;\n  }\n`;\n\nexport const ButtonBase = styled.button`\n  color: ${backgroundDark};\n  background-color: transparent;\n  text-transform: uppercase;\n  font-family: ${secondaryFont};\n  letter-spacing: -0.3px;\n  display: flex;\n  align-items: center;\n  font-size: 0.75rem;\n  font-size: clamp(0.75rem, 1.1vw, 0.9rem);\n  padding: 0.25rem;\n  padding: clamp(0.25rem, 0.4vw, 0.5rem);\n  flex-shrink: 0;\n\n  span {\n    width: 0.65rem;\n    width: clamp(0.65rem, 1.5vw, 0.85rem);\n    height: 0.65rem;\n    height: clamp(0.65rem, 1.5vw, 0.85rem);\n    display: inline-block;\n    line-height: 0;\n    margin-right: 0.25rem;\n\n    svg {\n      width: 100%;\n      height: 100%;\n      fill: ${backgroundDark};\n    }\n  }\n\n  &:hover {\n    background-color: ${backgroundDark};\n    color: #fff;\n\n    span svg {\n      fill: #fff;\n    }\n  }\n`;\n\nexport const Mult = styled.span`\n  position: relative;\n  bottom: -0.2em;\n`;\nexport const FractionMult = styled.span`\n  position: relative;\n  bottom: -0.5em;\n`;\n\nexport const PointerActiveContainer = styled.div`\n  pointer-events: all;\n`;\n","import { createGlobalStyle } from \"styled-components/macro\";\nimport {\n  baseColor,\n  lightBaseColor,\n  semiBoldFontBoldWeight,\n  primaryFont,\n  backgroundDark,\n} from \"./styleUtils\";\n\nconst GlobalStyles = createGlobalStyle`\n  @media(max-width: 600px) {\n    html {\n      font-size: 14px;\n    }\n  }\n  @media(max-width: 450px) {\n    html {\n      font-size: 12px;\n    }\n  }\n\n  body {\n    font-family: ${primaryFont};\n    color: ${baseColor};\n    margin: 0;\n    padding: 0;\n  }\n\n  h1 {\n    font-weight: ${semiBoldFontBoldWeight};\n    font-size: 1.7rem;\n  }\n\n  h2 {\n    font-weight: 400;\n    font-size: 1.4rem;\n    text-transform: uppercase;\n  }\n\n  h3 {\n    font-weight: ${semiBoldFontBoldWeight};\n    font-size: 1.1rem;\n    color: ${lightBaseColor};\n  }\n\n  p {\n    line-height: 1.5;\n    margin: 0 0 1rem;\n  }\n\n  button {\n    cursor: pointer;\n    border: none;\n    width: auto;\n    text-align: inherit;\n    overflow: visible;\n\n    /* Normalize 'line-height'. Cannot be changed from 'normal' in Firefox 4+. */\n    line-height: normal;\n\n    /* Corrects font smoothing for webkit */\n    -webkit-font-smoothing: inherit;\n    -moz-osx-font-smoothing: inherit;\n\n    /* Corrects inability to style clickable 'input' types in iOS */\n    -webkit-appearance: none;\n\n    /* Remove excess padding and border in Firefox 4+ */\n    &::-moz-focus-inner {\n        border: 0;\n        padding: 0;\n    }\n  }\n\n  ol {\n    padding-left: 1rem;\n\n    li {\n      margin-bottom: 0.6rem;\n      font-size: 0.9rem;\n    }\n  }\n\n  .rapid-tooltip-title {\n    padding: 0.5rem;\n  }\n\n  .rapid-tooltip-subsection-grid {\n    display: grid;\n    grid-gap: 0.5rem;\n    padding: 0.5rem;\n    align-items: center;\n  }\n\n  .rapid-tooltip-cell {\n    display: flex;\n  }\n\n  .rapid-tooltip-arrow-container {\n    width: 100%;\n    height: 0.5rem;\n    display: flex;\n    justify-content: center;\n    position: absolute;\n    transform: translate(0, 100%);\n  }\n\n  .rapid-tooltip-arrow {\n    width: 0.5rem;\n    height: 0.5rem;\n    position: relative;\n    display: flex;\n    justify-content: center;\n    left: -0.25rem;\n\n    &:before {\n      content: '';\n      position: absolute;\n      top: 0;\n      left: 0;\n      border-left: 9px solid transparent;\n      border-right: 9px solid transparent;\n      border-top: 9px solid #dfdfdf;\n    }\n\n    &:after {\n      content: '';\n      position: absolute;\n      top: 0;\n      left: 1px;\n      border-left: 8px solid transparent;\n      border-right: 8px solid transparent;\n      border-top: 8px solid #fff;\n    }\n  }\n\n  /********\n      MAPBOX CUSTOM STYLES\n  ********/\n  .mapboxgl-popup {\n    .mapboxgl-popup-content {\n      padding: 0;\n      border-radius: 4px;\n      overflow: hidden;\n      font-size: 0.7rem;\n      line-height: 1.4;\n      color: #333;\n    }\n  }\n\n  /*******\n    TYPEFORM CUSTOM STYLES\n  *******/\n  .typeform-popover {\n    &.open {\n      bottom: 1.5rem;\n      right: 0.5rem;\n    }\n    .typeform-popover-button {\n      width: auto;\n      height: 1.25rem;\n      bottom: 0;\n      right: 0.5rem;\n      border-radius: 0;\n      background-color: ${backgroundDark} !important;\n    }\n\n    .typeform-popover-button-icon {\n      svg {\n        display: none;\n      }\n\n      text-transform: uppercase;\n      font-family: ${primaryFont};\n      font-size: 0.9rem;\n      display: flex;\n      align-items: center;\n\n      &:before {\n        content: \"Help us improve Metroverse-Jobs\";\n        font-size: 0.75rem;\n        margin-right: 0.5rem;\n      }\n\n      .typeform-spinner {\n        top: auto;\n        left: auto;\n        width: 1rem;\n        height: 1rem;\n        position: relative;\n        margin: 0;\n      }\n\n    }\n\n    @media (min-width: 1385px) {\n      .typeform-popover-button {\n        height: 1.75rem;\n      }\n\n      .typeform-popover-button-icon {\n        &:before {\n          font-size: 0.875rem;\n        }\n      }\n    }\n\n    &:not(.open) {\n      .typeform-popover-button-icon:not([data-testid=\"spinner-icon\"]):after {\n        content: '';\n          border: solid white;\n          border-width: 0 2px 2px 0;\n          display: inline-block;\n          transform: rotate(-135deg) translate(-1px, -3px);\n          padding: 3px;\n      }\n    }\n  }\n`;\n\nexport default GlobalStyles;\n","import { CityRoutes, cityIdParam } from \"./routes\";\n\nexport type ValueOfCityRoutes = (typeof CityRoutes)[keyof typeof CityRoutes];\n\nexport const createRoute = {\n  city: (route: ValueOfCityRoutes, cityId: string) =>\n    route.replace(\":\" + cityIdParam, cityId),\n};\n","import { ReactLocalization } from \"fluent-react/compat\";\nimport { FluentBundle } from \"fluent/compat\";\nimport raw from \"raw.macro\";\nimport { createContext } from \"react\";\n\nexport const POSSESSIVE = ([word]: [string]): string => {\n  const lastCharacter = word[word.length - 1];\n  if (lastCharacter === \"s\") {\n    return word + \"'\";\n  } else {\n    return word + \"'s\";\n  }\n};\n\nexport const SENTENCE_CASE = ([phrase]: [string]): string => {\n  return phrase.charAt(0).toUpperCase() + phrase.substr(1);\n};\n\n// Taken from https://stackoverflow.com/a/13627586\nexport const ORDINAL_SUFFIX = ([input]: [number]): string => {\n  const j = input % 10,\n    k = input % 100;\n  if (j === 1 && k !== 11) {\n    return \"st\";\n  }\n  if (j === 2 && k !== 12) {\n    return \"nd\";\n  }\n  if (j === 3 && k !== 13) {\n    return \"rd\";\n  }\n  return \"th\";\n};\nexport const ORDINAL_NUMBER = ([input]: [number]): string => {\n  return input + ORDINAL_SUFFIX([input]);\n};\n\nconst getLocalizationInfo = (messages: string) => {\n  const bundle = new FluentBundle([\"en-US\"]);\n  bundle.addMessages(messages);\n  function* generateBundles(_locales: string[]) {\n    yield bundle;\n  }\n  const localization = new ReactLocalization(generateBundles([\"en-US\"]));\n  const localizationAndBundle = { localization, bundle };\n  const LocalizationAndBundleContext = createContext(localizationAndBundle);\n  return {\n    localizationAndBundle,\n    LocalizationAndBundleContext,\n  };\n};\n\nconst {\n  localizationAndBundle: appLocalizationAndBundle,\n  LocalizationAndBundleContext: AppLocalizationAndBundleContext,\n} = getLocalizationInfo(raw(\"./messages.ftl\"));\n\nexport { appLocalizationAndBundle, AppLocalizationAndBundleContext };\n","import { GetString } from \"fluent-react/compat\";\nimport { useContext } from \"react\";\nimport { AppLocalizationAndBundleContext } from \"../contextProviders/getFluentLocalizationContext\";\n\nexport const possessive = ([word]: [string]): string => {\n  const lastCharacter = word[word.length - 1];\n  if (lastCharacter === \"s\") {\n    return word + \"'\";\n  } else {\n    return word + \"'s\";\n  }\n};\n\nexport const plural = (word: string): string => {\n  const lastCharacter = word[word.length - 1];\n  if (lastCharacter === \"s\") {\n    return word + \"\";\n  } else {\n    return word + \"s\";\n  }\n};\n\n// Taken from https://stackoverflow.com/a/13627586\nconst ordinalSuffix = ([input]: [number]): string => {\n  const j = input % 10,\n    k = input % 100;\n  if (j === 1 && k !== 11) {\n    return \"st\";\n  }\n  if (j === 2 && k !== 12) {\n    return \"nd\";\n  }\n  if (j === 3 && k !== 13) {\n    return \"rd\";\n  }\n  return \"th\";\n};\n\nexport const ordinalNumber = ([input]: [number]) =>\n  input + ordinalSuffix([input]);\n\nexport default () => {\n  const { localization } = useContext(AppLocalizationAndBundleContext);\n  const getFluentString: GetString = (...args) =>\n    localization.getString(...args);\n  return getFluentString;\n};\n","export const defaultYear = 2024;\nexport const populationDisplayYear = 2020;\nexport const gdpPerCapitaDisplayYear = 2020;\nexport const rankingDisplayYear = 2020;\n\nexport function numberWithCommas(x: number | string) {\n  return x.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n}\n\nconst ranges = [\n  { divider: 1e18, suffix: \"E\" },\n  { divider: 1e15, suffix: \"P\" },\n  { divider: 1e12, suffix: \"T\" },\n  { divider: 1e9, suffix: \"B\" },\n  { divider: 1e6, suffix: \"M\" },\n  { divider: 1e3, suffix: \"k\" },\n];\n\nexport const formatNumber = (n: number, decimalPlaces?: number) => {\n  const fixedRange = decimalPlaces !== undefined ? decimalPlaces : 1;\n  for (const range of ranges) {\n    if (n >= range.divider) {\n      return parseFloat((n / range.divider).toFixed(fixedRange)) + range.suffix;\n    }\n  }\n  return decimalPlaces !== undefined ? n.toFixed(decimalPlaces) : n.toString();\n};\n\nconst rangesLong = [\n  { divider: 1e18, suffix: \"quintillion\" },\n  { divider: 1e15, suffix: \"quadrillion\" },\n  { divider: 1e12, suffix: \"trillion\" },\n  { divider: 1e9, suffix: \"billion\" },\n  { divider: 1e6, suffix: \"million\" },\n  { divider: 1e3, suffix: \"thousand\" },\n];\n\nexport const formatNumberLong = (n: number) => {\n  for (const range of rangesLong) {\n    if (n >= range.divider) {\n      return parseFloat((n / range.divider).toFixed(1)) + \" \" + range.suffix;\n    }\n  }\n  return n.toString();\n};\n\nfunction gcd(a: number, b: number): number {\n  return b ? gcd(b, a % b) : a;\n}\n\nexport const decimalToFraction = function (decimal: number) {\n  let top: number | string = decimal.toString().replace(/\\d+[.]/, \"\");\n  const bottom: number = Math.pow(10, top.length);\n  if (decimal > 1) {\n    top = +top + Math.floor(decimal) * bottom;\n  }\n  const x = gcd(top as number, bottom);\n  return {\n    top: (top as number) / x,\n    bottom: bottom / x,\n    display: (top as number) / x + \":\" + bottom / x,\n  };\n};\n\nexport function filterOutliers(arr: number[]) {\n  // Copy the values, rather than operating on references to existing values\n  const values = arr.concat();\n\n  // Then sort\n  values.sort(function (a, b) {\n    return a - b;\n  });\n\n  /* Then find a generous IQR. This is generous because if (values.length / 4)\n   * is not an int, then really you should average the two elements on either\n   * side to find q1.\n   */\n  const q1 = values[Math.floor(values.length / 4)];\n  // Likewise for q3.\n  const q3 = values[Math.ceil(values.length * (3 / 4))];\n  const iqr = q3 - q1;\n\n  // Then find min and max values\n  const maxValue = q3 + iqr * 1.5;\n  const minValue = q1 - iqr * 1.5;\n\n  // Then filter anything beyond or beneath these values.\n  const filteredValues = values.filter(function (x) {\n    return x <= maxValue && x >= minValue;\n  });\n\n  // Then return\n  return filteredValues;\n}\n\nexport const defaultCityPool = [\n  196, // Albuquerque\n  323, // Dallas\n  1346, // Belo Horizonte\n  14, // Los Angeles\n  1656, // Dublin\n  1214, // Novo Hamburgo\n  362, // Calgary\n  11498, // Singapore\n  6893, // Jaipur\n  12964, // Tokyo\n  2463, // Zurich\n  12578, // Wenzhou\n  2046, // Paris\n  11136, // Hanoi\n  6845, // Mumbai\n  6955, // Delhi\n  2559, // Milan\n  880, // Baltimore\n  875, // Toronto\n  2167, // Amsterdam\n];\n","export enum DigitLevel {\n  Sector = 1,\n  Two = 2,\n  Three = 3,\n  Four = 4,\n  Five = 5,\n  Six = 6,\n}\nexport enum ClusterLevel {\n  C1 = 1,\n  C2 = 2,\n  C3 = 3,\n}\n\nexport const defaultDigitLevel: DigitLevel = DigitLevel.Two;\n\nexport enum CompositionType {\n  Companies = \"income\",\n  Employees = \"employees\",\n}\n\nexport const defaultCompositionType: CompositionType =\n  CompositionType.Employees;\n\nexport interface ClassificationNaicsIndustry {\n  naicsId: string;\n  code: string;\n  name: string | null;\n  level: DigitLevel | null;\n  parentId: number | null;\n  parentCode: string | null;\n  codeHierarchy: string | null;\n  naicsIdHierarchy: string | null;\n  naicsIdTopParent: number;\n  tradable: boolean;\n  id: string;\n}\n\nexport enum IncomeClassType {\n  HIC = \"HIC\",\n  UMIC = \"UMIC\",\n  LMIC = \"LMIC\",\n  LIC = \"LIC\",\n  OTHER = \"OTHER\",\n}\n\nexport enum DevGroupType {\n  MDR = \"MDR\",\n  LDC = \"LDC\",\n  LDCL = \"LDCL\",\n}\n\nexport type GeoJSONString = string;\n\nexport enum DataFlagType {\n  GREEN = \"GREEN\",\n  ORANGE = \"ORANGE\",\n  YELLOW = \"YELLOW\",\n  RED = \"RED\",\n}\n\nexport interface ClassificationCity {\n  cityId: string;\n  name: string | null;\n  included: boolean | null;\n  regionId: number | null;\n  countryId: number | null;\n  nameList: string[] | null;\n  centroidLat: number | null;\n  centroidLon: number | null;\n  area: number | null;\n  crossBorder: boolean | null;\n  numCountries: number | null;\n  countryList: string | null;\n  avgElevation: number | null;\n  climateClass: string | null;\n  avgPrecip14: number | null;\n  avgTemp14: number | null;\n  builtArea15: number | null;\n  population15: number | null;\n  populationLatest: number | null;\n  builtAreaPc15: number | null;\n  gdpPpp15: number | null;\n  gdppc: number | null;\n  incomeClass: IncomeClassType | null;\n  devGroup: DevGroupType | null;\n  travelTimeToCapital: number | null;\n  avgGreenness14: number | null;\n  concentrationPm2514: number | null;\n  potentialFloodArea: number | null;\n  potentialFloodBuiltArea15: number | null;\n  potentialFloodPop15: number | null;\n  potentialStormSurgeArea: number | null;\n  potentialStormSurgeBuiltArea15: number | null;\n  potentialStormSurgePop15: number | null;\n  earthquakeMmiClass: number | null;\n  heatwaveMaxIndex: number | null;\n  landUseEfficiency15: number | null;\n  popGreenArea15: number | null;\n  openSpace15: number | null;\n  regionGdppcRank: number | null;\n  regionPopRank: number | null;\n  geometry: GeoJSONString | null;\n  dataFlag: DataFlagType;\n  id: string;\n}\n\nexport interface ClassificationCountry {\n  countryId: string;\n  code: string | null;\n  nameEn: string | null;\n  nameShortEn: string | null;\n  regionId: number;\n  id: string;\n}\n\nexport interface ClassificationRegion {\n  regionId: string;\n  regionName: string;\n  subregionId: string;\n  subregionName: string;\n  regionCity: {\n    edges: {\n      node: ClassificationCity[];\n    };\n  };\n  subregionCity: {\n    edges: {\n      node: ClassificationCity[];\n    };\n  };\n  id: string;\n}\n\nexport interface CityIndustryYear {\n  cityId: string;\n  naicsId: string;\n  year: string;\n  numEmploy: number | null;\n  numCompany: number | null;\n  level: DigitLevel | null;\n  rcaNumEmploy: number | null;\n  rcaNumCompany: number | null;\n  densityEmploy: number | null;\n  densityCompany: number | null;\n  id: string;\n}\n\nexport interface GlobalIndustryYear {\n  naicsId: number;\n  naicsIdTopParent: number;\n  year: number;\n  level: number;\n  sumNumCompany: number;\n  sumNumEmploy: number;\n  avgNumCompany: number;\n  avgNumEmploy: number;\n}\n\nexport interface CityClusterYear {\n  cityId: string;\n  clusterId: string;\n  level: number | null;\n  year: string;\n  numEmploy: number | null;\n  numCompany: number | null;\n  rcaNumEmploy: number | null;\n  rcaNumCompany: number | null;\n  id: string;\n}\n\nexport interface ClassificationNaicsCluster {\n  clusterId: string;\n  parentId: number | null;\n  clusterIdTopParent: number | null;\n  level: number | null;\n  name: string | null;\n  shortName: string | null;\n  tradable: boolean;\n  id: string;\n}\n\nexport interface GlobalIndustryAgg {\n  naicsId: number;\n  naicsIdTopParent: number;\n  year: number;\n  level: number;\n  sumNumCompany: number;\n  sumNumEmploy: number;\n  avgNumCompany: number;\n  avgNumEmploy: number;\n}\n\nexport interface CityPartner {\n  cityId: string;\n  partnerId: string;\n  proximity: number | null;\n  eucdist: number | null;\n  id: string;\n}\n\nexport interface NaicsIndustry {\n  naicsId: string;\n  yearsEducation: number;\n  hourlyWage: number;\n  jobs: number;\n  valueAdded: number;\n  acidRain: number;\n  freshwaterEcotoxicity: number;\n  eutrophication: number;\n  climateChange: number;\n  healthCancer: number;\n  healthNoncancer: number;\n  healthRespiratoryEffects: number;\n  healthCancerNoncancer: number;\n  ozoneDepletion: number;\n  smog: number;\n  hazardousAirPollutantRelease: number;\n  metalRelease: number;\n  pesticideRelease: number;\n  energyUse: number;\n  landUse: number;\n  mineralMetalUse: number;\n  nonrenewableEnergyUse: number;\n  renewableEnergyUse: number;\n  waterUse: number;\n  id: string;\n  level: DigitLevel | null;\n}\n\nexport interface ClusterIndustry {\n  clusterId: string;\n  level: ClusterLevel;\n  yearsEducation: number;\n  hourlyWage: number;\n  id: string;\n}\n\nexport enum PeerGroup {\n  GlobalPopulation = \"global_pop\",\n  GlobalIncome = \"global_income\",\n  GlobalEuclideanDistance = \"global_eucdist\",\n  RegionalPopulation = \"regional_pop\",\n  RegionalIncome = \"regional_income\",\n  RegionalEuclideanDistance = \"regional_eucdist\",\n  Region = \"region\",\n}\n\nexport const isValidPeerGroup = (value: any) =>\n  value === PeerGroup.GlobalPopulation ||\n  value === PeerGroup.GlobalIncome ||\n  value === PeerGroup.GlobalEuclideanDistance ||\n  value === PeerGroup.RegionalPopulation ||\n  value === PeerGroup.RegionalIncome ||\n  value === PeerGroup.RegionalEuclideanDistance ||\n  value === PeerGroup.Region;\n\nexport interface NaicsRcaCalculation {\n  cityId: number | null;\n  naicsId: number | null;\n  level: number | null;\n  year: number | null;\n  rca: number | null;\n  rcaLb: number | null;\n  rcaUb: number | null;\n  comparableIndustry: boolean;\n}\n\nexport interface ClusterRcaCalculation {\n  cityId: number | null;\n  clusterId: number | null;\n  level: number | null;\n  year: number | null;\n  rca: number | null;\n  rcaLb: number | null;\n  rcaUb: number | null;\n  comparableIndustry: boolean;\n}\n\nexport interface NaicsPeerEconStruct {\n  naicsId: number;\n  level: DigitLevel;\n  year: number;\n  totalEmployCount: number;\n  avgEmployCount: number;\n  avgEmployShare: number;\n  totalCompanyCount: number;\n  avgCompanyCount: number;\n  avgCompanyShare: number;\n}\n\nexport interface ClusterPeerEconStruct {\n  clusterId: number;\n  level: ClusterLevel;\n  year: number;\n  totalEmployCount: number;\n  avgEmployCount: number;\n  avgEmployShare: number;\n  totalCompanyCount: number;\n  avgCompanyCount: number;\n  avgCompanyShare: number;\n}\n\nexport interface NaicsDensityRescale {\n  cityId: number;\n  naicsId: number;\n  level: DigitLevel | null;\n  year: number | null;\n  densityEmploy: number | null;\n  densityCompany: number | null;\n}\nexport interface ClusterDensityRescale {\n  cityId: number;\n  clusterId: number;\n  level: ClusterLevel | null;\n  year: number | null;\n  densityEmploy: number | null;\n  densityCompany: number | null;\n}\nexport interface CityPeerGroupCounts {\n  cityId: number;\n  globalPop: number;\n  regionalPop: number;\n  globalIncome: number;\n  regionalIncome: number;\n  globalProximity: number;\n  regionalProximity: number;\n  globalEucdist: number;\n  regionalEucdist: number;\n  region: number;\n  subregion: number;\n}\n\nexport interface CityPartnerEucDistScale {\n  minGlobalEucdist: number;\n  p20GlobalEucdist: number;\n  p40GlobalEucdist: number;\n  p60GlobalEucdist: number;\n  p80GlobalEucdist: number;\n  maxGlobalEucdist: number;\n}\n","import { useHistory, matchPath } from \"react-router-dom\";\nimport { CityRoutes, cityIdParam } from \"../routing/routes\";\nimport { defaultCityPool } from \"../Utils\";\nimport random from \"lodash-es/random\";\n\nlet prevCity: string | null = null;\n\nexport default () => {\n  const history = useHistory();\n  const match = matchPath<{ [cityIdParam]: string }>(\n    history.location.pathname,\n    CityRoutes.CityBase,\n  );\n  let cityId =\n    match && match.params[cityIdParam] ? match.params[cityIdParam] : prevCity;\n  // If no cityId, default to a random selection of predefined cities\n  if (!cityId || cityId === cityIdParam) {\n    cityId = defaultCityPool[random(defaultCityPool.length - 1)].toString();\n  }\n  prevCity = cityId;\n  return cityId;\n};\n","import { createContext, useState, useEffect } from \"react\";\nimport debounce from \"lodash/debounce\";\n\ninterface IAppContext {\n  windowDimensions: { width: number; height: number };\n}\n\nconst initialWindowDimension = {\n  width: window.innerWidth,\n  height: window.innerHeight,\n};\nexport default createContext<IAppContext>({\n  windowDimensions: initialWindowDimension,\n});\n\nexport const useWindowWidth = () => {\n  const [windowDimensions, setWindowDimensions] = useState<\n    IAppContext[\"windowDimensions\"]\n  >(initialWindowDimension);\n\n  useEffect(() => {\n    const updateWindowDimensions = debounce(() => {\n      setWindowDimensions({\n        width: window.innerWidth,\n        height: window.innerHeight,\n      });\n    }, 500);\n    window.addEventListener(\"resize\", updateWindowDimensions);\n    return () => {\n      window.removeEventListener(\"resize\", updateWindowDimensions);\n    };\n  }, []);\n\n  return windowDimensions;\n};\n","import React, { useState } from \"react\";\nimport { PrimaryHeaderContainer } from \"../../../styling/GlobalGrid\";\nimport styled from \"styled-components/macro\";\nimport {\n  secondaryFont,\n  primaryColor,\n  backgroundDark,\n  defaultPadding,\n} from \"../../../styling/styleUtils\";\nimport raw from \"raw.macro\";\nimport { Link, useRouteMatch } from \"react-router-dom\";\nimport { Routes } from \"../../../routing/routes\";\nimport { createRoute } from \"../../../routing/Utils\";\nimport useFluent from \"../../../hooks/useFluent\";\nimport useCurrentCityId from \"../../../hooks/useCurrentCityId\";\nimport { useWindowWidth } from \"../../../contextProviders/appContext\";\n\nexport const citiesLogoSVG = raw(\"../../../assets/icons/cities-logo.svg\");\nexport const cityIconSVG = raw(\"../../../assets/icons/city-icon.svg\");\n\nconst Root = styled(PrimaryHeaderContainer)`\n  font-family: ${secondaryFont};\n  letter-spacing: -0.3px;\n  background-color: ${backgroundDark};\n  text-transform: uppercase;\n  display: flex;\n  justify-content: space-between;\n  border-bottom: solid 3px ${primaryColor};\n  padding-top: 0.5rem;\n  box-sizing: border-box;\n  pointer-events: auto;\n\n  @media (max-width: 800px) {\n    min-height: 4rem;\n    padding-right: 1rem;\n  }\n`;\n\nconst NavSection = styled.div`\n  display: flex;\n  align-items: flex-end;\n  flex-shrink: 1;\n  margin: 0 0.4rem;\n`;\n\nconst Logo = styled.h1`\n  margin: 0 4rem 0 1rem;\n  width: 10rem;\n  height: 1.5rem;\n\n  svg {\n    width: 100%;\n    height: 100%;\n\n    path {\n      fill: #fff;\n    }\n  }\n\n  @media (max-width: 850px) {\n    width: 7.5rem;\n    margin: 0 1.75rem 0 1rem;\n  }\n\n  @media (max-width: 800px) {\n    width: 10rem;\n    height: 1.5rem;\n    margin: 0.75rem 1rem 0 1rem;\n  }\n`;\n\nconst MobileLogo = styled.h1`\n  margin: 1rem 1rem 2rem;\n  width: 10rem;\n  height: 1.5rem;\n\n  svg {\n    width: 100%;\n    height: 100%;\n\n    path {\n      fill: #fff;\n    }\n  }\n`;\n\nconst StyledLink = styled(Link)`\n  text-decoration: none;\n`;\n\nconst H2 = styled.h2<{ $active: boolean }>`\n  font-weight: 300;\n  padding: 0 ${defaultPadding / 2}rem 1.05rem;\n  display: flex;\n  align-items: flex-end;\n  margin: 0;\n  font-size: 0.8rem;\n  font-size: clamp(0.8rem, 1.75vw, 1.15rem);\n  color: #fff;\n  line-height: 1;\n  position: relative;\n\n  &:after {\n    content: \"\";\n    position: absolute;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    width: 100%;\n    height: ${({ $active }) => ($active ? \"0.4rem\" : 0)};\n    background-color: ${primaryColor};\n    transition: height 0.075s ease-in-out;\n  }\n\n  &:hover {\n    &:after {\n      height: 0.4rem;\n    }\n  }\n\n  @media (max-width: 950px) {\n    font-size: 0.85rem;\n  }\n\n  @media (max-width: 800px) {\n    padding: 0 0.5rem 1.05rem;\n  }\n`;\n\nconst MobileH2 = styled(H2)`\n  margin: 1rem;\n  border-bottom: solid 1px ${primaryColor};\n`;\n\nexport const BetaLabel = styled.span`\n  text-transform: uppercase;\n  font-family: \"Source Sans Pro\", sans-serif;\n  font-size: 12px;\n  color: #f89571;\n  padding-left: 4px;\n  padding-bottom: 2px;\n  display: inline-block;\n  vertical-align: middle;\n`;\n\nconst NavIcon = styled.div`\n  width: 0.95rem;\n  width: clamp(0.95rem, 1.9vw, 1.45rem);\n  height: 0.95rem;\n  height: clamp(0.95rem, 1.9vw, 1.45rem);\n  margin-right: 0.45rem;\n  line-height: 0;\n\n  @media (max-width: 950px) {\n    width: 1.1rem;\n    height: 1.1rem;\n    margin-right: 0.2rem;\n  }\n\n  svg {\n    width: 100%;\n    height: 100%;\n\n    path,\n    rect {\n      fill: #fff;\n    }\n  }\n\n  @media (max-width: 800px) {\n    display: none;\n  }\n`;\n\nconst MobileNavIcon = styled(NavIcon)`\n  @media (max-width: 800px) {\n    display: block;\n  }\n`;\n\nconst MobileMenuButton = styled.button`\n  background-color: transparent;\n  border: none;\n  text-transform: uppercase;\n  width: 3rem;\n  height: 4rem;\n  position: absolute;\n  top: 0;\n  right: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n  font-size: 0.8rem;\n  color: #fff;\n  font-family: ${secondaryFont};\n\n  &:hover {\n    cursor: pointer;\n  }\n`;\n\nconst Icon = styled.span`\n  display: flex;\n  width: 20px;\n  height: 16px;\n  margin-bottom: 0.25rem;\n  flex-direction: column;\n  justify-content: space-between;\n`;\nconst Bar = styled.span`\n  display: inline-block;\n  width: 100%;\n  height: 0;\n  border-top: 2px solid #fff;\n  transition: all 0.2s ease;\n`;\nconst CenterBar = styled(Bar)`\n  position: relative;\n\n  &:before {\n    content: \"\";\n    display: inline-block;\n    width: 100%;\n    height: 0;\n    border-top: 2px solid #fff;\n    position: absolute;\n    transform-origin: center;\n    top: -2px;\n    left: 0;\n    transition: all 0.2s ease;\n  }\n\n  &.close__menu {\n    transform: rotate(45deg);\n\n    &:before {\n      transform: rotate(90deg);\n    }\n  }\n`;\n\nconst MobileMenu = styled.div`\n  position: fixed;\n  width: 100vw;\n  height: 100vh;\n  top: 0;\n  left: 0;\n  background-color: ${backgroundDark};\n  z-index: 1000;\n  transition: all 0.2s ease;\n`;\n\nconst Header = () => {\n  const getString = useFluent();\n  const [mobileMenuOpen, setMobileMenuOpen] = useState<boolean>(false);\n  const { width } = useWindowWidth();\n  const matchCity = useRouteMatch(Routes.CityBase);\n  const matchSimilarCities = useRouteMatch(Routes.CitySimilarCities);\n  const matchAbout = useRouteMatch(Routes.AboutBase);\n  const matchContact = useRouteMatch(Routes.ContactBase);\n  const matchFaq = useRouteMatch(Routes.FaqBase);\n  const currentCityId = useCurrentCityId();\n  const similarCitiesRoute = currentCityId\n    ? createRoute.city(Routes.CitySimilarCities, currentCityId)\n    : Routes.CitySimilarCities;\n  const profileCitiesOverviewRoute = currentCityId\n    ? createRoute.city(Routes.CityBase, currentCityId)\n    : Routes.CityBase;\n  if (width <= 800) {\n    const menuButtonText =\n      mobileMenuOpen === false\n        ? getString(\"global-ui-more\")\n        : getString(\"global-ui-close\");\n    const closeMenu = () => setMobileMenuOpen(false);\n    return (\n      <Root>\n        <StyledLink to={Routes.Landing}>\n          <Logo\n            aria-label={getString(\"global-app-name\")}\n            dangerouslySetInnerHTML={{ __html: citiesLogoSVG }}\n          />\n        </StyledLink>\n        <NavSection>\n          <MobileMenu\n            style={{\n              transform: mobileMenuOpen\n                ? \"translate(0, 0)\"\n                : \"translate(100%, 0)\",\n            }}\n          >\n            <StyledLink to={Routes.Landing}>\n              <MobileLogo\n                aria-label={getString(\"global-app-name\")}\n                dangerouslySetInnerHTML={{ __html: citiesLogoSVG }}\n              />\n            </StyledLink>\n            <StyledLink to={profileCitiesOverviewRoute}>\n              <MobileH2 $active={Boolean(matchCity && !matchSimilarCities)}>\n                <MobileNavIcon\n                  dangerouslySetInnerHTML={{ __html: cityIconSVG }}\n                />\n                {getString(\"navigation-city-profiles\")}\n              </MobileH2>\n            </StyledLink>\n            <StyledLink onClick={closeMenu} to={similarCitiesRoute}>\n              <MobileH2 $active={Boolean(matchSimilarCities)}>\n                {getString(\"navigation-city-similarity\")}\n              </MobileH2>\n            </StyledLink>\n            <StyledLink onClick={closeMenu} to={Routes.AboutWhatIs}>\n              <MobileH2 $active={Boolean(matchAbout)}>\n                {getString(\"navigation-about\")}\n              </MobileH2>\n            </StyledLink>\n            <StyledLink onClick={closeMenu} to={Routes.FaqBase}>\n              <MobileH2 $active={Boolean(matchFaq)}>\n                {getString(\"navigation-faq\")}\n              </MobileH2>\n            </StyledLink>\n            <StyledLink onClick={closeMenu} to={Routes.ContactBase}>\n              <MobileH2 $active={Boolean(matchContact)}>\n                {getString(\"navigation-contact\")}\n              </MobileH2>\n            </StyledLink>\n          </MobileMenu>\n          <MobileMenuButton\n            onClick={() => setMobileMenuOpen(!mobileMenuOpen)}\n            style={{\n              zIndex: mobileMenuOpen ? 2000 : undefined,\n              position: mobileMenuOpen ? \"fixed\" : undefined,\n            }}\n          >\n            <Icon>\n              <Bar style={{ opacity: mobileMenuOpen ? 0 : undefined }} />\n              <CenterBar\n                className={mobileMenuOpen ? \"close__menu\" : undefined}\n              />\n              <Bar style={{ opacity: mobileMenuOpen ? 0 : undefined }} />\n            </Icon>\n            {menuButtonText}\n          </MobileMenuButton>\n        </NavSection>\n      </Root>\n    );\n  } else {\n    return (\n      <Root>\n        <StyledLink to={Routes.Landing}>\n          <Logo\n            aria-label={getString(\"global-app-name\")}\n            dangerouslySetInnerHTML={{ __html: citiesLogoSVG }}\n          />\n        </StyledLink>\n        <NavSection>\n          <StyledLink to={profileCitiesOverviewRoute}>\n            <H2 $active={Boolean(matchCity && !matchSimilarCities)}>\n              <NavIcon dangerouslySetInnerHTML={{ __html: cityIconSVG }} />\n              {getString(\"navigation-city-profiles\")}\n            </H2>\n          </StyledLink>\n          <StyledLink to={similarCitiesRoute}>\n            <H2 $active={Boolean(matchSimilarCities)}>\n              {getString(\"navigation-city-similarity\")}\n              <BetaLabel>Beta</BetaLabel>\n            </H2>\n          </StyledLink>\n          <StyledLink to={Routes.AboutWhatIs}>\n            <H2 $active={Boolean(matchAbout)}>\n              {getString(\"navigation-about\")}\n            </H2>\n          </StyledLink>\n          <StyledLink to={Routes.FaqBase}>\n            <H2 $active={Boolean(matchFaq)}>{getString(\"navigation-faq\")}</H2>\n          </StyledLink>\n          <StyledLink to={Routes.ContactBase}>\n            <H2 $active={Boolean(matchContact)}>\n              {getString(\"navigation-contact\")}\n            </H2>\n          </StyledLink>\n        </NavSection>\n      </Root>\n    );\n  }\n};\n\nexport default Header;\n","import React, { useEffect, useRef, useState } from \"react\";\nimport { createPortal } from \"react-dom\";\nimport styled from \"styled-components/macro\";\n\nexport const overlayPortalContainerId = \"overlayPortalContainerId\";\n\nconst overlayPortalZIndex = 3000;\n\nexport const OverlayPortal = () => (\n  <div\n    id={overlayPortalContainerId}\n    style={{\n      position: \"relative\",\n      zIndex: overlayPortalZIndex,\n    }}\n    tabIndex={-1}\n  />\n);\n\nexport const mobileWidth = 600; // in px\n\nconst Root = styled.div`\n  position: fixed;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  width: 100vw;\n  height: 100vh;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n`;\n\nconst Overlay = styled.div`\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.3);\n`;\n\ninterface Dimensions {\n  width: string;\n  height: string;\n}\n\nconst Container = styled.div<{ dimensions: Dimensions }>`\n  position: relative;\n  max-height: 90%;\n  max-width: ${({ dimensions: { width } }) => width};\n  height: ${({ dimensions: { height } }) => height};\n\n  @media screen and (max-width: ${mobileWidth}px),\n    screen and (max-height: 800px) {\n    max-height: calc(100vh - 4rem);\n    max-width: calc(100vw - 4rem);\n    margin: auto;\n    overflow: auto;\n  }\n`;\n\nconst Content = styled.div`\n  overflow: auto;\n\n  ::-webkit-scrollbar {\n    -webkit-appearance: none;\n    width: 7px;\n  }\n  ::-webkit-scrollbar-thumb {\n    border-radius: 4px;\n    background-color: rgba(0, 0, 0, 0.3);\n  }\n  ::-webkit-scrollbar-track {\n    background-color: rgba(0, 0, 0, 0.1);\n  }\n\n  @media screen and (max-width: ${mobileWidth}px),\n    screen and (max-height: 800px) {\n    overflow: visible;\n  }\n`;\n\nexport interface Props {\n  children: React.ReactNode;\n  onClose: (() => void) | undefined;\n  width: string;\n  height: string;\n}\n\nconst Modal = (props: Props) => {\n  const { children, onClose, width, height } = props;\n\n  const overlayPortalContainerNodeRef = useRef<HTMLElement | null>(null);\n\n  const [isModalRendered, setIsModalRendered] = useState<boolean>(false);\n\n  useEffect(() => {\n    const node = document.querySelector<HTMLElement>(\n      `#${overlayPortalContainerId}`,\n    );\n    if (node !== null) {\n      overlayPortalContainerNodeRef.current = node;\n      overlayPortalContainerNodeRef.current.focus();\n      setIsModalRendered(true);\n    }\n  }, []);\n\n  useEffect(() => {\n    const closeOnEsc = (e: KeyboardEvent) =>\n      e.key === \"Escape\" && onClose ? onClose() : null;\n    document.addEventListener(\"keydown\", closeOnEsc);\n    return () => document.removeEventListener(\"keydown\", closeOnEsc);\n  }, [onClose]);\n\n  let modal: React.ReactElement<any> | null;\n  if (\n    isModalRendered === true &&\n    overlayPortalContainerNodeRef.current !== null\n  ) {\n    modal = createPortal(\n      <Root>\n        <Overlay onClick={onClose} />\n        <Container dimensions={{ width, height }}>\n          <Content>{children}</Content>\n        </Container>\n      </Root>,\n      overlayPortalContainerNodeRef.current,\n    );\n  } else {\n    modal = null;\n  }\n\n  return modal;\n};\n\nexport default Modal;\n","import React from \"react\";\nimport Modal, { Props } from \"./\";\nimport styled, { keyframes } from \"styled-components/macro\";\nimport { backgroundDark, secondaryFont } from \"../../styling/styleUtils\";\nimport useFluent from \"../../hooks/useFluent\";\n\nconst growIn = keyframes`\n  0% {\n    transform: scale(0.4);\n  }\n\n  100% {\n    transform: scale(1);\n  }\n`;\n\nconst Root = styled.div`\n  background-color: ${backgroundDark};\n  position: relative;\n  animation: ${growIn} 0.1s normal forwards ease-in-out;\n  animation-iteration-count: 1;\n  color: #fff;\n  height: 100%;\n  box-sizing: border-box;\n\n  @media screen and (max-height: 800px) {\n    overflow: visible;\n  }\n`;\n\nconst CloseButton = styled.button`\n  background-color: transparent;\n  border-none;\n  padding: 0.5rem;\n  color: #fff;\n  text-transform: uppercase;\n  font-size: 1.25rem;\n  font-family: ${secondaryFont};\n  position: absolute;\n  right: 0;\n  top: 0;\n`;\n\nexport default (props: Props) => {\n  const { children, ...rest } = props;\n  const getString = useFluent();\n  const closeButton = props.onClose ? (\n    <CloseButton onClick={props.onClose}>\n       {getString(\"global-ui-close\")}\n    </CloseButton>\n  ) : null;\n  return (\n    <Modal {...rest}>\n      <Root>\n        {children}\n        {closeButton}\n      </Root>\n    </Modal>\n  );\n};\n","import React, { useState } from \"react\";\nimport styled from \"styled-components/macro\";\nimport {\n  primaryFont,\n  secondaryFont,\n  primaryColor,\n} from \"../../styling/styleUtils\";\nimport raw from \"raw.macro\";\nimport { citiesLogoSVG, cityIconSVG } from \"../../components/navigation/header\";\nimport useFluent from \"../../hooks/useFluent\";\nimport BasicModal from \"../../components/standardModal/BasicModal\";\n\nconst mapPanSVG = raw(\"../../assets/icons/map-pan.svg\");\n\nconst Root = styled.div`\n  font-family: ${secondaryFont};\n  pointer-events: none;\n  color: #fff;\n  text-transform: uppercase;\n`;\n\nconst Logo = styled.h1`\n  position: fixed;\n  z-index: 300;\n  top: 0;\n  right: 0;\n  margin: 1rem 2rem;\n  width: 12rem;\n  height: 2.5rem;\n\n  svg {\n    width: 100%;\n    height: 100%;\n\n    path {\n      fill: #fff;\n    }\n  }\n`;\n\nconst H2 = styled.h2`\n  font-weight: 400;\n  margin: 1rem 0;\n  padding: 0 0 0.35rem 0;\n  border-bottom: solid 0.3rem ${primaryColor};\n  display: flex;\n  align-items: flex-end;\n  pointer-events: all;\n\n  @media (max-width: 850px) {\n    font-size: 1.2rem;\n  }\n`;\n\nconst CityIcon = styled.div`\n  width: 2.5rem;\n  height: 2.5rem;\n  margin-right: 0.45rem;\n\n  @media (max-width: 850px) {\n    width: 1.75rem;\n    height: 1.75rem;\n  }\n\n  svg {\n    width: 100%;\n    height: 100%;\n\n    path,\n    rect {\n      fill: #fff;\n    }\n  }\n`;\n\nconst Description = styled.h3`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  text-align: center;\n  margin: 4rem 0;\n  color: #fff;\n  font-weight: 400;\n  font-size: 1.2rem;\n\n  @media (max-width: 850px) {\n    font-size: 0.95rem;\n    margin: 1.85rem 0;\n  }\n`;\n\nconst Or = styled.span`\n  display: flex;\n  flex-direction: column;\n  height: 5rem;\n  align-items: center;\n  margin: 0 1.5rem;\n\n  &:before,\n  &:after {\n    content: \"\";\n    display: block;\n    flex-grow: 1;\n    border-left: solid 2px #fff;\n  }\n`;\n\nconst UseMapText = styled.span`\n  display: flex;\n  align-items: center;\n`;\n\nconst MapPanIcon = styled.span`\n  display: inline-block;\n  width: 2.4rem;\n  height: 2.4rem;\n  margin-right: 0.85rem;\n\n  @media (max-width: 850px) {\n    width: 1.75rem;\n    height: 1.75rem;\n  }\n\n  svg {\n    width: 100%;\n    height: 100%;\n\n    path {\n      fill: #fff;\n    }\n  }\n`;\n\nconst WhatIsACityLinkContainer = styled.div`\n  margin: 0 auto 1.1rem;\n  display: block;\n  width: 100%;\n\n  @media (min-width: 990px) {\n    width: 85%;\n  }\n`;\n\nconst WhatIsACityLink = styled.button`\n  pointer-events: all;\n  background-color: transparent;\n  border: none;\n  color: #fff;\n  font-family: ${primaryFont};\n  font-size: 0.85rem;\n  padding: 0.5rem;\n  border: solid 1px #fff;\n  background-color: rgba(0, 0, 0, 0.85);\n  text-transform: uppercase;\n\n  &:hover {\n    background-color: #fff;\n    color: #08111e;\n  }\n`;\n\nexport const ModalContent = styled.div`\n  background-color: #08111e;\n  padding: 3rem 1.75rem 1.75rem;\n\n  strong {\n    color: ${primaryColor};\n    font-weight: 400;\n  }\n\n  a {\n    color: #fff;\n  }\n`;\n\nconst Heading = () => {\n  const getString = useFluent();\n  const [cityModalOpen, setCityModalOpen] = useState<boolean>(false);\n  const openModal = () => setCityModalOpen(true);\n  const closeModal = () => setCityModalOpen(false);\n  const modal = cityModalOpen ? (\n    <BasicModal width={\"400px\"} height={\"auto\"} onClose={closeModal}>\n      <ModalContent>\n        <p\n          dangerouslySetInnerHTML={{\n            __html: getString(\"landing-page-text-what-is-city-para-1\"),\n          }}\n        />\n        <p\n          dangerouslySetInnerHTML={{\n            __html: getString(\"landing-page-text-what-is-city-para-2\"),\n          }}\n        />\n      </ModalContent>\n    </BasicModal>\n  ) : null;\n  return (\n    <Root>\n      <Logo\n        dangerouslySetInnerHTML={{ __html: citiesLogoSVG }}\n        aria-label={getString(\"global-app-name\")}\n      />\n      <H2>\n        <CityIcon dangerouslySetInnerHTML={{ __html: cityIconSVG }} />\n        {getString(\"navigation-pick-a-city\")}\n      </H2>\n      <Description>\n        <span>{getString(\"global-ui-type-a-city-name\")}</span>\n        <Or>{getString(\"landing-page-text-or\")}</Or>\n        <UseMapText>\n          <MapPanIcon dangerouslySetInnerHTML={{ __html: mapPanSVG }} />\n          {getString(\"landing-page-text-use-the-map\")}\n        </UseMapText>\n      </Description>\n      <WhatIsACityLinkContainer>\n        <WhatIsACityLink onClick={openModal}>\n          {getString(\"landing-page-text-what-is-city-link\")}\n        </WhatIsACityLink>\n      </WhatIsACityLinkContainer>\n      {modal}\n    </Root>\n  );\n};\n\nexport default Heading;\n","import React, { createContext, useContext, useEffect, useState } from 'react';\nimport { BLSData } from './types';\n\ninterface DataState {\n  data: BLSData | null;\n  loading: boolean;\n  error: Error | null;\n}\n\nconst StaticDataContext = createContext<DataState>({\n  data: null,\n  loading: true,\n  error: null,\n});\n\nexport const useStaticData = () => useContext(StaticDataContext);\n\nexport const StaticDataProvider: React.FC = ({ children }) => {\n  const [state, setState] = useState<DataState>({\n    data: null,\n    loading: true,\n    error: null,\n  });\n\n  useEffect(() => {\n    fetch(process.env.PUBLIC_URL + '/data/bls-data.json')\n      .then((res) => {\n        if (!res.ok) throw new Error(`HTTP ${res.status}`);\n        return res.json();\n      })\n      .then((data: BLSData) => {\n        setState({ data, loading: false, error: null });\n      })\n      .catch((error) => {\n        console.error('Failed to load BLS data:', error);\n        setState({ data: null, loading: false, error });\n      });\n  }, []);\n\n  return (\n    <StaticDataContext.Provider value={state}>\n      {children}\n    </StaticDataContext.Provider>\n  );\n};\n","import React, { useLayoutEffect, useRef, useState } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport styled from \"styled-components\";\nimport { lightBorderColor, backgroundDark } from \"../../styling/styleUtils\";\nimport { overlayPortalContainerId } from \"../standardModal\";\nimport raw from \"raw.macro\";\n\nconst infoCircleSVG = raw(\"../../assets/icons/info-circle.svg\");\n\nexport enum TooltipPosition {\n  Automatic = \"automatic\",\n  Bottom = \"bottom\",\n}\n\nexport enum TooltipTheme {\n  Light = \"light\",\n  Dark = \"dark\",\n}\n\nconst farEndOfScreenToggleClass = \"tooltip-at-right-end-of-screen\";\nexport const arrowContainerClassName = \"tooltip-arrow-container-class\";\nconst flipArrowClassName = \"tooltip-arrow-flip-side-class\";\n\n//#region Styling\nconst Root = styled.span`\n  cursor: help;\n  width: 0.7rem;\n  height: 0.7rem;\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 10000px;\n  margin: 0 0.4rem;\n`;\n\nconst MoreInformationI = styled.span`\n  display: inline-block;\n  width: 0.7rem;\n  height: 0.7rem;\n  line-height: 0;\n\n  svg {\n    width: 100%;\n    height: 100%;\n\n    circle {\n      fill: ${backgroundDark};\n    }\n\n    path {\n      fill: #fff;\n    }\n  }\n`;\n\nconst TooltipBase = styled.div<{\n  $theme: TooltipTheme | undefined;\n  $overrideStyles: boolean | undefined;\n}>`\n  position: fixed;\n  z-index: 3000;\n  max-width: 16rem;\n  font-size: 0.7rem;\n  line-height: 1.4;\n  text-transform: none;\n  ${({ $overrideStyles }) =>\n    $overrideStyles ? \"padding-bottom: 0.5rem;\" : \"padding: 0.5rem;\"}\n  opacity: 0;\n  transition: opacity 0.15s ease;\n  color: ${backgroundDark};\n  background-color: ${({ $theme }) =>\n    $theme === TooltipTheme.Dark ? backgroundDark : \"#fff\"};\n  color: ${({ $theme }) =>\n    $theme === TooltipTheme.Dark ? \"#fff\" : backgroundDark};\n  border: 1px solid\n    ${({ $theme }) =>\n      $theme === TooltipTheme.Dark ? backgroundDark : lightBorderColor};\n  border-radius: 4px;\n  box-shadow: 0px 0px 5px 0px rgba(0, 0, 0, 0.15);\n  pointer-events: none;\n\n  &.${farEndOfScreenToggleClass} .${arrowContainerClassName} {\n    justify-content: flex-end;\n    padding-right: 0.7rem;\n    box-sizing: border-box;\n  }\n\n  &.${flipArrowClassName} .${arrowContainerClassName} {\n    transform: translate(0, -100%);\n    top: 0;\n\n    div {\n      &:before {\n        top: -1px;\n        transform: rotate(180deg);\n      }\n\n      &:after {\n        transform: rotate(180deg);\n      }\n    }\n  }\n`;\n\nconst ArrowContainer = styled.div<{ $position: TooltipPosition | undefined }>`\n  width: 100%;\n  height: 0.5rem;\n  display: flex;\n  justify-content: center;\n  position: absolute;\n  transform: ${({ $position }) =>\n    $position === TooltipPosition.Bottom\n      ? \"translate(0, -100%)\"\n      : \"translate(0, 100%)\"};\n  ${({ $position }) => ($position === TooltipPosition.Bottom ? \"top: 0;\" : \"\")}\n`;\n\nconst Arrow = styled.div<{\n  $theme: TooltipTheme | undefined;\n  $position: TooltipPosition | undefined;\n}>`\n  width: 0.5rem;\n  height: 0.5rem;\n  position: relative;\n  z-index: -1;\n  display: flex;\n  justify-content: center;\n  transform: translate(-150%, 0);\n\n  &:before {\n    content: \"\";\n    position: absolute;\n    top: ${({ $position }) =>\n      $position === TooltipPosition.Bottom ? \"-1px\" : \"0\"};\n    left: 0;\n    border-left: 9px solid transparent;\n    border-right: 9px solid transparent;\n    border-top: 9px solid\n      ${({ $theme }) =>\n        $theme === TooltipTheme.Dark ? backgroundDark : lightBorderColor};\n    ${({ $position }) =>\n      $position === TooltipPosition.Bottom ? \"transform: rotate(180deg);\" : \"\"}\n  }\n\n  &:after {\n    content: \"\";\n    position: absolute;\n    top: 0;\n    left: 1px;\n    border-left: 8px solid transparent;\n    border-right: 8px solid transparent;\n    border-top: 8px solid\n      ${({ $theme }) =>\n        $theme === TooltipTheme.Dark ? backgroundDark : \"#fff\"};\n    ${({ $position }) =>\n      $position === TooltipPosition.Bottom ? \"transform: rotate(180deg);\" : \"\"}\n  }\n`;\n\nconst GenericSpan = styled.span`\n  cursor: help;\n`;\n//#endregion\nlet timeout: number;\n\ninterface Props {\n  explanation: React.ReactNode | null;\n  children?: React.ReactNode;\n  cursor?: string;\n  theme?: TooltipTheme;\n  tooltipPosition?: TooltipPosition;\n  overrideStyles?: boolean;\n  delay?: number;\n}\n\nconst Tooltip = (props: Props) => {\n  const {\n    explanation,\n    children,\n    cursor,\n    theme,\n    tooltipPosition,\n    overrideStyles,\n    delay,\n  } = props;\n  const rootEl = useRef<HTMLDivElement | null>(null);\n  const tooltipEl = useRef<HTMLDivElement | null>(null);\n  const overlayPortalContainerNodeRef = useRef<HTMLElement | null>(null);\n\n  const [isTooltipShown, setIsTooltipShown] = useState<boolean>(false);\n  const [coords, setCoords] = useState<{ top: number; left: number }>({\n    top: 0,\n    left: 0,\n  });\n\n  useLayoutEffect(() => {\n    const node = document.querySelector<HTMLElement>(\n      `#${overlayPortalContainerId}`,\n    );\n    overlayPortalContainerNodeRef.current = node;\n    const tooltipElm = tooltipEl.current;\n    const rootElm = rootEl.current;\n    if (tooltipElm !== null && rootElm !== null) {\n      const { top, left } = coords;\n      const tooltipSpacing = 15;\n      const tooltipHeight = tooltipElm.offsetHeight;\n      const tooltipWidth = tooltipElm.offsetWidth;\n      let tooltipTopValue = top - tooltipSpacing - tooltipHeight;\n      let tooltipLeftValue = left - tooltipWidth / 2;\n      if (tooltipTopValue < 0 || tooltipPosition === TooltipPosition.Bottom) {\n        // tooltip will be above the window\n        tooltipTopValue = top + tooltipSpacing * 2;\n        tooltipElm.classList.add(flipArrowClassName);\n      } else {\n        tooltipElm.classList.remove(flipArrowClassName);\n      }\n      if (tooltipLeftValue < tooltipSpacing) {\n        tooltipLeftValue = tooltipSpacing;\n      }\n      if (\n        tooltipLeftValue + (tooltipWidth + tooltipSpacing) >\n        window.innerWidth\n      ) {\n        // tooltip will exceed the windows width\n        tooltipLeftValue = window.innerWidth - tooltipWidth - tooltipSpacing;\n      }\n      if (window.innerWidth - left < tooltipSpacing * 3) {\n        // tooltip is at the far end of the screen\n        tooltipElm.classList.add(farEndOfScreenToggleClass);\n      } else {\n        tooltipElm.classList.remove(farEndOfScreenToggleClass);\n      }\n      tooltipElm.style.cssText = `\n        left: ${tooltipLeftValue}px;\n        top: ${tooltipTopValue}px;\n        opacity: 1;\n      `;\n    }\n  }, [isTooltipShown, coords, tooltipPosition]);\n  const overlayPortalContainerNode = overlayPortalContainerNodeRef.current;\n\n  const arrow = overrideStyles ? null : (\n    <ArrowContainer\n      $position={tooltipPosition}\n      className={arrowContainerClassName}\n    >\n      <Arrow $theme={theme} $position={tooltipPosition} />\n    </ArrowContainer>\n  );\n\n  let tooltip: React.ReactPortal | null;\n  if (\n    isTooltipShown !== false &&\n    overlayPortalContainerNode !== null &&\n    explanation\n  ) {\n    tooltip = ReactDOM.createPortal(\n      <TooltipBase\n        ref={tooltipEl}\n        $theme={theme}\n        $overrideStyles={overrideStyles}\n      >\n        {explanation}\n        {arrow}\n      </TooltipBase>,\n      overlayPortalContainerNode,\n    );\n  } else {\n    tooltip = null;\n  }\n\n  const onMouseEnter = (e: React.MouseEvent<HTMLSpanElement>) => {\n    setCoords({ top: e.clientY, left: e.clientX });\n    if (delay) {\n      timeout = setTimeout(() => setIsTooltipShown(true), delay) as any;\n    } else {\n      setIsTooltipShown(true);\n    }\n  };\n  const onMouseLeave = (e: React.MouseEvent<HTMLSpanElement>) => {\n    setCoords({ top: e.clientY, left: e.clientX });\n    clearTimeout(timeout);\n    setIsTooltipShown(false);\n  };\n  const onMouseMove = (e: React.MouseEvent<HTMLSpanElement>) => {\n    setCoords({ top: e.clientY, left: e.clientX });\n  };\n\n  if (children !== undefined) {\n    return (\n      <GenericSpan\n        onMouseEnter={onMouseEnter}\n        onMouseMove={onMouseMove}\n        onMouseLeave={onMouseLeave}\n        ref={rootEl}\n        style={{ cursor }}\n      >\n        {children}\n        {tooltip}\n      </GenericSpan>\n    );\n  } else {\n    return (\n      <Root\n        onMouseEnter={onMouseEnter}\n        onMouseMove={onMouseMove}\n        onMouseLeave={onMouseLeave}\n        style={{ cursor }}\n        ref={rootEl}\n      >\n        <MoreInformationI dangerouslySetInnerHTML={{ __html: infoCircleSVG }} />\n        {tooltip}\n      </Root>\n    );\n  }\n};\n\nexport default Tooltip;\n","import { useStaticData } from '../dataProvider';\nimport { Datum as SearchDatum } from 'react-panel-search';\nimport { DataFlagType } from '../types/graphQL/graphQLTypes';\n\n/**\n * Adapter hook: replaces Apollo GraphQL query with static BLS data.\n * Returns regions as \"cities\" and regionTypes as \"countries\" to match\n * the original Metroverse data shape.\n */\n\ninterface CityDatum {\n  cityId: string;  // regionId\n  name: string;\n  countryId: string;  // regionType slug\n  id: string;  // regionId\n  nameList: string[] | null;\n  centroidLat: number | null;\n  centroidLon: number | null;\n  population: number | null;\n  gdppc: number | null;\n  incomeClass: null;\n  region: null;\n  regionPopRank: null;\n  regionGdppcRank: null;\n  dataFlag: DataFlagType;\n}\n\ninterface CountryDatum {\n  countryId: string;  // regionType slug\n  code: string;\n  nameShortEn: string;  // regionType display name\n  id: string;\n}\n\ninterface RegionDatum {\n  regionId: string;\n  regionName: string;\n}\n\ninterface SuccessResponse {\n  countries: CountryDatum[];\n  cities: CityDatum[];\n  regions: RegionDatum[];\n}\n\nconst regionTypeLabels: Record<string, string> = {\n  'National': 'National',\n  'State': 'States',\n  'Metro': 'Metropolitan Areas',\n};\n\nconst useGlobalLocationData = () => {\n  const { data: blsData, loading, error } = useStaticData();\n\n  if (!blsData) {\n    return { loading, error, data: undefined };\n  }\n\n  // Map regionTypes to \"countries\"\n  const regionTypes = Array.from(new Set(blsData.regions.map((r) => r.regionType)));\n  const countries: CountryDatum[] = regionTypes.map((rt) => ({\n    countryId: rt,\n    code: rt.toLowerCase(),\n    nameShortEn: regionTypeLabels[rt] || rt,\n    id: rt,\n  }));\n\n  // Map regions to \"cities\"\n  const cities: CityDatum[] = blsData.regions.map((r) => ({\n    cityId: r.regionId,\n    name: r.name,\n    countryId: r.regionType,\n    id: r.regionId,\n    nameList: null,\n    centroidLat: null,\n    centroidLon: null,\n    population: null,\n    gdppc: null,\n    incomeClass: null,\n    region: null,\n    regionPopRank: null,\n    regionGdppcRank: null,\n    dataFlag: DataFlagType.GREEN,\n  }));\n\n  // No sub-regions in BLS\n  const regions: RegionDatum[] = [];\n\n  const data: SuccessResponse = { countries, cities, regions };\n  return { loading: false, error: undefined, data };\n};\n\nconst getCountryStringId = (id: number | string | null) => `country-${id}`;\n\nexport const locationDataToHierarchicalTreeData = (\n  data: SuccessResponse | undefined,\n) => {\n  const response: SearchDatum[] = [];\n  if (data !== undefined) {\n    const { cities, countries } = data;\n    response.push(\n      ...countries.map(({ nameShortEn, countryId }) => ({\n        id: getCountryStringId(countryId),\n        title: nameShortEn !== null ? nameShortEn : 'Unknown',\n        parent_id: null,\n        level: '0',\n      })),\n      ...cities.map(({ cityId: id, name, countryId }) => {\n        return {\n          id,\n          title: name !== null ? name : 'Unknown Region ' + id,\n          parent_id: getCountryStringId(countryId),\n          level: '1',\n        };\n      }),\n    );\n  }\n  return response;\n};\n\nexport const getPopulationScale = () => {\n  // Stub - no population data for BLS regions\n  return () => 5;\n};\n\nexport const getGdpPppScale = () => {\n  // Stub - no GDP PPP data for BLS regions\n  return () => 5;\n};\n\nexport const useGlobalLocationHierarchicalTreeData = () => {\n  const { loading, error, data: responseData } = useGlobalLocationData();\n  const data = locationDataToHierarchicalTreeData(responseData);\n  return { loading, error, data };\n};\n\nexport default useGlobalLocationData;\n","import React from \"react\";\nimport styled, { keyframes } from \"styled-components/macro\";\n\nconst baseSize = 30; // in px\n\nconst Ring = styled.div<{ size: number | undefined }>`\n  display: inline-block;\n  position: relative;\n  width: ${({ size }) => (size ? size : baseSize)}px;\n  height: ${({ size }) => (size ? size : baseSize)}px;\n  margin-right: 0.6rem;\n`;\nconst animation = keyframes`\n  to {\n    transform: rotate(360deg);\n  }\n`;\n\nconst ChildBase = styled.div<{\n  themeColor: string | undefined;\n  size: number | undefined;\n}>`\n  box-sizing: border-box;\n  display: block;\n  position: absolute;\n  width: ${({ size }) => (size ? size * 0.8 : baseSize * 0.8)}px;\n  height: ${({ size }) => (size ? size * 0.8 : baseSize * 0.8)}px;\n  margin: ${({ size }) => (size ? size * 0.1 : baseSize * 0.1)}px;\n  border: ${({ size }) => (size ? size * 0.1 : baseSize * 0.1)}px solid\n    ${({ themeColor }) => (themeColor ? themeColor : \"#bebebe\")};\n  border-radius: 50%;\n  animation: ${animation} 1.2s cubic-bezier(0.5, 0, 0.5, 1) infinite;\n  border-color: ${({ themeColor }) => (themeColor ? themeColor : \"#bebebe\")}\n    transparent transparent transparent;\n`;\n\nconst FirstChild = styled(ChildBase)`\n  animation-delay: -0.45s;\n`;\nconst SecondChild = styled(ChildBase)`\n  animation-delay: -0.3s;\n`;\nconst ThirdChild = styled(ChildBase)`\n  animation-delay: -0.15s;\n`;\n\ninterface Props {\n  color?: string;\n  size?: number; // in px\n}\n\nconst SimpleLoader = (props: Props) => {\n  const { color, size } = props;\n  return (\n    <Ring size={size}>\n      <FirstChild themeColor={color} size={size}></FirstChild>\n      <SecondChild themeColor={color} size={size}></SecondChild>\n      <ThirdChild themeColor={color} size={size}></ThirdChild>\n      <ChildBase themeColor={color} size={size}></ChildBase>\n    </Ring>\n  );\n};\n\nexport default SimpleLoader;\n","import React from \"react\";\nimport useFluent from \"../../hooks/useFluent\";\nimport styled from \"styled-components/macro\";\n\nconst Root = styled.div`\n  font-style: italic;\n  opacity: 0.75;\n  font-size: 0.8rem;\n  padding: 0.5rem;\n`;\n\nexport default ({\n  fluentMessageId,\n  color,\n}: {\n  fluentMessageId?: string;\n  color?: string;\n}) => {\n  const getString = useFluent();\n  const message = fluentMessageId\n    ? getString(fluentMessageId)\n    : getString(\"global-ui-basic-data-error\");\n  return <Root style={{ color }}>{message}</Root>;\n};\n","import { backgroundDark, ButtonBase } from \"../../styling/styleUtils\";\nimport styled from \"styled-components/macro\";\nimport { breakPointValues } from \"../../styling/GlobalGrid\";\nimport { DataFlagType } from \"../../types/graphQL/graphQLTypes\";\n\nexport const collapsedSizeMediaQueryValues = {\n  min: breakPointValues.width.small + 1,\n  max: 1280,\n};\n\nexport const collapsedSizeMediaQuery = `\n  screen and\n  (min-width: ${collapsedSizeMediaQueryValues.min}px) and\n  (max-width: ${collapsedSizeMediaQueryValues.max}px)\n`;\n\nexport const textClassName = \"expanding-button-responsive-text\";\n\nexport const ExpandingButton = styled(ButtonBase)`\n  margin-right: 0.25rem;\n  position: relative;\n  font-size: 0.85rem;\n\n  @media ${collapsedSizeMediaQuery} {\n    background-color: ${backgroundDark};\n    border-radius: 4000px;\n    position: absolute;\n    left: 0;\n    border: solid 2px transparent;\n    display: flex;\n    justify-content: center;\n    outline: none;\n    font-size: 0.7rem;\n    padding: 0;\n\n    span {\n      margin: 0;\n      width: 1.3rem;\n      height: 1.3rem;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n\n      svg {\n        padding: 0;\n        width: 0.75rem;\n        height: 0.75rem;\n        fill: #fff;\n      }\n    }\n\n    .${textClassName} {\n      white-space: nowrap;\n      opacity: 0;\n      width: 0;\n      /* max-width needed for safari */\n      max-width: 0;\n      transition: all 0.15s ease-in-out;\n      color: #fff;\n      border-top-right-radius: 4000px;\n      border-bottom-right-radius: 4000px;\n      background-color: ${backgroundDark};\n      display: flex;\n      align-items: center;\n      padding-left: 0;\n      pointer-events: none;\n      overflow: hidden;\n    }\n\n    &:hover {\n      box-shadow: 0px 0px 0px 1px #fff;\n      z-index: 100;\n\n      .${textClassName} {\n        opacity: 1;\n        width: 118px;\n        /* max-width needed for safari */\n        max-width: 118px;\n        padding-left: 0.15rem;\n      }\n    }\n  }\n`;\n\n/* Utilities for new data quality indicators:\n\nIn the database, data quality levels are defined as\nGREEN, YELLOW, ORANGE, and RED.\n\nIn the new data quality indicators, the following\nchanges are implemented:\n\n  GREEN and YELLOW -> \"high quality\"\n  ORANGE -> \"medium quality\"\n  RED -> \"low quality\"\n\n*/\nexport enum NewDataQualityLevel {\n  HIGH = \"high-quality\",\n  MEDIUM = \"medium-quality\",\n  LOW = \"low-quality\",\n}\n\nexport const dataQualityColors: any = new Map([\n  [NewDataQualityLevel.LOW, \"#b12417\"],\n  [NewDataQualityLevel.MEDIUM, \"#f3b23d\"],\n  [NewDataQualityLevel.HIGH, \"#4eaba7\"],\n]);\n\nexport const getNewDataQualityLevel = (\n  dataFlag: DataFlagType,\n): NewDataQualityLevel => {\n  let assignedNewDataQualityLevel: any;\n  if (dataFlag === DataFlagType.GREEN) {\n    assignedNewDataQualityLevel = NewDataQualityLevel.HIGH;\n  } else if (\n    dataFlag === DataFlagType.YELLOW ||\n    dataFlag === DataFlagType.ORANGE\n  ) {\n    assignedNewDataQualityLevel = NewDataQualityLevel.MEDIUM;\n  } else if (dataFlag === DataFlagType.RED) {\n    assignedNewDataQualityLevel = NewDataQualityLevel.LOW;\n  }\n\n  return assignedNewDataQualityLevel;\n};\n","import React from \"react\";\nimport styled from \"styled-components/macro\";\nimport Tooltip, { TooltipTheme } from \"../../components/general/Tooltip\";\nimport { secondaryFont, baseColor } from \"../styleUtils\";\nimport useFluent from \"../../hooks/useFluent\";\n\nconst RootDark = styled.small`\n  color: rgba(255, 255, 255, 0.5);\n  width: 100%;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: block;\n\n  .panel-search-matched-keyword {\n    color: #fff;\n  }\n`;\n\nconst RootLight = styled.small`\n  color: rgba(0, 0, 0, 0.5);\n  width: 100%;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: block;\n\n  .panel-search-matched-keyword {\n    color: ${baseColor};\n  }\n`;\n\nconst KeywordText = styled.div`\n  font-family: ${secondaryFont};\n`;\n\nconst KeywordElement = ({\n  keywords,\n  theme,\n  query,\n}: {\n  keywords: string;\n  theme: TooltipTheme;\n  query: string;\n}) => {\n  const safeQuery = new RegExp(query.replace(/[^\\w\\s]/gi, \"\").trim(), \"gi\");\n  const getString = useFluent();\n  const text = getString(\"global-ui-includes-keywords\", { keywords });\n  const __html = getString(\"global-ui-includes-keywords\", { keywords }).replace(\n    safeQuery,\n    (match: string) =>\n      `<strong class='panel-search-matched-keyword'>${match}</strong>`,\n  );\n  const Root = theme === TooltipTheme.Dark ? RootDark : RootLight;\n  return (\n    <Tooltip\n      explanation={<KeywordText>{text}</KeywordText>}\n      delay={500}\n      theme={theme}\n    >\n      <Root dangerouslySetInnerHTML={{ __html }} />\n    </Tooltip>\n  );\n};\n\nexport default (theme: TooltipTheme) =>\n  (match: string[], rest: string[], query: string) => {\n    const total = match.length + rest.length;\n    if (\n      !(match.length === total && rest.length === 0) &&\n      !(rest.length === total && match.length === 0)\n    ) {\n      const keywords = [...match, ...rest].join(\", \");\n      return <KeywordElement keywords={keywords} theme={theme} query={query} />;\n    } else {\n      return null;\n    }\n  };\n","import React from \"react\";\nimport { ExtendedSearchDatum } from \"./Utils\";\nimport PanelSearch from \"react-panel-search\";\nimport useFluent from \"../../hooks/useFluent\";\nimport matchingKeywordFormatter from \"../../styling/utils/panelSearchKeywordFormatter\";\nimport { TooltipTheme } from \"../../components/general/Tooltip\";\n\ninterface Props {\n  data: ExtendedSearchDatum[];\n  setHighlighted: (val: ExtendedSearchDatum) => void;\n  onPanelHover: (val: ExtendedSearchDatum | null) => void;\n  onTraverseLevel: (\n    val: ExtendedSearchDatum,\n    direction: \"asc\" | \"desc\",\n  ) => void;\n  highlighted: ExtendedSearchDatum | null;\n  focusOnRender: boolean;\n}\n\nconst SearchBar = (props: Props) => {\n  const {\n    data,\n    setHighlighted,\n    onPanelHover,\n    onTraverseLevel,\n    highlighted,\n    focusOnRender,\n  } = props;\n  const getString = useFluent();\n  return (\n    <PanelSearch\n      data={data}\n      topLevelTitle={getString(\"global-text-countries\")}\n      onSelect={(val) => setHighlighted(val as ExtendedSearchDatum)}\n      onHover={onPanelHover}\n      onTraverseLevel={onTraverseLevel}\n      selectedValue={highlighted}\n      disallowSelectionLevels={[\"0\"]}\n      defaultPlaceholderText={getString(\"global-ui-type-a-city-name\")}\n      showCount={true}\n      resultsIdentation={1.75}\n      focusOnRender={focusOnRender}\n      matchingKeywordFormatter={matchingKeywordFormatter(TooltipTheme.Dark)}\n    />\n  );\n};\n\nexport default React.memo(SearchBar);\n","import React, { useCallback } from \"react\";\nimport styled from \"styled-components/macro\";\nimport {\n  secondaryFont,\n  primaryColor,\n  secondaryColor,\n} from \"../../styling/styleUtils\";\nimport Heading from \"./Heading\";\nimport { ExtendedSearchDatum } from \"./Utils\";\nimport { useHistory } from \"react-router-dom\";\nimport { Routes } from \"../../routing/routes\";\nimport useGlobalLocationData, {\n  locationDataToHierarchicalTreeData,\n} from \"../../hooks/useGlobalLocationData\";\nimport SimpleLoader from \"../../components/transitionStateComponents/SimpleLoader\";\nimport SimpleError from \"../../components/transitionStateComponents/SimpleError\";\nimport SearchBar from \"./SearchBar\";\nimport useFluent from \"../../hooks/useFluent\";\n\nconst Root = styled.div`\n  width: 100vw;\n  height: 100vh;\n  position: relative;\n  background-color: #08111e;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n`;\n\nconst CenterPanel = styled.div`\n  width: 90%;\n  max-width: 600px;\n  padding: 2rem;\n`;\n\nconst SearchContainer = styled.div`\n  width: 100%;\n  margin: 1.5rem auto 0;\n  font-family: ${secondaryFont};\n\n  .react-panel-search-search-bar-input,\n  button {\n    font-family: ${secondaryFont};\n  }\n\n  .react-panel-search-search-bar-input {\n    text-transform: uppercase;\n    font-size: 0.85rem;\n    background-color: rgba(0, 0, 0, 0.85);\n    color: #fff;\n    border: solid 1px #fff;\n    padding-top: 1rem;\n    padding-bottom: 1rem;\n    padding-right: 3rem;\n    box-shadow: none;\n    outline: none;\n\n    &::placeholder {\n      color: #fff;\n    }\n    &:focus::placeholder {\n      color: rgba(0, 0, 0, 0);\n    }\n  }\n\n  .react-panel-search-search-bar-dropdown-arrow {\n    background-color: transparent;\n  }\n  .react-panel-search-current-tier-breadcrumb-outer,\n  .react-panel-search-next-button,\n  .react-panel-search-search-bar-dropdown-arrow {\n    svg polyline {\n      stroke: #fff;\n    }\n  }\n\n  .react-panel-search-search-bar-clear-button {\n    background-color: transparent;\n    color: #fff;\n  }\n\n  .react-panel-search-search-bar-search-icon {\n    svg path {\n      fill: #fff;\n    }\n  }\n\n  .react-panel-search-search-results {\n    background-color: rgba(0, 0, 0, 0.85);\n    border: solid 1px #fff;\n\n    ::-webkit-scrollbar-thumb {\n      background-color: rgba(255, 255, 255, 0.3);\n    }\n    ::-webkit-scrollbar-track {\n      background-color: rgba(255, 255, 255, 0.1);\n    }\n  }\n\n  .react-panel-search-current-tier-title,\n  .react-panel-search-current-tier-breadcrumb-outer {\n    color: #fff;\n    border-color: ${primaryColor};\n  }\n\n  .react-panel-search-current-tier-breadcrumb-outer:hover {\n    background-color: rgba(255, 255, 255, 0.35);\n  }\n\n  .react-panel-search-list-item {\n    background-color: transparent;\n    color: #fff;\n    &:hover {\n      background-color: rgba(255, 255, 255, 0.35);\n    }\n  }\n\n  .react-panel-search-highlighted-item {\n    background-color: rgba(255, 255, 255, 0.35);\n  }\n\n  .react-panel-search-search-results:hover {\n    .react-panel-search-highlighted-item:not(:hover) {\n      background-color: transparent;\n    }\n  }\n\n  .react-panel-search-list-item-container {\n    strong {\n      color: ${primaryColor};\n    }\n  }\n\n  .react-panel-search-list-item-container.react-panel-search-list-no-results {\n    color: #fff;\n  }\n`;\n\nconst LoadingContainer = styled.div`\n  font-size: 1rem;\n  line-height: 0;\n  display: flex;\n  align-items: center;\n  height: 3.1875rem;\n  text-transform: uppercase;\n  font-size: 0.85rem;\n  background-color: rgba(0, 0, 0, 0.35);\n  color: rgba(255, 255, 255, 0.75);\n  border: solid 1px #fff;\n  padding-left: 0.5rem;\n`;\n\nconst QuickLinks = styled.div`\n  display: flex;\n  gap: 0.75rem;\n  flex-wrap: wrap;\n  margin-top: 1.5rem;\n  justify-content: center;\n`;\n\nconst QuickLink = styled.button`\n  background-color: transparent;\n  border: 1px solid ${secondaryColor};\n  color: #fff;\n  padding: 0.5rem 1rem;\n  cursor: pointer;\n  font-family: ${secondaryFont};\n  font-size: 0.8rem;\n  text-transform: uppercase;\n  transition: background-color 0.2s;\n\n  &:hover {\n    background-color: ${secondaryColor};\n  }\n`;\n\nconst Attribution = styled.div`\n  position: fixed;\n  bottom: 1rem;\n  left: 0;\n  right: 0;\n  text-align: center;\n  color: rgba(255, 255, 255, 0.4);\n  font-size: 0.7rem;\n  font-family: ${secondaryFont};\n\n  a {\n    color: rgba(255, 255, 255, 0.6);\n    text-decoration: none;\n    &:hover {\n      color: #fff;\n    }\n  }\n`;\n\nconst Landing = () => {\n  const { loading, error, data } = useGlobalLocationData();\n  const history = useHistory();\n  const getString = useFluent();\n\n  const navigateToRegion = useCallback(\n    (regionId: string) => {\n      const route = Routes.CityOverview.replace(\":cityId\", regionId);\n      history.push(route);\n    },\n    [history],\n  );\n\n  const onSelect = useCallback(\n    (val: ExtendedSearchDatum) => {\n      if (val.level !== \"0\") {\n        navigateToRegion(val.id as string);\n      }\n    },\n    [navigateToRegion],\n  );\n\n  let searchBar: React.ReactElement<any>;\n  if (loading === true) {\n    searchBar = (\n      <LoadingContainer>\n        <SimpleLoader />\n        {getString(\"global-ui-loading-cities\")}...\n      </LoadingContainer>\n    );\n  } else if (error !== undefined) {\n    console.error(error);\n    searchBar = (\n      <LoadingContainer>\n        <SimpleError color={\"white\"} />\n      </LoadingContainer>\n    );\n  } else if (data !== undefined) {\n    const searchData = locationDataToHierarchicalTreeData(data).map((d) => ({\n      ...d,\n      population: 0,\n      gdp: 0,\n    }));\n    searchBar = (\n      <SearchBar\n        data={searchData}\n        setHighlighted={onSelect}\n        onPanelHover={() => {}}\n        onTraverseLevel={() => {}}\n        highlighted={null}\n        focusOnRender={true}\n      />\n    );\n  } else {\n    searchBar = <></>;\n  }\n\n  return (\n    <Root>\n      <CenterPanel>\n        <Heading />\n        <SearchContainer>{searchBar}</SearchContainer>\n        <QuickLinks>\n          <QuickLink onClick={() => navigateToRegion(\"national-united-states\")}>\n            United States (National)\n          </QuickLink>\n          <QuickLink onClick={() => navigateToRegion(\"state-california\")}>\n            California\n          </QuickLink>\n          <QuickLink onClick={() => navigateToRegion(\"state-new-york\")}>\n            New York\n          </QuickLink>\n          <QuickLink onClick={() => navigateToRegion(\"state-texas\")}>\n            Texas\n          </QuickLink>\n        </QuickLinks>\n      </CenterPanel>\n      <Attribution>\n        Based on{\" \"}\n        <a\n          href=\"https://metroverse.cid.harvard.edu/\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          Metroverse\n        </a>{\" \"}\n        by Harvard Growth Lab. Licensed under CC BY-NC-SA 4.0.\n        Data from{\" \"}\n        <a\n          href=\"https://www.bls.gov/oes/\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          BLS OES\n        </a>{\" \"}\n        +{\" \"}\n        <a\n          href=\"https://www.onetonline.org/\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          O*NET\n        </a>\n        .\n      </Attribution>\n    </Root>\n  );\n};\n\nexport default Landing;\n","import { secondaryFont, baseColor } from \"../../styling/styleUtils\";\nimport styled from \"styled-components/macro\";\nimport { breakPointValues } from \"../../styling/GlobalGrid\";\n\nconst smallBreakpoint = 550; // in px\nexport const mediumSmallBreakpoint = 1050; // in px\nexport const columnsToRowsBreakpoint = breakPointValues.width.small; // in px\n\nexport const UtilityBarButtonBase = styled.button`\n  border: none;\n  margin: 0 0.25rem;\n  padding: 0 0.35rem;\n  color: ${baseColor};\n  background-color: transparent;\n  font-size: 0.55rem;\n  font-size: clamp(0.5rem, 1vw, 0.65rem);\n  font-family: ${secondaryFont};\n  text-transform: uppercase;\n  display: flex;\n  align-items: center;\n  outline: 0 solid rgba(255, 255, 255, 0);\n  transition: outline 0.1s ease;\n  flex-shrink: 1;\n\n  &:hover,\n  &:focus {\n    background-color: #fff;\n    outline: 0.25rem solid #fff;\n    color: ${baseColor};\n  }\n\n  @media (max-width: ${mediumSmallBreakpoint}px) {\n    flex-direction: column;\n  }\n\n  @media (max-width: ${columnsToRowsBreakpoint}px) {\n    flex-direction: row;\n  }\n\n  @media (max-width: ${smallBreakpoint}px) {\n    flex-direction: column;\n  }\n`;\n\nexport const SvgBase = styled.span`\n  display: inline-block;\n  width: 1rem;\n  height: 1rem;\n  margin-right: 0.3rem;\n\n  svg {\n    width: 100%;\n    height: 100%;\n\n    path {\n      fill: ${baseColor};\n    }\n  }\n\n  @media (max-width: ${mediumSmallBreakpoint}px) {\n    margin-right: 0;\n    margin-bottom: 0.2rem;\n  }\n\n  @media (max-width: ${columnsToRowsBreakpoint}px) {\n    margin-right: 0.3rem;\n    margin-bottom: 0;\n  }\n\n  @media (max-width: ${smallBreakpoint}px) {\n    margin-right: 0;\n    margin-bottom: 0.2rem;\n  }\n`;\n\nexport const Text = styled.span`\n  width: min-content;\n\n  @media (max-width: 1100px) {\n    max-width: 55px;\n  }\n\n  @media (max-width: ${mediumSmallBreakpoint}px) and (min-width: ${columnsToRowsBreakpoint +\n    1}px) {\n    display: none;\n  }\n\n  @media (max-width: ${columnsToRowsBreakpoint}px) {\n    text-align: center;\n  }\n`;\n\nexport const LargeSvg = styled(SvgBase)`\n  width: 1.4rem;\n  height: 1.4rem;\n\n  @media (max-width: ${mediumSmallBreakpoint}px) {\n    width: 1rem;\n    height: 1rem;\n  }\n`;\n\nexport const TooltipContent = styled.div`\n  font-family: ${secondaryFont};\n  letter-spacing: -0.3px;\n  text-transform: uppercase;\n  font-size: 0.6rem;\n`;\n","import useCurrentCityId from \"./useCurrentCityId\";\nimport useGlobalLocationData from \"./useGlobalLocationData\";\n\nconst useCurrentCity = () => {\n  const cityId = useCurrentCityId();\n  const { loading, data } = useGlobalLocationData();\n\n  const city =\n    cityId && data ? data.cities.find((c) => c.cityId === cityId) : undefined;\n\n  return { loading, city };\n};\n\nexport default useCurrentCity;\n","import React, { useEffect, useRef, useState } from \"react\";\nimport { createPortal } from \"react-dom\";\nimport styled from \"styled-components/macro\";\nimport raw from \"raw.macro\";\nimport useFluent from \"../../../hooks/useFluent\";\nimport { useWindowWidth } from \"../../../contextProviders/appContext\";\nimport DataDisclaimer from \"../../general/dataDisclaimer\";\nimport {\n  UtilityBarButtonBase,\n  columnsToRowsBreakpoint,\n  mediumSmallBreakpoint,\n  SvgBase,\n  Text,\n  TooltipContent,\n  LargeSvg,\n} from \"../Utils\";\nimport screenfull from \"screenfull\";\nimport Tooltip, { TooltipPosition } from \"../../general/Tooltip\";\nimport Guide from \"./guide\";\nimport Share from \"./share\";\n\nconst expandIconSvg = raw(\"../../../assets/icons/expand.svg\");\nconst collapseIconSvg = raw(\"../../../assets/icons/collapse.svg\");\nconst downloadImageIconSvg = raw(\"../../../assets/icons/image-download.svg\");\nconst downloadDataIconSvg = raw(\"../../../assets/icons/download.svg\");\n\nconst UtilityBarRoot = styled.div`\n  display: flex;\n  align-items: center;\n\n  @media (max-width: ${columnsToRowsBreakpoint}px) {\n    justify-content: space-around;\n  }\n`;\n\nconst secondaryHeaderUtilityBarId = \"secondaryHeaderUtilityBarId\";\n\nexport const UtilityBarPortal = () => (\n  <UtilityBarRoot id={secondaryHeaderUtilityBarId} />\n);\n\nexport enum DownloadType {\n  Image = \"image\",\n  Data = \"data\",\n}\n\ninterface Props {\n  onDownloadImageButtonClick?: () => void;\n  onDownloadDataButtonClick?: () => void;\n  returnInline?: boolean;\n  hideGuide?: boolean;\n}\n\nconst UtilityBar = (props: Props) => {\n  const {\n    onDownloadImageButtonClick,\n    onDownloadDataButtonClick,\n    returnInline,\n    hideGuide,\n  } = props;\n  const getString = useFluent();\n\n  const secondaryHeaderUtilityBarContainerNodeRef = useRef<HTMLElement | null>(\n    null,\n  );\n\n  const [isUtilityBarRendered, setIsUtilityBarRendered] =\n    useState<boolean>(false);\n  const [isFullscreen, setIsFullscreen] = useState<boolean>(\n    screenfull.isEnabled && screenfull.isFullscreen,\n  );\n\n  const windowDimensions = useWindowWidth();\n\n  useEffect(() => {\n    const node = document.querySelector<HTMLElement>(\n      `#${secondaryHeaderUtilityBarId}`,\n    );\n    if (node !== null) {\n      secondaryHeaderUtilityBarContainerNodeRef.current = node;\n      setIsUtilityBarRendered(true);\n    }\n  }, []);\n\n  const downloadDataButton = onDownloadDataButtonClick ? (\n    <Tooltip\n      explanation={\n        windowDimensions.width < mediumSmallBreakpoint &&\n        windowDimensions.width > columnsToRowsBreakpoint ? (\n          <TooltipContent>\n            {getString(\"global-ui-download-data\")}\n          </TooltipContent>\n        ) : null\n      }\n      cursor=\"pointer\"\n      tooltipPosition={TooltipPosition.Bottom}\n    >\n      <UtilityBarButtonBase onClick={onDownloadDataButtonClick}>\n        <SvgBase dangerouslySetInnerHTML={{ __html: downloadDataIconSvg }} />\n        <Text>{getString(\"global-ui-download-data\")}</Text>\n      </UtilityBarButtonBase>\n    </Tooltip>\n  ) : null;\n\n  const downloadImageButton = onDownloadImageButtonClick ? (\n    <Tooltip\n      explanation={\n        windowDimensions.width < mediumSmallBreakpoint &&\n        windowDimensions.width > columnsToRowsBreakpoint ? (\n          <TooltipContent>\n            {getString(\"global-ui-download-image\")}\n          </TooltipContent>\n        ) : null\n      }\n      cursor=\"pointer\"\n      tooltipPosition={TooltipPosition.Bottom}\n    >\n      <UtilityBarButtonBase onClick={onDownloadImageButtonClick}>\n        <LargeSvg dangerouslySetInnerHTML={{ __html: downloadImageIconSvg }} />\n        <Text>{getString(\"global-ui-download-image\")}</Text>\n      </UtilityBarButtonBase>\n    </Tooltip>\n  ) : null;\n\n  const onFullScreenClick = () => {\n    const onFullscreenClose = () => setIsFullscreen(false);\n    if (screenfull.isEnabled) {\n      if (!screenfull.isFullscreen) {\n        screenfull.request().then(() => {\n          setTimeout(() => {\n            setIsFullscreen(true);\n            if (screenfull.isEnabled) {\n              screenfull.on(\"change\", onFullscreenClose);\n            }\n          }, 200);\n        });\n      } else {\n        screenfull.exit();\n        screenfull.off(\"change\", onFullscreenClose);\n        setIsFullscreen(false);\n      }\n    }\n  };\n\n  const expandButton = screenfull.isEnabled ? (\n    <Tooltip\n      explanation={\n        windowDimensions.width < mediumSmallBreakpoint &&\n        windowDimensions.width > columnsToRowsBreakpoint ? (\n          <TooltipContent>\n            {!isFullscreen\n              ? getString(\"global-ui-expand\")\n              : getString(\"global-ui-exit\")}\n          </TooltipContent>\n        ) : null\n      }\n      cursor=\"pointer\"\n      tooltipPosition={TooltipPosition.Bottom}\n    >\n      <UtilityBarButtonBase onClick={onFullScreenClick}>\n        <SvgBase\n          dangerouslySetInnerHTML={{\n            __html: !isFullscreen ? expandIconSvg : collapseIconSvg,\n          }}\n        />\n        <Text>\n          {!isFullscreen\n            ? getString(\"global-ui-expand\")\n            : getString(\"global-ui-exit\")}\n        </Text>\n      </UtilityBarButtonBase>\n    </Tooltip>\n  ) : null;\n\n  const guide = hideGuide ? null : <Guide />;\n\n  const content = (\n    <>\n      <Share />\n      {expandButton}\n      {guide}\n      {downloadImageButton}\n      {downloadDataButton}\n      <DataDisclaimer />\n    </>\n  );\n  let output: React.ReactElement<any> | null;\n  if (\n    isUtilityBarRendered === true &&\n    secondaryHeaderUtilityBarContainerNodeRef.current !== null\n  ) {\n    output = createPortal(\n      content,\n      secondaryHeaderUtilityBarContainerNodeRef.current,\n    );\n  } else if (returnInline) {\n    output = content;\n  } else {\n    output = null;\n  }\n\n  return output;\n};\n\nexport default UtilityBar;\n","import React, { useState } from \"react\";\nimport styled, { keyframes } from \"styled-components/macro\";\nimport {\n  UtilityBarButtonBase,\n  mediumSmallBreakpoint,\n  columnsToRowsBreakpoint,\n  SvgBase,\n  Text,\n  TooltipContent,\n} from \"../../navigation/Utils\";\nimport raw from \"raw.macro\";\nimport {\n  baseColor,\n  secondaryFont,\n  primaryColor,\n  primaryHoverColor,\n} from \"../../../styling/styleUtils\";\nimport useFluent from \"../../../hooks/useFluent\";\nimport useCurrentCity from \"../../../hooks/useCurrentCity\";\nimport Modal from \"../../standardModal\";\nimport { Link } from \"react-router-dom\";\nimport { Routes } from \"../../../routing/routes\";\nimport Tooltip, { TooltipPosition } from \"../../general/Tooltip\";\nimport { useWindowWidth } from \"../../../contextProviders/appContext\";\nimport {\n  dataQualityColors,\n  getNewDataQualityLevel,\n  NewDataQualityLevel,\n} from \"../Utils\";\n\nconst dataIconSvg = raw(\"../../../assets/icons/disclaimer.svg\");\n\nconst DisclaimerSvg = styled(SvgBase)<{ $flagColor: string }>`\n  width: 1.2rem;\n  height: 1.2rem;\n\n  svg {\n    .cls-1 {\n      fill: none;\n      stroke: ${({ $flagColor }) => $flagColor};\n    }\n    .cls-2 {\n      fill: ${({ $flagColor }) => $flagColor};\n    }\n    circle {\n      fill: ${({ $flagColor }) => $flagColor};\n    }\n  }\n\n  @media (max-width: ${mediumSmallBreakpoint}px) {\n    width: 1rem;\n    height: 1rem;\n  }\n`;\n\nconst DisclaimerSvgLarge = styled(DisclaimerSvg)`\n  width: 2rem;\n  height: 2rem;\n  margin-right: 0.875rem;\n\n  @media (max-width: ${mediumSmallBreakpoint}px) {\n    width: 1.875rem;\n    height: 1.875rem;\n  }\n`;\n\nconst growIn = keyframes`\n  0% {\n    transform: scale(0.4);\n  }\n\n  100% {\n    transform: scale(1);\n  }\n`;\n\nconst Root = styled.div`\n  background-color: #fff;\n  position: relative;\n  animation: ${growIn} 0.1s normal forwards ease-in-out;\n  animation-iteration-count: 1;\n  color: ${baseColor};\n  height: 100%;\n  padding: 1rem 3rem 2rem;\n  width: 600px;\n  max-width: 100%;\n  box-sizing: border-box;\n\n  @media screen and (max-height: 800px) {\n    overflow: visible;\n    padding: 1rem;\n  }\n`;\n\nconst Title = styled.h1`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  text-align: center;\n  text-transform: uppercase;\n  font-weight: 400;\n  border-bottom: solid 1px ${baseColor};\n  padding-bottom: 0.875rem;\n`;\n\nconst Para = styled.p`\n  font-size: 0.875rem;\n  margin: 1rem 0;\n\n  a {\n    color: ${primaryColor};\n\n    &:hover {\n      color: ${primaryHoverColor};\n    }\n  }\n`;\n\nconst CloseButton = styled.button`\n  background-color: transparent;\n  border-none;\n  padding: 0 0.5rem;\n  color: ${baseColor};\n  text-transform: uppercase;\n  font-size: 1.5rem;\n  font-family: ${secondaryFont};\n  position: absolute;\n  right: 0;\n  top: 0;\n`;\n\nconst EnlargedTextLabel = styled(Text)`\n  width: max-content;\n`;\n\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nconst DataLegend = styled.div`\n  margin-right: 0.2rem;\n  display: inline-flex;\n  flex-direction: row-reverse;\n  align-items: center;\n`;\n\nconst LargeDot = styled.div`\n  width: 0.9rem;\n  height: 0.9rem;\n  border-radius: 1000px;\n  margin-right: 0.275rem;\n`;\n\nconst DataDisclaimer = () => {\n  const getString = useFluent();\n  const currentCity = useCurrentCity();\n  const [modalOpen, setModalOpen] = useState<boolean>(false);\n  const windowDimensions = useWindowWidth();\n\n  let flagColor: string = baseColor;\n  let alertTitle: string = \"\";\n  let description: string = \"\";\n  if (currentCity && currentCity.city) {\n    const { dataFlag } = currentCity.city;\n    const dataQualityLevel = getNewDataQualityLevel(dataFlag);\n    flagColor = dataQualityColors.get(dataQualityLevel);\n\n    if (dataQualityLevel === NewDataQualityLevel.HIGH) {\n      alertTitle = getString(\"data-disclaimer-high-quality-topbar-title\");\n      description = getString(\"data-disclaimer-high-quality-desc\");\n    } else if (dataQualityLevel === NewDataQualityLevel.MEDIUM) {\n      alertTitle = getString(\"data-disclaimer-medium-quality-topbar-title\");\n      description = getString(\"data-disclaimer-medium-quality-desc\");\n    } else if (dataQualityLevel === NewDataQualityLevel.LOW) {\n      alertTitle = getString(\"data-disclaimer-low-quality-topbar-title\");\n      description = getString(\"data-disclaimer-low-quality-desc\");\n    }\n  }\n\n  const modal = modalOpen ? (\n    <Modal onClose={() => setModalOpen(false)} width={\"600px\"} height={\"600px\"}>\n      <Root>\n        <Title>\n          <DisclaimerSvgLarge\n            dangerouslySetInnerHTML={{ __html: dataIconSvg }}\n            $flagColor={flagColor}\n          />\n          {getString(\"global-ui-data-disclaimer\")} - {alertTitle}\n        </Title>\n        <Para dangerouslySetInnerHTML={{ __html: description }} />\n        <Para>\n          {getString(\"data-disclaimer-data-page-lead-up\")}\n          &nbsp;\n          <Link to={Routes.FaqBase}>\n            {getString(\"data-disclaimer-data-page-link-text\")}\n          </Link>\n        </Para>\n        <Para\n          dangerouslySetInnerHTML={{\n            __html: getString(\"data-disclaimer-contact\"),\n          }}\n        />\n        <CloseButton onClick={() => setModalOpen(false)}></CloseButton>\n      </Root>\n    </Modal>\n  ) : null;\n\n  return (\n    <>\n      <Tooltip\n        explanation={\n          windowDimensions.width < mediumSmallBreakpoint &&\n          windowDimensions.width > columnsToRowsBreakpoint ? (\n            <TooltipContent>\n              {getString(\"global-ui-data-disclaimer\")}\n            </TooltipContent>\n          ) : null\n        }\n        cursor=\"pointer\"\n        tooltipPosition={TooltipPosition.Bottom}\n      >\n        <UtilityBarButtonBase onClick={() => setModalOpen(true)}>\n          <LargeDot style={{ backgroundColor: flagColor }} />\n          <EnlargedTextLabel>{alertTitle}</EnlargedTextLabel>\n        </UtilityBarButtonBase>\n      </Tooltip>\n      {modal}\n    </>\n  );\n};\n\nexport default DataDisclaimer;\n","import React, { useState } from \"react\";\nimport Modal from \"../../../standardModal\";\nimport styled, { keyframes } from \"styled-components/macro\";\nimport {\n  backgroundDark,\n  primaryColor,\n  primaryHoverColor,\n} from \"../../../../styling/styleUtils\";\nimport CityverseLogoURL from \"../../../../assets/icons/cities-logo.svg\";\n\nconst growIn = keyframes`\n  0% {\n    transform: scale(0.4);\n  }\n\n  100% {\n    transform: scale(1);\n  }\n`;\n\nconst Root = styled.div`\n  background-color: ${backgroundDark};\n  position: relative;\n  animation: ${growIn} 0.1s normal forwards ease-in-out;\n  animation-iteration-count: 1;\n  color: #fff;\n  height: 100%;\n  padding: 2rem;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  text-align: center;\n  width: 500px;\n\n  @media screen and (max-width: 700px) {\n    width: auto;\n  }\n\n  @media screen and (max-height: 800px) {\n    overflow: visible;\n  }\n`;\n\nconst Logo = styled.img`\n  width: 14rem;\n`;\n\nconst Text = styled.div`\n  margin: 2rem 0;\n  text-transform: uppercase;\n  font-size: 1.25rem;\n`;\n\nconst StartGuideButton = styled.button`\n  background-color: ${primaryHoverColor};\n  color: #fff;\n  text-transform: uppercase;\n  border: none;\n  padding: 1.3rem 1.5rem;\n  letter-spacing: 1px;\n  margin-bottom: 0.75rem;\n  font-weight: 600;\n\n  &:hover {\n    background-color: ${primaryColor};\n  }\n`;\n\nconst DismissButton = styled.button`\n  border: none;\n  padding: 0.7rem;\n  text-transform: uppercase;\n  letter-spacing: 1px;\n  margin-bottom: 2rem;\n  background-color: #676c75;\n  color: #fff;\n`;\n\nconst CheckboxLabel = styled.label`\n  font-size: 0.9rem;\n  color: #fff;\n  display: flex;\n  align-items: center;\n`;\n\nconst Checkbox = styled.input`\n  margin-right: 5px;\n`;\n\nconst modalVersion = \"0_1\";\nconst localStorageKey = \"localStorageFirstTimeGuideModalKey\" + modalVersion;\nlet dismissedSinceSession = false;\n\ninterface Props {\n  startGuide: () => void;\n}\n\nconst FirstTimeModal = ({ startGuide }: Props) => {\n  const initialCheckedValue = parseInt(\n    localStorage.getItem(localStorageKey) as any,\n    10,\n  );\n  const [modalOpen, setModalOpen] = useState<boolean>(\n    isNaN(initialCheckedValue) || initialCheckedValue < 5,\n  );\n  const [checked, setChecked] = useState<boolean>(false);\n  const closeModal = () => {\n    setModalOpen(false);\n    dismissedSinceSession = true;\n    if (checked) {\n      localStorage.setItem(localStorageKey, \"5\");\n    } else {\n      const newCheckedCount = isNaN(initialCheckedValue)\n        ? 0\n        : initialCheckedValue + 1;\n      localStorage.setItem(localStorageKey, newCheckedCount.toString());\n    }\n  };\n\n  const onStart = () => {\n    setModalOpen(false);\n    dismissedSinceSession = true;\n    localStorage.setItem(localStorageKey, \"5\");\n    startGuide();\n  };\n\n  if (modalOpen && !dismissedSinceSession) {\n    return (\n      <Modal onClose={closeModal} width={\"800px\"} height={\"400px\"}>\n        <Root>\n          <Logo src={CityverseLogoURL} />\n          <Text>Learn the Metroverse basics</Text>\n          <StartGuideButton onClick={onStart}>\n            Follow our step-by-step guide\n          </StartGuideButton>\n          <DismissButton onClick={closeModal}>Not Now</DismissButton>\n          <CheckboxLabel htmlFor=\"dont-show-tutorial-on-start-again\">\n            <Checkbox\n              type=\"checkbox\"\n              id=\"dont-show-tutorial-on-start-again\"\n              checked={checked}\n              onChange={(e) => setChecked(e.target.checked)}\n            />\n            Don't show it again\n          </CheckboxLabel>\n        </Root>\n      </Modal>\n    );\n  }\n  return null;\n};\n\nexport default FirstTimeModal;\n","import React from \"react\";\nimport Joyride, { CallBackProps, Step } from \"react-joyride\";\nimport styled from \"styled-components\";\nimport { primaryColor } from \"../../../../styling/styleUtils\";\nimport FirstTimeModal from \"./FirstTimeModal\";\n\nconst Text = styled.div`\n  text-align: left;\n`;\nexport const joyrideClassNames = {\n  vizOptions: \"joyride-element-viz-options\",\n  searchInGraph: \"joyride-element-search-in-graph\",\n  searchCountryInGraph: \"joyride-element-search-country-in-graph\",\n  howToRead: \"joyride-element-how-to-read\",\n  filterOptions: \"joyride-element-filter-viz-options\",\n  vizToggle: \"joyride-element-viz-toggle\",\n  benchmarkSelection: \"joyride-element-benchmark-selection\",\n  compareEconComp: \"joyride-element-compare-econ-comp\",\n  colorLegend: \"joyride-element-color-legend\",\n  colorLegendNoFilter: \"joyride-element-color-legend-no-filter\",\n  guideButton: \"joyride-element-guide-button\",\n};\n\nconst steps: Step[] = [\n  {\n    target: \".\" + joyrideClassNames.vizOptions,\n    // tslint:disable-next-line:max-line-length\n    content: (\n      <Text>\n        With the default visualization generated on the screen, use the Viz\n        Option controls to further customize your data visualization.\n      </Text>\n    ),\n    disableBeacon: true,\n    placement: \"left-start\",\n  },\n  {\n    target: \".\" + joyrideClassNames.searchInGraph,\n    // tslint:disable-next-line:max-line-length\n    content: (\n      <Text>\n        Search for a specific industry or knowledge cluster within the\n        visualization by typing its name here.\n      </Text>\n    ),\n    disableBeacon: true,\n    placement: \"left-start\",\n  },\n  {\n    target: \".\" + joyrideClassNames.searchCountryInGraph,\n    // tslint:disable-next-line:max-line-length\n    content: (\n      <Text>\n        Search for a specific city within the visualization by typing its name\n        here.\n      </Text>\n    ),\n    disableBeacon: true,\n    placement: \"left-start\",\n  },\n  {\n    target: \".\" + joyrideClassNames.vizToggle,\n    // tslint:disable-next-line:max-line-length\n    content: (\n      <Text>Click here to toggle between 2 types of visualizations.</Text>\n    ),\n    disableBeacon: true,\n    placement: \"left-start\",\n  },\n  {\n    target: \".\" + joyrideClassNames.howToRead,\n    // tslint:disable-next-line:max-line-length\n    content: (\n      <Text>\n        To learn how to interpret a given visualization, click here for a short\n        tutorial.\n      </Text>\n    ),\n    disableBeacon: true,\n    placement: \"left-start\",\n  },\n  {\n    target: \".\" + joyrideClassNames.filterOptions,\n    // tslint:disable-next-line:max-line-length\n    content: (\n      <Text>\n        Click here to customize the data visualization based on various\n        filtering options.\n      </Text>\n    ),\n    disableBeacon: true,\n    placement: \"left-start\",\n  },\n  {\n    target: \".\" + joyrideClassNames.compareEconComp,\n    // tslint:disable-next-line:max-line-length\n    content: (\n      <Text>\n        Click here to compare the economic composition of your selected city to\n        that of another individual city or peer group.\n      </Text>\n    ),\n    disableBeacon: true,\n    placement: \"left-start\",\n  },\n  {\n    target: \".\" + joyrideClassNames.benchmarkSelection,\n    // tslint:disable-next-line:max-line-length\n    content: (\n      <Text>\n        Dont forget to select a benchmark to determine the relative presence of\n        an industry or knowledge cluster in a selected city. Click here to\n        re-generate the visualization using a different benchmark.\n      </Text>\n    ),\n    disableBeacon: true,\n    placement: \"left-start\",\n  },\n  {\n    target: \".\" + joyrideClassNames.colorLegend,\n    // tslint:disable-next-line:max-line-length\n    content: (\n      <Text>\n        A color legend can be found below the visualization. Hover on each\n        category to filter.\n      </Text>\n    ),\n    disableBeacon: true,\n    placement: \"left-start\",\n  },\n  {\n    target: \".\" + joyrideClassNames.colorLegendNoFilter,\n    // tslint:disable-next-line:max-line-length\n    content: <Text>A color legend can be found below the visualization.</Text>,\n    disableBeacon: true,\n    placement: \"left-start\",\n  },\n  {\n    target: \".\" + joyrideClassNames.guideButton,\n    // tslint:disable-next-line:max-line-length\n    content: (\n      <Text>You can find this tutorial here if you need to see it again.</Text>\n    ),\n    disableBeacon: true,\n    placement: \"bottom-start\",\n  },\n];\n\ninterface Props {\n  run: boolean;\n  onClose: () => void;\n  startGuide: () => void;\n}\n\nconst CitiesGuide = (props: Props) => {\n  const { run, onClose, startGuide } = props;\n  const onChange = (input: CallBackProps) => {\n    const { action } = input;\n    if (action === \"reset\" || action === \"close\") {\n      onClose();\n    }\n  };\n\n  const filteredSteps = steps.filter(({ target }) => {\n    const element = document.querySelector<HTMLElement>(target as string);\n    return element !== null && element.offsetParent !== null;\n  });\n\n  return (\n    <>\n      <Joyride\n        steps={filteredSteps}\n        run={run}\n        continuous={true}\n        showProgress={true}\n        spotlightClicks={true}\n        locale={{\n          back: \"Back\",\n          close: \"Close\",\n          last: \"Finish\",\n          next: \"Next\",\n          skip: \"Skip\",\n        }}\n        styles={{\n          options: {\n            primaryColor,\n            zIndex: 1000,\n          },\n        }}\n        callback={onChange}\n        floaterProps={{ disableAnimation: true }}\n      />\n      <FirstTimeModal startGuide={startGuide} />\n    </>\n  );\n};\n\nexport default CitiesGuide;\n","import React, { useState } from \"react\";\nimport Tooltip, { TooltipPosition } from \"../../../general/Tooltip\";\nimport raw from \"raw.macro\";\nimport { useWindowWidth } from \"../../../../contextProviders/appContext\";\nimport {\n  UtilityBarButtonBase,\n  columnsToRowsBreakpoint,\n  mediumSmallBreakpoint,\n  Text,\n  TooltipContent,\n  LargeSvg,\n} from \"../../Utils\";\nimport useFluent from \"../../../../hooks/useFluent\";\nimport CitiesGuide, { joyrideClassNames } from \"./CitiesGuide\";\n\nconst guideIconSvg = raw(\"../../../../assets/icons/guide.svg\");\n\nconst Guide = () => {\n  const windowDimensions = useWindowWidth();\n  const getString = useFluent();\n  const [runTutorial, setRunTutorial] = useState<boolean>(false);\n  return (\n    <>\n      <Tooltip\n        explanation={\n          windowDimensions.width < mediumSmallBreakpoint &&\n          windowDimensions.width > columnsToRowsBreakpoint ? (\n            <TooltipContent>{getString(\"global-ui-guide\")}</TooltipContent>\n          ) : null\n        }\n        cursor=\"pointer\"\n        tooltipPosition={TooltipPosition.Bottom}\n      >\n        <UtilityBarButtonBase\n          onClick={() => setRunTutorial(true)}\n          className={joyrideClassNames.guideButton}\n        >\n          <LargeSvg dangerouslySetInnerHTML={{ __html: guideIconSvg }} />\n          <Text>{getString(\"global-ui-guide\")}</Text>\n        </UtilityBarButtonBase>\n      </Tooltip>\n      <CitiesGuide\n        run={runTutorial}\n        onClose={() => setRunTutorial(false)}\n        startGuide={() => setRunTutorial(true)}\n        key={runTutorial.toString()}\n      />\n    </>\n  );\n};\n\nexport default Guide;\n","const getShareWindowParams = (width: number, height: number) =>\n  `menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=${height},width=${width}`;\n\nconst getShareFunctions = (url: string) => {\n  return {\n    shareFacebook: () => {\n      const baseURL = \"https://www.facebook.com/sharer.php\";\n      const shareURL = `${baseURL}?u=${encodeURIComponent(url)}`;\n      window.open(shareURL, \"\", getShareWindowParams(360, 600));\n    },\n\n    shareTwitter: (text: string) => {\n      const baseURL = \"https://twitter.com/intent/tweet\";\n      const shareURL = `${baseURL}?\nurl=${encodeURIComponent(url)}&\ntext=${encodeURIComponent(text)}&\nvia=HarvardGrwthLab`;\n      window.open(shareURL, \"\", getShareWindowParams(420, 550));\n    },\n\n    shareLinkedIn: (title: string, summary: string) => {\n      // Reference:\n      // https://developer.linkedin.com/docs/share-on-linkedin (under \"customized URL\")\n      const baseURL = \"https://www.linkedin.com/shareArticle\";\n      // const source = 'https://atlas.cid.harvard.edu/';\n      const source = encodeURIComponent(url);\n      const shareURL = `${baseURL}\n?mini=true&\nurl=${encodeURIComponent(url)}&\ntitle=${encodeURIComponent(title)}&\nsummary=${encodeURIComponent(summary)}&\nsource=${encodeURIComponent(source)}`;\n      window.open(shareURL, \"\", getShareWindowParams(570, 520));\n    },\n\n    shareEmail: (\n      subjectCopy: string,\n      bodyBeforeLineBreakCopy: string,\n      bodyAfterLineBreakCopy: string,\n    ) => {\n      const subject = encodeURIComponent(subjectCopy);\n      const bodyBeforeLineBreak = encodeURIComponent(bodyBeforeLineBreakCopy);\n      const bodyAfterLineBreak = encodeURIComponent(bodyAfterLineBreakCopy);\n\n      const href = `mailto:?subject=${subject}&body=${bodyBeforeLineBreak}%0D%0A%0D%0A${bodyAfterLineBreak}`;\n\n      window.location.href = href;\n    },\n  };\n};\n\nexport default getShareFunctions;\n","import React, { useState } from \"react\";\nimport Modal from \"../../../standardModal\";\nimport styled, { keyframes } from \"styled-components/macro\";\nimport {\n  baseColor,\n  secondaryFont,\n  primaryFont,\n} from \"../../../../styling/styleUtils\";\n// import useFluent from '../../../../hooks/useFluent';\nimport raw from \"raw.macro\";\nimport getShareFunctions from \"./shareFn\";\n\nconst iconGray = \"#2D363F\";\n\nconst linkSvg = raw(\"../../../templates/informationalPage/assets/link.svg\");\nconst twitterSvg = raw(\n  \"../../../templates/informationalPage/assets/twitter.svg\",\n);\nconst linkedinSvg = raw(\n  \"../../../templates/informationalPage/assets/linkedin.svg\",\n);\nconst facebookSvg = raw(\n  \"../../../templates/informationalPage/assets/facebook.svg\",\n);\nconst emailSvg = raw(\"../../../templates/informationalPage/assets/email.svg\");\n\nconst growIn = keyframes`\n  0% {\n    transform: scale(0.4);\n  }\n\n  100% {\n    transform: scale(1);\n  }\n`;\n\nconst Root = styled.div`\n  background-color: #fff;\n  position: relative;\n  animation: ${growIn} 0.1s normal forwards ease-in-out;\n  animation-iteration-count: 1;\n  color: ${baseColor};\n  height: 100%;\n  padding: 2rem;\n\n  @media screen and (max-height: 800px) {\n    overflow: visible;\n  }\n`;\n\nconst CloseButton = styled.button`\n  background-color: transparent;\n  border-none;\n  padding: 0.5rem;\n  text-transform: uppercase;\n  font-size: 1.25rem;\n  font-family: ${secondaryFont};\n  position: absolute;\n  right: 0;\n  top: 0;\n`;\n\nconst SectionTitle = styled.div`\n  font-size: 1.25rem;\n  text-transform: uppercase;\n  margin-bottom: 0.75rem;\n  font-family: ${primaryFont};\n`;\n\nconst SvgBase = styled.div`\n  svg {\n    width: 100%;\n    height: 100%;\n\n    path {\n      fill: ${iconGray};\n    }\n  }\n`;\n\nconst CopyUrlBar = styled.div`\n  min-height: 1rem;\n  max-width: 450px;\n  white-space: nowrap;\n  display: grid;\n  grid-template-columns: 1.45rem 1fr auto;\n  background-color: lightgray;\n  margin-bottom: 2rem;\n  cursor: pointer;\n`;\n\nconst CopyIcon = styled(SvgBase)`\n  padding-left: 0.45rem;\n`;\n\nconst UrlText = styled.div`\n  overflow: hidden;\n  padding: 0.45rem 0.55rem;\n`;\n\nconst CopyButton = styled.button`\n  font-family: ${primaryFont};\n  text-transform: uppercase;\n  padding: 0.45rem 0.75rem;\n  background-color: ${iconGray};\n  color: #fff;\n  font-size: 1.05rem;\n  letter-spacing: 0.5px;\n`;\n\nconst SocialMediaContainer = styled.div`\n  width: 100%;\n  display: flex;\n  align-items: center;\n`;\n\nconst SocialMediaButton = styled.button`\n  width: 2.875rem;\n  height: 2.875rem;\n  display: flex;\n  align-items: center;\n  margin-right: 1.5rem;\n  background-color: transparent;\n`;\n\ninterface Props {\n  onClose: () => void;\n}\n\nexport default (props: Props) => {\n  const { onClose } = props;\n  // const getString = useFluent();\n  const [copied, setCopied] = useState<boolean>(false);\n  const onCopy = () => {\n    navigator.clipboard.writeText(window.location.href);\n    setCopied(true);\n    setTimeout(() => setCopied(false), 5000);\n  };\n  const copyText = copied ? \"Copied\" : \"Copy\";\n\n  const { shareFacebook, shareTwitter, shareLinkedIn, shareEmail } =\n    getShareFunctions(window.location.href);\n\n  return (\n    <Modal onClose={onClose} height=\"auto\" width=\"500px\">\n      <Root>\n        <SectionTitle>Direct Link</SectionTitle>\n        <CopyUrlBar onClick={onCopy}>\n          <CopyIcon dangerouslySetInnerHTML={{ __html: linkSvg }} />\n          <UrlText>{window.location.href}</UrlText>\n          <CopyButton>{copyText}</CopyButton>\n        </CopyUrlBar>\n        <SectionTitle>Social Media Sharing</SectionTitle>\n        <SocialMediaContainer>\n          <SocialMediaButton\n            onClick={() => shareTwitter(\"Check out the Metroverse\")}\n          >\n            <SvgBase dangerouslySetInnerHTML={{ __html: twitterSvg }} />\n          </SocialMediaButton>\n          <SocialMediaButton\n            onClick={() => shareLinkedIn(\"Check out the Metroverse\", \"\")}\n          >\n            <SvgBase dangerouslySetInnerHTML={{ __html: linkedinSvg }} />\n          </SocialMediaButton>\n          <SocialMediaButton onClick={() => shareFacebook()}>\n            <SvgBase dangerouslySetInnerHTML={{ __html: facebookSvg }} />\n          </SocialMediaButton>\n          <SocialMediaButton\n            style={{ width: \"3.25rem\" }}\n            onClick={() =>\n              shareEmail(\n                \"Check out the Metroverse\",\n                \"Check out the Metroverse\",\n                window.location.href,\n              )\n            }\n          >\n            <SvgBase dangerouslySetInnerHTML={{ __html: emailSvg }} />\n          </SocialMediaButton>\n        </SocialMediaContainer>\n        <CloseButton onClick={onClose}></CloseButton>\n      </Root>\n    </Modal>\n  );\n};\n","import React, { useState } from \"react\";\nimport Tooltip, { TooltipPosition } from \"../../../general/Tooltip\";\nimport raw from \"raw.macro\";\nimport { useWindowWidth } from \"../../../../contextProviders/appContext\";\nimport {\n  UtilityBarButtonBase,\n  columnsToRowsBreakpoint,\n  mediumSmallBreakpoint,\n  Text,\n  TooltipContent,\n  SvgBase,\n} from \"../../Utils\";\nimport useFluent from \"../../../../hooks/useFluent\";\nimport ShareModal from \"./ShareModal\";\n\nconst shareIconSvg = raw(\"../../../../assets/icons/share.svg\");\n\nconst Share = () => {\n  const windowDimensions = useWindowWidth();\n  const getString = useFluent();\n  const [modalOpen, setModalOpen] = useState<boolean>(false);\n  const openModal = () => setModalOpen(true);\n  const closeModal = () => setModalOpen(false);\n  const modal = modalOpen ? <ShareModal onClose={closeModal} /> : null;\n  return (\n    <>\n      <Tooltip\n        explanation={\n          windowDimensions.width < mediumSmallBreakpoint &&\n          windowDimensions.width > columnsToRowsBreakpoint ? (\n            <TooltipContent>{getString(\"global-ui-share\")}</TooltipContent>\n          ) : null\n        }\n        cursor=\"pointer\"\n        tooltipPosition={TooltipPosition.Bottom}\n      >\n        <UtilityBarButtonBase onClick={openModal}>\n          <SvgBase dangerouslySetInnerHTML={{ __html: shareIconSvg }} />\n          <Text>{getString(\"global-ui-share\")}</Text>\n        </UtilityBarButtonBase>\n      </Tooltip>\n      {modal}\n    </>\n  );\n};\n\nexport default Share;\n","import React from \"react\";\nimport SimpleLoader from \"../../transitionStateComponents/SimpleLoader\";\nimport PanelSearch, { Datum as SearchDatum } from \"react-panel-search\";\nimport { useGlobalIndustryHierarchicalTreeData } from \"../../../hooks/useGlobalIndustriesData\";\nimport { useGlobalClusterHierarchicalTreeData } from \"../../../hooks/useGlobalClusterData\";\nimport { useGlobalLocationHierarchicalTreeData } from \"../../../hooks/useGlobalLocationData\";\nimport SimpleError from \"../../transitionStateComponents/SimpleError\";\nimport useSectorMap from \"../../../hooks/useSectorMap\";\nimport useClusterMap from \"../../../hooks/useClusterMap\";\nimport { DigitLevel } from \"../../../types/graphQL/graphQLTypes\";\nimport {\n  SearchContainerLight,\n  lightBaseColor,\n} from \"../../../styling/styleUtils\";\nimport {\n  collapsedSizeMediaQueryValues,\n  collapsedSizeMediaQuery,\n} from \"../Utils\";\nimport useFluent from \"../../../hooks/useFluent\";\nimport { useWindowSize } from \"react-use\";\nimport styled from \"styled-components/macro\";\nimport ToggleDropdown from \"./ToggleDropdown\";\nimport { ClusterLevel } from \"../../../routing/routes\";\nimport { joyrideClassNames } from \"../../navigation/secondaryHeader/guide/CitiesGuide\";\n\nconst LoadingContainer = styled.div`\n  border: solid 1px ${lightBaseColor};\n  display: flex;\n  align-items: center;\n  justify-content: center;\n`;\n\nconst SearchContainer = styled(SearchContainerLight)`\n  max-width: 100%;\n  font-size: 0.5rem;\n  margin-right: 0.75rem;\n\n  .react-panel-search-search-results {\n    overflow-x: hidden;\n  }\n\n  .react-panel-search-search-bar-input {\n    font-size: 0.65rem;\n    padding-left: 1.15rem;\n  }\n\n  .react-panel-search-search-bar-search-icon {\n    width: 0.7rem;\n    margin: 0 0.3rem;\n  }\n\n  .react-panel-search-current-tier-static-title-outer,\n  .react-panel-search-current-tier-breadcrumb-outer {\n    padding: 0.55rem 0.45rem 0.55rem 0.4rem;\n  }\n\n  .react-panel-search-list-item,\n  .react-panel-search-current-tier-title {\n    font-size: 0.65rem;\n    padding: 0.55rem 1.25rem 0.55rem 0.5rem;\n  }\n\n  .react-panel-search-current-tier-title {\n    padding-left: 0;\n    padding-right: 0;\n    padding-top: 0.2rem;\n    grid-gap: 0;\n  }\n\n  .react-panel-search-current-tier-text {\n    padding: 0;\n  }\n\n  .react-panel-search-next-button,\n  .react-panel-search-previous-button {\n    width: 0.9rem;\n    height: 0.9rem;\n    padding: 0;\n\n    svg {\n      width: 0.6rem;\n    }\n  }\n  .react-panel-search-next-button {\n    margin: auto 6px;\n  }\n\n  .react-panel-search-search-bar-dropdown-arrow {\n    width: 0.6rem;\n    padding: 0.18rem;\n  }\n\n  .react-panel-search-list-no-results div {\n    font-size: 0.65rem;\n    padding: 0.5rem;\n  }\n\n  @media ${collapsedSizeMediaQuery} {\n    width: auto;\n    flex-shrink: 1;\n    height: 100%;\n    align-items: center;\n    position: relative;\n    min-width: 30px;\n  }\n`;\n\nexport enum Mode {\n  naics = \"naics\",\n  cluster = \"cluster\",\n  geo = \"geo\",\n}\n\nexport interface SearchInGraphOptions {\n  hiddenParents: string[];\n  setHighlighted: (value: string | undefined) => void;\n  digitLevel: DigitLevel | null;\n  clusterLevel: ClusterLevel | null;\n  mode: Mode;\n  hidden?: boolean;\n}\n\nconst SearchIndustryInGraph = (props: SearchInGraphOptions) => {\n  const {\n    hiddenParents,\n    setHighlighted,\n    digitLevel,\n    clusterLevel,\n    mode,\n    hidden,\n  } = props;\n\n  const getString = useFluent();\n  const sectorMap = useSectorMap();\n  const clusterMap = useClusterMap();\n  const industrySearchData = useGlobalIndustryHierarchicalTreeData();\n  const clusterSearchData = useGlobalClusterHierarchicalTreeData();\n  const locationSearchData = useGlobalLocationHierarchicalTreeData();\n  const windowDimensions = useWindowSize();\n\n  let hierarchalSearchData: undefined | SearchDatum[];\n  let tiers: DigitLevel | ClusterLevel | string | null;\n  let disallowSelectionLevels: (number | string)[] | undefined;\n  let defaultPlaceholderText: string;\n  let topLevelTitle: string;\n  if (mode === Mode.naics) {\n    hierarchalSearchData = industrySearchData.data;\n    tiers = digitLevel;\n    disallowSelectionLevels = tiers\n      ? Array.from(Array(tiers).keys())\n      : undefined;\n    defaultPlaceholderText = getString(\"global-ui-search-an-industry-in-graph\");\n    topLevelTitle = getString(\"global-text-industries\");\n  } else if (mode === Mode.cluster) {\n    hierarchalSearchData = clusterSearchData.data;\n    tiers = clusterLevel;\n    disallowSelectionLevels =\n      clusterLevel === ClusterLevel.C3 ? [1] : undefined;\n    defaultPlaceholderText = getString(\"global-ui-search-a-cluster-in-graph\");\n    topLevelTitle = getString(\"global-ui-skill-clusters\");\n  } else if (mode === Mode.geo) {\n    hierarchalSearchData = locationSearchData.data;\n    disallowSelectionLevels = [\"0\"];\n    tiers = null;\n    defaultPlaceholderText = \"Find a city in map\";\n    topLevelTitle = \"Countries\";\n  } else {\n    hierarchalSearchData = [];\n    tiers = null;\n    defaultPlaceholderText = \"\";\n    topLevelTitle = \"\";\n  }\n\n  let searchPanel: React.ReactElement<any> | null;\n  if (\n    (mode === Mode.naics && industrySearchData.loading) ||\n    (mode === Mode.cluster && clusterSearchData.loading) ||\n    (mode === Mode.geo && locationSearchData.loading)\n  ) {\n    searchPanel = (\n      <LoadingContainer>\n        <SimpleLoader />\n      </LoadingContainer>\n    );\n  } else if (mode === Mode.naics && industrySearchData.error !== undefined) {\n    console.error(industrySearchData.error);\n    searchPanel = (\n      <LoadingContainer>\n        <SimpleError />\n      </LoadingContainer>\n    );\n  } else if (mode === Mode.cluster && clusterSearchData.error !== undefined) {\n    console.error(clusterSearchData.error);\n    searchPanel = (\n      <LoadingContainer>\n        <SimpleError />\n      </LoadingContainer>\n    );\n  } else if (mode === Mode.geo && locationSearchData.error !== undefined) {\n    console.error(locationSearchData.error);\n    searchPanel = (\n      <LoadingContainer>\n        <SimpleError />\n      </LoadingContainer>\n    );\n  } else if (\n    (mode === Mode.naics && hiddenParents.length === sectorMap.length) ||\n    (mode === Mode.cluster && hiddenParents.length === clusterMap.length)\n  ) {\n    searchPanel = (\n      <LoadingContainer>\n        <SimpleError fluentMessageId={\"error-message-no-industries\"} />\n      </LoadingContainer>\n    );\n  } else if (hierarchalSearchData !== undefined) {\n    const onSelect = (d: { id: string | number } | null) => {\n      if (d) {\n        setHighlighted(d.id as string);\n      } else {\n        setHighlighted(undefined);\n      }\n    };\n    const searchData: SearchDatum[] = hierarchalSearchData.filter(\n      ({ level, id }) =>\n        (tiers === null || (level !== null && level <= tiers)) &&\n        !hiddenParents.includes(id as string),\n    );\n\n    if (\n      windowDimensions.width > collapsedSizeMediaQueryValues.max ||\n      windowDimensions.width < collapsedSizeMediaQueryValues.min\n    ) {\n      searchPanel = (\n        <PanelSearch\n          key={`PreChartPanelSearchKeyFor${digitLevel}${clusterLevel}${mode}`}\n          data={searchData}\n          topLevelTitle={topLevelTitle}\n          disallowSelectionLevels={disallowSelectionLevels}\n          defaultPlaceholderText={defaultPlaceholderText}\n          showCount={true}\n          resultsIdentation={1}\n          onSelect={onSelect}\n          maxResults={500}\n        />\n      );\n    } else {\n      searchPanel = (\n        <ToggleDropdown\n          disallowSelectionLevels={disallowSelectionLevels}\n          setHighlighted={setHighlighted}\n          rerenderKey={`${digitLevel}${clusterLevel}${mode}`}\n          searchData={searchData}\n          defaultPlaceholderText={defaultPlaceholderText}\n          topLevelTitle={topLevelTitle}\n        />\n      );\n    }\n  } else {\n    searchPanel = null;\n  }\n\n  return (\n    <SearchContainer\n      className={\n        !hidden\n          ? mode === Mode.geo\n            ? joyrideClassNames.searchCountryInGraph\n            : joyrideClassNames.searchInGraph\n          : undefined\n      }\n      style={hidden ? { visibility: \"hidden\" } : undefined}\n    >\n      {searchPanel}\n    </SearchContainer>\n  );\n};\n\nexport default React.memo(SearchIndustryInGraph);\n","import { useStaticData } from '../dataProvider';\nimport { Datum as SearchDatum } from 'react-panel-search';\n\n/**\n * Adapter hook: returns SOC occupations in the same shape as the\n * original NAICS industries data.\n *\n * Key mapping:\n *   naicsId -> socCode\n *   naicsIdTopParent -> majorGroupId (as number)\n *   code -> socCode\n *   parentId -> null (flat structure for now)\n *   tradable -> true (all occupations)\n */\n\ninterface IndustryDatum {\n  id: string;\n  naicsId: string;   // actually socCode\n  code: string;      // socCode\n  name: string | null;\n  level: number | null;\n  parentId: number | null;\n  naicsIdTopParent: number;  // majorGroupId as number\n  tradable: boolean;\n}\n\ninterface SuccessResponse {\n  industries: IndustryDatum[];\n}\n\ninterface IndustryMap {\n  [id: string]: IndustryDatum;\n}\n\nconst useGlobalIndustriesData = () => {\n  const { data: blsData, loading, error } = useStaticData();\n\n  if (!blsData) {\n    return { loading, error, data: undefined };\n  }\n\n  const industries: IndustryDatum[] = blsData.occupations.map((occ) => ({\n    id: occ.socCode,\n    naicsId: occ.socCode,\n    code: occ.socCode,\n    name: occ.name,\n    level: occ.level,\n    parentId: null,\n    naicsIdTopParent: parseInt(occ.majorGroupId, 10),\n    tradable: true,\n  }));\n\n  const data: SuccessResponse = { industries };\n  return { loading: false, error: undefined, data };\n};\n\nconst industryDataToHierarchicalTreeData = (\n  data: SuccessResponse | undefined,\n) => {\n  const response: SearchDatum[] = [];\n  if (data !== undefined) {\n    const { industries } = data;\n    industries.forEach(({ naicsId, name, level, parentId }) => {\n      if (name !== null && level !== null) {\n        response.push({\n          id: naicsId,\n          title: name,\n          level,\n          parent_id: parentId === null ? null : parentId.toString(),\n        });\n      }\n    });\n  }\n  return response;\n};\n\nexport const useGlobalIndustryHierarchicalTreeData = () => {\n  const { loading, error, data: responseData } = useGlobalIndustriesData();\n  const data = industryDataToHierarchicalTreeData(responseData);\n  return { loading, error, data };\n};\n\nconst industryDataToMap = (data: SuccessResponse | undefined) => {\n  const response: IndustryMap = {};\n  if (data !== undefined) {\n    const { industries } = data;\n    industries.forEach((industry) => {\n      response[industry.naicsId] = industry;\n    });\n  }\n  return response;\n};\n\nexport const useGlobalIndustryMap = () => {\n  const { loading, error, data: responseData } = useGlobalIndustriesData();\n  const data = industryDataToMap(responseData);\n  return { loading, error, data };\n};\n\nexport default useGlobalIndustriesData;\n","import React from \"react\";\nimport styled from \"styled-components/macro\";\nimport SimpleLoader from \"./SimpleLoader\";\n\nexport const LoadingOverlay = styled.div`\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  bottom: 0;\n  right: 0;\n  background-color: rgba(0, 0, 0, 0.1);\n  backdrop-filter: blur(6px);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 30;\n`;\n\nconst LoadingBlock = () => (\n  <LoadingOverlay>\n    <SimpleLoader size={80} />\n  </LoadingOverlay>\n);\n\nexport default LoadingBlock;\n","import React, { Component, ErrorInfo } from \"react\";\nimport SimpleError from \"../../components/transitionStateComponents/SimpleError\";\nimport { LoadingOverlay } from \"../transitionStateComponents/VizLoadingBlock\";\n\ninterface State {\n  hasError: boolean;\n}\n\nclass ErrorBoundary extends Component<{}, State> {\n  constructor(props: {}) {\n    super(props);\n    this.state = { hasError: false };\n  }\n\n  static getDerivedStateFromError(_error: Error) {\n    // Update state so the next render will show the fallback UI.\n    return { hasError: true };\n  }\n\n  componentDidCatch(error: Error, errorInfo: ErrorInfo) {\n    // You can also log the error to an error reporting service\n    console.error(error, errorInfo);\n  }\n\n  render() {\n    if (this.state.hasError) {\n      // You can render any custom fallback UI\n      return (\n        <LoadingOverlay>\n          <SimpleError fluentMessageId={\"error-message-viz-failure\"} />\n        </LoadingOverlay>\n      );\n    }\n\n    return this.props.children;\n  }\n}\n\nexport default ErrorBoundary;\n","import React from \"react\";\nimport { lightBaseColor } from \"../../styling/styleUtils\";\nimport styled, { keyframes } from \"styled-components/macro\";\n\nconst Spinner = styled.div`\n  height: 1rem;\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n`;\n\nconst bounceDelay = keyframes`\n  0%, 80%, 100% {\n    -webkit-transform: scale(0);\n    transform: scale(0);\n  } 40% {\n    -webkit-transform: scale(1.0);\n    transform: scale(1.0);\n  }\n`;\n\nconst Bounce = styled.div`\n  width: 0.6rem;\n  height: 0.6rem;\n  margin: 0 0.25rem 0;\n  background-color: ${lightBaseColor};\n  border-radius: 100%;\n  display: inline-block;\n  animation: ${bounceDelay} 1.4s infinite ease-in-out both;\n`;\n\nconst Bounce1 = styled(Bounce)`\n  animation-delay: -0.32s;\n`;\n\nconst Bounce2 = styled(Bounce)`\n  animation-delay: -0.16s;\n`;\n\nexport default () => {\n  return (\n    <Spinner>\n      <Bounce1 />\n      <Bounce2 />\n      <Bounce />\n    </Spinner>\n  );\n};\n","import styled from \"styled-components/macro\";\nimport { arrowContainerClassName } from \"../components/general/Tooltip\";\n\ninterface Input {\n  title: string;\n  color: string;\n  rows: string[][];\n  boldColumns?: number[];\n  underlineRows?: number[];\n  additionalHTML?: string;\n  hideArrow?: boolean;\n  simple?: boolean;\n}\n\nexport const RapidTooltipRoot = styled.div`\n  position: fixed;\n  z-index: 3000;\n  max-width: 16rem;\n  padding-bottom: 0.5rem;\n  font-size: 0.7rem;\n  line-height: 1.4;\n  text-transform: none;\n  transition: opacity 0.15s ease;\n  color: #333;\n  background-color: #fff;\n  border: 1px solid #dfdfdf;\n  border-radius: 4px;\n  box-shadow: 0px 0px 5px 0px rgba(0, 0, 0, 0.15);\n  pointer-events: none;\n  transform: translate(-50%, calc(-100% - 1.5rem));\n  display: none;\n`;\n\nexport const getStandardTooltip = (input: Input) => {\n  const columnCount =\n    input.rows.length && input.rows[0].length ? input.rows[0].length : 1;\n\n  let rows: string = \"\";\n  input.rows.forEach((r, i) => {\n    let row = \"\";\n    const underline =\n      input.underlineRows && input.underlineRows.includes(i)\n        ? \"border-bottom: solid 1px #333;margin-top:auto;\"\n        : \"\";\n    r.forEach((c, ii) => {\n      const alignment =\n        ii === 0\n          ? \"justify-content: flex-start; text-align: left;\"\n          : \"justify-content: flex-end; text-align: right;\";\n      const style =\n        input.boldColumns && input.boldColumns.includes(ii)\n          ? `style=\"font-weight: 600;${alignment}${underline}\"`\n          : \"\";\n      row = row + `<div class=\"rapid-tooltip-cell\" ${style}>${c}</div>`;\n    });\n    rows = rows + row;\n  });\n\n  const grid = rows.length\n    ? `\n    <div\n      class=\"rapid-tooltip-subsection-grid\"\n      style=\"display: grid; grid-template-columns: repeat(${columnCount}, auto);\"\n    >\n      ${rows}\n    </div>\n  `\n    : \"\";\n\n  const additionalContent = input.additionalHTML\n    ? `<div>${input.additionalHTML}</div>`\n    : \"\";\n  const arrow = input.hideArrow\n    ? \"\"\n    : `\n    <div class=\"rapid-tooltip-arrow-container ${arrowContainerClassName}\">\n      <div class=\"rapid-tooltip-arrow\"></div>\n    </div>\n  `;\n\n  const titleStyle = input.simple\n    ? `padding-bottom: 0; font-weight: 600;`\n    : `background-color: ${input.color};`;\n\n  return `\n    <div>\n      <div class=\"rapid-tooltip-title\" style=\"${titleStyle}\">\n        ${input.title}\n      </div>\n      ${grid}\n      ${additionalContent}\n    </div>\n    ${arrow}\n  `;\n};\n","import { useStaticData } from '../dataProvider';\nimport {\n  DigitLevel,\n  ClusterLevel,\n} from '../types/graphQL/graphQLTypes';\nimport { filterOutliers } from '../Utils';\n\n/**\n * Adapter hook: replaces the aggregate industries GraphQL query.\n * Returns global min/max/median for wage (hourlyWage) and complexity (yearsEducation)\n * for color scaling in the treemap.\n *\n * Key mapping:\n *   yearsEducation -> complexity score\n *   hourlyWage -> annual mean wage (aMean)\n *   numEmploy -> totEmp\n *   numCompany -> gdp\n */\n\ninterface AggregateDatum {\n  sumNumCompany: number;\n  sumNumEmploy: number;\n  avgNumCompany: number;\n  avgNumEmploy: number;\n}\n\ninterface IndustryDatum extends AggregateDatum {\n  naicsId: number;\n}\n\ninterface ClusterDatum extends AggregateDatum {\n  clusterId: number;\n}\n\nexport interface IndustryMap {\n  globalMinMax: {\n    minSumNumCompany: number;\n    maxSumNumCompany: number;\n    minSumNumEmploy: number;\n    maxSumNumEmploy: number;\n    minAvgNumCompany: number;\n    maxAvgNumCompany: number;\n    minAvgNumEmploy: number;\n    maxAvgNumEmploy: number;\n    minYearsEducation: number;\n    medianYearsEducation: number;\n    maxYearsEducation: number;\n    minHourlyWage: number;\n    medianHourlyWage: number;\n    maxHourlyWage: number;\n  };\n  clusterMinMax: {\n    minSumNumCompany: number;\n    maxSumNumCompany: number;\n    minSumNumEmploy: number;\n    maxSumNumEmploy: number;\n    minAvgNumCompany: number;\n    maxAvgNumCompany: number;\n    minAvgNumEmploy: number;\n    maxAvgNumEmploy: number;\n    minYearsEducation: number;\n    maxYearsEducation: number;\n    medianYearsEducation: number;\n    minHourlyWage: number;\n    medianHourlyWage: number;\n    maxHourlyWage: number;\n  };\n  industries: {\n    [id: string]: IndustryDatum & {\n      yearsEducation: number;\n      hourlyWage: number;\n      yearsEducationRank: number;\n      hourlyWageRank: number;\n    };\n  };\n  clusters: {\n    [id: string]: ClusterDatum & {\n      yearsEducation: number;\n      hourlyWage: number;\n      yearsEducationRank: number;\n      hourlyWageRank: number;\n    };\n  };\n}\n\ninterface CoreVariables {\n  level: DigitLevel;\n  year: number;\n  clusterLevel?: ClusterLevel;\n}\n\nconst defaultMinMax = {\n  minSumNumCompany: 0,\n  maxSumNumCompany: 0,\n  minSumNumEmploy: 0,\n  maxSumNumEmploy: 0,\n  minAvgNumCompany: 0,\n  maxAvgNumCompany: 0,\n  minAvgNumEmploy: 0,\n  maxAvgNumEmploy: 0,\n  minYearsEducation: 0,\n  maxYearsEducation: 0,\n  minHourlyWage: 0,\n  maxHourlyWage: 0,\n  medianHourlyWage: 0,\n  medianYearsEducation: 0,\n};\n\nexport const useAggregateIndustryMap = (variables: CoreVariables) => {\n  const { data: blsData, loading, error } = useStaticData();\n\n  const response: IndustryMap = {\n    industries: {},\n    clusters: {},\n    globalMinMax: { ...defaultMinMax },\n    clusterMinMax: { ...defaultMinMax },\n  };\n\n  if (!blsData) {\n    return { loading, error, data: response };\n  }\n\n  const yearStr = variables.year.toString();\n  const aggregates = blsData.aggregates[yearStr];\n\n  if (!aggregates) {\n    return { loading: false, error: undefined, data: response };\n  }\n\n  const { byOccupation } = aggregates;\n\n  // Compute wage and complexity arrays for outlier filtering\n  const wages = Object.values(byOccupation).map((o) => o.avgWage);\n  const complexities = Object.values(byOccupation).map((o) => o.avgComplexity);\n\n  const wagesFiltered = filterOutliers(wages);\n  const complexitiesFiltered = filterOutliers(complexities);\n\n  const sortedWages = [...wages].sort((a, b) => a - b);\n  const sortedComplexities = [...complexities].sort((a, b) => a - b);\n  const medianWage = sortedWages[Math.round(sortedWages.length / 2)] || 0;\n  const medianComplexity = sortedComplexities[Math.round(sortedComplexities.length / 2)] || 0;\n\n  const minWage = Math.min(...wagesFiltered);\n  const maxWage = Math.max(...wagesFiltered);\n  const minComplexity = Math.min(...complexitiesFiltered);\n  const maxComplexity = Math.max(...complexitiesFiltered);\n\n  response.globalMinMax = {\n    ...response.globalMinMax,\n    minYearsEducation: minComplexity,\n    maxYearsEducation: maxComplexity,\n    medianYearsEducation: medianComplexity,\n    minHourlyWage: minWage,\n    maxHourlyWage: maxWage,\n    medianHourlyWage: medianWage,\n  };\n  // clusterMinMax mirrors globalMinMax for our flat structure\n  response.clusterMinMax = { ...response.globalMinMax };\n\n  // Build per-industry data\n  for (const [socCode, occData] of Object.entries(byOccupation)) {\n    const yearsEducation = occData.avgComplexity;\n    const hourlyWage = occData.avgWage;\n\n    let yearsEducationRank = yearsEducation < minComplexity ? minComplexity : yearsEducation;\n    if (yearsEducationRank > maxComplexity) yearsEducationRank = maxComplexity;\n\n    let hourlyWageRank = hourlyWage < minWage ? minWage : hourlyWage;\n    if (hourlyWageRank > maxWage) hourlyWageRank = maxWage;\n\n    response.industries[socCode] = {\n      naicsId: parseInt(socCode, 10) || 0,\n      sumNumCompany: 0,\n      sumNumEmploy: occData.totalEmploy,\n      avgNumCompany: 0,\n      avgNumEmploy: 0,\n      yearsEducation,\n      hourlyWage,\n      yearsEducationRank,\n      hourlyWageRank,\n    };\n  }\n\n  // Build per-cluster (major group) data - mirrors industries for our data\n  for (const mg of blsData.majorGroups) {\n    const matchingOccs = blsData.occupations\n      .filter((o) => o.majorGroupId === mg.groupId)\n      .map((o) => byOccupation[o.socCode])\n      .filter(Boolean);\n\n    const avgWage = matchingOccs.length > 0\n      ? matchingOccs.reduce((s, o) => s + o.avgWage, 0) / matchingOccs.length\n      : 0;\n    const avgComplexity = matchingOccs.length > 0\n      ? matchingOccs.reduce((s, o) => s + o.avgComplexity, 0) / matchingOccs.length\n      : 0;\n\n    let yearsEducationRank = avgComplexity < minComplexity ? minComplexity : avgComplexity;\n    if (yearsEducationRank > maxComplexity) yearsEducationRank = maxComplexity;\n\n    let hourlyWageRank = avgWage < minWage ? minWage : avgWage;\n    if (hourlyWageRank > maxWage) hourlyWageRank = maxWage;\n\n    response.clusters[mg.groupId] = {\n      clusterId: parseInt(mg.groupId, 10),\n      sumNumCompany: 0,\n      sumNumEmploy: 0,\n      avgNumCompany: 0,\n      avgNumEmploy: 0,\n      yearsEducation: avgComplexity,\n      hourlyWage: avgWage,\n      yearsEducationRank,\n      hourlyWageRank,\n    };\n  }\n\n  return { loading: false, error: undefined, data: response };\n};\n\nexport default useAggregateIndustryMap;\n","import React from \"react\";\nimport { backgroundMedium } from \"../../styling/styleUtils\";\nimport styled, { keyframes } from \"styled-components/macro\";\nimport { rgba } from \"polished\";\n\nconst fadeIn = keyframes`\n  0% {\n    opacity: 0;\n    transform: scale(0.5);\n  }\n\n  100% {\n    opacity: 1;\n    transform: scale(1);\n  }\n`;\n\nconst Root = styled.div`\n  position: absolute;\n  top: 1rem;\n  left: 0;\n  right: 0;\n  pointer-events: none;\n  width: 100%;\n  display: flex;\n  justify-content: center;\n  z-index: 50;\n`;\n\nconst Content = styled.div`\n  background-color: ${rgba(backgroundMedium, 0.9)};\n  box-shadow: 0px 0px 5px 0px rgba(0, 0, 0, 0.15);\n  padding: 1rem;\n  transform: scale(0.5);\n  opacity: 0;\n  animation: ${fadeIn} 0.2s ease-in-out 1 forwards;\n  pointer-events: all;\n  position: relative;\n  max-width: 280px;\n`;\n\nconst CloseButton = styled.button`\n  border: none;\n  background-color: transparent;\n  padding: 0.5rem;\n  color: #333;\n  position: absolute;\n  top: 0;\n  right: 0;\n`;\n\ninterface Props {\n  closeError: () => void;\n  children: React.ReactNode;\n  duration?: number;\n}\n\nconst QuickError = (props: Props) => {\n  const { closeError, duration, children } = props;\n\n  setTimeout(closeError, duration ? duration : 3000);\n\n  return (\n    <Root>\n      <Content>\n        {children}\n        <CloseButton onClick={closeError}></CloseButton>\n      </Content>\n    </Root>\n  );\n};\n\nexport default QuickError;\n","import React, { useRef, useEffect, useState } from \"react\";\nimport { useGlobalIndustryMap } from \"../../../hooks/useGlobalIndustriesData\";\nimport {\n  DigitLevel,\n  ClassificationNaicsIndustry,\n  CompositionType,\n} from \"../../../types/graphQL/graphQLTypes\";\nimport { usePrevious } from \"react-use\";\nimport TreeMap, { transformData, Inputs } from \"react-canvas-treemap\";\nimport {\n  sectorColorMap,\n  educationColorRange,\n  wageColorRange,\n} from \"../../../styling/styleUtils\";\nimport { useWindowWidth } from \"../../../contextProviders/appContext\";\nimport styled from \"styled-components/macro\";\nimport noop from \"lodash/noop\";\nimport SimpleError from \"../../transitionStateComponents/SimpleError\";\nimport LoadingBlock, {\n  LoadingOverlay,\n} from \"../../transitionStateComponents/VizLoadingBlock\";\nimport Tooltip from \"../../general/Tooltip\";\nimport ErrorBoundary from \"../ErrorBoundary\";\nimport useFluent from \"../../../hooks/useFluent\";\nimport { numberWithCommas } from \"../../../Utils\";\nimport { breakPoints } from \"../../../styling/GlobalGrid\";\nimport { Indicator } from \"../../general/PreChartRow\";\nimport SimpleTextLoading from \"../../transitionStateComponents/SimpleTextLoading\";\nimport {\n  RapidTooltipRoot,\n  getStandardTooltip,\n} from \"../../../utilities/rapidTooltip\";\nimport { rgba } from \"polished\";\nimport { ColorBy } from \"../../../routing/routes\";\nimport { useAggregateIndustryMap } from \"../../../hooks/useAggregateIndustriesData\";\nimport { defaultYear, formatNumber } from \"../../../Utils\";\nimport { scaleLinear } from \"d3-scale\";\nimport QuickError from \"../../transitionStateComponents/QuickError\";\nimport { useStaticData } from \"../../../dataProvider\";\n\nconst Root = styled.div`\n  width: 100%;\n  height: 100%;\n  grid-column: 1;\n  grid-row: 2;\n  position: relative;\n\n  @media ${breakPoints.small} {\n    grid-row: 3;\n    grid-column: 1;\n  }\n`;\n\nconst TreeMapContainer = styled.div`\n  position: absolute;\n  top: 0;\n  left: 0;\n`;\n\ninterface EconomicCompositionIndustry {\n  id: string;\n  naicsId: string;\n  numCompany: number | null;\n  numEmploy: number | null;\n}\n\ninterface SuccessResponse {\n  industries: EconomicCompositionIndustry[];\n}\n\n/**\n * Static data replacement for the ECONOMIC_COMPOSITION_QUERY.\n * Reads from StaticDataProvider instead of GraphQL.\n */\nconst useEconomicCompositionQuery = (variables: { cityId: string; year: number }) => {\n  const { data: blsData, loading, error } = useStaticData();\n\n  if (!blsData) {\n    return { loading, error, data: undefined };\n  }\n\n  const regionData = blsData.regionData[variables.cityId];\n  if (!regionData) {\n    return { loading: false, error: undefined, data: { industries: [] } as SuccessResponse };\n  }\n\n  const yearData = regionData[variables.year.toString()];\n  if (!yearData) {\n    return { loading: false, error: undefined, data: { industries: [] } as SuccessResponse };\n  }\n\n  const industries: EconomicCompositionIndustry[] = yearData.map((d) => ({\n    id: d.socCode,\n    naicsId: d.socCode,\n    numCompany: d.gdp,      // GDP maps to \"companies/establishments\"\n    numEmploy: d.totEmp,     // Employment maps directly\n  }));\n\n  return { loading: false, error: undefined, data: { industries } as SuccessResponse };\n};\n\nexport { useEconomicCompositionQuery };\n\ninterface Props {\n  cityId: string;\n  year: number;\n  highlighted: string | undefined;\n  clearHighlighted: () => void;\n  digitLevel: DigitLevel;\n  colorBy: ColorBy;\n  compositionType: CompositionType;\n  hiddenSectors: ClassificationNaicsIndustry[\"id\"][];\n  setIndicatorContent: (indicator: Indicator) => void;\n}\n\nconst CompositionTreeMap = (props: Props) => {\n  const {\n    cityId,\n    year,\n    digitLevel,\n    compositionType,\n    highlighted,\n    hiddenSectors,\n    colorBy,\n    setIndicatorContent,\n  } = props;\n  const industryMap = useGlobalIndustryMap();\n  const getString = useFluent();\n  const windowDimensions = useWindowWidth();\n  const rootRef = useRef<HTMLDivElement | null>(null);\n  const tooltipContentRef = useRef<HTMLDivElement | null>(null);\n  const highlightedTooltipRef = useRef<HTMLDivElement | null>(null);\n  const [dimensions, setDimensions] = useState<\n    { width: number; height: number } | undefined\n  >(undefined);\n  const { loading, error, data } = useEconomicCompositionQuery({\n    cityId,\n    year,\n  });\n  const aggregateIndustryDataMap = useAggregateIndustryMap({\n    level: digitLevel,\n    year: defaultYear,\n  });\n\n  useEffect(() => {\n    const node = rootRef.current;\n    if (node) {\n      setTimeout(() => {\n        const { width, height } = node.getBoundingClientRect();\n        setDimensions({ width, height });\n      }, 0);\n    }\n  }, [rootRef, windowDimensions]);\n\n  const prevData = usePrevious(data);\n  let dataToUse: SuccessResponse | undefined;\n  if (data) {\n    dataToUse = data;\n  } else if (prevData) {\n    dataToUse = prevData;\n  } else {\n    dataToUse = undefined;\n  }\n\n  const indicator: Indicator = {\n    text: undefined,\n    tooltipContent: undefined,\n  };\n  let output: React.ReactElement<any> | null;\n  if (\n    industryMap.loading ||\n    !dimensions ||\n    (loading && prevData === undefined) ||\n    ((colorBy === ColorBy.education || colorBy === ColorBy.wage) &&\n      aggregateIndustryDataMap.loading)\n  ) {\n    indicator.text = (\n      <>\n        {getString(\"global-ui-sample-size\") + \": \"}\n        <SimpleTextLoading />\n      </>\n    );\n    output = <LoadingBlock />;\n  } else if (error !== undefined) {\n    indicator.text = getString(\"global-ui-sample-size\") + \": \";\n    output = (\n      <LoadingOverlay>\n        <SimpleError />\n      </LoadingOverlay>\n    );\n    console.error(error);\n  } else if (industryMap.error !== undefined) {\n    indicator.text = getString(\"global-ui-sample-size\") + \": \";\n    output = (\n      <LoadingOverlay>\n        <SimpleError />\n      </LoadingOverlay>\n    );\n    console.error(industryMap.error);\n  } else if (\n    aggregateIndustryDataMap.error !== undefined &&\n    (colorBy === ColorBy.education || colorBy === ColorBy.wage)\n  ) {\n    indicator.text = getString(\"global-ui-sample-size\") + \": \";\n    output = (\n      <LoadingOverlay>\n        <SimpleError />\n      </LoadingOverlay>\n    );\n    console.error(aggregateIndustryDataMap.error);\n  } else if (dataToUse !== undefined) {\n    const { industries } = dataToUse;\n    const treeMapData: Inputs[\"data\"] = [];\n    let total = 0;\n    industries.forEach(({ naicsId, numCompany, numEmploy }) => {\n      const industry = industryMap.data[naicsId];\n      if (industry && industry.level !== null && industry.level <= digitLevel) {\n        const { name, naicsIdTopParent } = industry;\n        if (!hiddenSectors.includes(naicsIdTopParent.toString())) {\n          const companies = numCompany ? numCompany : 0;\n          const employees = numEmploy ? numEmploy : 0;\n          total =\n            compositionType === CompositionType.Companies\n              ? total + companies\n              : total + employees;\n          const value =\n            compositionType === CompositionType.Companies\n              ? companies\n              : employees;\n          treeMapData.push({\n            id: naicsId,\n            value,\n            title: name ? name : \"\",\n            topLevelParentId: naicsIdTopParent.toString(),\n          });\n        }\n      }\n    });\n    let colorScale: (val: number) => string | undefined;\n    if (\n      colorBy === ColorBy.education &&\n      aggregateIndustryDataMap.data !== undefined\n    ) {\n      colorScale = scaleLinear()\n        .domain([\n          aggregateIndustryDataMap.data.globalMinMax.minYearsEducation,\n          aggregateIndustryDataMap.data.globalMinMax.medianYearsEducation,\n          aggregateIndustryDataMap.data.globalMinMax.maxYearsEducation,\n        ])\n        .range(educationColorRange as any) as any;\n    } else if (\n      colorBy === ColorBy.wage &&\n      aggregateIndustryDataMap.data !== undefined\n    ) {\n      colorScale = scaleLinear()\n        .domain([\n          aggregateIndustryDataMap.data.globalMinMax.minHourlyWage,\n          aggregateIndustryDataMap.data.globalMinMax.medianHourlyWage,\n          aggregateIndustryDataMap.data.globalMinMax.maxHourlyWage,\n        ])\n        .range(wageColorRange as any) as any;\n    } else {\n      colorScale = () => undefined;\n    }\n    for (const i in treeMapData) {\n      if (treeMapData[i] !== undefined) {\n        let fill: string | undefined;\n        if (\n          (colorBy === ColorBy.education || colorBy === ColorBy.wage) &&\n          aggregateIndustryDataMap.data\n        ) {\n          const target =\n            aggregateIndustryDataMap.data.industries[treeMapData[i].id];\n          if (target) {\n            const targetValue =\n              colorBy === ColorBy.education\n                ? target.yearsEducationRank\n                : target.hourlyWageRank;\n            fill = colorScale(targetValue);\n          }\n        }\n        treeMapData[i].fill = fill;\n      }\n    }\n    if (!treeMapData.length) {\n      indicator.text = getString(\"global-ui-sample-size\") + \": \";\n      output = (\n        <LoadingOverlay>\n          <SimpleError\n            fluentMessageId={\"global-ui-error-no-sectors-selected\"}\n          />\n        </LoadingOverlay>\n      );\n    } else {\n      const transformed = transformData({\n        data: treeMapData,\n        width: dimensions.width,\n        height: dimensions.height,\n        colorMap: sectorColorMap,\n      });\n      const loadingOverlay = loading ? <LoadingBlock /> : null;\n      const onHover = (id: string) => {\n        const node = tooltipContentRef.current;\n        const industry = industryMap.data[id];\n        const industryWithData = industries.find(\n          ({ naicsId }) => naicsId === id,\n        );\n        if (industry && industryWithData && node) {\n          const color = sectorColorMap.find(\n            (c) => c.id === industry.naicsIdTopParent.toString(),\n          );\n          const numCompany = industryWithData.numCompany\n            ? industryWithData.numCompany\n            : 0;\n          const numEmploy = industryWithData.numEmploy\n            ? industryWithData.numEmploy\n            : 0;\n          const value =\n            compositionType === CompositionType.Employees\n              ? numEmploy\n              : numCompany;\n          const share = (value / total) * 100;\n          const shareString = share < 0.01 ? \"<0.01%\" : share.toFixed(2) + \"%\";\n          const rows = [\n            [getString(\"global-ui-naics-code\") + \":\", industry.code],\n            [getString(\"global-ui-year\") + \":\", year.toString()],\n            [\n              getString(\"tooltip-share-generic\", { value: compositionType }) +\n                \":\",\n              shareString,\n            ],\n          ];\n          if (compositionType === CompositionType.Employees) {\n            rows.push([\n              getString(\"tooltip-number-generic\", { value: compositionType }) +\n                \":\",\n              numberWithCommas(formatNumber(Math.round(value))),\n            ]);\n          }\n          if (\n            (colorBy === ColorBy.education || colorBy === ColorBy.wage) &&\n            aggregateIndustryDataMap.data\n          ) {\n            const target =\n              aggregateIndustryDataMap.data.industries[industry.naicsId];\n            if (target) {\n              const targetValue =\n                colorBy === ColorBy.education\n                  ? target.yearsEducation\n                  : target.hourlyWage;\n              rows.push([\n                getString(\"global-formatted-color-by\", { type: colorBy }),\n                (colorBy === ColorBy.wage ? \"$\" : \"\") + targetValue.toFixed(2),\n              ]);\n            }\n          }\n          node.innerHTML = getStandardTooltip({\n            title: industry.name ? industry.name : \"\",\n            color: color ? rgba(color.color, 0.3) : \"#fff\",\n            rows,\n            boldColumns: [1, 2],\n          });\n        }\n      };\n\n      const highlightedCell = transformed.treeMapCells.find(\n        (d) => d.id === highlighted,\n      );\n\n      if (highlighted && highlightedCell) {\n        const node = highlightedTooltipRef.current;\n        const industry = industryMap.data[highlighted];\n        const industryWithData = industries.find(\n          ({ naicsId }) => naicsId === highlighted,\n        );\n        if (industry && industryWithData && node) {\n          const color = sectorColorMap.find(\n            (c) => c.id === industry.naicsIdTopParent.toString(),\n          );\n          const numCompany = industryWithData.numCompany\n            ? industryWithData.numCompany\n            : 0;\n          const numEmploy = industryWithData.numEmploy\n            ? industryWithData.numEmploy\n            : 0;\n          const value =\n            compositionType === CompositionType.Employees\n              ? numEmploy\n              : numCompany;\n          const share = (value / total) * 100;\n          const shareString = share < 0.01 ? \"<0.01%\" : share.toFixed(2) + \"%\";\n          const rows = [\n            [getString(\"global-ui-naics-code\") + \":\", industry.code],\n            [getString(\"global-ui-year\") + \":\", year.toString()],\n            [\n              getString(\"tooltip-share-generic\", { value: compositionType }) +\n                \":\",\n              shareString,\n            ],\n          ];\n          if (compositionType === CompositionType.Employees) {\n            rows.push([\n              getString(\"tooltip-number-generic\", { value: compositionType }) +\n                \":\",\n              numberWithCommas(formatNumber(Math.round(value))),\n            ]);\n          }\n          if (\n            (colorBy === ColorBy.education || colorBy === ColorBy.wage) &&\n            aggregateIndustryDataMap.data\n          ) {\n            const target =\n              aggregateIndustryDataMap.data.industries[industry.naicsId];\n            if (target) {\n              const targetValue =\n                colorBy === ColorBy.education\n                  ? target.yearsEducation\n                  : target.hourlyWage;\n              rows.push([\n                getString(\"global-formatted-color-by\", { type: colorBy }),\n                (colorBy === ColorBy.wage ? \"$\" : \"\") + targetValue.toFixed(2),\n              ]);\n            }\n          }\n          node.innerHTML =\n            getStandardTooltip({\n              title: industry.name ? industry.name : \"\",\n              color: color ? rgba(color.color, 0.3) : \"#fff\",\n              rows,\n              boldColumns: [1, 2],\n            }) +\n            `\n           <div style=\"position:absolute;top: -5px;right:2px;font-size:1.1rem;\"></div>\n          `;\n          node.style.position = \"absolute\";\n          node.style.pointerEvents = \"all\";\n          node.style.cursor = \"pointer\";\n          node.style.display = \"block\";\n          node.style.left =\n            highlightedCell.x0 +\n            (highlightedCell.x1 - highlightedCell.x0) / 2 +\n            \"px\";\n          node.style.top = highlightedCell.y0 + 16 + \"px\";\n          const clearHighlighted = () => {\n            props.clearHighlighted();\n            node.removeEventListener(\"click\", clearHighlighted);\n          };\n          node.addEventListener(\"click\", clearHighlighted);\n        }\n      } else {\n        const node = highlightedTooltipRef.current;\n        if (node) {\n          node.style.display = \"none\";\n        }\n      }\n\n      const highlightErrorPopup =\n        highlighted && !highlightedCell ? (\n          <QuickError closeError={props.clearHighlighted}>\n            {getString(\"global-ui-error-industry-not-in-data-set\")}\n          </QuickError>\n        ) : null;\n\n      indicator.text = loading ? (\n        <>\n          {getString(\"global-ui-sample-size\") + \": \"}\n          <SimpleTextLoading />\n        </>\n      ) : (\n        `${getString(\"global-ui-sample-size\")}: ${numberWithCommas(formatNumber(Math.round(total)))} ` +\n        getString(\"global-ui-estimated-total-employees\")\n      );\n      indicator.tooltipContent = getString(\"glossary-total-shown\");\n      const fallbackTitle =\n        \"Treemap displaying the economic composition of the selected region \" +\n        \"based on the number of \" +\n        compositionType +\n        \" found within the region. \" +\n        \"The top values are as follows: \";\n      output = (\n        <TreeMapContainer>\n          <Tooltip\n            explanation={<div ref={tooltipContentRef} />}\n            cursor={\"default\"}\n            overrideStyles={true}\n          >\n            <ErrorBoundary>\n              <TreeMap\n                highlighted={highlighted}\n                cells={transformed.treeMapCells}\n                numCellsTier={0}\n                chartContainerWidth={dimensions.width}\n                chartContainerHeight={dimensions.height}\n                onCellClick={noop}\n                onMouseOverCell={onHover}\n                onMouseLeaveChart={noop}\n                fallbackTitle={fallbackTitle}\n              />\n            </ErrorBoundary>\n          </Tooltip>\n          {loadingOverlay}\n          {highlightErrorPopup}\n        </TreeMapContainer>\n      );\n    }\n  } else {\n    output = null;\n  }\n\n  setIndicatorContent(indicator);\n  return (\n    <>\n      <Root ref={rootRef}>\n        {output}\n        <RapidTooltipRoot ref={highlightedTooltipRef} />\n      </Root>\n    </>\n  );\n};\n\nexport default React.memo(CompositionTreeMap);\n","import { useStaticData } from '../dataProvider';\nimport { Datum as SearchDatum } from 'react-panel-search';\n\n/**\n * Adapter hook: returns SOC major groups as \"clusters\".\n *\n * Key mapping:\n *   clusterId -> majorGroupId\n *   clusterIdTopParent -> majorGroupId (self, since flat)\n *   name -> majorGroupName\n */\n\ninterface Cluster {\n  clusterId: string;\n  parentId: number | null;\n  clusterIdTopParent: number | null;\n  level: number | null;\n  name: string | null;\n  tradable: boolean;\n  id: string;\n}\n\ninterface SuccessResponse {\n  clusters: Cluster[];\n}\n\ninterface ClusterMap {\n  [id: string]: Cluster;\n}\n\nconst useGlobalClusterData = () => {\n  const { data: blsData, loading, error } = useStaticData();\n\n  if (!blsData) {\n    return { loading, error, data: undefined };\n  }\n\n  const clusters: Cluster[] = blsData.majorGroups.map((mg) => ({\n    clusterId: mg.groupId,\n    parentId: null,\n    clusterIdTopParent: parseInt(mg.groupId, 10),\n    level: 1,\n    name: mg.name,\n    tradable: true,\n    id: mg.groupId,\n  }));\n\n  const data: SuccessResponse = { clusters };\n  return { loading: false, error: undefined, data };\n};\n\nconst clusterDataToHierarchicalTreeData = (\n  data: SuccessResponse | undefined,\n) => {\n  const response: SearchDatum[] = [];\n  if (data !== undefined) {\n    const { clusters } = data;\n    clusters.forEach(({ clusterId, name, level }) => {\n      if (name !== null && level !== null) {\n        response.push({\n          id: clusterId,\n          title: name,\n          level,\n          parent_id: null,\n        });\n      }\n    });\n  }\n  return response;\n};\n\nexport const useGlobalClusterHierarchicalTreeData = () => {\n  const { loading, error, data: responseData } = useGlobalClusterData();\n  const data = clusterDataToHierarchicalTreeData(responseData);\n  return { loading, error, data };\n};\n\nconst clusterDataToMap = (\n  data: SuccessResponse | undefined,\n) => {\n  const response: ClusterMap = {};\n  if (data !== undefined) {\n    const { clusters } = data;\n    clusters.forEach((cluster) => {\n      response[cluster.clusterId] = cluster;\n    });\n  }\n  return response;\n};\n\ninterface Options {\n  skipLevel2?: boolean;\n}\n\nexport const useGlobalClusterMap = (_options?: Options) => {\n  const { loading, error, data: responseData } = useGlobalClusterData();\n  const data = clusterDataToMap(responseData);\n  return { loading, error, data };\n};\n\nexport default useGlobalClusterData;\n","import React, { useRef, useEffect, useState } from \"react\";\nimport { useGlobalClusterMap } from \"../../../hooks/useGlobalClusterData\";\nimport { useStaticData } from \"../../../dataProvider\";\nimport {\n  DigitLevel,\n  CompositionType,\n  ClassificationNaicsCluster,\n} from \"../../../types/graphQL/graphQLTypes\";\nimport { usePrevious } from \"react-use\";\nimport TreeMap, { transformData, Inputs } from \"react-canvas-treemap\";\nimport { clusterColorMap } from \"../../../styling/styleUtils\";\nimport { useWindowWidth } from \"../../../contextProviders/appContext\";\nimport styled from \"styled-components/macro\";\nimport noop from \"lodash/noop\";\nimport SimpleError from \"../../../components/transitionStateComponents/SimpleError\";\nimport LoadingBlock, {\n  LoadingOverlay,\n} from \"../../transitionStateComponents/VizLoadingBlock\";\nimport Tooltip from \"../../general/Tooltip\";\nimport ErrorBoundary from \"../ErrorBoundary\";\nimport useFluent from \"../../../hooks/useFluent\";\nimport { numberWithCommas } from \"../../../Utils\";\nimport { breakPoints } from \"../../../styling/GlobalGrid\";\nimport { Indicator } from \"../../../components/general/PreChartRow\";\nimport SimpleTextLoading from \"../../../components/transitionStateComponents/SimpleTextLoading\";\nimport {\n  RapidTooltipRoot,\n  getStandardTooltip,\n} from \"../../../utilities/rapidTooltip\";\nimport { ColorBy, ClusterLevel } from \"../../../routing/routes\";\nimport { scaleSymlog, scaleLinear } from \"d3-scale\";\nimport { extent } from \"d3-array\";\nimport {\n  intensityColorRange,\n  educationColorRange,\n  wageColorRange,\n} from \"../../../styling/styleUtils\";\nimport { defaultYear, formatNumber } from \"../../../Utils\";\nimport { useAggregateIndustryMap } from \"../../../hooks/useAggregateIndustriesData\";\nimport { rgba } from \"polished\";\nimport QuickError from \"../../transitionStateComponents/QuickError\";\n\nconst Root = styled.div`\n  width: 100%;\n  height: 100%;\n  grid-column: 1;\n  grid-row: 2;\n  position: relative;\n\n  @media ${breakPoints.small} {\n    grid-row: 3;\n    grid-column: 1;\n  }\n`;\n\nconst TreeMapContainer = styled.div`\n  position: absolute;\n  top: 0;\n  left: 0;\n`;\n\ninterface ClusterYearData {\n  clusterId: string;\n  level: number | null;\n  numCompany: number | null;\n  numEmploy: number | null;\n  rcaNumCompany: number | null;\n  rcaNumEmploy: number | null;\n}\n\ninterface SuccessResponse {\n  clusters: ClusterYearData[];\n}\n\ninterface Variables {\n  cityId: string;\n  year: number;\n}\n\nexport const useClusterCompositionQuery = (variables: Variables) => {\n  const { data: blsData, loading: blsLoading } = useStaticData();\n\n  if (blsLoading || !blsData) {\n    return { loading: true, error: undefined, data: undefined };\n  }\n\n  const regionData = blsData.regionData[variables.cityId];\n  if (!regionData) {\n    return { loading: false, error: undefined, data: undefined };\n  }\n\n  const yearData = regionData[variables.year] || regionData[defaultYear];\n  if (!yearData) {\n    return { loading: false, error: undefined, data: undefined };\n  }\n\n  // Build socCode  majorGroupId lookup\n  const socToMajorGroup: Record<string, string> = {};\n  blsData.occupations.forEach((o: any) => {\n    socToMajorGroup[o.socCode] = o.majorGroupId;\n  });\n\n  // Aggregate by major group\n  const majorGroupAgg: Record<string, { employ: number; gdp: number }> = {};\n  yearData.forEach((occ) => {\n    const mgId = socToMajorGroup[occ.socCode] || \"00\";\n    if (!majorGroupAgg[mgId]) {\n      majorGroupAgg[mgId] = { employ: 0, gdp: 0 };\n    }\n    majorGroupAgg[mgId].employ += occ.totEmp;\n    majorGroupAgg[mgId].gdp += occ.gdp;\n  });\n\n  const clusters: ClusterYearData[] = Object.entries(majorGroupAgg).map(\n    ([mgId, agg]) => ({\n      clusterId: mgId,\n      level: 1,\n      numCompany: agg.gdp,\n      numEmploy: agg.employ,\n      rcaNumCompany: 1.0,\n      rcaNumEmploy: 1.0,\n    }),\n  );\n\n  return {\n    loading: false,\n    error: undefined,\n    data: { clusters } as SuccessResponse,\n  };\n};\n\ninterface Props {\n  cityId: string;\n  year: number;\n  highlighted: string | undefined;\n  colorBy: ColorBy;\n  compositionType: CompositionType;\n  hiddenClusters: ClassificationNaicsCluster[\"id\"][];\n  clusterLevel: ClusterLevel;\n  setIndicatorContent: (indicator: Indicator) => void;\n  clearHighlighted: () => void;\n}\n\nconst CompositionTreeMap = (props: Props) => {\n  const {\n    cityId,\n    year,\n    compositionType,\n    highlighted,\n    clusterLevel,\n    setIndicatorContent,\n    colorBy,\n    hiddenClusters,\n  } = props;\n  const clusterMap = useGlobalClusterMap();\n  const getString = useFluent();\n  const windowDimensions = useWindowWidth();\n  const rootRef = useRef<HTMLDivElement | null>(null);\n  const tooltipContentRef = useRef<HTMLDivElement | null>(null);\n  const highlightedTooltipRef = useRef<HTMLDivElement | null>(null);\n  const [dimensions, setDimensions] = useState<\n    { width: number; height: number } | undefined\n  >(undefined);\n  const { loading, error, data } = useClusterCompositionQuery({ cityId, year });\n  const aggregateIndustryDataMap = useAggregateIndustryMap({\n    level: DigitLevel.Six,\n    year: defaultYear,\n    clusterLevel: parseInt(clusterLevel, 10),\n  });\n\n  useEffect(() => {\n    const node = rootRef.current;\n    if (node) {\n      setTimeout(() => {\n        const { width, height } = node.getBoundingClientRect();\n        setDimensions({ width, height });\n      }, 0);\n    }\n  }, [rootRef, windowDimensions]);\n\n  const prevData = usePrevious(data);\n  let dataToUse: SuccessResponse | undefined;\n  if (data) {\n    dataToUse = data;\n  } else if (prevData) {\n    dataToUse = prevData;\n  } else {\n    dataToUse = undefined;\n  }\n\n  const indicator: Indicator = {\n    text: undefined,\n    tooltipContent: undefined,\n  };\n  let output: React.ReactElement<any> | null;\n  if (\n    clusterMap.loading ||\n    !dimensions ||\n    (loading && prevData === undefined) ||\n    ((colorBy === ColorBy.education || colorBy === ColorBy.wage) &&\n      aggregateIndustryDataMap.loading)\n  ) {\n    indicator.text = (\n      <>\n        {getString(\"global-ui-total\") + \": \"}\n        <SimpleTextLoading />\n      </>\n    );\n    output = <LoadingBlock />;\n  } else if (error !== undefined) {\n    indicator.text = getString(\"global-ui-total\") + \": \\u2015\";\n    output = (\n      <LoadingOverlay>\n        <SimpleError />\n      </LoadingOverlay>\n    );\n    console.error(error);\n  } else if (clusterMap.error !== undefined) {\n    indicator.text = getString(\"global-ui-total\") + \": \\u2015\";\n    output = (\n      <LoadingOverlay>\n        <SimpleError />\n      </LoadingOverlay>\n    );\n    console.error(clusterMap.error);\n  } else if (\n    aggregateIndustryDataMap.error !== undefined &&\n    (colorBy === ColorBy.education || colorBy === ColorBy.wage)\n  ) {\n    indicator.text = getString(\"global-ui-total\") + \": \\u2015\";\n    output = (\n      <LoadingOverlay>\n        <SimpleError />\n      </LoadingOverlay>\n    );\n    console.error(aggregateIndustryDataMap.error);\n  } else if (dataToUse !== undefined) {\n    const clusters = dataToUse.clusters.filter(\n      (c) => c.level && c.level.toString() === clusterLevel,\n    );\n    const treeMapData: Inputs[\"data\"] = [];\n\n    const allRCAValues = clusters.map((c) => {\n      if (compositionType === CompositionType.Employees) {\n        return c.rcaNumEmploy ? c.rcaNumEmploy : 0;\n      } else {\n        return c.rcaNumCompany ? c.rcaNumCompany : 0;\n      }\n    });\n\n    const minMax = extent(allRCAValues) as [number, number];\n\n    let total = 0;\n    clusters.forEach(({ clusterId, numCompany, numEmploy }) => {\n      const cluster = clusterMap.data[clusterId];\n      if (\n        cluster &&\n        cluster.level &&\n        cluster.level.toString() === clusterLevel\n      ) {\n        const { name, clusterIdTopParent } = cluster;\n        if (\n          clusterIdTopParent &&\n          !hiddenClusters.includes(clusterIdTopParent.toString())\n        ) {\n          const companies = numCompany ? numCompany : 0;\n          const employees = numEmploy ? numEmploy : 0;\n          total =\n            compositionType === CompositionType.Companies\n              ? total + companies\n              : total + employees;\n          const value =\n            compositionType === CompositionType.Companies\n              ? companies\n              : employees;\n          treeMapData.push({\n            id: clusterId,\n            value,\n            title: name ? name : \"\",\n            topLevelParentId: clusterIdTopParent\n              ? clusterIdTopParent.toString()\n              : clusterId.toString(),\n          });\n        }\n      }\n    });\n\n    let colorScale: (val: number) => string | undefined;\n    if (\n      colorBy === ColorBy.education &&\n      aggregateIndustryDataMap.data !== undefined\n    ) {\n      colorScale = scaleLinear()\n        .domain([\n          aggregateIndustryDataMap.data.clusterMinMax.minYearsEducation,\n          aggregateIndustryDataMap.data.clusterMinMax.medianYearsEducation,\n          aggregateIndustryDataMap.data.clusterMinMax.maxYearsEducation,\n        ])\n        .range(educationColorRange as any) as any;\n    } else if (\n      colorBy === ColorBy.wage &&\n      aggregateIndustryDataMap.data !== undefined\n    ) {\n      colorScale = scaleLinear()\n        .domain([\n          aggregateIndustryDataMap.data.clusterMinMax.minHourlyWage,\n          aggregateIndustryDataMap.data.clusterMinMax.medianHourlyWage,\n          aggregateIndustryDataMap.data.clusterMinMax.maxHourlyWage,\n        ])\n        .range(wageColorRange as any) as any;\n    } else {\n      colorScale = scaleSymlog()\n        .domain(minMax)\n        .range(intensityColorRange as any) as unknown as (\n        value: number,\n      ) => string;\n    }\n    for (const i in treeMapData) {\n      if (treeMapData[i] !== undefined) {\n        let fill: string | undefined;\n        const clusterIndustryDatum =\n          aggregateIndustryDataMap.data.clusters[treeMapData[i].id];\n        if (\n          colorBy === ColorBy.education &&\n          aggregateIndustryDataMap.data !== undefined\n        ) {\n          if (clusterIndustryDatum) {\n            fill = colorScale(\n              clusterIndustryDatum.yearsEducationRank,\n            ) as string;\n          } else {\n            fill = \"gray\";\n          }\n        } else if (\n          colorBy === ColorBy.wage &&\n          aggregateIndustryDataMap.data !== undefined\n        ) {\n          if (clusterIndustryDatum) {\n            fill = colorScale(clusterIndustryDatum.hourlyWageRank) as string;\n          } else {\n            fill = \"gray\";\n          }\n        } else {\n          fill = undefined;\n        }\n        treeMapData[i].fill = fill;\n      }\n    }\n\n    if (!treeMapData.length) {\n      indicator.text = getString(\"global-ui-total\") + \": \\u2015\";\n      output = (\n        <LoadingOverlay>\n          <SimpleError\n            fluentMessageId={\"global-ui-error-no-sectors-selected\"}\n          />\n        </LoadingOverlay>\n      );\n    } else {\n      const transformed = transformData({\n        data: treeMapData,\n        width: dimensions.width,\n        height: dimensions.height,\n        colorMap: clusterColorMap,\n      });\n      const loadingOverlay = loading ? <LoadingBlock /> : null;\n      const onHover = (id: string) => {\n        const node = tooltipContentRef.current;\n        const cluster = clusterMap.data[id];\n        const clusterWithData = clusters.find(\n          ({ clusterId }) => clusterId === id,\n        );\n        if (cluster && clusterWithData && node) {\n          const numCompany = clusterWithData.numCompany\n            ? clusterWithData.numCompany\n            : 0;\n          const numEmploy = clusterWithData.numEmploy\n            ? clusterWithData.numEmploy\n            : 0;\n          const value =\n            compositionType === CompositionType.Employees\n              ? numEmploy\n              : numCompany;\n          const share = (value / total) * 100;\n          const shareString = share < 0.01 ? \"<0.01%\" : share.toFixed(2) + \"%\";\n          const color = clusterColorMap.find(\n            (c) =>\n              cluster.clusterIdTopParent &&\n              c.id === cluster.clusterIdTopParent.toString(),\n          );\n          const rows = [\n            [getString(\"global-ui-year\") + \":\", year.toString()],\n            [\n              getString(\"tooltip-share-generic\", { value: compositionType }) +\n                \":\",\n              shareString,\n            ],\n          ];\n          if (compositionType === CompositionType.Employees) {\n            rows.push([\n              getString(\"tooltip-number-generic\", { value: compositionType }) +\n                \":\",\n              numberWithCommas(formatNumber(Math.round(value))),\n            ]);\n          }\n          if (\n            (colorBy === ColorBy.education || colorBy === ColorBy.wage) &&\n            aggregateIndustryDataMap.data\n          ) {\n            const target =\n              aggregateIndustryDataMap.data.clusters[cluster.clusterId];\n            if (target) {\n              const targetValue =\n                colorBy === ColorBy.education\n                  ? target.yearsEducation\n                  : target.hourlyWage;\n              rows.push([\n                getString(\"global-formatted-color-by\", { type: colorBy }),\n                (colorBy === ColorBy.wage ? \"$\" : \"\") + targetValue.toFixed(2),\n              ]);\n            }\n          }\n          node.innerHTML = getStandardTooltip({\n            title: cluster.name ? cluster.name : \"\",\n            color: color ? rgba(color.color, 0.3) : \"#fff\",\n            rows,\n            boldColumns: [1, 2],\n          });\n        }\n      };\n\n      const highlightedCell = transformed.treeMapCells.find(\n        (d) => d.id === highlighted,\n      );\n\n      if (highlighted && highlightedCell) {\n        const node = highlightedTooltipRef.current;\n        const cluster = clusterMap.data[highlighted];\n        const clusterWithData = clusters.find(\n          ({ clusterId }) => clusterId === highlighted,\n        );\n        if (cluster && clusterWithData && node) {\n          const numCompany = clusterWithData.numCompany\n            ? clusterWithData.numCompany\n            : 0;\n          const numEmploy = clusterWithData.numEmploy\n            ? clusterWithData.numEmploy\n            : 0;\n          const value =\n            compositionType === CompositionType.Employees\n              ? numEmploy\n              : numCompany;\n          const share = (value / total) * 100;\n          const shareString = share < 0.01 ? \"<0.01%\" : share.toFixed(2) + \"%\";\n          const color = clusterColorMap.find(\n            (c) =>\n              cluster.clusterIdTopParent &&\n              c.id === cluster.clusterIdTopParent.toString(),\n          );\n          const rows = [\n            [getString(\"global-ui-year\") + \":\", year.toString()],\n            [\n              getString(\"tooltip-share-generic\", { value: compositionType }) +\n                \":\",\n              shareString,\n            ],\n          ];\n          if (compositionType === CompositionType.Employees) {\n            rows.push([\n              getString(\"tooltip-number-generic\", { value: compositionType }) +\n                \":\",\n              numberWithCommas(formatNumber(Math.round(value))),\n            ]);\n          }\n          if (\n            (colorBy === ColorBy.education || colorBy === ColorBy.wage) &&\n            aggregateIndustryDataMap.data\n          ) {\n            const target =\n              aggregateIndustryDataMap.data.clusters[cluster.clusterId];\n            if (target) {\n              const targetValue =\n                colorBy === ColorBy.education\n                  ? target.yearsEducation\n                  : target.hourlyWage;\n              rows.push([\n                getString(\"global-formatted-color-by\", { type: colorBy }),\n                (colorBy === ColorBy.wage ? \"$\" : \"\") + targetValue.toFixed(2),\n              ]);\n            }\n          }\n          node.innerHTML =\n            getStandardTooltip({\n              title: cluster.name ? cluster.name : \"\",\n              color: color ? rgba(color.color, 0.3) : \"#fff\",\n              rows,\n              boldColumns: [1, 2],\n            }) +\n            `\n           <div style=\"position:absolute;top: 2px;right:2px;\">\\u00d7</div>\n          `;\n          node.style.position = \"absolute\";\n          node.style.pointerEvents = \"all\";\n          node.style.cursor = \"pointer\";\n          node.style.display = \"block\";\n          node.style.left =\n            highlightedCell.x0 +\n            (highlightedCell.x1 - highlightedCell.x0) / 2 +\n            \"px\";\n          node.style.top = highlightedCell.y0 + 16 + \"px\";\n          const clearHighlighted = () => {\n            props.clearHighlighted();\n            node.removeEventListener(\"click\", clearHighlighted);\n          };\n          node.addEventListener(\"click\", clearHighlighted);\n        }\n      } else {\n        const node = highlightedTooltipRef.current;\n        if (node) {\n          node.style.display = \"none\";\n        }\n      }\n\n      const highlightErrorPopup =\n        highlighted && !highlightedCell ? (\n          <QuickError closeError={props.clearHighlighted}>\n            {getString(\"global-ui-error-industry-not-in-data-set\")}\n          </QuickError>\n        ) : null;\n\n      indicator.text = loading ? (\n        <>\n          {getString(\"global-ui-sample-size\") + \": \"}\n          <SimpleTextLoading />\n        </>\n      ) : (\n        `${getString(\"global-ui-sample-size\")}: ${numberWithCommas(formatNumber(Math.round(total)))} ` +\n        getString(\"global-ui-estimated-total-employees\")\n      );\n      indicator.tooltipContent = getString(\"glossary-total-shown\");\n      const fallbackTitle =\n        \"Treemap displaying the economic composition of the selected city \" +\n        \"based on the number of \" +\n        compositionType +\n        \" found within the city. \" +\n        \"The top values are as follows: \";\n      output = (\n        <TreeMapContainer>\n          <Tooltip\n            explanation={<div ref={tooltipContentRef} />}\n            cursor={\"default\"}\n            overrideStyles={true}\n          >\n            <ErrorBoundary>\n              <TreeMap\n                highlighted={highlighted}\n                cells={transformed.treeMapCells}\n                numCellsTier={0}\n                chartContainerWidth={dimensions.width}\n                chartContainerHeight={dimensions.height}\n                onCellClick={noop}\n                onMouseOverCell={onHover}\n                onMouseLeaveChart={noop}\n                fallbackTitle={fallbackTitle}\n              />\n            </ErrorBoundary>\n          </Tooltip>\n          {loadingOverlay}\n          {highlightErrorPopup}\n        </TreeMapContainer>\n      );\n    }\n  } else {\n    output = null;\n  }\n\n  setIndicatorContent(indicator);\n  return (\n    <>\n      <Root ref={rootRef}>\n        {output}\n        <RapidTooltipRoot ref={highlightedTooltipRef} />\n      </Root>\n    </>\n  );\n};\n\nexport default React.memo(CompositionTreeMap);\n","import React, { useState } from \"react\";\nimport styled from \"styled-components/macro\";\nimport {\n  primaryFont,\n  fadeInAnimation,\n  backgroundDark,\n  secondaryFont,\n  noOutlineOnFocus,\n  radioButtonCss,\n} from \"../../../styling/styleUtils\";\nimport { rgba } from \"polished\";\nimport useFluent from \"../../../hooks/useFluent\";\n\nconst Root = styled.div`\n  position: relative;\n  font-family: ${primaryFont};\n  z-index: 40;\n`;\nconst Button = styled.button`\n  display: flex;\n  align-items: center;\n  margin: 0.1rem;\n  text-transform: uppercase;\n  font-size: 0.65rem;\n  font-size: clamp(0.5rem, 0.75vw, 0.75rem);\n  font-family: ${primaryFont};\n  background-color: #fff;\n  border: none;\n  border-radius: 4px;\n  transition: all 0.2s ease;\n  flex-shrink: 1;\n  flex-grow: 0;\n  flex-basis: 1;\n  width: min-content;\n  height: 28px;\n  white-space: pre-wrap;\n  ${noOutlineOnFocus}\n`;\n\nconst Block = styled.div<{ $checked: boolean }>`\n  width: 0.75rem;\n  height: 0.75rem;\n  width: clamp(0.5rem, 1vw, 1.2rem);\n  height: clamp(0.5rem, 1vw, 1.2rem);\n  margin-right: 0.2rem;\n  position: relative;\n  flex-shrink: 0;\n\n  &:after {\n    ${({ $checked }) => ($checked ? \"content: '';\" : \"\")}\n    width: 0.1rem;\n    border-radius: 80px;\n    height: 180%;\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    right: 0;\n    left: 0;\n    margin: auto;\n    transform: rotate(45deg);\n    background-color: #333;\n  }\n`;\n\nconst HideIsolateRoot = styled.div`\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  transform: translate(0, -100%);\n  pointer-events: none;\n  display: flex;\n  justify-content: center;\n  ${fadeInAnimation}\n`;\n\nconst HideIsolateContent = styled.div`\n  pointer-events: all;\n  margin: auto;\n  position: relative;\n`;\n\nconst HideIsolateText = styled.div`\n  border-radius: 4px;\n  padding: 9px 14px;\n  background-color: ${backgroundDark};\n  color: #fff;\n  border-radius: 4px;\n  box-shadow: 0px 1px 4px 0px rgba(0, 0, 0, 0.25);\n`;\n\nconst ArrowContainer = styled.div`\n  width: 100%;\n  height: 0.5rem;\n  display: flex;\n  justify-content: center;\n`;\n\nconst Arrow = styled.div`\n  width: 0;\n  height: 0;\n  border-left: 0.5rem solid transparent;\n  border-right: 0.5rem solid transparent;\n  border-top: 0.5rem solid ${backgroundDark};\n  position: relative;\n  top: -2px;\n`;\n\nconst Title = styled.div`\n  font-size: 0.9rem;\n  text-transform: uppercase;\n  text-align: center;\n  white-space: nowrap;\n`;\n\nconst Hr = styled.hr`\n  max-width: 5rem;\n  border-top: solid 2px;\n`;\n\nconst CloseButton = styled.button`\n  border: none;\n  padding: 0.2rem;\n  background-color: transparent;\n  color: #fff;\n  position: absolute;\n  top: 0;\n  right: 0;\n`;\n\nconst ButtonWrapper = styled.div`\n  display: flex;\n  justify-content: center;\n`;\nconst HideIsolateButton = styled.button`\n  margin: 8px;\n  text-transform: uppercase;\n  font-family: ${secondaryFont};\n  color: #fff;\n  background-color: transparent;\n  border: none;\n  white-space: nowrap;\n  ${noOutlineOnFocus}\n  ${radioButtonCss}\n\n  &:hover {\n    background-color: #fff;\n    color: ${backgroundDark};\n  }\n`;\n\nexport interface CategoryDatum {\n  id: string;\n  color: string;\n  name: string;\n}\n\ninterface Props {\n  category: CategoryDatum;\n  toggleCategory?: () => void;\n  isolateCategory?: () => void;\n  isHidden: boolean;\n  isIsolated: boolean;\n}\n\nconst Label = ({\n  category: { color, name },\n  toggleCategory,\n  isolateCategory,\n  isHidden,\n  isIsolated,\n}: Props) => {\n  const [isHovered, setIsHovered] = useState<boolean>(false);\n  const getString = useFluent();\n  const toggleButton = toggleCategory ? (\n    <HideIsolateButton $checked={isHidden} onClick={toggleCategory}>\n      {getString(\"global-ui-hide\")}\n    </HideIsolateButton>\n  ) : null;\n  const isolateButton = isolateCategory ? (\n    <HideIsolateButton $checked={isIsolated} onClick={isolateCategory}>\n      {getString(\"global-ui-keep-only\")}\n    </HideIsolateButton>\n  ) : null;\n  const hideIsolateButtons =\n    isolateButton || toggleButton ? (\n      <ButtonWrapper>\n        {toggleButton}\n        {isolateButton}\n      </ButtonWrapper>\n    ) : null;\n  const hideIsolate = isHovered ? (\n    <HideIsolateRoot>\n      <HideIsolateContent>\n        <HideIsolateText>\n          <Title>{name}</Title>\n          <Hr style={{ borderColor: color }} />\n          {hideIsolateButtons}\n        </HideIsolateText>\n        <ArrowContainer>\n          <Arrow />\n        </ArrowContainer>\n        <CloseButton onClick={() => setIsHovered(false)}></CloseButton>\n      </HideIsolateContent>\n    </HideIsolateRoot>\n  ) : null;\n  return (\n    <Root\n      onMouseEnter={() => setIsHovered(true)}\n      onMouseLeave={() => setIsHovered(false)}\n      style={{ zIndex: isHovered ? 150 : undefined }}\n    >\n      <Button\n        style={{\n          backgroundColor: isHovered ? rgba(color, 0.3) : undefined,\n          opacity: isHidden ? 0.5 : undefined,\n        }}\n        onClick={toggleCategory}\n      >\n        <Block style={{ backgroundColor: color }} $checked={isHidden} />\n        {name}\n      </Button>\n      {hideIsolate}\n    </Root>\n  );\n};\n\nexport default Label;\n","import React from \"react\";\nimport styled, { keyframes } from \"styled-components/macro\";\nimport Label, { CategoryDatum } from \"./Label\";\nimport { breakPoints } from \"../../../styling/GlobalGrid\";\nimport { backgroundMedium, baseColor } from \"../../../styling/styleUtils\";\nimport raw from \"raw.macro\";\nimport { joyrideClassNames } from \"../../navigation/secondaryHeader/guide/CitiesGuide\";\n\nconst ReloadImgSrc = raw(\"../../../assets/icons/reload.svg\");\n\nconst RootBase = styled.div`\n  grid-row: 3;\n  display: flex;\n  align-items: center;\n  box-sizing: border-box;\n\n  @media ${breakPoints.small} {\n    grid-row: 4;\n  }\n`;\n\nconst StandardRoot = styled(RootBase)`\n  grid-column: 1;\n  justify-content: center;\n`;\n\nconst FullWidthRoot = styled(RootBase)`\n  grid-column: 1 / -1;\n`;\n\nconst StandardContent = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n  position: relative;\n  align-items: center;\n  box-sizing: border-box;\n  padding: 0.875rem 0;\n\n  @media ${breakPoints.small} {\n    margin-bottom: 3rem;\n  }\n`;\n\nconst FullWidthContent = styled(StandardContent)`\n  padding: 0.875rem 0;\n\n  @media ${breakPoints.small} {\n    padding-right: 0;\n  }\n`;\n\nconst fadeAndSlideIn = keyframes`\n  0% {\n    transform: translate(300%, 0);\n    opacity: 0;\n  }\n\n  70% {\n    transform: translate(90%, 0);\n    opacity: 0.7;\n  }\n\n  100% {\n    transform: translate(110%, 0);\n    opacity: 1;\n  }\n`;\n\nconst fadeAndSlideDown = keyframes`\n  0% {\n    transform: translate(0, -50%);\n    opacity: 0;\n  }\n\n  70% {\n    transform: translate(0, 20%);\n    opacity: 0.7;\n  }\n\n  100% {\n    transform: translate(0, 0);\n    opacity: 1;\n  }\n`;\n\nconst ResetLabelsButtonContainer = styled.div`\n  position: absolute;\n  text-align: center;\n  pointer-events: none;\n  right: 0;\n\n  @media (max-width: 1000px) {\n    left: 0;\n    bottom: -0.5rem;\n  }\n`;\n\nconst ResetLabelsButton = styled.button`\n  pointer-events: all;\n  animation: ${fadeAndSlideIn} 0.2s ease-in-out 1 forwards;\n  text-transform: uppercase;\n  color: ${baseColor};\n  background-color: ${backgroundMedium};\n  font-size: 0.5rem;\n  font-weight: 600;\n  outline-color: ${backgroundMedium};\n  transition: outline 0.1s ease-in-out;\n  padding: 0.3rem 0.5rem;\n  display: inline-flex;\n  align-items: center;\n  width: 5rem;\n\n  &:hover,\n  &:focus {\n    outline: solid 2px ${backgroundMedium};\n  }\n\n  @media (max-width: 1000px) {\n    animation: ${fadeAndSlideDown} 0.2s ease-in-out 1 forwards;\n    width: auto;\n    left: 0;\n    bottom: 0;\n  }\n`;\n\nconst ReloadIcon = styled.div`\n  width: 1rem;\n  height: 1rem;\n  margin-right: 0.5rem;\n\n  svg {\n    width: 100%;\n    height: 100%;\n\n    path {\n      fill: ${baseColor};\n    }\n  }\n\n  @media (max-width: 1000px) {\n    width: 0.7rem;\n    height: 0.7rem;\n  }\n`;\n\ninterface BaseProps {\n  categories: CategoryDatum[];\n  fullWidth?: boolean;\n}\n\ntype Props = BaseProps &\n  (\n    | {\n        allowToggle: true;\n        toggleCategory: (id: string) => void;\n        isolateCategory: (id: string) => void;\n        hiddenCategories: string[];\n        resetCategories: () => void;\n        resetText: string;\n      }\n    | {\n        allowToggle: false;\n      }\n  );\n\nconst CategoryLabels = (props: Props) => {\n  const { categories, fullWidth } = props;\n  let output: React.ReactElement<any>;\n  if (props.allowToggle) {\n    const {\n      toggleCategory,\n      isolateCategory,\n      hiddenCategories,\n      resetCategories,\n      resetText,\n    } = props;\n\n    const labels = categories.map((category) => {\n      const isHidden = !!hiddenCategories.find((id) => id === category.id);\n      const isIsolated =\n        hiddenCategories.length === categories.length - 1 && !isHidden;\n      return (\n        <Label\n          key={\"sector-label-\" + category.id}\n          category={category}\n          toggleCategory={() => toggleCategory(category.id)}\n          isolateCategory={() => isolateCategory(category.id)}\n          isHidden={isHidden}\n          isIsolated={isIsolated}\n        />\n      );\n    });\n\n    const resetButton = hiddenCategories.length ? (\n      <ResetLabelsButtonContainer>\n        <ResetLabelsButton onClick={resetCategories}>\n          <ReloadIcon dangerouslySetInnerHTML={{ __html: ReloadImgSrc }} />{\" \"}\n          {resetText}\n        </ResetLabelsButton>\n      </ResetLabelsButtonContainer>\n    ) : null;\n\n    output = (\n      <>\n        {labels}\n        {resetButton}\n      </>\n    );\n  } else {\n    const labels = categories.map((category) => (\n      <Label\n        key={\"sector-label-\" + category.id}\n        category={category}\n        isHidden={false}\n        isIsolated={false}\n      />\n    ));\n\n    output = <>{labels}</>;\n  }\n\n  const Root = fullWidth ? FullWidthRoot : StandardRoot;\n  const Content = fullWidth ? FullWidthContent : StandardContent;\n\n  return (\n    <Root>\n      <Content\n        className={\n          !props.allowToggle\n            ? joyrideClassNames.colorLegendNoFilter\n            : joyrideClassNames.colorLegend\n        }\n      >\n        {output}\n      </Content>\n    </Root>\n  );\n};\n\nexport default CategoryLabels;\n","import useFluent from \"./useFluent\";\nimport { sectorColorMap } from \"../styling/styleUtils\";\n\nexport default () => {\n  const getString = useFluent();\n  return sectorColorMap.map(({ id, color }) => ({\n    id,\n    color,\n    name: getString(\"global-naics-sector-name-\" + id),\n  }));\n};\n","import useFluent from \"./useFluent\";\nimport { clusterColorMap } from \"../styling/styleUtils\";\n\nexport default () => {\n  const getString = useFluent();\n  return clusterColorMap.map(({ id, color }) => ({\n    id,\n    color,\n    name: getString(\"global-cluster-c1-name-\" + id),\n  }));\n};\n","import React, { useEffect, useState } from \"react\";\nimport { useEconomicCompositionQuery } from \"../../../../../components/dataViz/treeMap/CompositionTreeMap\";\nimport { useClusterCompositionQuery } from \"../../../../../components/dataViz/treeMap/ClusterCompositionTreeMap\";\nimport LoadingBlock from \"../../../../../components/transitionStateComponents/VizLoadingBlock\";\nimport { transformData, Inputs } from \"react-canvas-treemap\";\nimport { useGlobalIndustryMap } from \"../../../../../hooks/useGlobalIndustriesData\";\nimport { useGlobalClusterMap } from \"../../../../../hooks/useGlobalClusterData\";\nimport {\n  DigitLevel,\n  CompositionType,\n} from \"../../../../../types/graphQL/graphQLTypes\";\nimport {\n  sectorColorMap,\n  clusterColorMap,\n  FullPageOverlay,\n  educationColorRange,\n  wageColorRange,\n} from \"../../../../../styling/styleUtils\";\nimport html2canvas from \"html2canvas\";\nimport {\n  AggregationMode,\n  ColorBy,\n  ClusterLevel,\n} from \"../../../../../routing/routes\";\nimport { scaleLinear } from \"d3-scale\";\nimport { defaultYear } from \"../../../../../Utils\";\nimport { useAggregateIndustryMap } from \"../../../../../hooks/useAggregateIndustriesData\";\n\ninterface Props {\n  cityId: string;\n  cityName: string | undefined;\n  year: number;\n  onClose: () => void;\n  compositionType: CompositionType;\n  aggregationMode: AggregationMode;\n  hiddenSectors: string[];\n  hiddenClusters: string[];\n  digitLevel: DigitLevel;\n  clusterLevel: ClusterLevel;\n  colorBy: ColorBy;\n  treeMapCellsNode: HTMLDivElement;\n}\n\nexport default (props: Props) => {\n  const {\n    cityId,\n    year,\n    onClose,\n    compositionType,\n    hiddenSectors,\n    digitLevel,\n    treeMapCellsNode,\n    cityName,\n    hiddenClusters,\n    aggregationMode,\n    clusterLevel,\n    colorBy,\n  } = props;\n\n  const industryResponse = useEconomicCompositionQuery({ cityId, year });\n  const clusterResponse = useClusterCompositionQuery({ cityId, year });\n  const industryMap = useGlobalIndustryMap();\n  const clusterMap = useGlobalClusterMap();\n  const aggregateIndustryDataMap = useAggregateIndustryMap({\n    level: digitLevel,\n    year: defaultYear,\n    clusterLevel: parseInt(clusterLevel, 10),\n  });\n  const [effectRan, setEffectRan] = useState<boolean>(false);\n\n  useEffect(() => {\n    if (\n      industryResponse.data !== undefined &&\n      !industryMap.loading &&\n      !industryMap.error &&\n      clusterResponse.data !== undefined &&\n      !clusterMap.loading &&\n      !clusterMap.error &&\n      aggregateIndustryDataMap.loading !== true &&\n      !aggregateIndustryDataMap.error &&\n      aggregateIndustryDataMap.data !== undefined &&\n      !effectRan\n    ) {\n      setEffectRan(true);\n      const boundingRect = treeMapCellsNode.getBoundingClientRect();\n      const width = boundingRect.width * 2;\n      const height = boundingRect.height * 2;\n      const treeMapData: Inputs[\"data\"] = [];\n      let colorScale: (val: number) => string | undefined;\n      let colorMap: { id: string; color: string }[];\n      if (aggregationMode === AggregationMode.cluster) {\n        const { clusters } = clusterResponse.data;\n        colorMap = clusterColorMap;\n        if (\n          colorBy === ColorBy.education &&\n          aggregateIndustryDataMap.data !== undefined\n        ) {\n          colorScale = scaleLinear()\n            .domain([\n              aggregateIndustryDataMap.data.clusterMinMax.minYearsEducation,\n              aggregateIndustryDataMap.data.clusterMinMax.medianYearsEducation,\n              aggregateIndustryDataMap.data.clusterMinMax.maxYearsEducation,\n            ])\n            .range(educationColorRange as any) as any;\n        } else if (\n          colorBy === ColorBy.wage &&\n          aggregateIndustryDataMap.data !== undefined\n        ) {\n          colorScale = scaleLinear()\n            .domain([\n              aggregateIndustryDataMap.data.clusterMinMax.minHourlyWage,\n              aggregateIndustryDataMap.data.clusterMinMax.medianHourlyWage,\n              aggregateIndustryDataMap.data.clusterMinMax.maxHourlyWage,\n            ])\n            .range(wageColorRange as any) as any;\n        } else {\n          colorScale = () => undefined;\n        }\n        clusters.forEach(({ clusterId, numCompany, numEmploy }) => {\n          const cluster = clusterMap.data[clusterId];\n          if (\n            cluster &&\n            cluster.level !== null &&\n            cluster.level.toString() === clusterLevel\n          ) {\n            const { name, clusterIdTopParent } = cluster;\n            if (\n              !hiddenClusters.includes(\n                (clusterIdTopParent as number).toString(),\n              )\n            ) {\n              const companies = numCompany ? numCompany : 0;\n              const employees = numEmploy ? numEmploy : 0;\n              let fill: string | undefined;\n              const clusterIndustryDatum =\n                aggregateIndustryDataMap.data.clusters[clusterId];\n              if (\n                colorBy === ColorBy.education &&\n                aggregateIndustryDataMap.data !== undefined\n              ) {\n                if (clusterIndustryDatum) {\n                  fill = colorScale(\n                    clusterIndustryDatum.yearsEducationRank,\n                  ) as string;\n                } else {\n                  fill = \"gray\";\n                }\n              } else if (\n                colorBy === ColorBy.wage &&\n                aggregateIndustryDataMap.data !== undefined\n              ) {\n                if (clusterIndustryDatum) {\n                  fill = colorScale(\n                    clusterIndustryDatum.hourlyWageRank,\n                  ) as string;\n                } else {\n                  fill = \"gray\";\n                }\n              } else {\n                fill = undefined;\n              }\n              treeMapData.push({\n                id: clusterId,\n                value:\n                  compositionType === CompositionType.Companies\n                    ? companies\n                    : employees,\n                title: name ? name : \"\",\n                fill,\n                topLevelParentId: (clusterIdTopParent as number).toString(),\n              });\n            }\n          }\n        });\n      } else {\n        const { industries } = industryResponse.data;\n        colorMap = sectorColorMap;\n        if (\n          colorBy === ColorBy.education &&\n          aggregateIndustryDataMap.data !== undefined\n        ) {\n          colorScale = scaleLinear()\n            .domain([\n              aggregateIndustryDataMap.data.globalMinMax.minYearsEducation,\n              aggregateIndustryDataMap.data.globalMinMax.medianYearsEducation,\n              aggregateIndustryDataMap.data.globalMinMax.maxYearsEducation,\n            ])\n            .range(educationColorRange as any) as any;\n        } else if (\n          colorBy === ColorBy.wage &&\n          aggregateIndustryDataMap.data !== undefined\n        ) {\n          colorScale = scaleLinear()\n            .domain([\n              aggregateIndustryDataMap.data.globalMinMax.minHourlyWage,\n              aggregateIndustryDataMap.data.globalMinMax.medianHourlyWage,\n              aggregateIndustryDataMap.data.globalMinMax.maxHourlyWage,\n            ])\n            .range(wageColorRange as any) as any;\n        } else {\n          colorScale = () => undefined;\n        }\n        industries.forEach(({ naicsId, numCompany, numEmploy }) => {\n          const industry = industryMap.data[naicsId];\n          if (industry && industry.level === digitLevel) {\n            const { name, naicsIdTopParent } = industry;\n            if (!hiddenSectors.includes(naicsIdTopParent.toString())) {\n              const companies = numCompany ? numCompany : 0;\n              const employees = numEmploy ? numEmploy : 0;\n              let fill: string | undefined;\n              if (\n                (colorBy === ColorBy.education || colorBy === ColorBy.wage) &&\n                aggregateIndustryDataMap.data\n              ) {\n                const target =\n                  aggregateIndustryDataMap.data.industries[naicsId];\n                const targetValue =\n                  colorBy === ColorBy.education\n                    ? target.yearsEducationRank\n                    : target.hourlyWageRank;\n                fill = colorScale(targetValue);\n              }\n              treeMapData.push({\n                id: naicsId,\n                value:\n                  compositionType === CompositionType.Companies\n                    ? companies\n                    : employees,\n                title: name ? name : \"\",\n                fill,\n                topLevelParentId: naicsIdTopParent.toString(),\n              });\n            }\n          }\n        });\n      }\n      const transformed = transformData({\n        data: treeMapData,\n        width,\n        height,\n        colorMap,\n      });\n      const canvas = document.createElement(\"canvas\");\n      canvas.width = width;\n      canvas.height = height;\n      const context = canvas.getContext(\"2d\");\n      if (context) {\n        transformed.treeMapCells.forEach((cell) => {\n          context.beginPath();\n          context.rect(cell.x0, cell.y0, cell.x1, cell.y1);\n          context.fillStyle = cell.color;\n          context.fill();\n          context.strokeStyle = \"#fff\";\n          context.stroke();\n        });\n        html2canvas(treeMapCellsNode, {\n          allowTaint: true,\n          backgroundColor: \"rgba(0,0,0,0)\",\n        })\n          .then((cellLabels) => {\n            context.drawImage(cellLabels, 0, 0, width, height);\n            const link = document.createElement(\"a\");\n            link.download = cityName\n              ? `${cityName} - Economic Composition of Number of ${compositionType} in ${year}.png`\n              : \"treemap-visualization.png\";\n            link.href = canvas.toDataURL(\"image/png\");\n            link.click();\n            link.remove();\n            onClose();\n          })\n          .catch((e) => {\n            console.error(e);\n            onClose();\n          });\n      } else {\n        console.error(\"Failed to get context for \" + canvas);\n        onClose();\n      }\n    }\n  }, [\n    aggregateIndustryDataMap,\n    aggregationMode,\n    industryResponse,\n    clusterResponse,\n    industryMap,\n    clusterMap,\n    onClose,\n    compositionType,\n    digitLevel,\n    clusterLevel,\n    hiddenSectors,\n    hiddenClusters,\n    treeMapCellsNode,\n    cityName,\n    year,\n    colorBy,\n    effectRan,\n  ]);\n\n  if (industryResponse.error) {\n    console.error(industryResponse.error);\n    onClose();\n  }\n\n  if (clusterResponse.error) {\n    console.error(clusterResponse.error);\n    onClose();\n  }\n\n  return (\n    <FullPageOverlay>\n      <LoadingBlock />\n    </FullPageOverlay>\n  );\n};\n","import queryString from \"query-string\";\nimport { GlobalQueryParams } from \"../routing/routes\";\nimport { useHistory } from \"react-router-dom\";\n\nexport default () => {\n  const history = useHistory();\n  const params = queryString.parse(\n    history.location.search,\n  ) as unknown as GlobalQueryParams;\n  return params;\n};\n","import React from \"react\";\nimport styled from \"styled-components/macro\";\nimport { breakPoints } from \"../../../styling/GlobalGrid\";\nimport { educationColorRange } from \"../../../styling/styleUtils\";\nimport useFluent from \"../../../hooks/useFluent\";\nimport { joyrideClassNames } from \"../../navigation/secondaryHeader/guide/CitiesGuide\";\n\nconst RootBase = styled.div`\n  grid-row: 3;\n\n  @media ${breakPoints.small} {\n    grid-row: 4;\n  }\n`;\n\nconst StandardRoot = styled(RootBase)`\n  grid-column: 1;\n\n  @media (max-width: 1200px) {\n    grid-column: 1 / -1;\n  }\n`;\n\nconst FullWidthRoot = styled(RootBase)`\n  grid-column: 1 / -1;\n`;\n\nconst Content = styled.div`\n  padding: 0.875rem 0;\n`;\n\nconst Bar = styled.div`\n  width: 100%;\n  height: 0.6rem;\n  background: linear-gradient(\n    90deg,\n    ${educationColorRange[0]} 0%,\n    ${educationColorRange[1]} 50%,\n    ${educationColorRange[2]} 100%\n  );\n`;\n\nconst Labels = styled.div`\n  display: flex;\n  justify-content: space-between;\n  font-size: 0.75rem;\n  text-transform: uppercase;\n`;\n\ninterface Props {\n  fullWidth?: boolean;\n}\n\nconst IntensityLegend = (props: Props) => {\n  const { fullWidth } = props;\n  const Root = fullWidth ? FullWidthRoot : StandardRoot;\n  const getString = useFluent();\n\n  return (\n    <Root className={joyrideClassNames.colorLegendNoFilter}>\n      <Content>\n        <Labels>\n          <div>{getString(\"global-education-low\")}</div>\n          <div>{getString(\"global-education-high\")}</div>\n        </Labels>\n        <Bar />\n      </Content>\n    </Root>\n  );\n};\n\nexport default IntensityLegend;\n","import React from \"react\";\nimport styled from \"styled-components/macro\";\nimport { breakPoints } from \"../../../styling/GlobalGrid\";\nimport { wageColorRange } from \"../../../styling/styleUtils\";\nimport useFluent from \"../../../hooks/useFluent\";\nimport { joyrideClassNames } from \"../../navigation/secondaryHeader/guide/CitiesGuide\";\n\nconst RootBase = styled.div`\n  grid-row: 3;\n\n  @media ${breakPoints.small} {\n    grid-row: 4;\n  }\n`;\n\nconst StandardRoot = styled(RootBase)`\n  grid-column: 1;\n\n  @media (max-width: 1200px) {\n    grid-column: 1 / -1;\n  }\n`;\n\nconst FullWidthRoot = styled(RootBase)`\n  grid-column: 1 / -1;\n`;\n\nconst Content = styled.div`\n  padding: 0.875rem 0;\n`;\n\nconst Bar = styled.div`\n  width: 100%;\n  height: 0.6rem;\n  background: linear-gradient(\n    90deg,\n    ${wageColorRange[0]} 0%,\n    ${wageColorRange[1]} 50%,\n    ${wageColorRange[2]} 100%\n  );\n`;\n\nconst Labels = styled.div`\n  display: flex;\n  justify-content: space-between;\n  font-size: 0.75rem;\n  text-transform: uppercase;\n`;\n\ninterface Props {\n  fullWidth?: boolean;\n}\n\nconst IntensityLegend = (props: Props) => {\n  const { fullWidth } = props;\n  const Root = fullWidth ? FullWidthRoot : StandardRoot;\n  const getString = useFluent();\n\n  return (\n    <Root className={joyrideClassNames.colorLegendNoFilter}>\n      <Content>\n        <Labels>\n          <div>{getString(\"global-wages-low\")}</div>\n          <div>{getString(\"global-wages-high\")}</div>\n        </Labels>\n        <Bar />\n      </Content>\n    </Root>\n  );\n};\n\nexport default IntensityLegend;\n","import React, { useState } from \"react\";\nimport PanelSearch, { Datum as SearchDatum } from \"react-panel-search\";\nimport useFluent from \"../../../hooks/useFluent\";\nimport styled, { keyframes } from \"styled-components/macro\";\nimport {\n  textClassName,\n  ExpandingButton,\n  collapsedSizeMediaQuery,\n} from \"../Utils\";\nimport raw from \"raw.macro\";\n\nconst readThisChartIconSVG = raw(\"../../../assets/icons/magnifying-glass.svg\");\n\nconst Root = styled.div`\n  position: relative;\n  height: 100%;\n  display: flex;\n  align-items: center;\n`;\n\nconst jumpIn = keyframes`\n  0% {\n    transform: scale(0.92);\n  }\n\n  75% {\n    transform: scale(1.03);\n  }\n\n  90% {\n    transform: scale(0.95);\n  }\n\n  100% {\n    transform: scale(1);\n  }\n`;\n\nconst DropdownContainer = styled.div`\n  position: absolute;\n  right: -0.7rem;\n  width: 200px;\n  z-index: 200;\n  transform: scale(0.92);\n  animation: ${jumpIn} 0.2s ease-in-out 1 forwards;\n\n  button.react-panel-search-search-bar-clear-button {\n    padding: 0.4rem 0.1rem;\n  }\n`;\n\nconst ToggleButton = styled(ExpandingButton)`\n  @media ${collapsedSizeMediaQuery} {\n    right: 0;\n    left: auto;\n    z-index: 10;\n\n    &:hover {\n      .${textClassName} {\n        width: 155px;\n        /* max-width needed for safari */\n        max-width: 155px;\n      }\n    }\n  }\n`;\n\nexport interface SearchInGraphOptions {\n  disallowSelectionLevels: (number | string)[] | undefined;\n  setHighlighted: (value: string | undefined) => void;\n  rerenderKey: string;\n  searchData: SearchDatum[];\n  defaultPlaceholderText: string;\n  topLevelTitle: string;\n}\n\nconst SearchIndustryInGraph = (props: SearchInGraphOptions) => {\n  const {\n    setHighlighted,\n    rerenderKey,\n    disallowSelectionLevels,\n    searchData,\n    defaultPlaceholderText,\n    topLevelTitle,\n  } = props;\n\n  const getString = useFluent();\n\n  const [isDropdownVisible, setIsDropdownVisible] = useState<boolean>();\n  const [internalSelectedValue, setInternalSelectedValue] =\n    useState<SearchDatum | null>();\n\n  const onSelect = (d: SearchDatum | null) => {\n    if (d) {\n      setHighlighted(d.id as string);\n    } else {\n      setHighlighted(undefined);\n    }\n    setInternalSelectedValue(d);\n    if (d === null) {\n      setIsDropdownVisible(false);\n    }\n  };\n\n  const dropdown = isDropdownVisible ? (\n    <DropdownContainer>\n      <PanelSearch\n        key={\"ButtonTogglePreChartPanelSearchKeyFor\" + rerenderKey}\n        data={searchData}\n        topLevelTitle={topLevelTitle}\n        disallowSelectionLevels={disallowSelectionLevels}\n        defaultPlaceholderText={defaultPlaceholderText}\n        showCount={true}\n        resultsIdentation={1}\n        onSelect={onSelect}\n        maxResults={500}\n        onClose={() =>\n          !internalSelectedValue ? setIsDropdownVisible(false) : null\n        }\n        focusOnRender={true}\n      />\n    </DropdownContainer>\n  ) : null;\n\n  return (\n    <Root>\n      <ToggleButton onClick={() => setIsDropdownVisible(true)}>\n        <span dangerouslySetInnerHTML={{ __html: readThisChartIconSVG }} />\n        <div className={textClassName}>\n          {getString(\"global-ui-search-an-industry-in-graph\")}\n        </div>\n      </ToggleButton>\n      {dropdown}\n    </Root>\n  );\n};\n\nexport default React.memo(SearchIndustryInGraph);\n","import React, { useState } from \"react\";\nimport styled from \"styled-components/macro\";\nimport { breakPoints } from \"../../styling/GlobalGrid\";\nimport {\n  backgroundDark,\n  ButtonBase,\n  primaryColor,\n  primaryColorLight,\n  baseColor,\n  lightBorderColor,\n} from \"../../styling/styleUtils\";\nimport useFluent from \"../../hooks/useFluent\";\nimport raw from \"raw.macro\";\nimport SearchIndustryInGraph, {\n  SearchInGraphOptions,\n} from \"./searchIndustryInGraphDropdown\";\nimport CurrentSettingsTooltip from \"../dataViz/settings/CurrentSettingsTooltip\";\nimport Settings, { SettingsOptions } from \"../dataViz/settings\";\nimport Tooltip, { TooltipTheme, TooltipPosition } from \"./Tooltip\";\nimport { collapsedSizeMediaQuery } from \"./Utils\";\nimport HowToRead from \"./howToRead\";\nimport { joyrideClassNames } from \"../navigation/secondaryHeader/guide/CitiesGuide\";\n\nconst gearIcon = raw(\"../../assets/icons/settings.svg\");\n\nconst Root = styled.div<{ $hasIndicator: boolean }>`\n  display: contents;\n\n  @media ${collapsedSizeMediaQuery} {\n    grid-row: 1;\n    grid-column: 1 / 3;\n    display: ${({ $hasIndicator }) => ($hasIndicator ? \"contents\" : \"flex\")};\n    flex-direction: row-reverse;\n    justify-content: space-between;\n    position: relative;\n  }\n\n  @media ${breakPoints.small} {\n    grid-row: 2;\n    grid-column: 1;\n    display: block;\n  }\n`;\n\nconst RowBase = styled.div`\n  grid-column: 1;\n  padding: 0.75rem 0 0.25rem;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n`;\n\nconst LeftColumn = styled(RowBase)`\n  grid-row: 1;\n  font-size: 0.75rem;\n  font-size: clamp(0.75rem, 1.5vw, 1rem);\n  text-align: right;\n  font-size: 0.85rem;\n\n  @media ${collapsedSizeMediaQuery} {\n    flex-grow: 1;\n    position: relative;\n    padding-left: 2rem;\n  }\n`;\n\nconst IndicatorTooltipContainer = styled.span`\n  position: relative;\n  top: 0.2rem;\n`;\n\nconst RightColumn = styled(RowBase)`\n  grid-column: 2;\n`;\n\nconst IndicatorRoot = styled.div`\n  margin-left: auto;\n  display: flex;\n  align-items: center;\n`;\n\nconst SettingsButton = styled(ButtonBase)`\n  margin-left: auto;\n  height: 100%;\n  white-space: nowrap;\n`;\n\nconst NavButton = styled(ButtonBase)`\n  border: solid 1px ${backgroundDark};\n  flex-shrink: 1;\n  text-align: center;\n  margin-left: 0.5rem;\n  margin-left: clamp(0.5rem, 1vw, 2rem);\n  margin-top: 0.25rem;\n  margin-bottom: 0.25rem;\n\n  @media ${collapsedSizeMediaQuery} {\n    margin-left: 0;\n  }\n`;\n\nconst HighlightedNavButton = styled(NavButton)`\n  background-color: ${backgroundDark};\n  color: #fff;\n`;\n\nconst UnderlineNavButton = styled.button`\n  font-size: 0.7rem;\n  text-transform: uppercase;\n  font-weight: 600;\n  color: ${baseColor};\n  border-bottom: solid 4px transparent;\n  background-color: transparent;\n  position: relative;\n\n  &:after {\n    content: \"\";\n    display: block;\n    width: 100%;\n    height: 0;\n    border-bottom: solid 1px ${lightBorderColor};\n    position: absolute;\n    bottom: -4px;\n    left: 0;\n    right: 0;\n  }\n\n  &:hover {\n    border-bottom: solid 4px ${primaryColorLight};\n  }\n`;\nconst UnderlineHighlightedNavButton = styled(UnderlineNavButton)`\n  border-bottom: solid 4px ${primaryColor};\n\n  &:hover {\n    border-bottom: solid 4px ${primaryColor};\n  }\n`;\n\nconst NavButtonTooltip = styled.div`\n  position: absolute;\n  display: inline;\n  top: -0.1rem;\n  transform: translateX(0.5rem);\n`;\n\nconst ButtonNavContainer = styled.div`\n  margin: auto;\n  max-width: 100%;\n  display: flex;\n  justify-content: center;\n  flex-wrap: wrap;\n\n  @media ${breakPoints.small} {\n    margin-right: 0;\n    justify-content: flex-end;\n  }\n`;\n\nexport interface Indicator {\n  text: React.ReactNode;\n  tooltipContent?: React.ReactNode;\n}\n\nexport interface VizNavItem {\n  label: string;\n  active: boolean;\n  onClick: () => void;\n  tooltipContent?: React.ReactNode;\n}\n\nexport enum VizNavStyle {\n  Block = \"block\",\n  Underline = \"underline\",\n}\n\ninterface Props {\n  indicator?: Indicator;\n  searchInGraphOptions?: SearchInGraphOptions;\n  settingsOptions?: SettingsOptions;\n  vizNavigation?: VizNavItem[];\n  vizNavigationStyle?: VizNavStyle;\n}\n\nconst PreChartRow = (props: Props) => {\n  const {\n    indicator,\n    searchInGraphOptions,\n    settingsOptions,\n    vizNavigation,\n    vizNavigationStyle,\n  } = props;\n\n  const [settingsOpen, setSettingsOpen] = useState<boolean>(false);\n\n  const getString = useFluent();\n\n  const indicatorTooltip =\n    indicator && indicator.tooltipContent ? (\n      <IndicatorTooltipContainer>\n        <Tooltip explanation={indicator.tooltipContent} />\n      </IndicatorTooltipContainer>\n    ) : null;\n\n  const indicatorElm = indicator ? (\n    <IndicatorRoot>\n      <span>\n        {indicatorTooltip}\n        {indicator.text}\n      </span>\n    </IndicatorRoot>\n  ) : null;\n\n  const rightColumnStyle: React.CSSProperties | undefined = indicatorElm\n    ? {\n        display: \"flex\",\n        justifyContent: \"flex-end\",\n      }\n    : undefined;\n\n  const vizNavigationButtonElms =\n    vizNavigation && vizNavigation.length\n      ? vizNavigation.map((link) => {\n          const Button =\n            vizNavigationStyle === VizNavStyle.Underline\n              ? link.active\n                ? UnderlineHighlightedNavButton\n                : UnderlineNavButton\n              : link.active\n                ? HighlightedNavButton\n                : NavButton;\n          const tooltipContent = link.tooltipContent ? (\n            <IndicatorTooltipContainer>\n              <NavButtonTooltip>\n                <Tooltip explanation={link.tooltipContent} />\n              </NavButtonTooltip>\n            </IndicatorTooltipContainer>\n          ) : null;\n          return (\n            <div key={link.label}>\n              <Button onClick={link.onClick}>\n                {link.label}\n                {tooltipContent}\n              </Button>\n            </div>\n          );\n        })\n      : null;\n  const vizNavigationButtons =\n    vizNavigation && vizNavigation.length ? (\n      <ButtonNavContainer className={joyrideClassNames.vizToggle}>\n        {vizNavigationButtonElms}\n      </ButtonNavContainer>\n    ) : null;\n\n  const searchInGraph = searchInGraphOptions ? (\n    <SearchIndustryInGraph {...searchInGraphOptions} />\n  ) : null;\n\n  const settingsButton = settingsOptions ? (\n    <Tooltip\n      explanation={\n        !settingsOpen ? (\n          <CurrentSettingsTooltip settingsOptions={settingsOptions} />\n        ) : null\n      }\n      theme={TooltipTheme.Dark}\n      tooltipPosition={TooltipPosition.Bottom}\n    >\n      <SettingsButton\n        onClick={() => setSettingsOpen((current) => !current)}\n        className={joyrideClassNames.vizOptions}\n      >\n        <span dangerouslySetInnerHTML={{ __html: gearIcon }} />\n        {getString(\"global-ui-settings\")}\n      </SettingsButton>\n    </Tooltip>\n  ) : null;\n\n  const settingsPanel = settingsOpen ? (\n    <Settings\n      onClose={() => setSettingsOpen(false)}\n      settingsOptions={settingsOptions ? settingsOptions : {}}\n    />\n  ) : null;\n\n  return (\n    <>\n      <Root $hasIndicator={indicatorElm !== null}>\n        <RightColumn style={rightColumnStyle}>\n          {searchInGraph}\n          {settingsButton}\n        </RightColumn>\n        <LeftColumn>\n          <HowToRead />\n          {vizNavigationButtons}\n          {indicatorElm}\n        </LeftColumn>\n      </Root>\n      {settingsPanel}\n    </>\n  );\n};\n\nexport default React.memo(PreChartRow);\n","import React from \"react\";\nimport styled from \"styled-components/macro\";\nimport useQueryParams from \"../../../hooks/useQueryParams\";\nimport useFluent from \"../../../hooks/useFluent\";\nimport {\n  DigitLevel,\n  defaultDigitLevel,\n  defaultCompositionType,\n} from \"../../../types/graphQL/graphQLTypes\";\nimport {\n  defaultClusterMode,\n  ColorBy,\n  CityColorBy,\n  defaultNodeSizing,\n  NodeSizing,\n  defaultCityNodeSizing,\n  defaultAggregationMode,\n} from \"../../../routing/routes\";\nimport { SettingsOptions } from \"./index\";\nimport upperFirst from \"lodash/upperFirst\";\n\nconst Root = styled.div`\n  text-align: center;\n`;\n\nconst Title = styled.div`\n  margin-bottom: 0.2rem;\n  font-size: 0.85rem;\n`;\n\nconst Segment = styled.div`\n  font-size: 0.7rem;\n  margin-top: 0.4rem;\n  display: flex;\n  flex-direction: column;\n  text-transform: capitalize;\n`;\n\nconst Subtitle = styled.em`\n  opacity: 0.55;\n  font-size: 0.65rem;\n`;\n\ninterface Props {\n  settingsOptions: SettingsOptions;\n}\n\nconst CurrentSettingsTooltip = (props: Props) => {\n  const { settingsOptions } = props;\n\n  const params = useQueryParams();\n  const getString = useFluent();\n\n  const compositionText =\n    settingsOptions.compositionType !== undefined ? (\n      <Segment>\n        <Subtitle>{getString(\"global-ui-numbers-based-on\")}</Subtitle>\n        <em>\n          {params.composition_type\n            ? params.composition_type\n            : defaultCompositionType}\n        </em>\n      </Segment>\n    ) : null;\n\n  const aggregationText =\n    settingsOptions.aggregationMode !== undefined ? (\n      <Segment>\n        <Subtitle>{getString(\"global-ui-aggregation-mode\")}</Subtitle>\n        <em>\n          {upperFirst(\n            params.aggregation ? params.aggregation : defaultAggregationMode,\n          )}\n        </em>\n      </Segment>\n    ) : null;\n\n  const detailLevel =\n    settingsOptions.digitLevel !== undefined ? (\n      <Segment>\n        <Subtitle>{getString(\"global-ui-detail-level\")}</Subtitle>\n        <em>\n          {params.digit_level\n            ? params.digit_level\n            : typeof settingsOptions.digitLevel === \"object\" &&\n                settingsOptions.digitLevel.sixDigitOnlyMessage\n              ? DigitLevel.Six\n              : defaultDigitLevel}{\" \"}\n          {getString(\"global-ui-digit-level\")}\n        </em>\n      </Segment>\n    ) : null;\n\n  const clusterLevel =\n    settingsOptions.clusterLevel !== undefined ? (\n      <Segment>\n        <Subtitle>{getString(\"global-ui-cluster-level\")}</Subtitle>\n        <em>\n          {getString(\"global-ui-cluster-aggregation-level\", {\n            cluster:\n              \"cluster_\" + params.cluster_overlay\n                ? params.cluster_overlay\n                : defaultDigitLevel,\n          })}\n        </em>\n      </Segment>\n    ) : null;\n\n  const hideClusters =\n    settingsOptions.clusterOverlayMode !== undefined ? (\n      <Segment>\n        <Subtitle>{getString(\"global-ui-show-clusters\")}</Subtitle>\n        <em>\n          {params.cluster_overlay ? params.cluster_overlay : defaultClusterMode}\n        </em>\n      </Segment>\n    ) : null;\n\n  let nodeSizingValue: NodeSizing | undefined;\n  if (\n    typeof settingsOptions.nodeSizing !== \"object\" &&\n    params.node_sizing === NodeSizing.rca\n  ) {\n    nodeSizingValue = defaultNodeSizing;\n  } else if (\n    typeof settingsOptions.nodeSizing === \"object\" &&\n    settingsOptions.nodeSizing.rca &&\n    !params.node_sizing\n  ) {\n    nodeSizingValue = NodeSizing.rca;\n  } else {\n    nodeSizingValue = !params.node_sizing\n      ? defaultNodeSizing\n      : params.node_sizing;\n  }\n  const sizeBy =\n    settingsOptions.nodeSizing !== undefined ? (\n      <Segment>\n        <Subtitle>{getString(\"global-ui-node-sizing\")}</Subtitle>\n        <em>\n          {getString(\"global-formatted-size-by\", { type: nodeSizingValue })}\n        </em>\n      </Segment>\n    ) : null;\n\n  const defaultColorByText =\n    settingsOptions.clusterLevel !== undefined ? \"Cluster\" : ColorBy.sector;\n  const colorBy =\n    settingsOptions.colorBy !== undefined ? (\n      <Segment>\n        <Subtitle>\n          {typeof settingsOptions.colorBy === \"object\" &&\n          settingsOptions.colorBy.nodes\n            ? getString(\"global-ui-node-color-by\")\n            : getString(\"global-ui-color-by\")}\n        </Subtitle>\n        <em>{params.color_by ? params.color_by : defaultColorByText}</em>\n      </Segment>\n    ) : null;\n\n  const citySizeBy =\n    settingsOptions.cityNodeSizing !== undefined ? (\n      <Segment>\n        <Subtitle>{getString(\"global-ui-node-sizing\")}</Subtitle>\n        <em>\n          {getString(\"global-formatted-size-by\", {\n            type: params.city_node_sizing\n              ? params.city_node_sizing\n              : defaultCityNodeSizing,\n          })}\n        </em>\n      </Segment>\n    ) : null;\n\n  const cityColorBy =\n    settingsOptions.cityColorBy !== undefined ? (\n      <Segment>\n        <Subtitle>{getString(\"global-ui-node-color-by\")}</Subtitle>\n        <em>\n          {upperFirst(\n            params.city_color_by ? params.city_color_by : CityColorBy.proximity,\n          )}\n        </em>\n      </Segment>\n    ) : null;\n\n  const rcaThreshold =\n    settingsOptions.rcaThreshold !== undefined ? (\n      <Segment>\n        <Subtitle>RCA Threshold</Subtitle>\n        <em>{params.rca_threshold !== undefined ? params.rca_threshold : 1}</em>\n      </Segment>\n    ) : null;\n\n  return (\n    <Root>\n      <Title>{getString(\"global-ui-change-settings\")}</Title>\n      <Segment>\n        <em>{getString(\"global-ui-current-settings\")}</em>\n      </Segment>\n      {compositionText}\n      {aggregationText}\n      {detailLevel}\n      {clusterLevel}\n      {hideClusters}\n      {sizeBy}\n      {colorBy}\n      {rcaThreshold}\n      {cityColorBy}\n      {citySizeBy}\n    </Root>\n  );\n};\n\nexport default CurrentSettingsTooltip;\n","import React from \"react\";\nimport styled from \"styled-components/macro\";\nimport ReactSlider from \"react-slider\";\nimport {\n  primaryColor,\n  backgroundDark,\n  backgroundMedium,\n} from \"../../../styling/styleUtils\";\nimport { scaleLog } from \"d3-scale\";\n\nconst slideRootClassName = \"react-slider-root-class\";\nconst slideThumbClassName = \"react-slider-thumb-class\";\nconst slideTrackClassName = \"react-slider-track-class\";\n\nconst Root = styled.div`\n  width: 100%;\n  margin: 0.875rem 0 2rem;\n`;\nconst SliderContainer = styled.div`\n  width: 100%;\n  box-sizing: border-box;\n  padding: 0 1rem 0 2rem;\n  flex-shrink: 0;\n  margin: 0rem auto 1.15rem;\n  position: relative;\n\n  .${slideThumbClassName} {\n    background-color: ${primaryColor};\n    height: 1rem;\n    width: 1rem;\n    border-radius: 1000px;\n    cursor: pointer;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    outline: none;\n\n    span {\n      color: ${primaryColor};\n      transform: translateY(-125%);\n      white-space: nowrap;\n    }\n  }\n  .${slideThumbClassName}-0 {\n    transform: translateX(-0.1rem);\n  }\n  .${slideTrackClassName} {\n    margin-top: 0.25rem;\n  }\n  .${slideTrackClassName}-0 {\n    background-color: ${backgroundMedium};\n    height: 0.5rem;\n  }\n  .${slideTrackClassName}-1 {\n    background-color: ${backgroundDark};\n    height: 0.5rem;\n  }\n  .${slideTrackClassName}-2 {\n    background-color: ${backgroundMedium};\n    height: 0.5rem;\n  }\n`;\n\n// 0.0001\n// 0.001\n// 0.01\n// 0.1\n// 1\n// 10\n// 100\n// 1000\n\ninterface Props {\n  updateValue: (val: number) => void;\n  initialValue: number;\n}\n\ninterface ThumbState {\n  index: number;\n  value: number | number[];\n  valueNow: number;\n}\n\nconst RCAThresholdSlider = ({ updateValue, initialValue }: Props) => {\n  const logScale = scaleLog().domain([0.001, 100]).range([1, 120]);\n\n  const logScaleWithZero = (value: number) => (value ? logScale(value) : 0);\n  const convertValue = (value: number) => {\n    const logValue = value ? logScale.invert(value) : 0;\n    let decimalPlaces = 0;\n    if (logValue < 0.0001) {\n      decimalPlaces = 6;\n    } else if (logValue < 0.001) {\n      decimalPlaces = 5;\n    } else if (logValue < 0.01) {\n      decimalPlaces = 4;\n    } else if (logValue < 0.1) {\n      decimalPlaces = 3;\n    } else if (logValue < 0.9) {\n      decimalPlaces = 2;\n    } else if (logValue < 10 && logValue > 1.15) {\n      decimalPlaces = 1;\n    } else {\n      decimalPlaces = 0;\n    }\n    return value ? parseFloat(logValue.toFixed(decimalPlaces)) : 0;\n  };\n\n  const thumbRender = (\n    p: React.HTMLProps<HTMLDivElement>,\n    state: ThumbState,\n  ) => (\n    <small {...p}>\n      <span>\n        Presence Value {\"\"} {convertValue(state.valueNow)}\n      </span>\n    </small>\n  );\n\n  return (\n    <Root>\n      <SliderContainer>\n        <ReactSlider\n          className={slideRootClassName}\n          thumbClassName={slideThumbClassName}\n          trackClassName={slideTrackClassName}\n          defaultValue={\n            isNaN(initialValue)\n              ? logScaleWithZero(1)\n              : logScaleWithZero(initialValue)\n          }\n          renderThumb={thumbRender}\n          max={120}\n          min={0}\n          onAfterChange={(v: number) => updateValue(convertValue(v))}\n        />\n      </SliderContainer>\n    </Root>\n  );\n};\n\nexport default RCAThresholdSlider;\n","// Google Analytics stub - analytics removed in Phase 1\nconst googleAnalyticsEvent = (\n  _category: string,\n  _action: string,\n  _label?: string,\n) => {\n  // No-op: analytics disabled\n};\n\nexport default googleAnalyticsEvent;\n","import React from \"react\";\nimport styled, { keyframes } from \"styled-components/macro\";\nimport { useHistory } from \"react-router-dom\";\nimport queryString from \"query-string\";\nimport useQueryParams from \"../../../hooks/useQueryParams\";\nimport useFluent from \"../../../hooks/useFluent\";\nimport {\n  secondaryFont,\n  backgroundDark,\n  primaryColorLight,\n  BlockButton,\n  BlockButtonHighlighted,\n  baseColor,\n} from \"../../../styling/styleUtils\";\nimport {\n  CompositionType,\n  defaultDigitLevel,\n  defaultCompositionType,\n  DigitLevel,\n} from \"../../../types/graphQL/graphQLTypes\";\nimport { breakPoints } from \"../../../styling/GlobalGrid\";\nimport {\n  ClusterMode,\n  defaultClusterMode,\n  NodeSizing,\n  defaultNodeSizing,\n  ColorBy,\n  ClusterLevel,\n  defaultClusterLevel,\n  CityNodeSizing,\n  CityColorBy,\n  defaultCityNodeSizing,\n  defaultAggregationMode,\n  AggregationMode,\n} from \"../../../routing/routes\";\nimport raw from \"raw.macro\";\nimport Tooltip, { TooltipTheme } from \"../../general/Tooltip\";\nimport upperFirst from \"lodash/upperFirst\";\nimport RCAThresholdSlider from \"./RCAThresholdSlider\";\nimport googleAnalyticsEvent from \"../../analytics/googleAnalyticsEvent\";\n\nconst gearIcon = raw(\"../../../assets/icons/settings.svg\");\n\nconst slideIn = keyframes`\n  0% {\n    transform: translate(100%, 0);\n  }\n\n  75% {\n    transform: translate(-8%, 0);\n  }\n\n  90% {\n    transform: translate(5, 0);\n  }\n\n  100% {\n    transform: translate(0, 0);\n  }\n`;\n\nconst Root = styled.div`\n  grid-column: 2;\n  grid-row: 2;\n  width: 100%;\n  height: 100%;\n  position: relative;\n  background-color: #fff;\n  box-shadow: 0px 0px 5px 0px rgba(0, 0, 0, 0.15);\n  transform: translate(100%, 0);\n  animation: ${slideIn} 0.4s ease-in-out 1 forwards;\n  z-index: 100;\n\n  @media ${breakPoints.small} {\n    grid-row: 1;\n    grid-column: 1;\n    height: auto;\n  }\n`;\n\nconst ContentRoot = styled.div`\n  width: 100%;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  overflow: auto;\n  ::-webkit-scrollbar {\n    -webkit-appearance: none;\n    width: 7px;\n  }\n  ::-webkit-scrollbar-thumb {\n    border-radius: 4px;\n    background-color: rgba(0, 0, 0, 0.3);\n  }\n  ::-webkit-scrollbar-track {\n    background-color: rgba(0, 0, 0, 0.1);\n  }\n\n  @media ${breakPoints.small} {\n    position: static;\n    overflow: visible;\n  }\n\n  @media ${breakPoints.small} {\n    position: relative;\n  }\n`;\n\nconst Title = styled.h1`\n  margin: 0;\n  padding: 0.5rem 0.8rem;\n  border-bottom: solid 1px ${backgroundDark};\n  background-color: ${primaryColorLight};\n  font-family: ${secondaryFont};\n  font-size: 1rem;\n  text-transform: uppercase;\n  font-weight: 400;\n  display: flex;\n  align-items: center;\n  position: sticky;\n  top: 0;\n  z-index: 5;\n\n  span {\n    width: 1rem;\n    height: 1rem;\n    display: inline-block;\n    line-height: 0;\n    margin-right: 0.25rem;\n\n    svg {\n      width: 100%;\n      height: 100%;\n      fill: ${backgroundDark};\n    }\n  }\n`;\n\nconst CloseButton = styled.button`\n  margin-left: auto;\n  padding: 0 0 0 1rem;\n  border: none;\n  background-color: transparent;\n  font-size: 1.25rem;\n  font-weight: 400;\n  font-family: ${secondaryFont};\n  transform: translate(0, -1px);\n`;\n\nconst Content = styled.div`\n  padding: 1rem 0.4rem;\n  display: flex;\n  flex-direction: column;\n`;\n\nconst SettingGrid = styled.div`\n  display: grid;\n  grid-template-columns: auto 1fr;\n  grid-template-rows: auto auto;\n  grid-row-gap: 0.5rem;\n  align-items: center;\n  margin-bottom: 1rem;\n`;\n\nconst SettingsInputContainer = styled.div`\n  grid-column: 2;\n  grid-row: 2;\n`;\n\nconst DisabledSettingsInputContainer = styled(SettingsInputContainer)`\n  opacity: 0.5;\n  pointer-events: none;\n`;\n\nconst CompostionButtonBase = styled(BlockButton)`\n  text-transform: capitalize;\n\n  &.disabled-option {\n    opacity: 0.5;\n    cursor: default;\n    &:hover {\n      color: ${baseColor};\n      background-color: transparent;\n    }\n  }\n`;\nconst CompostionButtonHighlight = styled(BlockButtonHighlighted)`\n  text-transform: capitalize;\n\n  &.disabled-option {\n    opacity: 0.5;\n    cursor: default;\n    &:hover {\n      color: ${baseColor};\n      background-color: transparent;\n    }\n  }\n`;\n\nconst Label = styled.label`\n  font-size: 1rem;\n  display: block;\n  grid-column: 2;\n  grid-row: 1;\n\n  @media ${breakPoints.medium} {\n    font-size: 0.75rem;\n  }\n`;\n\nconst DisabledLabel = styled(Label)`\n  opacity: 0.5;\n`;\n\nconst DigitLevelButton = styled.button<{ $selected: boolean }>`\n  font-size: 0.85rem;\n  width: 100%;\n  text-transform: none;\n  display: block;\n  background-color: transparent;\n  padding: 0.45rem 0;\n  display: flex;\n  position: relative;\n  margin: 0;\n\n  &:hover:not(.disabled-option) {\n    &:before {\n      background-color: ${backgroundDark};\n    }\n  }\n  &.disabled-option {\n    opacity: 0.5;\n    cursor: default;\n  }\n\n  &:focus,\n  &:active {\n    color: ${backgroundDark};\n  }\n\n  &:before {\n    flex-shrink: 0;\n    content: \"\";\n    display: block;\n    width: 0.85rem;\n    height: 0.85rem;\n    border: solid 1px ${backgroundDark};\n    border-radius: 2000px;\n    background-color: ${({ $selected }) =>\n      $selected ? backgroundDark : \"#fff\"};\n    margin-right: 0.75rem;\n    transition: all 0.1s ease-in-out;\n    position: relative;\n    z-index: 2;\n  }\n\n  &:after {\n    flex-shrink: 0;\n    content: \"\";\n    width: 0.5rem;\n    border-right: solid 1px ${backgroundDark};\n    position: absolute;\n    left: 0;\n    top: 0;\n    bottom: 0;\n  }\n\n  &:first-child:after {\n    top: 0.7rem;\n  }\n\n  &:last-child {\n    align-items: flex-end;\n    &:after {\n      bottom: 0.7rem;\n    }\n  }\n\n  @media ${breakPoints.medium} {\n    font-size: 0.75rem;\n  }\n`;\n\nconst DigitLevelSoloButton = styled(DigitLevelButton)`\n  &:after {\n    display: none;\n  }\n`;\n\nconst ResetButton = styled(BlockButton)`\n  margin: 1rem auto;\n`;\n\nexport interface SettingsOptions {\n  digitLevel?:\n    | boolean\n    | {\n        sixDigitOnlyMessage?: string;\n        defaultDigitLevel?: DigitLevel;\n      };\n  compositionType?:\n    | boolean\n    | {\n        disabledOptions?: CompositionType[];\n      };\n  clusterOverlayMode?: boolean;\n  nodeSizing?:\n    | boolean\n    | {\n        rca: boolean;\n      };\n  colorBy?:\n    | boolean\n    | {\n        nodes: boolean;\n      };\n  clusterLevel?:\n    | boolean\n    | {\n        disabledOptions?: ClusterLevel[];\n      };\n  cityNodeSizing?: boolean;\n  cityColorBy?: boolean;\n  aggregationMode?: boolean;\n  rcaThreshold?: boolean;\n}\n\ninterface Props {\n  onClose: () => void;\n  settingsOptions: SettingsOptions;\n}\n\nconst Settings = (props: Props) => {\n  const { onClose, settingsOptions } = props;\n  const history = useHistory();\n  const params = useQueryParams();\n  const getString = useFluent();\n\n  const updateSetting = (param: string, value: string | number) => {\n    const query = queryString.stringify({ ...params, [param]: value });\n    const newUrl = query\n      ? history.location.pathname + \"?\" + query\n      : history.location.pathname;\n    googleAnalyticsEvent(\"Viz Options\", param, `${value}`);\n    history.push(newUrl);\n  };\n\n  const resetSettings = () => {\n    const {\n      digit_level: _unusedDigitLevel,\n      cluster_level: _unusedClusterLevel,\n      composition_type: _unusedCompositionType,\n      cluster_overlay: _unusedHideClusters,\n      node_sizing: _unusedNodeSizing,\n      color_by: _unusedColorBy,\n      city_color_by: _unusedCityColorBy,\n      city_node_sizing: _unusedCitySizeBy,\n      aggregation: _unusedAggregation,\n      rca_threshold: _rcaThreshold,\n      ...rest\n    } = params;\n    const query = queryString.stringify({ ...rest });\n    const newUrl = query\n      ? history.location.pathname + \"?\" + query\n      : history.location.pathname;\n    history.push(newUrl);\n  };\n\n  let compositionOptions: React.ReactElement<any> | null;\n  if (settingsOptions.compositionType !== undefined) {\n    const CompanyButton =\n      (!params.composition_type &&\n        defaultCompositionType === CompositionType.Companies) ||\n      params.composition_type === CompositionType.Companies\n        ? CompostionButtonHighlight\n        : CompostionButtonBase;\n\n    const EmployeeButton =\n      (!params.composition_type &&\n        defaultCompositionType === CompositionType.Employees) ||\n      params.composition_type === CompositionType.Employees\n        ? CompostionButtonHighlight\n        : CompostionButtonBase;\n    const InputContainer =\n      settingsOptions.compositionType !== false\n        ? SettingsInputContainer\n        : DisabledSettingsInputContainer;\n    const LabelContainer =\n      settingsOptions.compositionType !== false ? Label : DisabledLabel;\n    const tooltipText =\n      settingsOptions.compositionType !== false\n        ? getString(\"glossary-composition\")\n        : getString(\"glossary-composition-disabled\");\n    const disabledOptions =\n      typeof settingsOptions.compositionType === \"object\" &&\n      settingsOptions.compositionType.disabledOptions\n        ? settingsOptions.compositionType.disabledOptions\n        : [];\n    compositionOptions = (\n      <SettingGrid>\n        <Tooltip explanation={tooltipText} />\n        <LabelContainer>\n          {getString(\"global-ui-numbers-based-on\")}\n        </LabelContainer>\n        <InputContainer>\n          <EmployeeButton\n            onClick={\n              disabledOptions.includes(CompositionType.Employees)\n                ? undefined\n                : () =>\n                    updateSetting(\"composition_type\", CompositionType.Employees)\n            }\n            className={\n              disabledOptions.includes(CompositionType.Employees)\n                ? \"disabled-option\"\n                : undefined\n            }\n          >\n            <Tooltip\n              explanation={\n                disabledOptions.includes(CompositionType.Employees)\n                  ? getString(\"global-ui-settings-option-na\")\n                  : null\n              }\n              theme={TooltipTheme.Dark}\n              cursor={\n                disabledOptions.includes(CompositionType.Employees)\n                  ? \"default\"\n                  : \"pointer\"\n              }\n            >\n              {CompositionType.Employees}\n            </Tooltip>\n          </EmployeeButton>\n          <CompanyButton\n            onClick={\n              disabledOptions.includes(CompositionType.Companies)\n                ? undefined\n                : () =>\n                    updateSetting(\"composition_type\", CompositionType.Companies)\n            }\n            className={\n              disabledOptions.includes(CompositionType.Companies)\n                ? \"disabled-option\"\n                : undefined\n            }\n          >\n            <Tooltip\n              explanation={\n                disabledOptions.includes(CompositionType.Companies)\n                  ? getString(\"global-ui-settings-option-na\")\n                  : null\n              }\n              theme={TooltipTheme.Dark}\n              cursor={\n                disabledOptions.includes(CompositionType.Companies)\n                  ? \"default\"\n                  : \"pointer\"\n              }\n            >\n              {CompositionType.Companies}\n            </Tooltip>\n          </CompanyButton>\n        </InputContainer>\n      </SettingGrid>\n    );\n  } else {\n    compositionOptions = null;\n  }\n\n  let aggregationMode: React.ReactElement<any> | null;\n  if (settingsOptions.aggregationMode !== undefined) {\n    const ClusterButton =\n      (!params.aggregation &&\n        defaultAggregationMode === AggregationMode.cluster) ||\n      params.aggregation === AggregationMode.cluster\n        ? CompostionButtonHighlight\n        : CompostionButtonBase;\n    const NaicButton =\n      (!params.aggregation &&\n        defaultAggregationMode === AggregationMode.industries) ||\n      params.aggregation === AggregationMode.industries\n        ? CompostionButtonHighlight\n        : CompostionButtonBase;\n    const InputContainer =\n      settingsOptions.aggregationMode === true\n        ? SettingsInputContainer\n        : DisabledSettingsInputContainer;\n    const LabelContainer =\n      settingsOptions.aggregationMode === true ? Label : DisabledLabel;\n    aggregationMode = (\n      <SettingGrid>\n        <Tooltip explanation={getString(\"glossary-cluster-vs-naics\")} />\n        <LabelContainer>\n          {getString(\"global-ui-aggregation-mode\")}\n        </LabelContainer>\n        <InputContainer>\n          <NaicButton\n            onClick={() =>\n              updateSetting(\"aggregation\", AggregationMode.industries)\n            }\n          >\n            {getString(\"global-text-industry-groups\")}\n          </NaicButton>\n          <ClusterButton\n            onClick={() =>\n              updateSetting(\"aggregation\", AggregationMode.cluster)\n            }\n          >\n            {getString(\"global-ui-skill-clusters\")}\n          </ClusterButton>\n        </InputContainer>\n      </SettingGrid>\n    );\n  } else {\n    aggregationMode = null;\n  }\n\n  let digitLevelOptions: React.ReactElement<any> | null;\n  if (settingsOptions.digitLevel !== undefined) {\n    const InputContainer =\n      settingsOptions.digitLevel !== false\n        ? SettingsInputContainer\n        : DisabledSettingsInputContainer;\n    const LabelContainer =\n      settingsOptions.digitLevel !== false ? Label : DisabledLabel;\n    const tooltipText =\n      settingsOptions.digitLevel !== false\n        ? getString(\"glossary-digit-level\")\n        : getString(\"glossary-digit-level-disabled\");\n    const sixDigitOnlyMessage =\n      typeof settingsOptions.digitLevel === \"object\" &&\n      settingsOptions.digitLevel.sixDigitOnlyMessage\n        ? settingsOptions.digitLevel.sixDigitOnlyMessage\n        : \"\";\n    const defaultValue =\n      typeof settingsOptions.digitLevel === \"object\" &&\n      settingsOptions.digitLevel.defaultDigitLevel\n        ? settingsOptions.digitLevel.defaultDigitLevel\n        : defaultDigitLevel;\n    digitLevelOptions = sixDigitOnlyMessage ? (\n      <SettingGrid>\n        <Tooltip explanation={tooltipText} />\n        <LabelContainer>{getString(\"global-ui-detail-level\")}</LabelContainer>\n        <InputContainer>\n          <DigitLevelSoloButton $selected={true}>\n            {DigitLevel.Six}-{getString(\"global-ui-digit-level\")}\n          </DigitLevelSoloButton>\n          <small>\n            <em>{sixDigitOnlyMessage}</em>\n          </small>\n        </InputContainer>\n      </SettingGrid>\n    ) : (\n      <SettingGrid>\n        <Tooltip explanation={tooltipText} />\n        <LabelContainer>{getString(\"global-ui-detail-level\")}</LabelContainer>\n        <InputContainer>\n          <DigitLevelButton\n            onClick={() => updateSetting(\"digit_level\", DigitLevel.Sector)}\n            $selected={\n              settingsOptions.digitLevel !== false &&\n              ((!params.digit_level && defaultValue === DigitLevel.Sector) ||\n                params.digit_level === DigitLevel.Sector.toString())\n            }\n          >\n            <span>\n              {DigitLevel.Sector}-{getString(\"global-ui-digit-level\")} /{\" \"}\n              {getString(\"global-ui-sector-level\")}\n            </span>\n          </DigitLevelButton>\n          <DigitLevelButton\n            onClick={() => updateSetting(\"digit_level\", DigitLevel.Two)}\n            $selected={\n              settingsOptions.digitLevel !== false &&\n              ((!params.digit_level && defaultValue === DigitLevel.Two) ||\n                params.digit_level === DigitLevel.Two.toString())\n            }\n          >\n            <span>\n              {DigitLevel.Two}-{getString(\"global-ui-digit-level\")}\n            </span>\n          </DigitLevelButton>\n          <DigitLevelButton\n            onClick={() => updateSetting(\"digit_level\", DigitLevel.Three)}\n            $selected={\n              settingsOptions.digitLevel !== false &&\n              ((!params.digit_level && defaultValue === DigitLevel.Three) ||\n                params.digit_level === DigitLevel.Three.toString())\n            }\n          >\n            <span>\n              {DigitLevel.Three}-{getString(\"global-ui-digit-level\")}\n            </span>\n          </DigitLevelButton>\n          <DigitLevelButton\n            onClick={() => updateSetting(\"digit_level\", DigitLevel.Four)}\n            $selected={\n              settingsOptions.digitLevel !== false &&\n              ((!params.digit_level && defaultValue === DigitLevel.Four) ||\n                params.digit_level === DigitLevel.Four.toString())\n            }\n          >\n            <span>\n              {DigitLevel.Four}-{getString(\"global-ui-digit-level\")}\n            </span>\n          </DigitLevelButton>\n          <DigitLevelButton\n            onClick={() => updateSetting(\"digit_level\", DigitLevel.Five)}\n            $selected={\n              settingsOptions.digitLevel !== false &&\n              ((!params.digit_level && defaultValue === DigitLevel.Five) ||\n                params.digit_level === DigitLevel.Five.toString())\n            }\n          >\n            <span>\n              {DigitLevel.Five}-{getString(\"global-ui-digit-level\")}\n            </span>\n          </DigitLevelButton>\n          <DigitLevelButton\n            onClick={() => updateSetting(\"digit_level\", DigitLevel.Six)}\n            $selected={\n              settingsOptions.digitLevel !== false &&\n              ((!params.digit_level && defaultValue === DigitLevel.Six) ||\n                params.digit_level === DigitLevel.Six.toString())\n            }\n          >\n            <span>\n              {DigitLevel.Six}-{getString(\"global-ui-digit-level\")}\n            </span>\n          </DigitLevelButton>\n        </InputContainer>\n      </SettingGrid>\n    );\n  } else {\n    digitLevelOptions = null;\n  }\n  let clusterLevelOptions: React.ReactElement<any> | null;\n  if (settingsOptions.clusterLevel !== undefined) {\n    const InputContainer =\n      settingsOptions.clusterLevel !== false\n        ? SettingsInputContainer\n        : DisabledSettingsInputContainer;\n    const LabelContainer =\n      settingsOptions.clusterLevel !== false ? Label : DisabledLabel;\n    const tooltipText =\n      settingsOptions.clusterLevel !== false\n        ? getString(\"glossary-cluster-level\")\n        : getString(\"glossary-cluster-level-disabled\");\n    const disabledOptions =\n      typeof settingsOptions.clusterLevel === \"object\" &&\n      settingsOptions.clusterLevel.disabledOptions\n        ? settingsOptions.clusterLevel.disabledOptions\n        : [];\n    clusterLevelOptions = (\n      <SettingGrid>\n        <Tooltip explanation={tooltipText} />\n        <LabelContainer>{getString(\"global-ui-cluster-level\")}</LabelContainer>\n        <InputContainer>\n          <DigitLevelButton\n            onClick={\n              !disabledOptions.includes(ClusterLevel.C1)\n                ? () => updateSetting(\"cluster_level\", ClusterLevel.C1)\n                : undefined\n            }\n            className={\n              disabledOptions.includes(ClusterLevel.C1)\n                ? \"disabled-option\"\n                : undefined\n            }\n            $selected={\n              settingsOptions.clusterLevel !== false &&\n              ((!params.cluster_level &&\n                defaultClusterLevel === ClusterLevel.C1) ||\n                params.cluster_level === ClusterLevel.C1)\n            }\n          >\n            <Tooltip\n              explanation={\n                disabledOptions.includes(ClusterLevel.C1)\n                  ? getString(\"global-ui-settings-option-na\")\n                  : null\n              }\n              theme={TooltipTheme.Dark}\n              cursor={\n                disabledOptions.includes(ClusterLevel.C1)\n                  ? \"default\"\n                  : \"pointer\"\n              }\n            >\n              <span>\n                {getString(\"global-ui-cluster-aggregation-level\", {\n                  cluster: \"cluster_\" + ClusterLevel.C1,\n                })}\n              </span>\n            </Tooltip>\n          </DigitLevelButton>\n          <DigitLevelButton\n            onClick={\n              !disabledOptions.includes(ClusterLevel.C3)\n                ? () => updateSetting(\"cluster_level\", ClusterLevel.C3)\n                : undefined\n            }\n            className={\n              disabledOptions.includes(ClusterLevel.C3)\n                ? \"disabled-option\"\n                : undefined\n            }\n            $selected={\n              settingsOptions.clusterLevel !== false &&\n              ((!params.cluster_level &&\n                defaultClusterLevel === ClusterLevel.C3) ||\n                params.cluster_level === ClusterLevel.C3)\n            }\n          >\n            <Tooltip\n              explanation={\n                disabledOptions.includes(ClusterLevel.C3)\n                  ? getString(\"global-ui-settings-option-na\")\n                  : null\n              }\n              theme={TooltipTheme.Dark}\n              cursor={\n                disabledOptions.includes(ClusterLevel.C3)\n                  ? \"default\"\n                  : \"pointer\"\n              }\n            >\n              <span>\n                {getString(\"global-ui-cluster-aggregation-level\", {\n                  cluster: \"cluster_\" + ClusterLevel.C3,\n                })}\n              </span>\n            </Tooltip>\n          </DigitLevelButton>\n        </InputContainer>\n      </SettingGrid>\n    );\n  } else {\n    clusterLevelOptions = null;\n  }\n\n  let clusterOverlayToggle: React.ReactElement<any> | null;\n  if (settingsOptions.clusterOverlayMode !== undefined) {\n    const InputContainer =\n      settingsOptions.clusterOverlayMode === true\n        ? SettingsInputContainer\n        : DisabledSettingsInputContainer;\n    const LabelContainer =\n      settingsOptions.clusterOverlayMode === true ? Label : DisabledLabel;\n    const tooltipText =\n      settingsOptions.clusterOverlayMode === true\n        ? getString(\"glossary-cluster-overlay\")\n        : getString(\"glossary-cluster-overlay-disabled\");\n    clusterOverlayToggle = (\n      <SettingGrid>\n        <Tooltip explanation={tooltipText} />\n        <LabelContainer>{getString(\"global-ui-show-clusters\")}</LabelContainer>\n        <InputContainer>\n          <DigitLevelButton\n            onClick={() =>\n              updateSetting(\"cluster_overlay\", ClusterMode.outline)\n            }\n            $selected={\n              (!params.cluster_overlay &&\n                defaultClusterMode === ClusterMode.outline) ||\n              params.cluster_overlay === ClusterMode.outline\n            }\n          >\n            <span>{upperFirst(ClusterMode.outline)}</span>\n          </DigitLevelButton>\n          <DigitLevelButton\n            onClick={() =>\n              updateSetting(\"cluster_overlay\", ClusterMode.overlay)\n            }\n            $selected={\n              (!params.cluster_overlay &&\n                defaultClusterMode === ClusterMode.overlay) ||\n              params.cluster_overlay === ClusterMode.overlay\n            }\n          >\n            <span>{upperFirst(ClusterMode.overlay)}</span>\n          </DigitLevelButton>\n          <DigitLevelButton\n            onClick={() => updateSetting(\"cluster_overlay\", ClusterMode.none)}\n            $selected={\n              (!params.cluster_overlay &&\n                defaultClusterMode === ClusterMode.none) ||\n              params.cluster_overlay === ClusterMode.none\n            }\n          >\n            <span>{upperFirst(ClusterMode.none)}</span>\n          </DigitLevelButton>\n        </InputContainer>\n      </SettingGrid>\n    );\n  } else {\n    clusterOverlayToggle = null;\n  }\n\n  let nodeSizingOptions: React.ReactElement<any> | null;\n  if (settingsOptions.nodeSizing !== undefined) {\n    const nodeSizingActive =\n      settingsOptions.nodeSizing === true ||\n      typeof settingsOptions.nodeSizing === \"object\";\n    const InputContainer =\n      nodeSizingActive === true\n        ? SettingsInputContainer\n        : DisabledSettingsInputContainer;\n    const LabelContainer = nodeSizingActive === true ? Label : DisabledLabel;\n    const defaultValue =\n      typeof settingsOptions.nodeSizing === \"object\" &&\n      settingsOptions.nodeSizing.rca\n        ? NodeSizing.rca\n        : defaultNodeSizing;\n    const currentValue =\n      typeof settingsOptions.nodeSizing !== \"object\" &&\n      params.node_sizing === NodeSizing.rca\n        ? defaultValue\n        : params.node_sizing;\n    const sizeByRca =\n      typeof settingsOptions.nodeSizing === \"object\" &&\n      settingsOptions.nodeSizing.rca ? (\n        <DigitLevelButton\n          onClick={() => updateSetting(\"node_sizing\", NodeSizing.rca)}\n          $selected={\n            (!currentValue && defaultValue === NodeSizing.rca) ||\n            currentValue === NodeSizing.rca\n          }\n        >\n          <span>\n            {getString(\"global-formatted-size-by\", { type: NodeSizing.rca })}\n          </span>\n        </DigitLevelButton>\n      ) : null;\n    nodeSizingOptions = (\n      <SettingGrid>\n        <Tooltip explanation={getString(\"glossary-node-sizing\")} />\n        <LabelContainer>{getString(\"global-ui-node-sizing\")}</LabelContainer>\n        <InputContainer>\n          {sizeByRca}\n          <DigitLevelButton\n            onClick={() =>\n              updateSetting(\"node_sizing\", NodeSizing.cityEmployees)\n            }\n            $selected={\n              (!currentValue && defaultValue === NodeSizing.cityEmployees) ||\n              currentValue === NodeSizing.cityEmployees\n            }\n          >\n            <span>\n              {getString(\"global-formatted-size-by\", {\n                type: NodeSizing.cityEmployees,\n              })}\n            </span>\n          </DigitLevelButton>\n          <DigitLevelButton\n            onClick={() =>\n              updateSetting(\"node_sizing\", NodeSizing.cityCompanies)\n            }\n            $selected={\n              (!currentValue && defaultValue === NodeSizing.cityCompanies) ||\n              currentValue === NodeSizing.cityCompanies\n            }\n          >\n            <span>\n              {getString(\"global-formatted-size-by\", {\n                type: NodeSizing.cityCompanies,\n              })}\n            </span>\n          </DigitLevelButton>\n          <DigitLevelButton\n            onClick={() => updateSetting(\"node_sizing\", NodeSizing.uniform)}\n            $selected={\n              (!currentValue && defaultValue === NodeSizing.uniform) ||\n              currentValue === NodeSizing.uniform\n            }\n          >\n            <span>\n              {getString(\"global-formatted-size-by\", {\n                type: NodeSizing.uniform,\n              })}\n            </span>\n          </DigitLevelButton>\n          <DigitLevelButton\n            onClick={() =>\n              updateSetting(\"node_sizing\", NodeSizing.globalEmployees)\n            }\n            $selected={\n              (!currentValue && defaultValue === NodeSizing.globalEmployees) ||\n              currentValue === NodeSizing.globalEmployees\n            }\n          >\n            <span>\n              {getString(\"global-formatted-size-by\", {\n                type: NodeSizing.globalEmployees,\n              })}\n            </span>\n          </DigitLevelButton>\n          <DigitLevelButton\n            onClick={() =>\n              updateSetting(\"node_sizing\", NodeSizing.globalCompanies)\n            }\n            $selected={\n              (!currentValue && defaultValue === NodeSizing.globalCompanies) ||\n              currentValue === NodeSizing.globalCompanies\n            }\n          >\n            <span>\n              {getString(\"global-formatted-size-by\", {\n                type: NodeSizing.globalCompanies,\n              })}\n            </span>\n          </DigitLevelButton>\n        </InputContainer>\n      </SettingGrid>\n    );\n  } else {\n    nodeSizingOptions = null;\n  }\n\n  let colorByOptions: React.ReactElement<any> | null;\n  if (settingsOptions.colorBy !== undefined) {\n    const InputContainer =\n      settingsOptions.colorBy !== false\n        ? SettingsInputContainer\n        : DisabledSettingsInputContainer;\n    const LabelContainer =\n      settingsOptions.colorBy !== false ? Label : DisabledLabel;\n    const tooltipText =\n      typeof settingsOptions.colorBy === \"object\" &&\n      settingsOptions.colorBy.nodes\n        ? getString(\"glossary-color-nodes-by\")\n        : getString(\"glossary-color-by\");\n    const labelText =\n      typeof settingsOptions.colorBy === \"object\" &&\n      settingsOptions.colorBy.nodes\n        ? getString(\"global-ui-node-color-by\")\n        : getString(\"global-ui-color-by\");\n    const defaultColorByText =\n      settingsOptions.clusterLevel !== undefined\n        ? \"Knowledge Cluster (High aggregation)\"\n        : \"Industry groups (Sector level)\";\n    const defaultIsSelected =\n      !params.color_by || params.color_by === ColorBy.sector;\n    const rcaThreshold =\n      settingsOptions.rcaThreshold && defaultIsSelected ? (\n        <RCAThresholdSlider\n          key={\"rca-slider-key-\" + params.rca_threshold}\n          updateValue={(v) => updateSetting(\"rca_threshold\", v)}\n          initialValue={\n            params.rca_threshold ? parseFloat(params.rca_threshold) : 1\n          }\n        />\n      ) : null;\n    colorByOptions = (\n      <SettingGrid>\n        <Tooltip explanation={tooltipText} />\n        <LabelContainer>{labelText}</LabelContainer>\n        <InputContainer>\n          <DigitLevelButton\n            onClick={\n              !defaultIsSelected\n                ? () => updateSetting(\"color_by\", ColorBy.sector)\n                : undefined\n            }\n            $selected={defaultIsSelected}\n          >\n            <div>\n              {defaultColorByText}\n              {rcaThreshold}\n            </div>\n          </DigitLevelButton>\n          <DigitLevelButton\n            onClick={() => updateSetting(\"color_by\", ColorBy.education)}\n            $selected={params.color_by === ColorBy.education}\n          >\n            <span>\n              {getString(\"global-formatted-color-by\", {\n                type: ColorBy.education,\n              })}\n            </span>\n          </DigitLevelButton>\n          <DigitLevelButton\n            onClick={() => updateSetting(\"color_by\", ColorBy.wage)}\n            $selected={params.color_by === ColorBy.wage}\n          >\n            <span>\n              {getString(\"global-formatted-color-by\", { type: ColorBy.wage })}\n            </span>\n          </DigitLevelButton>\n        </InputContainer>\n      </SettingGrid>\n    );\n  } else {\n    colorByOptions = null;\n  }\n\n  let cityColorByOptions: React.ReactElement<any> | null;\n  if (settingsOptions.cityColorBy !== undefined) {\n    const InputContainer =\n      settingsOptions.cityColorBy !== false\n        ? SettingsInputContainer\n        : DisabledSettingsInputContainer;\n    const LabelContainer =\n      settingsOptions.cityColorBy !== false ? Label : DisabledLabel;\n    cityColorByOptions = (\n      <SettingGrid>\n        <Tooltip explanation={getString(\"glossary-city-color-by\")} />\n        <LabelContainer>{getString(\"global-ui-node-color-by\")}</LabelContainer>\n        <InputContainer>\n          <DigitLevelSoloButton $selected={true}>\n            {upperFirst(CityColorBy.proximity)}\n          </DigitLevelSoloButton>\n          <small>\n            <em>{getString(\"color-by-proximity-only\")}</em>\n          </small>\n        </InputContainer>\n      </SettingGrid>\n    );\n  } else {\n    cityColorByOptions = null;\n  }\n\n  let cityNodeSizingOptions: React.ReactElement<any> | null;\n  if (settingsOptions.cityNodeSizing !== undefined) {\n    const InputContainer =\n      settingsOptions.cityNodeSizing === true\n        ? SettingsInputContainer\n        : DisabledSettingsInputContainer;\n    const LabelContainer =\n      settingsOptions.cityNodeSizing === true ? Label : DisabledLabel;\n    cityNodeSizingOptions = (\n      <SettingGrid>\n        <Tooltip explanation={getString(\"glossary-city-node-sizing\")} />\n        <LabelContainer>{getString(\"global-ui-node-sizing\")}</LabelContainer>\n        <InputContainer>\n          <DigitLevelButton\n            onClick={() =>\n              updateSetting(\"city_node_sizing\", CityNodeSizing.population)\n            }\n            $selected={\n              (!params.city_node_sizing &&\n                defaultCityNodeSizing === CityNodeSizing.population) ||\n              params.city_node_sizing === CityNodeSizing.population\n            }\n          >\n            <span>\n              {getString(\"global-formatted-size-by\", {\n                type: CityNodeSizing.population,\n              })}\n            </span>\n          </DigitLevelButton>\n          <DigitLevelButton\n            onClick={() =>\n              updateSetting(\"city_node_sizing\", CityNodeSizing.gdpPpp)\n            }\n            $selected={\n              (!params.city_node_sizing &&\n                defaultCityNodeSizing === CityNodeSizing.gdpPpp) ||\n              params.city_node_sizing === CityNodeSizing.gdpPpp\n            }\n          >\n            <span>\n              {getString(\"global-formatted-size-by\", {\n                type: CityNodeSizing.gdpPpp,\n              })}\n            </span>\n          </DigitLevelButton>\n          <DigitLevelButton\n            onClick={() =>\n              updateSetting(\"city_node_sizing\", CityNodeSizing.uniform)\n            }\n            $selected={\n              (!params.city_node_sizing &&\n                defaultCityNodeSizing === CityNodeSizing.uniform) ||\n              params.city_node_sizing === CityNodeSizing.uniform\n            }\n          >\n            <span>\n              {getString(\"global-formatted-size-by\", {\n                type: CityNodeSizing.uniform,\n              })}\n            </span>\n          </DigitLevelButton>\n        </InputContainer>\n      </SettingGrid>\n    );\n  } else {\n    cityNodeSizingOptions = null;\n  }\n\n  return (\n    <Root>\n      <ContentRoot>\n        <Title>\n          <span dangerouslySetInnerHTML={{ __html: gearIcon }} />\n          {getString(\"global-ui-settings\")}\n          <CloseButton onClick={onClose}></CloseButton>\n        </Title>\n        <Content>\n          {compositionOptions}\n          {aggregationMode}\n          {digitLevelOptions}\n          {clusterLevelOptions}\n          {clusterOverlayToggle}\n          {nodeSizingOptions}\n          {colorByOptions}\n          {cityColorByOptions}\n          {cityNodeSizingOptions}\n          <ResetButton onClick={resetSettings}>\n            {getString(\"global-ui-settings-reset\")}\n          </ResetButton>\n        </Content>\n      </ContentRoot>\n    </Root>\n  );\n};\n\nexport default Settings;\n","import React, { useState } from \"react\";\nimport { textClassName, ExpandingButton } from \"../Utils\";\nimport raw from \"raw.macro\";\nimport useFluent from \"../../../hooks/useFluent\";\nimport { joyrideClassNames } from \"../../navigation/secondaryHeader/guide/CitiesGuide\";\nimport { useRouteMatch } from \"react-router-dom\";\nimport { Routes } from \"../../../routing/routes\";\nimport styled, { keyframes } from \"styled-components/macro\";\nimport { baseColor, secondaryFont } from \"../../../styling/styleUtils\";\nimport Modal from \"../../standardModal\";\nimport TreemapPNG from \"./static/treemap.png\";\nimport IndustrySpacePNG from \"./static/industry_space.png\";\nimport SwotPNG from \"./static/swot.png\";\n\nconst growIn = keyframes`\n  0% {\n    transform: scale(0.4);\n  }\n\n  100% {\n    transform: scale(1);\n  }\n`;\n\nconst Root = styled.div`\n  background-color: #fff;\n  position: relative;\n  animation: ${growIn} 0.1s normal forwards ease-in-out;\n  animation-iteration-count: 1;\n  color: ${baseColor};\n  height: 100%;\n  padding: 0;\n  width: 1000px;\n  max-width: 100%;\n  box-sizing: border-box;\n\n  @media (max-width: 1200px) {\n    width: 900px;\n  }\n\n  @media (max-width: 950px) {\n    width: 750px;\n  }\n\n  @media (max-width: 800px) {\n    width: 550px;\n  }\n\n  @media screen and (max-height: 800px) {\n    overflow: visible;\n  }\n`;\n\nconst Image = styled.img`\n  width: 1000px;\n  max-width: 100%;\n`;\n\nconst CloseButton = styled.button`\n  background-color: transparent;\n  border-none;\n  padding: 0 0.5rem;\n  color: ${baseColor};\n  text-transform: uppercase;\n  font-size: 1.5rem;\n  font-family: ${secondaryFont};\n  position: absolute;\n  right: 0;\n  top: 0;\n`;\n\nconst readThisChartIconSVG = raw(\"../../../assets/icons/read-this-chart.svg\");\n\nconst HowToRead = () => {\n  const getString = useFluent();\n\n  const [modalOpen, setModalOpen] = useState<boolean>(false);\n\n  const isTreemap = useRouteMatch(Routes.CityEconomicComposition);\n  const isIndustrySpace = useRouteMatch(Routes.CityIndustrySpacePosition);\n  const isSwot = useRouteMatch(Routes.CityGrowthOpportunities);\n\n  let source: string | undefined;\n  if (isTreemap && isTreemap.isExact) {\n    source = TreemapPNG;\n  } else if (isIndustrySpace && isIndustrySpace.isExact) {\n    source = IndustrySpacePNG;\n  } else if (isSwot && isSwot.isExact) {\n    source = SwotPNG;\n  }\n\n  if (source) {\n    const modal = modalOpen ? (\n      <Modal onClose={() => setModalOpen(false)} width={\"auto\"} height={\"auto\"}>\n        <Root>\n          <Image src={source} />\n          <CloseButton onClick={() => setModalOpen(false)}></CloseButton>\n        </Root>\n      </Modal>\n    ) : null;\n\n    return (\n      <>\n        <ExpandingButton\n          className={joyrideClassNames.howToRead}\n          onClick={() => setModalOpen(true)}\n        >\n          <span dangerouslySetInnerHTML={{ __html: readThisChartIconSVG }} />\n          <div className={textClassName}>\n            {getString(\"global-ui-read-chart\")}\n          </div>\n        </ExpandingButton>\n        {modal}\n      </>\n    );\n  }\n  return null;\n};\n\nexport default HowToRead;\n","import { useStaticData } from \"../../../dataProvider\";\nimport {\n  isValidPeerGroup,\n  PeerGroup,\n} from \"../../../types/graphQL/graphQLTypes\";\nimport { AggregationMode } from \"../../../routing/routes\";\nimport { defaultYear } from \"../../../Utils\";\n\nexport enum RegionGroup {\n  World = \"world\",\n}\n\ninterface IndustriesList {\n  id: string;\n  industryId: string;\n  numCompany: number | null;\n  numEmploy: number | null;\n}\n\nexport interface SuccessResponse {\n  primaryCityIndustries: IndustriesList[];\n  secondaryCityIndustries: IndustriesList[];\n}\n\ninterface InputVariables {\n  primaryCity: number;\n  comparison: number | RegionGroup | PeerGroup;\n  year: number;\n  aggregation: AggregationMode;\n}\n\nexport const useEconomicCompositionComparisonQuery = (variables: {\n  primaryCity: number;\n  secondaryCity: number;\n  year: number;\n}) => {\n  return useComparisonQuery({\n    primaryCity: variables.primaryCity,\n    comparison: variables.secondaryCity,\n    year: variables.year,\n    aggregation: AggregationMode.industries,\n  });\n};\n\nexport const useComparisonQuery = (input: InputVariables) => {\n  const { data: blsData, loading: blsLoading } = useStaticData();\n\n  if (blsLoading || !blsData) {\n    return { loading: true, error: undefined, data: undefined };\n  }\n\n  const primaryId = input.primaryCity.toString();\n  const primaryRegionData = blsData.regionData[primaryId];\n\n  if (!primaryRegionData) {\n    return { loading: false, error: undefined, data: undefined };\n  }\n\n  const primaryYearData = primaryRegionData[input.year] || primaryRegionData[defaultYear];\n  if (!primaryYearData) {\n    return { loading: false, error: undefined, data: undefined };\n  }\n\n  const primaryCityIndustries: IndustriesList[] = primaryYearData.map((occ) => ({\n    id: occ.socCode,\n    industryId: occ.socCode,\n    numCompany: occ.gdp,\n    numEmploy: occ.totEmp,\n  }));\n\n  let secondaryCityIndustries: IndustriesList[] = [];\n\n  // If comparing to another specific city\n  if (\n    typeof input.comparison === \"number\" ||\n    (typeof input.comparison === \"string\" &&\n      !isValidPeerGroup(input.comparison) &&\n      input.comparison !== RegionGroup.World)\n  ) {\n    const secondaryId = input.comparison.toString();\n    const secondaryRegionData = blsData.regionData[secondaryId];\n    if (secondaryRegionData) {\n      const secondaryYearData =\n        secondaryRegionData[input.year] || secondaryRegionData[defaultYear];\n      if (secondaryYearData) {\n        secondaryCityIndustries = secondaryYearData.map((occ) => ({\n          id: occ.socCode,\n          industryId: occ.socCode,\n          numCompany: occ.gdp,\n          numEmploy: occ.totEmp,\n        }));\n      }\n    }\n  }\n  // For peer groups and world: use national average as proxy\n  else {\n    const nationalData = blsData.regionData[\"national_us\"];\n    if (nationalData) {\n      const nationalYearData = nationalData[input.year] || nationalData[defaultYear];\n      if (nationalYearData) {\n        secondaryCityIndustries = nationalYearData.map((occ) => ({\n          id: occ.socCode,\n          industryId: occ.socCode,\n          numCompany: occ.gdp,\n          numEmploy: occ.totEmp,\n        }));\n      }\n    }\n  }\n\n  const data: SuccessResponse = { primaryCityIndustries, secondaryCityIndustries };\n  return { loading: false, error: undefined, data };\n};\n","import React from \"react\";\nimport styled from \"styled-components/macro\";\nimport { backgroundDark } from \"../../styling/styleUtils\";\nimport { breakPoints } from \"../../styling/GlobalGrid\";\n\nconst Root = styled.div`\n  grid-column: 2;\n  grid-row: 2;\n  max-height: 100%;\n  position: relative;\n\n  @media ${breakPoints.small} {\n    grid-row: 1;\n    grid-column: 1;\n  }\n`;\n\nconst ScrollContainer = styled.div`\n  width: 100%;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  overflow-y: auto;\n  overflow-x: hidden;\n  display: flex;\n  align-items: center;\n\n  ::-webkit-scrollbar {\n    -webkit-appearance: none;\n    width: 7px;\n  }\n  ::-webkit-scrollbar-thumb {\n    border-radius: 4px;\n    background-color: rgba(0, 0, 0, 0.3);\n  }\n  ::-webkit-scrollbar-track {\n    background-color: rgba(0, 0, 0, 0.1);\n  }\n\n  @media ${breakPoints.small} {\n    position: static;\n    overflow: visible;\n  }\n`;\n\nconst ContentContainer = styled.div`\n  padding-left: 0.75rem;\n  border-left: solid 2px ${backgroundDark};\n  width: 100%;\n  margin: auto;\n\n  @media ${breakPoints.small} {\n    padding-left: 0;\n    border-left: none;\n  }\n`;\n\nconst StandardSideTextBlock = ({\n  children,\n  clearStyles,\n}: {\n  children: React.ReactNode;\n  clearStyles?: boolean;\n}) => {\n  const Content = clearStyles ? React.Fragment : ContentContainer;\n  return (\n    <Root>\n      <ScrollContainer\n        style={{ alignItems: clearStyles ? \"flex-start\" : undefined }}\n      >\n        <Content>{children}</Content>\n      </ScrollContainer>\n    </Root>\n  );\n};\n\nexport default StandardSideTextBlock;\n","import React from \"react\";\nimport styled, { keyframes } from \"styled-components/macro\";\nimport { backgroundDark } from \"../../styling/styleUtils\";\nimport { breakPoints } from \"../../styling/GlobalGrid\";\n\nconst Root = styled.div`\n  grid-column: 2;\n  grid-row: 2;\n  max-height: 100%;\n  position: relative;\n\n  @media ${breakPoints.small} {\n    grid-row: 1;\n    grid-column: 1;\n  }\n`;\n\nconst ScrollContainer = styled.div`\n  width: 100%;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  overflow-y: auto;\n  overflow-x: hidden;\n  display: flex;\n  align-items: center;\n\n  ::-webkit-scrollbar {\n    -webkit-appearance: none;\n    width: 7px;\n  }\n  ::-webkit-scrollbar-thumb {\n    border-radius: 4px;\n    background-color: rgba(0, 0, 0, 0.3);\n  }\n  ::-webkit-scrollbar-track {\n    background-color: rgba(0, 0, 0, 0.1);\n  }\n\n  @media ${breakPoints.small} {\n    position: static;\n    overflow: visible;\n  }\n`;\n\nconst ContentContainer = styled.div`\n  padding-left: 0.75rem;\n  border-left: solid 2px ${backgroundDark};\n  width: 100%;\n  margin: auto;\n\n  @media ${breakPoints.small} {\n    padding-left: 0;\n    border-left: none;\n  }\n`;\nconst flickerAnimation = keyframes`\n  0%   { opacity: 1; }\n  50%  { opacity: 0.5; }\n  100% { opacity: 1; }\n`;\n\nconst TitleBar = styled.div`\n  height: 1.5rem;\n  background-color: #efefef;\n  margin-bottom: 0.4rem;\n  animation: ${flickerAnimation} 1s infinite;\n`;\n\nconst ParaBar = styled.div`\n  height: 0.845rem;\n  background-color: #efefef;\n  margin-bottom: 0.35rem;\n  animation: ${flickerAnimation} 1s infinite;\n`;\n\nconst StandardSideTextLoading = ({\n  clearStyles,\n}: {\n  clearStyles?: boolean;\n}) => {\n  const Content = clearStyles ? React.Fragment : ContentContainer;\n  return (\n    <Root>\n      <ScrollContainer\n        style={{ alignItems: clearStyles ? \"flex-start\" : undefined }}\n      >\n        <Content>\n          <TitleBar style={{ width: \"95%\" }} />\n          <TitleBar style={{ width: \"60%\", marginBottom: \"1rem\" }} />\n          <ParaBar style={{ width: \"93%\" }} />\n          <ParaBar style={{ width: \"87%\" }} />\n          <ParaBar style={{ width: \"76%\" }} />\n          <ParaBar style={{ width: \"90%\" }} />\n          <ParaBar style={{ width: \"84%\" }} />\n          <ParaBar style={{ width: \"76%\" }} />\n          <ParaBar style={{ width: \"59%\" }} />\n        </Content>\n      </ScrollContainer>\n    </Root>\n  );\n};\n\nexport default StandardSideTextLoading;\n","import React from \"react\";\nimport StandardSideTextBlock from \"../../../../../components/general/StandardSideTextBlock\";\nimport {\n  ContentParagraph,\n  ContentTitle,\n} from \"../../../../../styling/styleUtils\";\nimport useFluent, {\n  possessive,\n  ordinalNumber,\n} from \"../../../../../hooks/useFluent\";\nimport useCurrentCity from \"../../../../../hooks/useCurrentCity\";\nimport useGlobalLocationData from \"../../../../../hooks/useGlobalLocationData\";\nimport StandardSideTextLoading from \"../../../../../components/transitionStateComponents/StandardSideTextLoading\";\nimport { formatNumberLong } from \"../../../../../Utils\";\nimport { useEconomicCompositionQuery } from \"../../../../../components/dataViz/treeMap/CompositionTreeMap\";\nimport { useGlobalIndustryMap } from \"../../../../../hooks/useGlobalIndustriesData\";\nimport {\n  DigitLevel,\n  CompositionType,\n} from \"../../../../../types/graphQL/graphQLTypes\";\nimport orderBy from \"lodash/orderBy\";\nimport Helmet from \"react-helmet\";\n\ninterface Props {\n  year: number;\n  cityId: string;\n  compositionType: CompositionType;\n}\n\ninterface IndustryDatum {\n  name: string;\n  sector: string;\n  count: number;\n}\n\nconst SideText = ({ year, cityId, compositionType }: Props) => {\n  const getString = useFluent();\n  const { loading, city } = useCurrentCity();\n  const locations = useGlobalLocationData();\n  const composition = useEconomicCompositionQuery({ year, cityId });\n  const industryMap = useGlobalIndustryMap();\n\n  if (\n    loading ||\n    locations.loading ||\n    composition.loading\n  ) {\n    return <StandardSideTextLoading />;\n  } else if (\n    city &&\n    locations.data &&\n    composition.data &&\n    composition.data.industries.length\n  ) {\n    const cityName = city.name ? city.name : \"\";\n    const cityNamePlural = possessive([cityName]);\n    const { countries } = locations.data;\n    const { industries } = composition.data;\n    const country = countries.find(\n      (d) =>\n        city.countryId !== null && d.countryId === city.countryId.toString(),\n    );\n\n    let total = 0;\n    let totalEmploy = 0;\n    const allSectors: IndustryDatum[] = [];\n    industries.forEach(({ naicsId, numCompany, numEmploy }) => {\n      const industry = industryMap.data[naicsId];\n      const companies = numCompany ? numCompany : 0;\n      const employees = numEmploy ? numEmploy : 0;\n      const count =\n        compositionType === CompositionType.Companies ? companies : employees;\n      if (industry && industry.level !== null && industry.level <= DigitLevel.Sector) {\n        total =\n          compositionType === CompositionType.Companies\n            ? total + companies\n            : total + employees;\n        totalEmploy = totalEmploy + employees;\n        const { name, naicsIdTopParent } = industry;\n        allSectors.push({\n          count,\n          name: name ? name : \"\",\n          sector: naicsIdTopParent.toString(),\n        });\n      }\n    });\n\n    const largestSector: IndustryDatum | undefined = orderBy(\n      allSectors,\n      [\"count\"],\n      [\"desc\"],\n    )[0];\n    if (!largestSector) {\n      return <StandardSideTextLoading />;\n    }\n\n    const secondLargestSector: IndustryDatum | undefined = orderBy(\n      allSectors,\n      [\"count\"],\n      [\"desc\"],\n    )[1];\n    if (!secondLargestSector) {\n      return <StandardSideTextLoading />;\n    }\n\n    const title = getString(\"economic-composition-title\", {\n      \"name-plural\": cityNamePlural,\n    });\n    const para1 = getString(\"economic-composition-para-1\", {\n      name: cityName,\n      \"name-plural\": cityNamePlural,\n      \"income-level\": \"\",\n      country: country ? country.nameShortEn : \"\",\n      \"pop-year\": \"2024\",\n      population: formatNumberLong(city.population ? city.population : 0),\n      gdppc: formatNumberLong(city.gdppc ? city.gdppc : 0),\n      \"region-size-rank\": ordinalNumber([1]),\n      \"region-wealth-rank\": ordinalNumber([1]),\n      \"region-name\": \"\",\n      \"region-city-count\": 1,\n      \"num-employ\": formatNumberLong(totalEmploy),\n    });\n\n    const para2 = getString(\"economic-composition-para-2\", {\n      name: cityName,\n      \"largest-sector\": largestSector.name,\n      \"largest-sector-share-percent\": parseFloat(\n        ((largestSector.count / total) * 100).toFixed(2),\n      ),\n      \"composition-type\": compositionType,\n      \"largest-3-digit-industry-in-sector\": largestSector.name,\n      \"largest-3-digit-industry-in-sector-share-percent\": parseFloat(\n        ((largestSector.count / total) * 100).toFixed(2),\n      ),\n      \"second-largest-sector\": secondLargestSector.name,\n      \"second-largest-sector-share-percent\": parseFloat(\n        ((secondLargestSector.count / total) * 100).toFixed(2),\n      ),\n      \"second-largest-3-digit-industry-in-sector\":\n        secondLargestSector.name,\n      \"second-largest-3-digit-industry-in-sector-share-percent\": parseFloat(\n        ((secondLargestSector.count / total) * 100).toFixed(2),\n      ),\n    });\n\n    return (\n      <StandardSideTextBlock>\n        <Helmet>\n          <title>\n            {title + \" | \" + getString(\"meta-data-title-default-suffix\")}\n          </title>\n          <meta\n            property=\"og:title\"\n            content={\n              title + \" | \" + getString(\"meta-data-title-default-suffix\")\n            }\n          />\n        </Helmet>\n        <ContentTitle>{title}</ContentTitle>\n        <ContentParagraph>{para1}</ContentParagraph>\n        <ContentParagraph>{para2}</ContentParagraph>\n      </StandardSideTextBlock>\n    );\n  } else {\n    return null;\n  }\n};\n\nexport default SideText;\n","import React, { useState, useRef, useCallback, useEffect } from \"react\";\nimport UtilityBar, {\n  DownloadType,\n} from \"../../../../../components/navigation/secondaryHeader/UtilityBar\";\nimport CompositionTreeMap from \"../../../../../components/dataViz/treeMap/CompositionTreeMap\";\nimport ClusterCompositionTreeMap from \"../../../../../components/dataViz/treeMap/ClusterCompositionTreeMap\";\nimport { defaultYear } from \"../../../../../Utils\";\nimport { ContentGrid } from \"../../../../../styling/styleUtils\";\nimport {\n  ClassificationNaicsIndustry,\n  ClassificationNaicsCluster,\n  CompositionType,\n  defaultDigitLevel,\n  defaultCompositionType,\n} from \"../../../../../types/graphQL/graphQLTypes\";\nimport CategoryLabels from \"../../../../../components/dataViz/legend/CategoryLabels\";\nimport styled from \"styled-components/macro\";\nimport useGlobalLocationData from \"../../../../../hooks/useGlobalLocationData\";\nimport useSectorMap from \"../../../../../hooks/useSectorMap\";\nimport useClusterMap from \"../../../../../hooks/useClusterMap\";\nimport DownloadImageOverlay from \"./DownloadImageOverlay\";\nimport useQueryParams from \"../../../../../hooks/useQueryParams\";\nimport useFluent from \"../../../../../hooks/useFluent\";\nimport EducationLegend from \"../../../../../components/dataViz/legend/EducationLegend\";\nimport WageLegend from \"../../../../../components/dataViz/legend/WageLegend\";\nimport {\n  ColorBy,\n  AggregationMode,\n  defaultAggregationMode,\n  ClusterLevel,\n  defaultClusterLevel,\n} from \"../../../../../routing/routes\";\nimport PreChartRow, {\n  Indicator,\n} from \"../../../../../components/general/PreChartRow\";\nimport { usePrevious } from \"react-use\";\nimport { Mode } from \"../../../../../components/general/searchIndustryInGraphDropdown\";\nimport SideText from \"./SideText\";\n\nconst TreeMapRoot = styled.div`\n  display: contents;\n`;\n\ninterface Props {\n  cityId: string;\n}\n\nconst EconomicComposition = (props: Props) => {\n  const { cityId } = props;\n  const [highlighted, setHighlighted] = useState<string | undefined>(undefined);\n  const clearHighlighted = useCallback(\n    () => setHighlighted(undefined),\n    [setHighlighted],\n  );\n  const prevHighlighted = usePrevious(highlighted);\n  const [hiddenSectors, setHiddenSectors] = useState<\n    ClassificationNaicsIndustry[\"id\"][]\n  >([]);\n  const [hiddenClusters, setHiddenClusters] = useState<\n    ClassificationNaicsCluster[\"id\"][]\n  >([]);\n  const {\n    digit_level,\n    cluster_level,\n    composition_type,\n    color_by,\n    aggregation,\n  } = useQueryParams();\n  const compositionType = composition_type\n    ? (composition_type as CompositionType)\n    : defaultCompositionType;\n  const sectorMap = useSectorMap();\n  const clusterMap = useClusterMap();\n\n  useEffect(() => clearHighlighted, [digit_level, clearHighlighted]);\n\n  const toggleSector = (sectorId: ClassificationNaicsIndustry[\"id\"]) =>\n    hiddenSectors.includes(sectorId)\n      ? setHiddenSectors(hiddenSectors.filter((sId) => sId !== sectorId))\n      : setHiddenSectors([...hiddenSectors, sectorId]);\n  const isolateSector = (sectorId: ClassificationNaicsIndustry[\"id\"]) =>\n    hiddenSectors.length === sectorMap.length - 1 &&\n    !hiddenSectors.find((sId) => sId === sectorId)\n      ? setHiddenSectors([])\n      : setHiddenSectors([\n          ...sectorMap.map((s) => s.id).filter((sId) => sId !== sectorId),\n        ]);\n  const resetSectors = () => setHiddenSectors([]);\n\n  const toggleCluster = (clusterId: ClassificationNaicsCluster[\"id\"]) =>\n    hiddenClusters.includes(clusterId)\n      ? setHiddenClusters(hiddenClusters.filter((sId) => sId !== clusterId))\n      : setHiddenClusters([...hiddenClusters, clusterId]);\n  const isolateCluster = (clusterId: ClassificationNaicsCluster[\"id\"]) =>\n    hiddenClusters.length === clusterMap.length - 1 &&\n    !hiddenClusters.find((sId) => sId === clusterId)\n      ? setHiddenClusters([])\n      : setHiddenClusters([\n          ...clusterMap.map((s) => s.id).filter((sId) => sId !== clusterId),\n        ]);\n  const resetClusters = () => setHiddenClusters([]);\n\n  const [activeDownload, setActiveDownload] = useState<DownloadType | null>(\n    null,\n  );\n  const closeDownload = () => setActiveDownload(null);\n\n  const [indicatorContent, setIndicatorContent] = useState<Indicator>({\n    text: undefined,\n    tooltipContent: undefined,\n  });\n\n  const treeMapRef = useRef<HTMLDivElement | null>(null);\n  const globalLocationData = useGlobalLocationData();\n  const getString = useFluent();\n\n  const isClusterTreeMap =\n    (!aggregation && defaultAggregationMode === AggregationMode.cluster) ||\n    aggregation === AggregationMode.cluster;\n\n  let download: React.ReactElement<any> | null;\n  if (activeDownload === DownloadType.Image && treeMapRef.current) {\n    const cellsNode = treeMapRef.current.querySelector(\n      \"div.react-canvas-tree-map-masterContainer\",\n    );\n    if (cellsNode) {\n      const targetCity =\n        globalLocationData.data &&\n        globalLocationData.data.cities.find((c) => c.cityId === cityId);\n      download = (\n        <DownloadImageOverlay\n          onClose={closeDownload}\n          cityId={cityId}\n          cityName={targetCity && targetCity.name ? targetCity.name : undefined}\n          year={defaultYear}\n          digitLevel={\n            digit_level ? parseInt(digit_level, 10) : defaultDigitLevel\n          }\n          clusterLevel={cluster_level ? cluster_level : defaultClusterLevel}\n          aggregationMode={\n            isClusterTreeMap\n              ? AggregationMode.cluster\n              : AggregationMode.industries\n          }\n          colorBy={color_by ? color_by : ColorBy.sector}\n          compositionType={compositionType}\n          hiddenClusters={hiddenClusters}\n          hiddenSectors={hiddenSectors}\n          treeMapCellsNode={cellsNode as HTMLDivElement}\n        />\n      );\n    } else {\n      download = null;\n      setActiveDownload(null);\n    }\n  } else {\n    download = null;\n  }\n\n  let legend: React.ReactElement<any> | null;\n  if (color_by === ColorBy.education) {\n    legend = <EducationLegend />;\n  } else if (color_by === ColorBy.wage) {\n    legend = <WageLegend />;\n  } else {\n    if (isClusterTreeMap) {\n      legend = (\n        <CategoryLabels\n          categories={clusterMap}\n          allowToggle={true}\n          toggleCategory={toggleCluster}\n          isolateCategory={isolateCluster}\n          hiddenCategories={hiddenClusters}\n          resetCategories={resetClusters}\n          resetText={getString(\"global-ui-reset-clusters\")}\n          fullWidth={false}\n        />\n      );\n    } else {\n      legend = (\n        <CategoryLabels\n          categories={sectorMap}\n          allowToggle={true}\n          toggleCategory={toggleSector}\n          isolateCategory={isolateSector}\n          hiddenCategories={hiddenSectors}\n          resetCategories={resetSectors}\n          resetText={getString(\"global-ui-reset-sectors\")}\n          fullWidth={true}\n        />\n      );\n    }\n  }\n\n  const treeMapViz = isClusterTreeMap ? (\n    <ClusterCompositionTreeMap\n      cityId={cityId}\n      year={defaultYear}\n      clusterLevel={cluster_level ? cluster_level : defaultClusterLevel}\n      colorBy={color_by ? color_by : ColorBy.sector}\n      compositionType={compositionType}\n      highlighted={highlighted}\n      clearHighlighted={clearHighlighted}\n      hiddenClusters={hiddenClusters}\n      setIndicatorContent={setIndicatorContent}\n    />\n  ) : (\n    <CompositionTreeMap\n      cityId={cityId}\n      year={defaultYear}\n      digitLevel={digit_level ? parseInt(digit_level, 10) : defaultDigitLevel}\n      colorBy={color_by ? color_by : ColorBy.sector}\n      compositionType={compositionType}\n      highlighted={highlighted}\n      clearHighlighted={clearHighlighted}\n      hiddenSectors={hiddenSectors}\n      setIndicatorContent={setIndicatorContent}\n    />\n  );\n\n  return (\n    <>\n      <ContentGrid>\n        <SideText\n          cityId={cityId}\n          year={defaultYear}\n          compositionType={compositionType}\n        />\n        <TreeMapRoot ref={treeMapRef}>\n          <PreChartRow\n            key={\"tree-map-search-\" + Boolean(!highlighted && prevHighlighted)}\n            indicator={\n              compositionType === CompositionType.Employees\n                ? indicatorContent\n                : undefined\n            }\n            searchInGraphOptions={{\n              hiddenParents: isClusterTreeMap ? hiddenClusters : hiddenSectors,\n              digitLevel: isClusterTreeMap\n                ? null\n                : digit_level\n                  ? parseInt(digit_level, 10)\n                  : defaultDigitLevel,\n              clusterLevel: isClusterTreeMap\n                ? cluster_level\n                  ? (parseInt(cluster_level, 10).toString() as ClusterLevel)\n                  : defaultClusterLevel\n                : null,\n              setHighlighted,\n              mode: isClusterTreeMap ? Mode.cluster : Mode.naics,\n            }}\n            settingsOptions={{\n              compositionType: true,\n              colorBy: true,\n              aggregationMode: true,\n              clusterLevel: isClusterTreeMap ? true : undefined,\n              digitLevel: isClusterTreeMap ? undefined : true,\n            }}\n          />\n          {treeMapViz}\n        </TreeMapRoot>\n        {legend}\n        {download}\n      </ContentGrid>\n\n      <UtilityBar\n        onDownloadImageButtonClick={() => setActiveDownload(DownloadType.Image)}\n      />\n    </>\n  );\n};\n\nexport default EconomicComposition;\n","import React from \"react\";\nimport { DefaultContentWrapper } from \"../../../../styling/GlobalGrid\";\nimport CityComposition from \"./cityComposition\";\nimport useCurrentCityId from \"../../../../hooks/useCurrentCityId\";\nimport SimpleError from \"../../../../components/transitionStateComponents/SimpleError\";\nimport { LoadingOverlay } from \"../../../../components/transitionStateComponents/VizLoadingBlock\";\n\nconst EconomicComposition = () => {\n  const cityId = useCurrentCityId();\n\n  if (cityId === null) {\n    return (\n      <DefaultContentWrapper>\n        <LoadingOverlay>\n          <SimpleError fluentMessageId={\"global-ui-error-invalid-city\"} />\n        </LoadingOverlay>\n      </DefaultContentWrapper>\n    );\n  }\n\n  return (\n    <DefaultContentWrapper>\n      <CityComposition cityId={cityId} />\n    </DefaultContentWrapper>\n  );\n};\n\nexport default EconomicComposition;\n","import React, { useState, useRef } from \"react\";\nimport BasicModal from \"../../../standardModal/BasicModal\";\nimport styled from \"styled-components/macro\";\nimport {\n  secondaryFont,\n  primaryFont,\n  SearchContainerDark,\n  backgroundDark,\n} from \"../../../../styling/styleUtils\";\nimport useFluent from \"../../../../hooks/useFluent\";\nimport PanelSearch, { Datum } from \"react-panel-search\";\nimport useCurrentCityId from \"../../../../hooks/useCurrentCityId\";\nimport useGlobalLocationData from \"../../../../hooks/useGlobalLocationData\";\nimport { useHistory } from \"react-router-dom\";\nimport queryString from \"query-string\";\nimport useQueryParams from \"../../../../hooks/useQueryParams\";\nimport { RegionGroup } from \"../../../dataViz/comparisonBarChart/cityIndustryComparisonQuery\";\nimport matchingKeywordFormatter from \"../../../../styling/utils/panelSearchKeywordFormatter\";\nimport { TooltipTheme } from \"../../../general/Tooltip\";\nimport BenchmarkSVG from \"../../../../assets/icons/benchmark_comparator.svg\";\n\n// Stub: peer group counts not available in static data\nexport const usePeerGroupCityCount = (_cityId: string | null): {\n  loading: boolean;\n  error: any;\n  data: { cityPeerGroupCounts: any } | undefined;\n} => ({\n  loading: false,\n  error: undefined,\n  data: undefined,\n});\n\nconst mobileWidth = 750; // in px\n\nconst Root = styled.div`\n  font-family: ${secondaryFont};\n  color: #fff;\n  width: 800px;\n  max-width: 100%;\n  height: 750px;\n  max-height: 90vh;\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  box-sizing: border-box;\n\n  @media (max-width: 990px), (max-height: 800px) {\n    width: 100%;\n    height: auto;\n    max-height: initial;\n    padding: 1rem;\n  }\n`;\n\nconst benchmarkButtonClassName = \"benchmark-open-modal-button-class-name\";\n\nconst H1 = styled.h1`\n  text-transform: uppercase;\n  font-weight: 400;\n  text-align: center;\n  margin-top: 2rem;\n  margin-bottom: 2rem;\n\n  @media (max-width: 990px), (max-height: 800px) {\n    font-size: 1.5rem;\n    margin-top: 1rem;\n    margin-bottom: 1rem;\n  }\n`;\n\nconst Icon = styled.img`\n  width: 2.5rem;\n  height: 2.5rem;\n  position: relative;\n  top: 0.75rem;\n  margin-right: 1rem;\n`;\n\nconst Grid = styled.div`\n  display: grid;\n  grid-template-columns: 1fr;\n  grid-gap: 2rem;\n\n  @media (max-width: ${mobileWidth}px) {\n    grid-template-columns: auto;\n    grid-template-rows: auto;\n  }\n\n  .react-panel-search-search-bar-input {\n    background-color: ${backgroundDark};\n  }\n\n  .react-panel-search-highlighted-item {\n    background-color: rgba(255, 255, 255, 0.25);\n  }\n\n  .react-panel-search-search-results {\n    background-color: ${backgroundDark};\n  }\n`;\n\nconst ContinueButtonContainer = styled.div`\n  margin-top: auto;\n  display: flex;\n  justify-content: flex-end;\n  padding: 0 1rem 1rem;\n  position: sticky;\n  bottom: 0;\n  pointer-events: none;\n\n  @media (max-width: 750px) {\n    position: relative;\n    padding-top: 1rem;\n  }\n\n  @media (max-height: 800px) {\n    margin-top: 0;\n  }\n`;\n\nconst ContinueButton = styled.button`\n  background-color: transparent;\n  border: solid 1px #fff;\n  text-transform: uppercase;\n  color: #fff;\n  font-family: ${secondaryFont};\n  font-size: 1.25rem;\n  padding: 0.6rem 1rem;\n  transition: opacity 0.2s ease-in-out;\n  background-color: ${backgroundDark};\n  pointer-events: all;\n\n  &:hover:not(:disabled) {\n    background-color: #fff;\n    color: ${backgroundDark};\n  }\n\n  &:disabled {\n    cursor: not-allowed;\n    color: rgba(255, 255, 255, 0.5);\n    border-color: rgba(255, 255, 255, 0.5);\n  }\n\n  @media (max-width: 990px), (max-height: 800px) {\n    font-size: 1rem;\n  }\n`;\n\nconst ContainerTitle = styled.h3`\n  color: #fff;\n  font-weight: 400;\n  margin: 0 0 0.4rem;\n  font-family: ${primaryFont};\n\n  @media (max-width: 990px), (max-height: 800px) {\n    font-size: 1.1rem;\n  }\n`;\n\nconst AboutText = styled.p`\n  color: #fff;\n  padding: 0 1.5rem;\n  margin: 0 0 1rem;\n  font-family: ${primaryFont};\n\n  @media (max-width: 990px), (max-height: 800px) {\n    font-size: 0.8rem;\n  }\n`;\n\nexport const defaultBenchmark = RegionGroup.World;\n\nexport enum ComparisonType {\n  Relative = \"relative\", // RCA\n  Absolute = \"absolute\", // Econ composition\n}\n\ninterface Props {\n  closeModal: (value: string | undefined) => void;\n  data: Datum[];\n  comparisonType: ComparisonType;\n}\n\nconst AddComparisonModal = (props: Props) => {\n  const { closeModal, data, comparisonType } = props;\n  const getString = useFluent();\n  const cityId = useCurrentCityId();\n  const continueButtonRef = useRef<HTMLButtonElement | null>(null);\n  const { data: globalData } = useGlobalLocationData();\n  const history = useHistory();\n  const { benchmark, ...otherParams } = useQueryParams();\n  let intialSelected: Datum | null | RegionGroup = RegionGroup.World;\n  if (benchmark === RegionGroup.World) {\n    intialSelected = benchmark as RegionGroup;\n  }\n  const [selected, setSelected] = useState<\n    Datum | null | RegionGroup\n  >(intialSelected);\n\n  const currentCity = globalData\n    ? globalData.cities.find((c) => c.cityId === cityId)\n    : undefined;\n  const name = currentCity ? currentCity.name : \"\";\n\n  const selectCity = (city: Datum | null) => {\n    setSelected(city);\n    if (continueButtonRef && continueButtonRef.current) {\n      const node = continueButtonRef.current;\n      setTimeout(() => {\n        node.focus();\n      }, 0);\n    }\n  };\n\n  const onContinue = () => {\n    if (selected && typeof selected === \"object\") {\n      const query = queryString.stringify({\n        ...otherParams,\n        benchmark: selected.id,\n      });\n      const newUrl = query\n        ? history.location.pathname + \"?\" + query\n        : history.location.pathname;\n      history.push(newUrl);\n      closeModal(selected.id.toString());\n    } else if (typeof selected === \"string\") {\n      const query = queryString.stringify({\n        ...otherParams,\n        benchmark: selected,\n      });\n      const newUrl = query\n        ? history.location.pathname + \"?\" + query\n        : history.location.pathname;\n      history.push(newUrl);\n      closeModal(RegionGroup.World);\n    }\n  };\n\n  const prevValue = benchmark;\n  const closeModalWithoutConfirming =\n    prevValue === undefined\n      ? () => closeModal(RegionGroup.World as string)\n      : () => closeModal(prevValue);\n\n  const title =\n    comparisonType === ComparisonType.Relative\n      ? getString(\"global-ui-benchmark-title\")\n      : getString(\"global-ui-compare-title\", { name });\n\n  const selectCityTitle =\n    comparisonType === ComparisonType.Relative\n      ? getString(\"global-ui-select-benchmark-city\")\n      : getString(\"global-ui-select-a-city-name\");\n\n  const about =\n    comparisonType === ComparisonType.Relative ? (\n      <AboutText>\n        Select a region to compare against.\n      </AboutText>\n    ) : null;\n\n  return (\n    <BasicModal\n      onClose={closeModalWithoutConfirming}\n      width={\"auto\"}\n      height={\"inherit\"}\n    >\n      <Root>\n        <H1\n          style={\n            comparisonType === ComparisonType.Absolute\n              ? { marginBottom: \"4rem\" }\n              : undefined\n          }\n          className={\n            comparisonType === ComparisonType.Absolute\n              ? undefined\n              : benchmarkButtonClassName\n          }\n        >\n          <Icon src={BenchmarkSVG} />\n          {title}:\n        </H1>\n        {about}\n        <SearchContainerDark>\n          <Grid>\n            <div>\n              <ContainerTitle>{selectCityTitle}</ContainerTitle>\n              <PanelSearch\n                data={data.filter(({ id }) => id !== cityId)}\n                topLevelTitle={getString(\"global-text-countries\")}\n                disallowSelectionLevels={[\"0\"]}\n                defaultPlaceholderText={getString(\"global-ui-type-a-city-name\")}\n                showCount={true}\n                resultsIdentation={1.75}\n                neverEmpty={false}\n                maxResults={500}\n                selectedValue={typeof selected === \"object\" ? selected : null}\n                onSelect={selectCity}\n                focusOnRender={\n                  window.innerHeight > 800 && window.innerWidth > 990\n                }\n                matchingKeywordFormatter={matchingKeywordFormatter(\n                  TooltipTheme.Dark,\n                )}\n              />\n            </div>\n          </Grid>\n        </SearchContainerDark>\n        <ContinueButtonContainer>\n          <ContinueButton\n            onClick={onContinue}\n            ref={continueButtonRef}\n            disabled={!selected}\n          >\n            {getString(\"global-ui-continue\")}\n          </ContinueButton>\n        </ContinueButtonContainer>\n      </Root>\n    </BasicModal>\n  );\n};\n\nexport default AddComparisonModal;\n","import { useStaticData } from \"../../../../dataProvider\";\nimport {\n  DigitLevel,\n  CompositionType,\n  defaultCompositionType,\n  isValidPeerGroup,\n  PeerGroup,\n} from \"../../../../types/graphQL/graphQLTypes\";\nimport useCurrentCityId from \"../../../../hooks/useCurrentCityId\";\nimport { defaultYear } from \"../../../../Utils\";\nimport useQueryParams from \"../../../../hooks/useQueryParams\";\nimport useCurrentBenchmark from \"../../../../hooks/useCurrentBenchmark\";\n\nexport enum RegionGroup {\n  World = \"world\",\n  SimilarCities = \"similarcities\",\n}\n\ninterface ClusterData {\n  clusterId: string;\n  level: number | null;\n  numEmploy: number | null;\n}\n\ninterface NaicsData {\n  naicsId: string;\n  numCompany: number | null;\n  numEmploy: number | null;\n}\n\ninterface NaicsRca {\n  naicsId: string;\n  rca: number | null;\n}\n\ninterface ClusterRca {\n  clusterId: string;\n  rca: number | null;\n}\n\nexport interface SuccessResponse {\n  clusterData: ClusterData[];\n  naicsData: NaicsData[];\n  naicsRca: NaicsRca[];\n  c1Rca: ClusterRca[];\n  c3Rca: ClusterRca[];\n}\n\ninterface Variables {\n  cityId: number | null;\n  year: number;\n  level: DigitLevel;\n  peerGroup: PeerGroup | \"\";\n  partnerCityIds: [number] | [];\n  variable: \"employ\" | \"company\";\n}\n\nexport const useClusterIntensityQuery = (variables: Variables) => {\n  const { data: blsData, loading: blsLoading } = useStaticData();\n\n  if (variables.cityId === null || blsLoading || !blsData) {\n    return { loading: true, error: undefined, data: undefined };\n  }\n\n  const cityId = variables.cityId.toString();\n  const regionData = blsData.regionData[cityId];\n  if (!regionData) {\n    return { loading: false, error: undefined, data: undefined };\n  }\n\n  const yearData = regionData[variables.year] || regionData[defaultYear];\n  if (!yearData) {\n    return { loading: false, error: undefined, data: undefined };\n  }\n\n  // Build socCode  majorGroupId lookup\n  const socToMajorGroup: Record<string, string> = {};\n  blsData.occupations.forEach((o) => {\n    socToMajorGroup[o.socCode] = o.majorGroupId;\n  });\n\n  const naicsData: NaicsData[] = [];\n  const naicsRca: NaicsRca[] = [];\n\n  yearData.forEach((occ) => {\n    naicsData.push({\n      naicsId: occ.socCode,\n      numCompany: occ.gdp,\n      numEmploy: occ.totEmp,\n    });\n    naicsRca.push({\n      naicsId: occ.socCode,\n      rca: 1.0,\n    });\n  });\n\n  // Aggregate by major group for cluster data\n  const majorGroupAgg: Record<string, { employ: number }> = {};\n  yearData.forEach((occ) => {\n    const mgId = socToMajorGroup[occ.socCode] || \"00\";\n    if (!majorGroupAgg[mgId]) {\n      majorGroupAgg[mgId] = { employ: 0 };\n    }\n    majorGroupAgg[mgId].employ += occ.totEmp;\n  });\n\n  const clusterData: ClusterData[] = [];\n  const c1Rca: ClusterRca[] = [];\n  const c3Rca: ClusterRca[] = [];\n\n  Object.entries(majorGroupAgg).forEach(([mgId, agg]) => {\n    clusterData.push({\n      clusterId: mgId,\n      level: 1,\n      numEmploy: agg.employ,\n    });\n    c1Rca.push({ clusterId: mgId, rca: 1.0 });\n    c3Rca.push({ clusterId: mgId, rca: 1.0 });\n  });\n\n  const data: SuccessResponse = { clusterData, naicsData, naicsRca, c1Rca, c3Rca };\n  return { loading: false, error: undefined, data };\n};\n\nconst useRCAData = (level: DigitLevel) => {\n  const cityId = useCurrentCityId();\n  const { composition_type } = useQueryParams();\n  const { benchmark } = useCurrentBenchmark();\n\n  const defaultCompositionVariable =\n    defaultCompositionType === CompositionType.Companies ? \"company\" : \"employ\";\n  let variable: \"employ\" | \"company\" = defaultCompositionVariable;\n  if (composition_type === CompositionType.Companies) {\n    variable = \"company\";\n  } else if (composition_type === CompositionType.Employees) {\n    variable = \"employ\";\n  }\n\n  const peerGroup = isValidPeerGroup(benchmark) ? (benchmark as PeerGroup) : \"\";\n\n  const partnerCityIds: [number] | [] =\n    benchmark !== undefined && !isNaN(parseInt(benchmark, 10))\n      ? [parseInt(benchmark, 10)]\n      : [];\n\n  const { loading, error, data } = useClusterIntensityQuery({\n    cityId: cityId !== null ? parseInt(cityId, 10) : null,\n    year: defaultYear,\n    level,\n    peerGroup,\n    partnerCityIds,\n    variable,\n  });\n\n  return cityId !== null\n    ? { loading, error, data }\n    : { loading: true, error: undefined, data: undefined };\n};\n\nexport default useRCAData;\n","import styled from \"styled-components\";\nimport {\n  breakPointValues,\n  breakPoints as globalBreakPoints,\n} from \"../../../../../styling/GlobalGrid\";\nimport {\n  backgroundMedium,\n  baseColor,\n  primaryColor,\n  secondaryFont,\n} from \"../../../../../styling/styleUtils\";\n\nconst breakPoints = {\n  medium: \"screen and (max-width: 1250px)\",\n  small: `screen and (max-width: 1070px) and (min-width: ${breakPointValues.width.small}px)`,\n};\n\nexport const TitleBase = styled.h2`\n  background-color: ${backgroundMedium};\n  font-family: ${secondaryFont};\n  font-size: 0.9rem;\n  margin: 0 0.25rem 0.25rem;\n  padding: 0.5rem 0 0.5rem 0.35rem;\n  height: 1.75rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  white-space: nowrap;\n\n  @media (max-height: 800px) {\n    font-size: 0.85rem;\n    padding: 0.25rem 0 0.25rem 0.15rem;\n  }\n\n  @media ${breakPoints.medium} {\n    font-size: 0.85rem;\n    padding: 0.25rem 0 0.25rem 0.15rem;\n    height: auto;\n    white-space: initial;\n    text-align: center;\n  }\n\n  @media ${breakPoints.small} {\n    font-size: 0.75rem;\n    height: auto;\n    white-space: initial;\n    flex-direction: column;\n  }\n\n  @media ${globalBreakPoints.small} {\n    flex-direction: row;\n  }\n`;\n\nexport const WrappableText = styled.div`\n  white-space: normal;\n`;\n\nexport const YearText = styled.small`\n  color: ${primaryColor};\n  font-size: 0.7rem;\n  line-height: 0;\n  font-weight: 600;\n  display: inline-block;\n  padding: 0.5rem;\n  white-space: nowrap;\n\n  @media ${breakPoints.medium} {\n    font-size: 0.65rem;\n  }\n`;\n\nexport const Icon = styled.img`\n  width: 1.75rem;\n  margin-right: 0.5rem;\n\n  @media (max-height: 800px) {\n    width: 1rem;\n  }\n\n  @media ${breakPoints.small} {\n    display: none;\n  }\n`;\n\nexport const ValueBase = styled.h3`\n  color: ${baseColor};\n  font-weight: 400;\n  font-variant: small-caps;\n  font-size: 1.8rem;\n  text-align: center;\n  margin: 0;\n\n  @media ${breakPoints.medium}, (max-height: 800px) {\n    font-size: 1.2rem;\n  }\n\n  @media ${globalBreakPoints.small} {\n    margin-bottom: 1.5rem;\n  }\n`;\n\nexport const ListItem = styled.div`\n  font-size: 1.1rem;\n\n  @media ${breakPoints.medium}, (max-height: 800px) {\n    font-size: 0.85rem;\n  }\n`;\n","import React from \"react\";\nimport { usePeerGroupCityCount } from \"../../../../../../components/navigation/secondaryHeader/comparisons/AddComparisonModal\";\nimport useCurrentCity from \"../../../../../../hooks/useCurrentCity\";\nimport { TitleBase, YearText, Icon, ValueBase, ListItem } from \"../styleUtils\";\nimport PopulationSVG from \"../../../../../../assets/icons/population.svg\";\nimport RankingSVG from \"../../../../../../assets/icons/ranking.svg\";\nimport GdpPerCapitaSVG from \"../../../../../../assets/icons/gdppercapita.svg\";\nimport DataReliabilitySVG from \"../../../../../../assets/icons/datareliability.svg\";\nimport {\n  populationDisplayYear,\n  gdpPerCapitaDisplayYear,\n  rankingDisplayYear,\n  defaultYear,\n  formatNumberLong,\n  numberWithCommas,\n} from \"../../../../../../Utils\";\nimport useFluent, { ordinalNumber } from \"../../../../../../hooks/useFluent\";\n\nimport styled from \"styled-components\";\nimport Tooltip from \"../../../../../../components/general/Tooltip\";\nimport SimpleTextLoading from \"../../../../../../components/transitionStateComponents/SimpleTextLoading\";\nimport {\n  getNewDataQualityLevel,\n  NewDataQualityLevel,\n  dataQualityColors,\n} from \"../../../../../../components/general/Utils\";\n\nconst DataLegend = styled.div`\n  margin-right: 0.2rem;\n  display: inline-flex;\n  flex-direction: row;\n  align-items: center;\n`;\n\nconst SmallDot = styled.div`\n  width: 0.45rem;\n  height: 0.45rem;\n  border-radius: 1000px;\n  margin-right: 0.2rem;\n`;\n\nconst LargeDot = styled.div`\n  width: 0.9rem;\n  height: 0.9rem;\n  border-radius: 1000px;\n  margin-right: 0.075rem;\n`;\n\nconst LegendContainer = styled.div`\n  margin-top: 0.5rem;\n\n  & h1 {\n    font-size: inherit;\n  }\n`;\n\nconst LegendRow = styled.div`\n  margin-top: 0.25rem;\n  font-size: 0.85em;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n`;\n\nconst TopRow = () => {\n  const { loading: cityLoading, city } = useCurrentCity();\n  const { loading, error, data } = usePeerGroupCityCount(\n    city && city.cityId ? city.cityId : null,\n  );\n  const getString = useFluent();\n\n  let population: React.ReactElement<any> | null;\n  let gdppc: React.ReactElement<any> | null;\n  let flagColor: React.ReactElement<any> | null = null;\n  let alertTitle: string = \"---\";\n  let description: string = \"---\";\n  let dataQualityTooltip: React.ReactElement<any> | null = null;\n  let regionPopRank: string = \"---\";\n  let regionGdppcRank: string = \"---\";\n  if (loading || cityLoading) {\n    population = <SimpleTextLoading />;\n    gdppc = <SimpleTextLoading />;\n  } else if (error) {\n    console.error(error);\n    population = <>---</>;\n    gdppc = <>---</>;\n  } else if (data && city) {\n    const dataFlag = city.dataFlag;\n    const dataQualityLevel = getNewDataQualityLevel(dataFlag);\n\n    if (dataQualityLevel === NewDataQualityLevel.HIGH) {\n      alertTitle = getString(\"data-disclaimer-high-quality-title\");\n      description = getString(\"data-disclaimer-high-quality-desc\");\n    } else if (dataQualityLevel === NewDataQualityLevel.MEDIUM) {\n      alertTitle = getString(\"data-disclaimer-medium-quality-title\");\n      description = getString(\"data-disclaimer-medium-quality-desc\");\n    } else if (dataQualityLevel === NewDataQualityLevel.LOW) {\n      alertTitle = getString(\"data-disclaimer-low-quality-title\");\n      description = getString(\"data-disclaimer-low-quality-desc\");\n    }\n\n    flagColor = (\n      <DataLegend>\n        <LargeDot\n          style={{ backgroundColor: dataQualityColors.get(dataQualityLevel) }}\n        />\n      </DataLegend>\n    );\n\n    dataQualityTooltip = (\n      <>\n        <div dangerouslySetInnerHTML={{ __html: description }}></div>\n        <LegendContainer>\n          <h1>Metroverse Data Quality Scale</h1>\n          <LegendRow>\n            <SmallDot\n              style={{\n                backgroundColor: dataQualityColors.get(\n                  NewDataQualityLevel.HIGH,\n                ),\n              }}\n            />\n            High Quality\n          </LegendRow>\n          <LegendRow>\n            <SmallDot\n              style={{\n                backgroundColor: dataQualityColors.get(\n                  NewDataQualityLevel.MEDIUM,\n                ),\n              }}\n            />\n            Medium Quality\n          </LegendRow>\n          <LegendRow>\n            <SmallDot\n              style={{\n                backgroundColor: dataQualityColors.get(NewDataQualityLevel.LOW),\n              }}\n            />\n            Low Quality\n          </LegendRow>\n        </LegendContainer>\n      </>\n    );\n\n    population = <>{formatNumberLong(city.population ? city.population : 0)}</>;\n    gdppc = <>${numberWithCommas(city.gdppc ? Math.round(city.gdppc) : 0)}</>;\n    regionPopRank = ordinalNumber([\n      city.regionPopRank ?? 0,\n    ]).toUpperCase();\n    regionGdppcRank = ordinalNumber([\n      city.regionGdppcRank ?? 0,\n    ]).toUpperCase();\n  } else {\n    population = <>---</>;\n    gdppc = <>---</>;\n  }\n\n  return (\n    <>\n      <div>\n        <TitleBase>\n          <Icon src={PopulationSVG} />\n          {getString(\"global-text-population\")}\n          <YearText>\n            {populationDisplayYear}\n            <Tooltip explanation={getString(\"global-text-population-about\")} />\n          </YearText>\n        </TitleBase>\n        <ValueBase>{population}</ValueBase>\n      </div>\n      <div>\n        <TitleBase>\n          <Icon src={GdpPerCapitaSVG} />\n          {getString(\"global-text-gdp-per-capita\")}\n          <YearText>\n            {gdpPerCapitaDisplayYear}\n            <Tooltip\n              explanation={getString(\"global-text-gdp-per-capita-about\")}\n            />\n          </YearText>\n        </TitleBase>\n        <ValueBase>{gdppc}</ValueBase>\n      </div>\n      <div>\n        <TitleBase>\n          <Icon src={RankingSVG} />\n          {getString(\"city-overview-ranking-title\")}*\n          <YearText>{rankingDisplayYear}</YearText>\n        </TitleBase>\n        <ValueBase>\n          <ListItem>\n            {getString(\"city-overview-ranking-pop\", { value: regionPopRank })}\n          </ListItem>\n          <ListItem>\n            {getString(\"city-overview-ranking-gdp\", { value: regionGdppcRank })}\n          </ListItem>\n        </ValueBase>\n      </div>\n      <div>\n        <TitleBase>\n          <Icon src={DataReliabilitySVG} />\n          {getString(\"city-overview-data-quality\")}\n          <YearText>\n            {defaultYear}\n            <Tooltip explanation={dataQualityTooltip} />\n          </YearText>\n        </TitleBase>\n        <ValueBase>\n          {flagColor}\n          {alertTitle}\n        </ValueBase>\n      </div>\n    </>\n  );\n};\n\nexport default TopRow;\n","/**\n * Stub for Phase 1 - benchmark comparison is not yet implemented.\n * Returns a null-like benchmark so downstream components can render without errors.\n */\n\nconst useCurrentBenchmark = () => {\n  return {\n    benchmarkName: '',\n    benchmarkNameShort: '',\n    benchmark: '' as string,\n  };\n};\n\nexport default useCurrentBenchmark;\n","import React, { useState } from \"react\";\nimport useFluent from \"../../../hooks/useFluent\";\nimport styled from \"styled-components\";\nimport {\n  backgroundDark,\n  benchmarkColor,\n  lightBorderColor,\n  primaryFont,\n  secondaryFont,\n} from \"../../../styling/styleUtils\";\nimport Tooltip from \"../../general/Tooltip\";\nimport BenchmarkSVG from \"../../../assets/icons/benchmark_comparator.svg\";\nimport { breakPoints } from \"../../../styling/GlobalGrid\";\n\nconst Root = styled.div`\n  display: flex;\n  align-items: center;\n`;\n\nconst ButtonsRoot = styled.div`\n  padding: 0 0.5rem;\n  display: flex;\n  flex-direction: column;\n`;\n\nconst Button = styled.button`\n  pointer-events: all;\n  font-family: ${primaryFont};\n  font-size: 0.75rem;\n  font-weight: 600;\n  text-transform: uppercase;\n  border: solid 1px ${benchmarkColor};\n  background-color: transparent;\n  display: block;\n  width: 100%;\n`;\n\nconst ToggleButton = styled(Button)`\n  border: solid 1px ${lightBorderColor};\n\n  &:hover {\n    background-color: ${lightBorderColor};\n  }\n`;\n\nconst OneTimeTooltip = styled.div`\n  position: absolute;\n  background-color: ${backgroundDark};\n  color: #fff;\n  padding: 0.5rem 0.75rem;\n  font-size: 0.8rem;\n  z-index: 100;\n  pointer-events: all;\n  max-width: 190px;\n  white-space: normal;\n  text-transform: none;\n  font-weight: 400;\n  transform: translateX(calc(100% - 2rem));\n\n  &:before {\n    content: \"\";\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    left: -0.4rem;\n    margin: auto;\n    width: 0;\n    height: 0;\n    border-top: 0.4rem solid transparent;\n    border-bottom: 0.4rem solid transparent;\n    border-right: 0.4rem solid ${backgroundDark};\n  }\n\n  @media ${breakPoints.small} {\n    transform: translate(-8%, -76%);\n\n    &:before {\n      width: 0;\n      height: 0;\n      left: 0;\n      right: 0;\n      top: auto;\n      bottom: -0.4rem;\n      border-left: 0.4rem solid transparent;\n      border-right: 0.4rem solid transparent;\n      border-top: 0.4rem solid ${backgroundDark};\n      border-bottom: none;\n    }\n  }\n`;\n\nconst DismissTooltipButton = styled.button`\n  border: solid 1px #fff;\n  background-color: transparent;\n  color: #fff;\n  font-family: ${primaryFont};\n  font-size: 0.875rem;\n  margin-top: 0.75rem;\n\n  &:hover {\n    background-color: #fff;\n    color: ${backgroundDark};\n  }\n`;\n\nconst Icon = styled.img`\n  width: 1rem;\n  height: 1rem;\n  position: relative;\n  top: 0.25rem;\n  margin-right: 0.25rem;\n`;\n\nconst HighlightedTooltipText = styled.span`\n  font-weight: 600;\n  text-transform: uppercase;\n  font-size: 0.875em;\n  color: ${benchmarkColor};\n  margin: 0 0.2rem;\n  white-space: nowrap;\n`;\n\nconst EquationContainer = styled.div`\n  margin-top: 0.5rem;\n`;\nconst Division = styled.div`\n  margin-top: 0.25rem;\n  font-size: 0.85em;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  text-align: center;\n  font-family: ${secondaryFont};\n`;\nconst Subtraction = styled.div`\n  margin-top: 0.25rem;\n  font-size: 0.85em;\n  display: flex;\n  text-align: center;\n  font-family: ${secondaryFont};\n`;\nconst Top = styled.div`\n  padding-bottom: 0.1rem;\n  margin-bottom: 0.1rem;\n  border-bottom: solid 1px #333;\n  max-width: min-content;\n  flex-grow: 0;\n  white-space: nowrap;\n`;\nconst Bottom = styled.div``;\n\nconst BenchmarkText = () => {\n  return (\n    <HighlightedTooltipText>\n      <Icon src={BenchmarkSVG} />\n      Change Peer Group\n    </HighlightedTooltipText>\n  );\n};\n\nconst oneTimeTooltipLocalStorageKey =\n  \"benchmarkPresenceToggleAxisOneTimeTooltipLocalStorageKeyv2\";\nenum StringBoolean {\n  \"TRUE\" = \"TRUE\",\n  \"FALSE\" = \"FALSE\",\n}\n\nexport enum Highlighted {\n  relative = \"relative\",\n  absolute = \"absolute\",\n}\n\ninterface Props {\n  togglePresence?: boolean;\n  highlight?: Highlighted;\n  onButtonClick?: (highlighted: Highlighted) => void;\n  showArrows?: boolean;\n}\n\nconst PresenceToggle = (props: Props) => {\n  const { togglePresence, highlight, showArrows, onButtonClick } = props;\n  const getString = useFluent();\n\n  const initialShowOverviewTooltip =\n    localStorage.getItem(oneTimeTooltipLocalStorageKey) === StringBoolean.TRUE\n      ? false\n      : true;\n  const [showOverviewTooltip, setShowOverviewTooltip] = useState<boolean>(\n    initialShowOverviewTooltip,\n  );\n  const dismissOverviewTooltip = () => {\n    setShowOverviewTooltip(false);\n    localStorage.setItem(oneTimeTooltipLocalStorageKey, StringBoolean.TRUE);\n  };\n\n  const highlightedStyles: React.CSSProperties = {\n    backgroundColor: lightBorderColor,\n    borderColor: benchmarkColor,\n  };\n  const relativePresenceTooltip = (\n    <>\n      <div>{getString(\"global-ui-relative-presence-tooltip\")}</div>\n      <EquationContainer>\n        <div>It is calculated as:</div>\n        <Division>\n          <Top>employment share of industry in city</Top>\n          <Bottom>employment share of industry in peer group</Bottom>\n        </Division>\n      </EquationContainer>\n    </>\n  );\n  const absolutePresenceTooltip = (\n    <>\n      <div>{getString(\"global-ui-absolute-presence-tooltip\")}</div>\n      <EquationContainer>\n        <div>It is calculated as:</div>\n        <Subtraction>\n          (employment share of industry in city) - (employment share of industry\n          in peer group)\n        </Subtraction>\n      </EquationContainer>\n    </>\n  );\n  const presenceButtons = togglePresence ? (\n    <>\n      <Tooltip explanation={relativePresenceTooltip}>\n        <ToggleButton\n          style={\n            highlight === Highlighted.relative ? highlightedStyles : undefined\n          }\n          onClick={\n            onButtonClick\n              ? () => onButtonClick(Highlighted.relative)\n              : undefined\n          }\n        >\n          <Tooltip explanation={relativePresenceTooltip} />\n          {getString(\"global-ui-relative-presence\")}\n        </ToggleButton>\n      </Tooltip>\n      <Tooltip explanation={absolutePresenceTooltip}>\n        <ToggleButton\n          style={\n            highlight === Highlighted.absolute ? highlightedStyles : undefined\n          }\n          onClick={\n            onButtonClick\n              ? () => onButtonClick(Highlighted.absolute)\n              : undefined\n          }\n        >\n          <Tooltip explanation={absolutePresenceTooltip} />\n          {getString(\"global-ui-absolute-presence\")}\n        </ToggleButton>\n      </Tooltip>\n    </>\n  ) : (\n    <Tooltip explanation={relativePresenceTooltip}>\n      <Button>\n        <Tooltip explanation={relativePresenceTooltip} />\n        {getString(\"global-ui-relative-presence\")}\n      </Button>\n    </Tooltip>\n  );\n\n  const arrowLeft = showArrows ? \"\" : null;\n  const arrowRight = showArrows ? \"\" : null;\n\n  const oneTimeTooltip = showOverviewTooltip ? (\n    <OneTimeTooltip>\n      Hover on labels to learn more. Click on <BenchmarkText /> to select a\n      different benchmark.\n      <br />\n      <DismissTooltipButton onClick={dismissOverviewTooltip}>\n        {getString(\"city-overview-one-time-tooltip-got-it\")}\n      </DismissTooltipButton>\n    </OneTimeTooltip>\n  ) : (\n    false\n  );\n\n  return (\n    <Root>\n      {arrowLeft}\n      <ButtonsRoot>{presenceButtons}</ButtonsRoot>\n      {arrowRight}\n      {oneTimeTooltip}\n    </Root>\n  );\n};\n\nexport default PresenceToggle;\n","import React from \"react\";\nimport { defaultYear } from \"../../../../../../Utils\";\nimport {\n  DigitLevel,\n  PeerGroup,\n} from \"../../../../../../types/graphQL/graphQLTypes\";\nimport { useClusterIntensityQuery } from \"../../../../../../components/dataViz/industrySpace/chart/useRCAData\";\nimport orderBy from \"lodash/orderBy\";\nimport useGlobalClusterData from \"../../../../../../hooks/useGlobalClusterData\";\nimport useGlobalIndustriesData from \"../../../../../../hooks/useGlobalIndustriesData\";\nimport useFluent from \"../../../../../../hooks/useFluent\";\nimport {\n  Icon,\n  ListItem,\n  TitleBase,\n  ValueBase,\n  WrappableText,\n  YearText,\n} from \"../styleUtils\";\nimport Tooltip from \"../../../../../../components/general/Tooltip\";\nimport TopIndustriesSVG from \"../../../../../../assets/icons/topindustries.svg\";\nimport TopClustersSVG from \"../../../../../../assets/icons/topknowledgecluster.svg\";\nimport SimpleTextLoading from \"../../../../../../components/transitionStateComponents/SimpleTextLoading\";\nimport styled from \"styled-components\";\nimport { breakPoints } from \"../../../../../../styling/GlobalGrid\";\n\nconst Cell = styled.div`\n  max-width: 380px;\n  @media ${breakPoints.small} {\n    max-width: 100%;\n  }\n`;\n\ninterface Props {\n  cityId: string;\n}\n\nconst TopRCA = ({ cityId }: Props) => {\n  const getString = useFluent();\n  const { loading, error, data } = useClusterIntensityQuery({\n    cityId: cityId !== null ? parseInt(cityId, 10) : null,\n    year: defaultYear,\n    level: DigitLevel.Sector,\n    peerGroup: PeerGroup.GlobalPopulation,\n    partnerCityIds: [],\n    variable: \"employ\",\n  });\n  const clusters = useGlobalClusterData();\n  const industries = useGlobalIndustriesData();\n\n  let topIndustriesElement: React.ReactElement<any> | null;\n  let topClustersElement: React.ReactElement<any> | null;\n  if (loading || clusters.loading || industries.loading) {\n    topIndustriesElement = <SimpleTextLoading />;\n    topClustersElement = <SimpleTextLoading />;\n  } else if (error) {\n    console.error(error);\n    topIndustriesElement = null;\n    topClustersElement = null;\n  } else if (clusters.error) {\n    console.error(clusters.error);\n    topIndustriesElement = null;\n    topClustersElement = null;\n  } else if (industries.error) {\n    console.error(industries.error);\n    topIndustriesElement = null;\n    topClustersElement = null;\n  } else if (data && clusters.data && industries.data) {\n    const { c3Rca, naicsRca } = data;\n\n    const industriesGreaterThan1 = naicsRca.filter((d) => {\n      const industry = industries.data?.industries.find(\n        (dd) => dd.naicsId === d.naicsId + \"\",\n      );\n      return d.rca && d.rca >= 1 && industry && industry.name !== \"Other\";\n    });\n    const topIndustries = orderBy(\n      industriesGreaterThan1 ? industriesGreaterThan1 : naicsRca,\n      [\"rca\"],\n      [\"desc\"],\n    )\n      .slice(0, industriesGreaterThan1 ? 3 : 1)\n      .map((d) => {\n        const industry = industries.data?.industries.find(\n          (dd) => dd.naicsId === d.naicsId + \"\",\n        );\n        return (\n          <ListItem key={d.naicsId}>{industry?.name?.toUpperCase()}</ListItem>\n        );\n      });\n    topIndustriesElement = <>{topIndustries}</>;\n\n    const clustersGreaterThan1 = c3Rca.filter((d) => d.rca && d.rca >= 1);\n    const topClusters = orderBy(\n      clustersGreaterThan1 ? clustersGreaterThan1 : c3Rca,\n      [\"rca\"],\n      [\"desc\"],\n    )\n      .slice(0, clustersGreaterThan1 ? 3 : 1)\n      .map((d) => {\n        const cluster = clusters.data?.clusters.find(\n          (dd) => dd.clusterId === d.clusterId + \"\",\n        );\n        return (\n          <ListItem key={d.clusterId}>{cluster?.name?.toUpperCase()}</ListItem>\n        );\n      });\n    topClustersElement = <>{topClusters}</>;\n  } else {\n    topIndustriesElement = null;\n    topClustersElement = null;\n  }\n\n  return (\n    <>\n      <Cell>\n        <TitleBase>\n          <Icon src={TopIndustriesSVG} />\n          <WrappableText>\n            {getString(\"city-overview-top-specialized-industries\")}**\n          </WrappableText>\n          <YearText>\n            {defaultYear}\n            <Tooltip\n              explanation={\n                <div\n                  dangerouslySetInnerHTML={{\n                    __html: getString(\n                      \"city-overview-top-specialized-industries-tooltip\",\n                    ),\n                  }}\n                />\n              }\n            />\n          </YearText>\n        </TitleBase>\n        <ValueBase>{topIndustriesElement}</ValueBase>\n      </Cell>\n      <Cell>\n        <TitleBase>\n          <Icon src={TopClustersSVG} />\n          <WrappableText>\n            {getString(\"city-overview-top-knowledge-clusters\")}**\n          </WrappableText>\n          <YearText>\n            {defaultYear}\n            <Tooltip\n              explanation={getString(\n                \"city-overview-top-knowledge-clusters-tooltip\",\n              )}\n            />\n          </YearText>\n        </TitleBase>\n        <ValueBase>{topClustersElement}</ValueBase>\n      </Cell>\n    </>\n  );\n};\n\nexport default TopRCA;\n","import useCurrentCityId from \"../../../hooks/useCurrentCityId\";\n\nexport interface SuccessResponse {\n  cities: {\n    cityId: string;\n    partnerId: string;\n    eucdist: number | null;\n    id: string;\n  }[];\n  cityPartnerEucdistScale: {\n    minGlobalEucdist: number;\n    p20GlobalEucdist: number;\n    p40GlobalEucdist: number;\n    p60GlobalEucdist: number;\n    p80GlobalEucdist: number;\n    maxGlobalEucdist: number;\n  };\n}\n\n// Stubbed: no proximity/similarity data in BLS static dataset\nconst useProximityData = () => {\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  const _cityId = useCurrentCityId();\n\n  return {\n    loading: false,\n    error: undefined,\n    data: {\n      cities: [],\n      cityPartnerEucdistScale: {\n        minGlobalEucdist: 0,\n        p20GlobalEucdist: 0,\n        p40GlobalEucdist: 0,\n        p60GlobalEucdist: 0,\n        p80GlobalEucdist: 0,\n        maxGlobalEucdist: 0,\n      },\n    } as SuccessResponse,\n  };\n};\n\nexport default useProximityData;\n","import orderBy from \"lodash/orderBy\";\nimport React from \"react\";\nimport useProximityData from \"../../../../../../components/dataViz/similarCitiesMap/useProximityData\";\nimport Tooltip from \"../../../../../../components/general/Tooltip\";\nimport useCurrentCity from \"../../../../../../hooks/useCurrentCity\";\nimport useFluent from \"../../../../../../hooks/useFluent\";\nimport useGlobalLocationData from \"../../../../../../hooks/useGlobalLocationData\";\nimport { defaultYear } from \"../../../../../../Utils\";\nimport { Icon, ListItem, TitleBase, ValueBase, YearText } from \"../styleUtils\";\nimport TopCitiesSVG from \"../../../../../../assets/icons/topsimilarcities.svg\";\nimport SimpleTextLoading from \"../../../../../../components/transitionStateComponents/SimpleTextLoading\";\n\nconst TopCities = () => {\n  const getString = useFluent();\n  const { loading, error, data } = useProximityData();\n  const globalLocations = useGlobalLocationData();\n  const currentCity = useCurrentCity();\n  let topCitiesElement: React.ReactElement<any> | null;\n  if (loading || globalLocations.loading || currentCity.loading) {\n    topCitiesElement = <SimpleTextLoading />;\n  } else if (error) {\n    console.error(error);\n    topCitiesElement = null;\n  } else if (globalLocations.error) {\n    console.error(globalLocations.error);\n    topCitiesElement = null;\n  } else if (data && globalLocations.data && currentCity.city) {\n    const minPop = currentCity.city.population\n      ? currentCity.city.population / 2\n      : 0;\n    const maxPop = currentCity.city.population\n      ? currentCity.city.population * 2\n      : 0;\n    const topLocations = orderBy(data.cities, [\"eucdist\"])\n      .map((d) => {\n        const city = globalLocations.data?.cities.find(\n          (dd) => dd.cityId === d.partnerId,\n        );\n        return { ...d, city };\n      })\n      .filter(\n        (d) =>\n          d.partnerId !== currentCity.city?.cityId &&\n          d.city?.population &&\n          d.city.population > minPop &&\n          d.city.population < maxPop,\n      )\n      .slice(0, 3)\n      .map((d) => {\n        const country = globalLocations.data?.countries.find(\n          (cntry) => cntry.countryId === d.city?.countryId + \"\",\n        );\n        const countryText = country ? \", \" + country.code : \"\";\n        return (\n          <ListItem key={d.city?.cityId}>\n            {d.city?.name?.toUpperCase()}\n            {countryText.toUpperCase()}\n          </ListItem>\n        );\n      });\n    topCitiesElement = <>{topLocations}</>;\n  } else {\n    topCitiesElement = null;\n  }\n  return (\n    <div>\n      <TitleBase>\n        <Icon src={TopCitiesSVG} />\n        <div>{getString(\"city-overview-top-similar-cities\")}</div>\n        <YearText>\n          {defaultYear}\n          <Tooltip\n            explanation={getString(\"city-overview-top-similar-cities-tooltip\")}\n          />\n        </YearText>\n      </TitleBase>\n      <ValueBase>{topCitiesElement}</ValueBase>\n    </div>\n  );\n};\n\nexport default TopCities;\n","import React from \"react\";\nimport TopRCA from \"./TopRCA\";\nimport useCurrentCityId from \"../../../../../../hooks/useCurrentCityId\";\nimport TopCities from \"./TopCities\";\n\nconst BottomRow = () => {\n  const cityId = useCurrentCityId();\n\n  if (!cityId) {\n    return null;\n  }\n\n  return (\n    <>\n      <TopRCA cityId={cityId} />\n      <TopCities />\n    </>\n  );\n};\n\nexport default BottomRow;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { usePeerGroupCityCount } from \"../../../../../components/navigation/secondaryHeader/comparisons/AddComparisonModal\";\nimport useFluent from \"../../../../../hooks/useFluent\";\nimport useGlobalLocationData from \"../../../../../hooks/useGlobalLocationData\";\n\nconst Root = styled.small`\n  text-align: center;\n  font-size: 0.65rem;\n  width: 100%;\n  display: block;\n`;\n\ninterface Props {\n  cityId: string;\n  regionId: number | null;\n}\n\nconst DisclaimerText = ({ cityId, regionId }: Props) => {\n  const getString = useFluent();\n  const { data } = usePeerGroupCityCount(cityId);\n  const globalLocations = useGlobalLocationData();\n\n  let cityPeerGroupCountsRegion: string | number = \"---\";\n  let regionName: string = \"---\";\n  if (globalLocations.data) {\n    const region = globalLocations.data.regions.find(\n      (d) => d.regionId === regionId + \"\",\n    );\n    regionName = region && region.regionName ? region.regionName : \"\";\n    if (data && data.cityPeerGroupCounts) {\n      cityPeerGroupCountsRegion = data.cityPeerGroupCounts.region + 1;\n    }\n  }\n\n  return (\n    <Root>\n      <div>\n        *\n        {getString(\"city-overview-ranking-disclaimer\", {\n          \"city-peer-group-counts-region\": cityPeerGroupCountsRegion,\n          \"region-name\": regionName,\n        })}\n      </div>\n      <div>**{getString(\"city-overview-benchmark-disclaimer\")}</div>\n    </Root>\n  );\n};\n\nexport default DisclaimerText;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { breakPoints } from \"../../../../../styling/GlobalGrid\";\nimport TopRow from \"./topRow\";\nimport BottomRow from \"./bottomRow\";\nimport useCurrentCity from \"../../../../../hooks/useCurrentCity\";\nimport DisclaimerText from \"./DisclaimerText\";\n\nconst Root = styled.div`\n  width: 100%;\n  height: 100%;\n  display: grid;\n  grid-template-rows: auto 1fr auto;\n  gap: 1rem;\n\n  @media (max-width: 1200px), (max-height: 800px) {\n    gap: 0.5rem;\n  }\n`;\n\nconst Row = styled.div`\n  display: flex;\n  width: 100%;\n  justify-content: space-between;\n\n  @media ${breakPoints.small} {\n    flex-direction: column;\n  }\n`;\n\nconst Widgets = () => {\n  const { city } = useCurrentCity();\n  const disclaimer = city ? (\n    <DisclaimerText cityId={city.cityId} regionId={city.region} />\n  ) : null;\n  return (\n    <Root>\n      <Row>\n        <TopRow />\n      </Row>\n      <Row>\n        <BottomRow />\n      </Row>\n      <Row>{disclaimer}</Row>\n    </Root>\n  );\n};\n\nexport default Widgets;\n","import React from \"react\";\nimport useFluent from \"../../../../../hooks/useFluent\";\nimport styled from \"styled-components\";\nimport { primaryColor, secondaryFont } from \"../../../../../styling/styleUtils\";\nimport { breakPoints } from \"../../../../../styling/GlobalGrid\";\n\nconst Root = styled.div`\n  height: 100%;\n  width: 100%;\n  overflow: auto;\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  padding: 1rem;\n  box-sizing: border-box;\n\n  @media ${breakPoints.small} {\n    position: static;\n    height: auto;\n  }\n`;\n\nconst Title = styled.h1`\n  margin: 0 0 1rem;\n  text-transform: uppercase;\n\n  @media (max-width: 920px), (max-height: 800px) {\n    font-size: 1.25rem;\n  }\n`;\n\nconst SectionHeader = styled.h2`\n  font-size: 1rem;\n  color: ${primaryColor};\n  font-family: ${secondaryFont};\n  margin-bottom: 0.2rem;\n\n  @media (max-width: 920px), (max-height: 800px) {\n    font-size: 0.85rem;\n  }\n`;\n\nconst Section = styled.div`\n  font-size: 0.85rem;\n\n  @media (max-width: 920px), (max-height: 800px) {\n    font-size: 0.75rem;\n  }\n`;\n\nconst Concepts = () => {\n  const getString = useFluent();\n  return (\n    <Root>\n      <Title>{getString(\"city-overview-metroverse-concepts\")}</Title>\n      <SectionHeader>\n        {getString(\"city-overview-relative-presence-title\")}\n      </SectionHeader>\n      <Section\n        dangerouslySetInnerHTML={{\n          __html: getString(\"city-overview-relative-presence-desc\"),\n        }}\n      />\n      <SectionHeader>\n        {getString(\"city-overview-knowledge-cluster-title\")}\n      </SectionHeader>\n      <Section\n        dangerouslySetInnerHTML={{\n          __html: getString(\"city-overview-knowledge-cluster-desc\"),\n        }}\n      />\n      <SectionHeader>\n        {getString(\"city-overview-industry-space-title\")}\n      </SectionHeader>\n      <Section\n        dangerouslySetInnerHTML={{\n          __html: getString(\"city-overview-industry-space-desc\"),\n        }}\n      />\n      <SectionHeader>\n        {getString(\"city-overview-city-similarity-title\")}\n      </SectionHeader>\n      <Section\n        dangerouslySetInnerHTML={{\n          __html: getString(\"city-overview-city-similarity-desc\"),\n        }}\n      />\n    </Root>\n  );\n};\n\nexport default Concepts;\n","import React from \"react\";\nimport styled from \"styled-components/macro\";\nimport {\n  backgroundMedium,\n  baseColor,\n} from \"../../../../../styling/styleUtils\";\n\nconst Placeholder = styled.div`\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: ${backgroundMedium};\n  color: ${baseColor};\n  font-size: 0.9rem;\n  text-align: center;\n  padding: 2rem;\n`;\n\nexport interface BoundsConfig {\n  bounds: [[number, number], [number, number]];\n  padding: { top: number; left: number; right: number; bottom: number };\n}\n\ninterface Props {\n  loading: boolean;\n  error: any;\n  data: any;\n  currentCityId: string | null;\n  fitBounds: BoundsConfig;\n}\n\n// Replaced Mapbox map with placeholder for static BLS site\nconst CityMap = (_props: Props) => {\n  return (\n    <Placeholder>\n      Region overview  map visualization not available in static mode.\n    </Placeholder>\n  );\n};\n\nexport default CityMap;\n","import React from \"react\";\nimport styled from \"styled-components/macro\";\nimport useCurrentCityId from \"../../../../../hooks/useCurrentCityId\";\nimport CityMap, { BoundsConfig } from \"./CityMap\";\nimport {\n  backgroundMedium,\n} from \"../../../../../styling/styleUtils\";\n\nconst Root = styled.div`\n  width: 100%;\n  height: 100%;\n  position: relative;\n  background-color: ${backgroundMedium};\n`;\n\nconst MapRoot = () => {\n  const currentCityId = useCurrentCityId();\n\n  const fitBounds: BoundsConfig = {\n    bounds: [[0, 0], [0, 0]],\n    padding: { top: 0, bottom: 0, left: 0, right: 0 },\n  };\n\n  return (\n    <Root>\n      <CityMap\n        loading={false}\n        error={undefined}\n        data={undefined}\n        currentCityId={currentCityId}\n        fitBounds={fitBounds}\n      />\n    </Root>\n  );\n};\n\nexport default MapRoot;\n","import {\n  breakPoints,\n  DefaultContentWrapper,\n} from \"../../../../styling/GlobalGrid\";\nimport useCurrentCityId from \"../../../../hooks/useCurrentCityId\";\nimport SimpleError from \"../../../../components/transitionStateComponents/SimpleError\";\nimport { LoadingOverlay } from \"../../../../components/transitionStateComponents/VizLoadingBlock\";\nimport React from \"react\";\nimport UtilityBar from \"../../../../components/navigation/secondaryHeader/UtilityBar\";\nimport styled from \"styled-components\";\nimport Widgets from \"./widgets\";\nimport Concepts from \"./concepts\";\nimport Map from \"./map\";\n\nconst Root = styled.div`\n  padding: 1.5rem 0.75rem 2.5rem;\n  box-sizing: border-box;\n  display: grid;\n  width: 100%;\n  min-height: 100%;\n  grid-template-rows: auto 1fr;\n  grid-template-columns: 1fr 1.25fr;\n  grid-template-areas:\n    \"widgets widgets\"\n    \"map concepts\";\n  gap: 1.5rem;\n\n  @media (max-height: 750px) {\n    gap: 0.75rem;\n  }\n\n  @media ${breakPoints.small} {\n    grid-template-rows: auto auto auto;\n    grid-template-columns: 1fr;\n    grid-template-areas:\n      \"widgets\"\n      \"map\"\n      \"concepts\";\n  }\n`;\n\nconst ContentBlock = styled.div`\n  box-shadow: 0px 1px 4px 0px rgba(0, 0, 0, 0.25);\n`;\n\nconst WidgetContainer = styled(ContentBlock)`\n  grid-area: widgets;\n  padding: 1rem;\n\n  @media (max-height: 750px) {\n    padding: 0.5rem 0.25rem;\n  }\n`;\n\nconst MapContainer = styled(ContentBlock)`\n  grid-area: map;\n`;\n\nconst ConceptsContainer = styled(ContentBlock)`\n  grid-area: concepts;\n  position: relative;\n`;\n\nconst SimilarCities = () => {\n  const cityId = useCurrentCityId();\n\n  if (cityId === null) {\n    return (\n      <DefaultContentWrapper>\n        <LoadingOverlay>\n          <SimpleError fluentMessageId={\"global-ui-error-invalid-city\"} />\n        </LoadingOverlay>\n      </DefaultContentWrapper>\n    );\n  }\n\n  return (\n    <DefaultContentWrapper>\n      <Root>\n        <WidgetContainer>\n          <Widgets />\n        </WidgetContainer>\n        <MapContainer>\n          <Map />\n        </MapContainer>\n        <ConceptsContainer>\n          <Concepts />\n        </ConceptsContainer>\n      </Root>\n      <UtilityBar />\n    </DefaultContentWrapper>\n  );\n};\n\nexport default SimilarCities;\n","export const tickMarksForMinMax = (min: number, max: number) => {\n  const digits = min.toString().length + max.toString().length;\n  return digits - 3;\n};\n","import React, { useState, useRef } from \"react\";\nimport { scaleLog } from \"d3-scale\";\nimport {\n  sectorColorMap,\n  educationColorRange,\n  wageColorRange,\n  Mult,\n  FractionMult,\n} from \"../../../styling/styleUtils\";\nimport ComparisonBarChart, {\n  RowHoverEvent,\n  BarDatum,\n  Direction,\n} from \"react-comparison-bar-chart\";\nimport { SuccessResponse } from \"../industrySpace/chart/useRCAData\";\nimport { useGlobalIndustryMap } from \"../../../hooks/useGlobalIndustriesData\";\nimport {\n  ClassificationNaicsIndustry,\n  DigitLevel,\n} from \"../../../types/graphQL/graphQLTypes\";\nimport { ColorBy } from \"../../../routing/routes\";\nimport {\n  getStandardTooltip,\n  RapidTooltipRoot,\n} from \"../../../utilities/rapidTooltip\";\nimport useFluent from \"../../../hooks/useFluent\";\nimport QuickError from \"../../transitionStateComponents/QuickError\";\nimport { rgba } from \"polished\";\nimport { defaultYear, decimalToFraction } from \"../../../Utils\";\nimport { tickMarksForMinMax } from \"./getNiceLogValues\";\nimport { scaleLinear } from \"d3-scale\";\nimport { useAggregateIndustryMap } from \"../../../hooks/useAggregateIndustriesData\";\nimport LoadingBlock from \"../../transitionStateComponents/VizLoadingBlock\";\n\ninterface Props {\n  data: SuccessResponse[\"naicsRca\"];\n  highlighted: string | undefined;\n  hiddenSectors: ClassificationNaicsIndustry[\"id\"][];\n  colorBy: ColorBy;\n  digitLevel: DigitLevel;\n}\n\nconst Industries = (props: Props) => {\n  const { data, highlighted, hiddenSectors, colorBy, digitLevel } = props;\n\n  const industryMap = useGlobalIndustryMap();\n  const aggregateIndustryDataMap = useAggregateIndustryMap({\n    level: digitLevel,\n    year: defaultYear,\n  });\n  const getString = useFluent();\n\n  let colorScale: (val: number) => string;\n  if (\n    colorBy === ColorBy.education &&\n    aggregateIndustryDataMap.data !== undefined\n  ) {\n    colorScale = scaleLinear()\n      .domain([\n        aggregateIndustryDataMap.data.globalMinMax.minYearsEducation,\n        aggregateIndustryDataMap.data.globalMinMax.medianYearsEducation,\n        aggregateIndustryDataMap.data.globalMinMax.maxYearsEducation,\n      ])\n      .range(educationColorRange as any) as any;\n  } else if (\n    colorBy === ColorBy.wage &&\n    aggregateIndustryDataMap.data !== undefined\n  ) {\n    colorScale = scaleLinear()\n      .domain([\n        aggregateIndustryDataMap.data.globalMinMax.minHourlyWage,\n        aggregateIndustryDataMap.data.globalMinMax.medianHourlyWage,\n        aggregateIndustryDataMap.data.globalMinMax.maxHourlyWage,\n      ])\n      .range(wageColorRange as any) as any;\n  } else {\n    colorScale = () => \"lightgray\";\n  }\n\n  const [highlightError, setHighlightError] = useState<boolean>(false);\n  const tooltipRef = useRef<HTMLDivElement | null>(null);\n\n  if (\n    (colorBy === ColorBy.education && aggregateIndustryDataMap.loading) ||\n    (colorBy === ColorBy.wage && aggregateIndustryDataMap.loading)\n  ) {\n    return <LoadingBlock />;\n  }\n\n  const filteredIndustryRCA = data.filter((d) => {\n    const industry =\n      d.naicsId !== null ? industryMap.data[d.naicsId] : undefined;\n    if (\n      industry &&\n      !hiddenSectors.includes(industry.naicsIdTopParent.toString())\n    ) {\n      return d.rca && (d.rca as number) > 0;\n    } else {\n      return false;\n    }\n  });\n  let max =\n    Math.ceil(\n      (Math.max(...filteredIndustryRCA.map((d) => d.rca as number)) * 1.1) / 10,\n    ) * 10;\n  let min = Math.min(...filteredIndustryRCA.map((d) => d.rca as number));\n  if (max < 10) {\n    max = 10;\n  }\n  if (min >= 1) {\n    min = 0.1;\n  }\n  let scale = scaleLog().domain([min, max]).range([0, 100]).nice();\n\n  min = parseFloat(scale.invert(0).toFixed(5));\n  max = parseFloat(scale.invert(100).toFixed(5));\n\n  if (max.toString().length > min.toString().length - 1) {\n    min = 1 / max;\n  } else if (max.toString().length < min.toString().length - 1) {\n    max = 1 / min;\n  }\n\n  scale = scaleLog().domain([min, max]).range([0, 100]).nice();\n  const numberOfXAxisTicks = tickMarksForMinMax(\n    parseFloat(scale.invert(0).toFixed(5)),\n    parseFloat(scale.invert(100).toFixed(5)),\n  );\n\n  const highPresenceScale = scaleLog().domain([1, max]).range([0, 100]).nice();\n\n  const lowPresenceScale = scaleLog().domain([1, min]).range([0, 100]).nice();\n\n  const highPresenceData: BarDatum[] = [];\n  const lowPresenceData: BarDatum[] = [];\n  filteredIndustryRCA.forEach((d) => {\n    const industry =\n      d.naicsId !== null ? industryMap.data[d.naicsId] : undefined;\n    let color: string;\n    if (\n      (colorBy === ColorBy.education || colorBy === ColorBy.wage) &&\n      aggregateIndustryDataMap.data\n    ) {\n      const target =\n        d.naicsId !== null\n          ? aggregateIndustryDataMap.data.industries[d.naicsId]\n          : undefined;\n      if (target) {\n        const targetValue =\n          colorBy === ColorBy.education\n            ? target.yearsEducationRank\n            : target.hourlyWageRank;\n        color = colorScale(targetValue);\n      } else {\n        color = \"lightgray\";\n      }\n    } else {\n      const colorDatum = industry\n        ? sectorColorMap.find(\n            (s) => s.id === industry.naicsIdTopParent.toString(),\n          )\n        : undefined;\n      color = colorDatum ? colorDatum.color : \"lightgray\";\n    }\n    let value: number = 0;\n    if (d.rca && d.rca < 1) {\n      value = lowPresenceScale(d.rca) as number;\n    } else if (d.rca && d.rca >= 1) {\n      value = highPresenceScale(d.rca) as number;\n    }\n    // const value = d.rca ? scale(d.rca as number) as number : 0;\n    const datum: BarDatum = {\n      id: d.naicsId !== null ? d.naicsId.toString() : \"\",\n      title: industry && industry.name ? industry.name : \"\",\n      value,\n      color,\n    };\n    if (d.rca && d.rca >= 1) {\n      highPresenceData.push(datum);\n    } else {\n      lowPresenceData.push(datum);\n    }\n  });\n  const formatValue = (value: number, direction: Direction) => {\n    const scaleToUse =\n      direction === Direction.Over ? highPresenceScale : lowPresenceScale;\n    const scaledValue = parseFloat(scaleToUse.invert(value).toFixed(5));\n    if (scaledValue >= 1) {\n      return (\n        <>\n          {scaledValue}\n          <Mult></Mult>\n        </>\n      );\n    } else {\n      const { top, bottom } = decimalToFraction(scaledValue);\n      return (\n        <>\n          <sup>{top}</sup>&frasl;<sub>{bottom}</sub>\n          <FractionMult></FractionMult>\n        </>\n      );\n    }\n  };\n\n  const setHovered = (e: RowHoverEvent | undefined) => {\n    const node = tooltipRef.current;\n    if (node) {\n      if (e && e.datum) {\n        const { datum, mouseCoords } = e;\n        const industry = filteredIndustryRCA.find(\n          (d) => d.naicsId && d.naicsId.toString() === datum.id,\n        );\n        const rows = [\n          [getString(\"global-ui-naics-code\") + \":\", datum.id],\n          [getString(\"global-ui-year\") + \":\", defaultYear.toString()],\n          [\n            getString(\"global-intensity\") + \":\",\n            industry && industry.rca ? industry.rca.toFixed(3) : \"0.000\",\n          ],\n        ];\n        if (\n          (colorBy === ColorBy.education || colorBy === ColorBy.wage) &&\n          aggregateIndustryDataMap.data\n        ) {\n          const target = aggregateIndustryDataMap.data.industries[datum.id];\n          const targetValue =\n            colorBy === ColorBy.education\n              ? target.yearsEducation\n              : target.hourlyWage;\n          rows.push([\n            getString(\"global-formatted-color-by\", { type: colorBy }),\n            (colorBy === ColorBy.wage ? \"$\" : \"\") + targetValue.toFixed(2),\n          ]);\n        }\n        node.innerHTML = getStandardTooltip({\n          title: datum.title,\n          color: rgba(datum.color, 0.3),\n          rows,\n          boldColumns: [1, 2],\n        });\n        node.style.top = mouseCoords.y + \"px\";\n        node.style.left = mouseCoords.x + \"px\";\n        node.style.display = \"block\";\n      } else {\n        node.style.display = \"none\";\n      }\n    }\n  };\n\n  const highlightErrorPopup = highlightError ? (\n    <QuickError closeError={() => setHighlightError(false)}>\n      {getString(\"global-ui-error-industry-not-in-data-set\")}\n    </QuickError>\n  ) : null;\n\n  return (\n    <>\n      <ComparisonBarChart\n        primaryData={highPresenceData}\n        secondaryData={lowPresenceData}\n        formatValue={formatValue}\n        highlighted={highlighted}\n        onRowHover={setHovered}\n        onHighlightError={() => setHighlightError(true)}\n        nValuesToShow={10}\n        numberOfXAxisTicks={numberOfXAxisTicks}\n        expandCollapseText={{\n          toExpand: getString(\"cities-top-10-comparison-chart-expand\"),\n          toCollapse: getString(\"cities-top-10-comparison-chart-collapse\"),\n        }}\n      />\n      <RapidTooltipRoot ref={tooltipRef} />\n      {highlightErrorPopup}\n    </>\n  );\n};\n\nexport default Industries;\n","import React, { useRef, useState } from \"react\";\nimport { scaleLog, scaleLinear } from \"d3-scale\";\nimport ComparisonBarChart, {\n  RowHoverEvent,\n  BarDatum,\n  Direction,\n} from \"react-comparison-bar-chart\";\nimport { SuccessResponse } from \"../industrySpace/chart/useRCAData\";\nimport {\n  DigitLevel,\n  ClassificationNaicsCluster,\n} from \"../../../types/graphQL/graphQLTypes\";\nimport {\n  getStandardTooltip,\n  RapidTooltipRoot,\n} from \"../../../utilities/rapidTooltip\";\nimport useFluent from \"../../../hooks/useFluent\";\nimport { defaultYear, decimalToFraction } from \"../../../Utils\";\nimport {\n  clusterColorMap,\n  intensityColorRange,\n  educationColorRange,\n  wageColorRange,\n  Mult,\n  FractionMult,\n} from \"../../../styling/styleUtils\";\nimport { ClusterLevel, ColorBy } from \"../../../routing/routes\";\nimport { useGlobalClusterMap } from \"../../../hooks/useGlobalClusterData\";\nimport { tickMarksForMinMax } from \"./getNiceLogValues\";\nimport { useAggregateIndustryMap } from \"../../../hooks/useAggregateIndustriesData\";\nimport { rgba } from \"polished\";\nimport LoadingBlock from \"../../transitionStateComponents/VizLoadingBlock\";\nimport QuickError from \"../../transitionStateComponents/QuickError\";\n\ninterface Props {\n  data: SuccessResponse[\"c3Rca\"] | SuccessResponse[\"c1Rca\"];\n  clusterLevel: ClusterLevel;\n  colorBy: ColorBy;\n  highlighted: string | undefined;\n  hiddenClusters: ClassificationNaicsCluster[\"id\"][];\n}\n\nconst Clusters = (props: Props) => {\n  const { data, clusterLevel, colorBy, hiddenClusters, highlighted } = props;\n  const [highlightError, setHighlightError] = useState<boolean>(false);\n  const tooltipRef = useRef<HTMLDivElement | null>(null);\n  const getString = useFluent();\n  const clusterMap = useGlobalClusterMap();\n  const aggregateIndustryDataMap = useAggregateIndustryMap({\n    level: DigitLevel.Six,\n    year: defaultYear,\n    clusterLevel: parseInt(clusterLevel, 10),\n  });\n\n  if (\n    (colorBy === ColorBy.education && aggregateIndustryDataMap.loading) ||\n    (colorBy === ColorBy.wage && aggregateIndustryDataMap.loading)\n  ) {\n    return <LoadingBlock />;\n  }\n\n  const filteredClusterRCA = data.filter((d) => {\n    const cluster =\n      d.clusterId !== null ? clusterMap.data[d.clusterId] : undefined;\n    const clusterIdTopParent =\n      cluster && cluster.clusterIdTopParent ? cluster.clusterIdTopParent : \"\";\n    if (cluster && !hiddenClusters.includes(clusterIdTopParent.toString())) {\n      return d.rca && (d.rca as number) > 0;\n    } else {\n      return false;\n    }\n  });\n\n  let max =\n    Math.ceil(\n      (Math.max(...filteredClusterRCA.map((d) => d.rca as number)) * 1.1) / 10,\n    ) * 10;\n  let min = Math.min(...filteredClusterRCA.map((d) => d.rca as number));\n  if (max < 10) {\n    max = 10;\n  }\n  if (min >= 1) {\n    min = 0.1;\n  }\n  let scale = scaleLog().domain([min, max]).range([0, 100]).nice();\n\n  min = parseFloat(scale.invert(0).toFixed(5));\n  max = parseFloat(scale.invert(100).toFixed(5));\n\n  if (max.toString().length > min.toString().length - 1) {\n    min = 1 / max;\n  } else if (max.toString().length < min.toString().length - 1) {\n    max = 1 / min;\n  }\n\n  scale = scaleLog().domain([min, max]).range([0, 100]).nice();\n  const numberOfXAxisTicks = tickMarksForMinMax(\n    parseFloat(scale.invert(0).toFixed(5)),\n    parseFloat(scale.invert(100).toFixed(5)),\n  );\n\n  let colorScale: (val: number) => string | undefined;\n  if (\n    colorBy === ColorBy.education &&\n    aggregateIndustryDataMap.data !== undefined\n  ) {\n    colorScale = scaleLinear()\n      .domain([\n        aggregateIndustryDataMap.data.clusterMinMax.minYearsEducation,\n        aggregateIndustryDataMap.data.clusterMinMax.medianYearsEducation,\n        aggregateIndustryDataMap.data.clusterMinMax.maxYearsEducation,\n      ])\n      .range(educationColorRange as any) as any;\n  } else if (\n    colorBy === ColorBy.wage &&\n    aggregateIndustryDataMap.data !== undefined\n  ) {\n    colorScale = scaleLinear()\n      .domain([\n        aggregateIndustryDataMap.data.clusterMinMax.minHourlyWage,\n        aggregateIndustryDataMap.data.clusterMinMax.medianHourlyWage,\n        aggregateIndustryDataMap.data.clusterMinMax.maxHourlyWage,\n      ])\n      .range(wageColorRange as any) as any;\n  } else {\n    colorScale = scaleLog()\n      .domain([min, max])\n      .range(intensityColorRange as any)\n      .nice() as any;\n  }\n\n  const highPresenceScale = scaleLog().domain([1, max]).range([0, 100]).nice();\n\n  const lowPresenceScale = scaleLog().domain([1, min]).range([0, 100]).nice();\n\n  const highPresenceData: BarDatum[] = [];\n  const lowPresenceData: BarDatum[] = [];\n  filteredClusterRCA.forEach((d) => {\n    const cluster =\n      d.clusterId !== null ? clusterMap.data[d.clusterId] : undefined;\n    const title = cluster && cluster.name !== null ? cluster.name : \"\";\n    let color: string;\n    const clusterIndustryDatum =\n      d.clusterId !== null\n        ? aggregateIndustryDataMap.data.clusters[d.clusterId]\n        : undefined;\n    if (\n      colorBy === ColorBy.education &&\n      aggregateIndustryDataMap.data !== undefined\n    ) {\n      if (clusterIndustryDatum) {\n        color = colorScale(clusterIndustryDatum.yearsEducationRank) as string;\n      } else {\n        color = \"gray\";\n      }\n    } else if (\n      colorBy === ColorBy.wage &&\n      aggregateIndustryDataMap.data !== undefined\n    ) {\n      if (clusterIndustryDatum) {\n        color = colorScale(clusterIndustryDatum.hourlyWageRank) as string;\n      } else {\n        color = \"gray\";\n      }\n    } else {\n      const colorDatum = clusterColorMap.find(\n        (s) =>\n          cluster &&\n          cluster.clusterIdTopParent &&\n          s.id === cluster.clusterIdTopParent.toString(),\n      );\n      color = colorDatum ? colorDatum.color : \"lightgray\";\n    }\n    let value: number = 0;\n    if (d.rca && d.rca < 1) {\n      value = lowPresenceScale(d.rca) as number;\n    } else if (d.rca && d.rca >= 1) {\n      value = highPresenceScale(d.rca) as number;\n    }\n    // const value = d.rca ? scale(d.rca as number) as number : 0;\n    const datum: BarDatum = {\n      id: d.clusterId !== null ? d.clusterId.toString() : \"\",\n      title,\n      value,\n      color,\n    };\n    if (d.rca && d.rca >= 1) {\n      highPresenceData.push(datum);\n    } else {\n      lowPresenceData.push(datum);\n    }\n  });\n  const formatValue = (value: number, direction: Direction) => {\n    const scaleToUse =\n      direction === Direction.Over ? highPresenceScale : lowPresenceScale;\n    const scaledValue = parseFloat(scaleToUse.invert(value).toFixed(5));\n    if (scaledValue >= 1) {\n      return (\n        <>\n          {scaledValue}\n          <Mult></Mult>\n        </>\n      );\n    } else {\n      const { top, bottom } = decimalToFraction(scaledValue);\n      return (\n        <>\n          <sup>{top}</sup>&frasl;<sub>{bottom}</sub>\n          <FractionMult></FractionMult>\n        </>\n      );\n    }\n  };\n\n  const setHovered = (e: RowHoverEvent | undefined) => {\n    const node = tooltipRef.current;\n    if (node) {\n      if (e && e.datum) {\n        const { datum, mouseCoords } = e;\n        const cluster = filteredClusterRCA.find(\n          (d) => d.clusterId && d.clusterId.toString() === datum.id,\n        );\n        const rows = [\n          [getString(\"global-ui-year\") + \":\", defaultYear.toString()],\n          [\n            getString(\"global-intensity\") + \":\",\n            cluster && cluster.rca ? cluster.rca.toFixed(3) : \"0.000\",\n          ],\n        ];\n        if (\n          (colorBy === ColorBy.education || colorBy === ColorBy.wage) &&\n          aggregateIndustryDataMap.data\n        ) {\n          const target = aggregateIndustryDataMap.data.clusters[datum.id];\n          const targetValue =\n            colorBy === ColorBy.education\n              ? target.yearsEducation\n              : target.hourlyWage;\n          rows.push([\n            getString(\"global-formatted-color-by\", { type: colorBy }),\n            (colorBy === ColorBy.wage ? \"$\" : \"\") + targetValue.toFixed(2),\n          ]);\n        }\n        node.innerHTML = getStandardTooltip({\n          title: datum.title,\n          color: rgba(datum.color, 0.3),\n          rows,\n          boldColumns: [1, 2],\n        });\n        node.style.top = mouseCoords.y + \"px\";\n        node.style.left = mouseCoords.x + \"px\";\n        node.style.display = \"block\";\n      } else {\n        node.style.display = \"none\";\n      }\n    }\n  };\n\n  const highlightErrorPopup = highlightError ? (\n    <QuickError closeError={() => setHighlightError(false)}>\n      {getString(\"global-ui-error-industry-not-in-data-set\")}\n    </QuickError>\n  ) : null;\n\n  return (\n    <>\n      <ComparisonBarChart\n        primaryData={highPresenceData}\n        secondaryData={lowPresenceData}\n        formatValue={formatValue}\n        highlighted={highlighted}\n        onRowHover={setHovered}\n        onHighlightError={() => setHighlightError(true)}\n        nValuesToShow={10}\n        numberOfXAxisTicks={numberOfXAxisTicks}\n        expandCollapseText={{\n          toExpand: getString(\"cities-top-10-comparison-chart-expand-clusters\"),\n          toCollapse: getString(\n            \"cities-top-10-comparison-chart-collapse-clusters\",\n          ),\n        }}\n      />\n      <RapidTooltipRoot ref={tooltipRef} />\n      {highlightErrorPopup}\n    </>\n  );\n};\n\nexport default Clusters;\n","import { useStaticData } from \"../dataProvider\";\nimport {\n  ClusterLevel,\n  CompositionType,\n  defaultCompositionType,\n} from \"../types/graphQL/graphQLTypes\";\nimport useCurrentCityId from \"./useCurrentCityId\";\nimport { defaultYear } from \"../Utils\";\nimport useQueryParams from \"./useQueryParams\";\n\nexport enum RegionGroup {\n  World = \"world\",\n  SimilarCities = \"similarcities\",\n}\n\ninterface ClusterDensity {\n  clusterId: string;\n  densityCompany: number | null;\n  densityEmploy: number | null;\n}\n\ninterface ClusterRca {\n  clusterId: string;\n  rca: number | null;\n  comparableIndustry: number | null;\n}\n\ninterface ClusterData {\n  clusterId: string;\n  level: number | null;\n  numCompany: number | null;\n  numEmploy: number | null;\n}\n\nexport interface SuccessResponse {\n  clusterDensity: ClusterDensity[];\n  clusterRca: ClusterRca[];\n  clusterData: ClusterData[];\n}\n\nconst useClusterRCAData = (_level: ClusterLevel) => {\n  const cityId = useCurrentCityId();\n  const { data: blsData, loading: blsLoading } = useStaticData();\n\n  const { composition_type } = useQueryParams();\n\n  const defaultCompositionVariable =\n    defaultCompositionType === CompositionType.Companies ? \"company\" : \"employ\";\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  let _variable: \"employ\" | \"company\" = defaultCompositionVariable;\n  if (composition_type === CompositionType.Companies) {\n    _variable = \"company\";\n  } else if (composition_type === CompositionType.Employees) {\n    _variable = \"employ\";\n  }\n\n  if (cityId === null || blsLoading || !blsData) {\n    return { loading: true, error: undefined, data: undefined };\n  }\n\n  const regionData = blsData.regionData[cityId];\n  if (!regionData) {\n    return { loading: false, error: undefined, data: undefined };\n  }\n\n  const yearData = regionData[defaultYear];\n  if (!yearData) {\n    return { loading: false, error: undefined, data: undefined };\n  }\n\n  // Build socCode  majorGroupId lookup\n  const socToMajorGroup: Record<string, string> = {};\n  blsData.occupations.forEach((o) => {\n    socToMajorGroup[o.socCode] = o.majorGroupId;\n  });\n\n  // Build cluster data from occupations grouped by major group\n  const clusterData: ClusterData[] = [];\n  const clusterRca: ClusterRca[] = [];\n  const clusterDensity: ClusterDensity[] = [];\n\n  // Aggregate by major group\n  const majorGroupAgg: Record<string, { employ: number; gdp: number }> = {};\n  yearData.forEach((occ) => {\n    const mgId = socToMajorGroup[occ.socCode] || \"00\";\n    if (!majorGroupAgg[mgId]) {\n      majorGroupAgg[mgId] = { employ: 0, gdp: 0 };\n    }\n    majorGroupAgg[mgId].employ += occ.totEmp;\n    majorGroupAgg[mgId].gdp += occ.gdp;\n  });\n\n  Object.entries(majorGroupAgg).forEach(([mgId, agg]) => {\n    clusterData.push({\n      clusterId: mgId,\n      level: 1,\n      numCompany: agg.gdp,\n      numEmploy: agg.employ,\n    });\n    // RCA placeholder: 1.0 for all (no cross-region comparison available)\n    clusterRca.push({\n      clusterId: mgId,\n      rca: 1.0,\n      comparableIndustry: null,\n    });\n    clusterDensity.push({\n      clusterId: mgId,\n      densityCompany: null,\n      densityEmploy: null,\n    });\n  });\n\n  const data: SuccessResponse = { clusterDensity, clusterRca, clusterData };\n  return { loading: false, error: undefined, data };\n};\n\nexport default useClusterRCAData;\n","import React, { useState } from \"react\";\nimport styled, { keyframes } from \"styled-components\";\nimport useCurrentBenchmark from \"../../../hooks/useCurrentBenchmark\";\nimport useFluent from \"../../../hooks/useFluent\";\nimport { benchmarkColor } from \"../../../styling/styleUtils\";\nimport BenchmarkSVG from \"../../../assets/icons/benchmark_comparator.svg\";\nimport AddComparisonModal, {\n  ComparisonType,\n} from \"../../navigation/secondaryHeader/comparisons/AddComparisonModal\";\nimport { useGlobalLocationHierarchicalTreeData } from \"../../../hooks/useGlobalLocationData\";\n\nconst rotate = keyframes`\n  0% {\n    transform: rotate(0deg);\n  }\n\n  10% {\n    transform: rotate(-30deg);\n  }\n\n  15% {\n    transform: rotate(-40deg);\n  }\n\n  20% {\n    transform: rotate(-45deg);\n  }\n\n  60% {\n    transform: rotate(360deg);\n  }\n\n  100% {\n    transform: rotate(360deg);\n  }\n`;\n\nconst Root = styled.button`\n  pointer-events: all;\n  text-align: center;\n  background-color: transparent;\n  font-size: 0.65rem;\n  margin: 0.25rem 0 1rem;\n  color: ${benchmarkColor};\n  max-width: 100%;\n\n  &:hover {\n    img {\n      animation: ${rotate} 2s ease-in-out infinite;\n    }\n  }\n`;\n\nconst Title = styled.strong`\n  text-transform: uppercase;\n  font-size: 0.75rem;\n  margin-right: 0.25rem;\n\n  @media (max-width: 950px) {\n    display: block;\n  }\n`;\n\nconst Icon = styled.img`\n  width: 1rem;\n  height: 1rem;\n  position: relative;\n  top: 0.25rem;\n  margin-right: 0.25rem;\n`;\n\ninterface Props {\n  comparisonType?: ComparisonType;\n}\n\nconst BenchmarkLegend = (props: Props) => {\n  const comparisonType = props.comparisonType\n    ? props.comparisonType\n    : ComparisonType.Relative;\n  const getString = useFluent();\n  const { benchmark, benchmarkName } = useCurrentBenchmark();\n  const [modalOpen, setModalOpen] = useState<boolean>(benchmark === undefined);\n  const { data } = useGlobalLocationHierarchicalTreeData();\n  const openBenchmarkModal = () => setModalOpen(true);\n\n  const closeModal = (newBenchmark: string | undefined) => {\n    if (newBenchmark !== undefined) {\n      setModalOpen(false);\n    }\n  };\n  const benchmarkModal = modalOpen ? (\n    <AddComparisonModal\n      closeModal={closeModal}\n      data={data}\n      comparisonType={comparisonType}\n    />\n  ) : null;\n\n  const text =\n    comparisonType === ComparisonType.Relative\n      ? getString(\"global-ui-change-benchmark\")\n      : getString(\"global-ui-change-comparator\");\n\n  return (\n    <>\n      <Root onClick={openBenchmarkModal}>\n        <Title>\n          <Icon src={BenchmarkSVG} />\n          {text}\n        </Title>\n        ({benchmarkName})\n      </Root>\n      {benchmarkModal}\n    </>\n  );\n};\n\nexport default BenchmarkLegend;\n","import React, { useEffect, useState, useRef } from \"react\";\nimport {\n  DigitLevel,\n  ClassificationNaicsIndustry,\n  ClassificationNaicsCluster,\n} from \"../../../types/graphQL/graphQLTypes\";\nimport { useGlobalIndustryMap } from \"../../../hooks/useGlobalIndustriesData\";\nimport { usePrevious } from \"react-use\";\nimport { useWindowWidth } from \"../../../contextProviders/appContext\";\nimport { breakPoints } from \"../../../styling/GlobalGrid\";\nimport { baseColor } from \"../../../styling/styleUtils\";\nimport PreChartRow from \"../../../components/general/PreChartRow\";\nimport ErrorBoundary from \"../ErrorBoundary\";\nimport styled from \"styled-components/macro\";\nimport SimpleError from \"../../transitionStateComponents/SimpleError\";\nimport LoadingBlock, {\n  LoadingOverlay,\n} from \"../../transitionStateComponents/VizLoadingBlock\";\nimport useRCAData, { SuccessResponse } from \"../industrySpace/chart/useRCAData\";\nimport Industries from \"./Industries\";\nimport Clusters from \"./Clusters\";\nimport { CityRoutes, ColorBy } from \"../../../routing/routes\";\nimport useFluent from \"../../../hooks/useFluent\";\nimport { ClusterLevel } from \"../../../routing/routes\";\nimport { Mode } from \"../../general/searchIndustryInGraphDropdown\";\nimport PresenceToggle, { Highlighted } from \"../legend/PresenceToggle\";\nimport BenchmarkLegend from \"../legend/BenchmarkLegend\";\nimport { ComparisonType } from \"../../navigation/secondaryHeader/comparisons/AddComparisonModal\";\nimport { useHistory } from \"react-router-dom\";\nimport { createRoute } from \"../../../routing/Utils\";\nimport useCurrentCityId from \"../../../hooks/useCurrentCityId\";\n\nconst Root = styled.div`\n  width: 100%;\n  height: 100%;\n  grid-column: 1;\n  grid-row: 2;\n  position: relative;\n  display: grid;\n  grid-template-rows: 1fr 3rem auto;\n  grid-template-columns: 3.5rem 1fr;\n\n  @media ${breakPoints.small} {\n    grid-row: 3;\n    grid-column: 1;\n  }\n`;\n\nexport const LeftAxisRoot = styled.div`\n  grid-row: 1;\n  grid-column: 1;\n  white-space: nowrap;\n  display: flex;\n  transform: rotate(-90deg);\n  align-items: center;\n  justify-content: center;\n  pointer-events: none;\n`;\n\nexport const BottomAxisRoot = styled.div`\n  grid-row: 2;\n  grid-column: 2;\n  white-space: nowrap;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  pointer-events: none;\n  padding-left: 15%;\n  padding-left: clamp(75px, 300px, 15%);\n\n  @media (max-width: 1225px) {\n    padding-left: 0;\n    justify-content: flex-end;\n  }\n  @media (max-width: 990px) {\n    grid-template-columns: 1 / -1;\n  }\n\n  @media (max-width: 920px) {\n    padding-left: 15%;\n    padding-left: clamp(75px, 300px, 15%);\n    justify-content: center;\n  }\n`;\n\nexport const BenchmarkRoot = styled(BottomAxisRoot)`\n  grid-row: 3;\n  justify-content: center;\n  white-space: normal;\n`;\n\nexport const AxisLabelBase = styled.div`\n  font-weight: 600;\n  font-size: 0.75rem;\n  color: ${baseColor};\n  text-transform: uppercase;\n\n  @media (max-width: 1000px) {\n    font-size: 0.6rem;\n  }\n\n  @media (max-height: 600px) {\n    font-size: 0.65rem;\n  }\n`;\n\nexport const AxisLabelLeft = styled(AxisLabelBase)`\n  margin-right: 1rem;\n  font-weight: 400;\n\n  @media (max-width: 990px) {\n    margin-right: 0.75rem;\n  }\n\n  @media (max-width: 920px) {\n    display: none;\n  }\n`;\n\nexport const AxisLabelRight = styled(AxisLabelBase)`\n  margin-left: 1rem;\n  font-weight: 400;\n\n  @media (max-width: 990px) {\n    margin-left: 0.75rem;\n  }\n\n  @media (max-width: 920px) {\n    display: none;\n  }\n`;\n\nexport const AxisLabelHigh = styled(AxisLabelBase)`\n  margin-left: 3rem;\n\n  @media (max-height: 800px) {\n    margin-left: 1rem;\n  }\n`;\n\nconst VizRoot = styled.div`\n  width: 100%;\n  height: 100%;\n  position: relative;\n  grid-column: 2;\n  grid-row: 1;\n`;\n\nconst VizContainer = styled.div`\n  width: 100%;\n  height: 100%;\n  position: absolute;\n\n  .react-comparison-bar-chart-title {\n    h2 {\n      text-transform: none;\n    }\n  }\n`;\n\ninterface Props {\n  isClusterView: boolean;\n  highlighted: string | undefined;\n  setHighlighted: (value: string | undefined) => void;\n  hiddenSectors: ClassificationNaicsIndustry[\"id\"][];\n  hiddenClusters: ClassificationNaicsCluster[\"id\"][];\n  clusterLevel: ClusterLevel;\n  digitLevel: DigitLevel;\n  colorBy: ColorBy;\n}\n\nconst RCABarChart = (props: Props) => {\n  const {\n    hiddenSectors,\n    setHighlighted,\n    highlighted,\n    isClusterView,\n    clusterLevel,\n    digitLevel,\n    colorBy,\n    hiddenClusters,\n  } = props;\n  const getString = useFluent();\n  const industryMap = useGlobalIndustryMap();\n  const windowDimensions = useWindowWidth();\n  const { loading, error, data } = useRCAData(digitLevel);\n  const history = useHistory();\n  const cityId = useCurrentCityId();\n\n  const rootRef = useRef<HTMLDivElement | null>(null);\n  const [dimensions, setDimensions] = useState<\n    { width: number; height: number } | undefined\n  >(undefined);\n  useEffect(() => {\n    const node = rootRef.current;\n    if (node) {\n      const { width, height } = node.getBoundingClientRect();\n      setDimensions({ width, height });\n    }\n  }, [rootRef, windowDimensions]);\n\n  const prevData = usePrevious(data);\n  let dataToUse: SuccessResponse | undefined;\n  if (data) {\n    dataToUse = data;\n  } else if (prevData) {\n    dataToUse = prevData;\n  } else {\n    dataToUse = undefined;\n  }\n\n  let output: React.ReactElement<any> | null;\n  if (\n    industryMap.loading ||\n    !dimensions ||\n    (loading && prevData === undefined)\n  ) {\n    output = <LoadingBlock />;\n  } else if (error !== undefined) {\n    output = (\n      <LoadingOverlay>\n        <SimpleError />\n      </LoadingOverlay>\n    );\n    console.error(error);\n  } else if (industryMap.error !== undefined) {\n    output = (\n      <LoadingOverlay>\n        <SimpleError />\n      </LoadingOverlay>\n    );\n    console.error(error);\n  } else if (dataToUse !== undefined) {\n    const clusterData =\n      clusterLevel === ClusterLevel.C1 ? dataToUse.c1Rca : dataToUse.c3Rca;\n    const industryData = dataToUse.naicsRca;\n    const loadingOverlay = loading ? <LoadingBlock /> : null;\n    const viz = isClusterView ? (\n      <Clusters\n        key={\n          \"ClustersRCAChart\" +\n          dimensions.height.toString() +\n          dimensions.width.toString()\n        }\n        data={clusterData}\n        clusterLevel={clusterLevel}\n        colorBy={colorBy}\n        hiddenClusters={hiddenClusters}\n        highlighted={highlighted}\n      />\n    ) : (\n      <Industries\n        key={\n          \"IndustriesRCAChart\" +\n          dimensions.height.toString() +\n          dimensions.width.toString()\n        }\n        data={industryData}\n        highlighted={highlighted}\n        hiddenSectors={hiddenSectors}\n        colorBy={colorBy}\n        digitLevel={digitLevel}\n      />\n    );\n    output = (\n      <VizContainer style={{ height: dimensions.height }}>\n        <ErrorBoundary>{viz}</ErrorBoundary>\n        {loadingOverlay}\n      </VizContainer>\n    );\n  } else {\n    output = null;\n  }\n\n  const onButtonClick = (value: Highlighted) => {\n    if (value === Highlighted.absolute && cityId !== null) {\n      const route = createRoute.city(\n        CityRoutes.CityGoodAtAbsolutePresence,\n        cityId,\n      );\n      history.push(route + history.location.search);\n    }\n  };\n\n  return (\n    <>\n      <PreChartRow\n        searchInGraphOptions={{\n          hiddenParents: isClusterView ? hiddenClusters : hiddenSectors,\n          digitLevel,\n          clusterLevel,\n          setHighlighted,\n          mode: isClusterView ? Mode.cluster : Mode.naics,\n        }}\n        settingsOptions={{\n          compositionType: true,\n          clusterLevel: isClusterView ? true : undefined,\n          digitLevel: isClusterView ? undefined : true,\n          colorBy: true,\n          aggregationMode: true,\n        }}\n      />\n      <Root>\n        <LeftAxisRoot>\n          <AxisLabelBase> {getString(\"global-intensity-lower\")}</AxisLabelBase>\n          <AxisLabelHigh>\n            {getString(\"global-intensity-higher\")} \n          </AxisLabelHigh>\n        </LeftAxisRoot>\n        <BottomAxisRoot>\n          <AxisLabelLeft\n            dangerouslySetInnerHTML={{\n              __html: getString(\"relative-presence-axis-labels-bottom-left\"),\n            }}\n          />\n          <AxisLabelBase>\n            <PresenceToggle\n              togglePresence={true}\n              highlight={Highlighted.relative}\n              showArrows={true}\n              onButtonClick={onButtonClick}\n            />\n          </AxisLabelBase>\n          <AxisLabelRight\n            dangerouslySetInnerHTML={{\n              __html: getString(\"relative-presence-axis-labels-bottom-right\"),\n            }}\n          />\n        </BottomAxisRoot>\n        <BenchmarkRoot>\n          <BenchmarkLegend comparisonType={ComparisonType.Relative} />\n        </BenchmarkRoot>\n        <VizRoot ref={rootRef}>{output}</VizRoot>\n      </Root>\n    </>\n  );\n};\n\nexport default RCABarChart;\n","import React, { useRef, useEffect, useCallback } from \"react\";\nimport {\n  getStandardTooltip,\n  RapidTooltipRoot,\n} from \"../../../utilities/rapidTooltip\";\nimport DataViz, { VizType, ClusterBarChartDatum } from \"react-fast-charts\";\nimport { CompositionType } from \"../../../types/graphQL/graphQLTypes\";\nimport useFluent from \"../../../hooks/useFluent\";\nimport { max } from \"d3\";\nimport { usePrevious } from \"react-use\";\nimport { rgba } from \"polished\";\n\ninterface Props {\n  data: ClusterBarChartDatum[];\n  compositionType: CompositionType;\n  height: number;\n  loading: boolean;\n  primaryName: string;\n  secondaryName: string;\n}\n\n// A/B strings used to allow for sorting in order\nexport enum Group {\n  Primary = \"A\",\n  Secondary = \"B\",\n}\n\nconst Chart = (props: Props) => {\n  const { data, compositionType, height, loading, primaryName, secondaryName } =\n    props;\n  const getString = useFluent();\n  const tooltipRef = useRef<HTMLDivElement | null>(null);\n\n  const setHovered = (\n    datum: ClusterBarChartDatum,\n    coords: { x: number; y: number },\n  ) => {\n    const node = tooltipRef.current;\n    if (node) {\n      const filteredData = data.filter((d) => d.x === datum.x);\n      const primaryDatum = filteredData.find(\n        (d) => d.groupName === Group.Primary,\n      );\n      const secondaryDatum = filteredData.find(\n        (d) => d.groupName === Group.Secondary,\n      );\n      const primaryValue = primaryDatum ? primaryDatum.y : 0;\n      const secondaryValue = secondaryDatum ? secondaryDatum.y : 0;\n      const primaryValueText =\n        primaryValue === 0 || primaryValue >= 0.01\n          ? primaryValue.toFixed(2) + \"%\"\n          : \"<0.01%\";\n      const secondaryValueText =\n        secondaryValue === 0 || secondaryValue >= 0.01\n          ? secondaryValue.toFixed(2) + \"%\"\n          : \"<0.01%\";\n      const primaryDiff = primaryValue - secondaryValue;\n      const secondaryDiff = secondaryValue - primaryValue;\n      let primaryDiffValue: string;\n      if (primaryDiff < 0) {\n        primaryDiffValue = \"\";\n      } else if (primaryDiff < 0.01) {\n        primaryDiffValue = \"+<0.01%\";\n      } else {\n        primaryDiffValue = \"+\" + primaryDiff.toFixed(2) + \"%\";\n      }\n      let secondaryDiffValue: string;\n      if (secondaryDiff < 0) {\n        secondaryDiffValue = \"\";\n      } else if (secondaryDiff < 0.01) {\n        secondaryDiffValue = \"+<0.01%\";\n      } else {\n        secondaryDiffValue = \"+\" + secondaryDiff.toFixed(2) + \"%\";\n      }\n      node.innerHTML = getStandardTooltip({\n        title: datum.x,\n        color: rgba(datum.fill ? datum.fill : \"gray\", 0.3),\n        rows: [\n          [\"\", primaryName, secondaryName],\n          [\n            getString(\"tooltip-text-share-of\", { value: compositionType }),\n            primaryValueText,\n            secondaryValueText,\n          ],\n          [\"Difference\", primaryDiffValue, secondaryDiffValue],\n        ],\n        boldColumns: [1, 2],\n        underlineRows: [0],\n        additionalHTML: datum.onClick\n          ? `<div style=\"padding: 0.35rem; font-style: italic; font-size: 0.7rem; text-align: center;\">\n              ${getString(\"global-click-to-expand-industry\")}\n            </div>`\n          : undefined,\n      });\n      node.style.top = coords.y + \"px\";\n      node.style.left = coords.x + \"px\";\n      node.style.display = \"block\";\n    }\n  };\n\n  const removeHovered = useCallback(() => {\n    const node = tooltipRef.current;\n    if (node) {\n      node.style.display = \"none\";\n    }\n  }, [tooltipRef]);\n\n  useEffect(() => {\n    removeHovered();\n  }, [data, removeHovered]);\n\n  const allYValues: number[] = [];\n\n  const dataWithHover = data.map((d) => {\n    allYValues.push(d.y);\n    return {\n      ...d,\n      onMouseMove: setHovered,\n      onMouseLeave: removeHovered,\n    };\n  });\n\n  const maxY = max(allYValues);\n  const prevMaxY = usePrevious(maxY);\n\n  return (\n    <>\n      <DataViz\n        id={\"example-cluster-bar-chart\"}\n        vizType={VizType.ClusterBarChart}\n        data={dataWithHover}\n        axisLabels={{\n          left: getString(\"axis-text-percent-total-value\", {\n            value: compositionType,\n          }),\n        }}\n        height={height}\n        formatAxis={{ y: (v) => parseFloat(v.toFixed(2)) + \"%\" }}\n        animateBars={loading ? undefined : 300}\n        axisMinMax={{ minY: 0, maxY }}\n        animateAxis={{\n          animationDuration: 500,\n          startMaxY: prevMaxY ? prevMaxY : 0.1,\n          startMinY: 0,\n        }}\n        chartTitle={`${primaryName} - ${secondaryName} Industry Comparison`}\n      />\n      <RapidTooltipRoot ref={tooltipRef} />\n    </>\n  );\n};\n\nexport default React.memo(Chart);\n","import React from \"react\";\nimport StandardSideTextBlock from \"../../../../components/general/StandardSideTextBlock\";\nimport { ContentParagraph, ContentTitle } from \"../../../../styling/styleUtils\";\nimport useFluent, { possessive } from \"../../../../hooks/useFluent\";\nimport useCurrentCity from \"../../../../hooks/useCurrentCity\";\nimport StandardSideTextLoading from \"../../../../components/transitionStateComponents/StandardSideTextLoading\";\nimport useCurrentBenchmark from \"../../../../hooks/useCurrentBenchmark\";\nimport Helmet from \"react-helmet\";\nimport { isValidPeerGroup } from \"../../../../types/graphQL/graphQLTypes\";\nimport { RegionGroup } from \"../../../../hooks/useClusterRCAData\";\n\ninterface Props {\n  isClusterView: boolean;\n  prefix:\n    | \"relative-presence\"\n    | \"absolute-presence\"\n    | \"absolute-nested-bar-chart\";\n}\n\nconst SideText = (props: Props) => {\n  const { isClusterView, prefix } = props;\n  const getString = useFluent();\n  const { loading, city } = useCurrentCity();\n  const { benchmark, benchmarkNameShort } = useCurrentBenchmark();\n  const benchmarkType =\n    isValidPeerGroup(benchmark) || benchmark === RegionGroup.World\n      ? benchmark\n      : benchmarkNameShort;\n  if (loading) {\n    return <StandardSideTextLoading />;\n  } else if (city) {\n    const cityName = city.name ? city.name : \"\";\n    const cityNamePossessive = possessive([cityName]);\n    const its = getString(\"good-at-its\", { \"benchmark-type\": benchmarkType });\n    const the = getString(\"good-at-the\", { \"benchmark-type\": benchmarkType });\n    const peerGroupName = getString(\"good-at-benchmark\", {\n      \"benchmark-type\": benchmarkType,\n    });\n    const peerGroupPossessive = possessive([peerGroupName]);\n    const industrialKnowledgeCluster = isClusterView\n      ? \"knowledge cluster\"\n      : \"industrial\";\n    const industrysClusters = isClusterView ? \"clusters\" : \"industries\";\n    const industryCluster = isClusterView ? \"cluster\" : \"industry\";\n    const title = getString(\"good-at-title\", {\n      name: cityNamePossessive,\n    });\n    const para1 = getString(prefix + \"-para-1\", {\n      city: cityName,\n      \"city-posessive\": cityName,\n      \"peer-group\": peerGroupName,\n      \"peer-group-possessive\": peerGroupPossessive,\n      its: its,\n      the: the,\n      \"industrial-knowledge-cluster\": industrialKnowledgeCluster,\n      \"industries-clusters\": industrysClusters,\n      \"industry-cluster\": industryCluster,\n    });\n    const para2 = getString(prefix + \"-para-2\", {\n      city: cityName,\n      \"city-posessive\": cityName,\n      \"peer-group\": peerGroupName,\n      \"peer-group-possessive\": peerGroupPossessive,\n      its: its,\n      the: the,\n      \"industrial-knowledge-cluster\": industrialKnowledgeCluster,\n      \"industries-clusters\": industrysClusters,\n      \"industry-cluster\": industryCluster,\n    });\n    const para3 = getString(prefix + \"-para-3\", {\n      city: cityName,\n      \"city-posessive\": cityName,\n      \"peer-group\": peerGroupName,\n      \"peer-group-possessive\": peerGroupPossessive,\n      its: its,\n      the: the,\n      \"industrial-knowledge-cluster\": industrialKnowledgeCluster,\n      \"industries-clusters\": industrysClusters,\n      \"industry-cluster\": industryCluster,\n    });\n    const para4 =\n      prefix !== \"absolute-nested-bar-chart\"\n        ? getString(prefix + \"-para-4\", {\n            city: cityName,\n            \"city-posessive\": cityName,\n            \"peer-group\": peerGroupName,\n            \"peer-group-possessive\": peerGroupPossessive,\n            its: its,\n            the: the,\n            \"industrial-knowledge-cluster\": industrialKnowledgeCluster,\n            \"industries-clusters\": industrysClusters,\n            \"industry-cluster\": industryCluster,\n          })\n        : \"\";\n\n    return (\n      <StandardSideTextBlock>\n        <Helmet>\n          <title>\n            {title + \" | \" + getString(\"meta-data-title-default-suffix\")}\n          </title>\n          <meta\n            property=\"og:title\"\n            content={\n              title + \" | \" + getString(\"meta-data-title-default-suffix\")\n            }\n          />\n        </Helmet>\n        <ContentTitle>{title}</ContentTitle>\n        <ContentParagraph>{para1}</ContentParagraph>\n        <ContentParagraph>{para2}</ContentParagraph>\n        <ContentParagraph>{para3}</ContentParagraph>\n        <ContentParagraph>{para4}</ContentParagraph>\n      </StandardSideTextBlock>\n    );\n  } else {\n    return null;\n  }\n};\n\nexport default SideText;\n","import React from \"react\";\nimport { Route } from \"react-router-dom\";\n\n// Simplified route without Google Analytics tracking\nconst TrackedRoute = (props: any) => {\n  return <Route {...props} />;\n};\n\nexport default TrackedRoute;\n","import React, { useRef, useState } from \"react\";\nimport ComparisonBarChart, {\n  BarDatum,\n  RowHoverEvent,\n  Layout,\n} from \"react-comparison-bar-chart\";\nimport { rgba } from \"polished\";\nimport useGlobalLocationData from \"../../../hooks/useGlobalLocationData\";\nimport useFluent from \"../../../hooks/useFluent\";\nimport {\n  getStandardTooltip,\n  RapidTooltipRoot,\n} from \"../../../utilities/rapidTooltip\";\nimport {\n  CityIndustryYear,\n  CompositionType,\n  isValidPeerGroup,\n  PeerGroup,\n} from \"../../../types/graphQL/graphQLTypes\";\nimport QuickError from \"../../transitionStateComponents/QuickError\";\nimport { RegionGroup } from \"./cityIndustryComparisonQuery\";\n\nexport interface FilteredDatum {\n  id: CityIndustryYear[\"naicsId\"];\n  title: string;\n  value: number;\n  color: string;\n  topParent: CityIndustryYear[\"naicsId\"];\n}\n\nconst formatAxisValue = (value: number) => {\n  return parseFloat(value.toFixed(1)) + \"%\";\n};\n\ninterface Props {\n  filteredPrimaryData: FilteredDatum[];\n  filteredSecondaryData: FilteredDatum[];\n  primaryTotal: number;\n  secondaryTotal: number;\n  primaryCityId: number;\n  secondaryCityId: number | RegionGroup | PeerGroup;\n  highlighted: string | undefined;\n  compositionType: CompositionType;\n  isClusterView: boolean;\n}\n\nconst Chart = (props: Props) => {\n  const {\n    filteredPrimaryData,\n    filteredSecondaryData,\n    primaryTotal,\n    secondaryTotal,\n    primaryCityId,\n    secondaryCityId,\n    highlighted,\n    compositionType,\n    isClusterView,\n  } = props;\n\n  const tooltipRef = useRef<HTMLDivElement | null>(null);\n\n  const { data: globalData } = useGlobalLocationData();\n  const getString = useFluent();\n\n  const [highlightError, setHighlightError] = useState<boolean>(false);\n\n  const primaryData: BarDatum[] = [];\n  const secondaryData: BarDatum[] = [];\n  filteredPrimaryData.forEach((d) => {\n    const secondaryDatum = filteredSecondaryData.find((d2) => d2.id === d.id);\n    const primaryShare = d.value / primaryTotal;\n    const secondaryShare = secondaryDatum\n      ? secondaryDatum.value / secondaryTotal\n      : 0;\n    const difference = primaryShare - secondaryShare;\n    if (difference > 0) {\n      primaryData.push({ ...d, value: difference * 100 });\n    }\n  });\n  filteredSecondaryData.forEach((d) => {\n    const primaryDatum = filteredPrimaryData.find((d2) => d2.id === d.id);\n    const secondaryShare = d.value / secondaryTotal;\n    const primaryShare = primaryDatum ? primaryDatum.value / primaryTotal : 0;\n    const difference = secondaryShare - primaryShare;\n    if (difference > 0) {\n      secondaryData.push({ ...d, value: difference * 100 });\n    }\n  });\n\n  const primaryCityDatum = globalData\n    ? globalData.cities.find((c) => parseInt(c.cityId, 10) === primaryCityId)\n    : undefined;\n  const primaryCityName =\n    primaryCityDatum && primaryCityDatum.name ? primaryCityDatum.name : \"\";\n\n  let secondaryCityName: string;\n  if (secondaryCityId === RegionGroup.World) {\n    secondaryCityName = getString(\"global-text-world\");\n  } else if (isValidPeerGroup(secondaryCityId)) {\n    secondaryCityName = getString(\"global-formatted-peer-groups\", {\n      type: secondaryCityId,\n    });\n  } else {\n    const secondaryCityDatum = globalData\n      ? globalData.cities.find(\n          (c) => parseInt(c.cityId, 10) === secondaryCityId,\n        )\n      : undefined;\n    secondaryCityName =\n      secondaryCityDatum && secondaryCityDatum.name\n        ? secondaryCityDatum.name\n        : \"\";\n  }\n\n  const setHovered = (e: RowHoverEvent | undefined) => {\n    const node = tooltipRef.current;\n    if (node) {\n      if (e && e.datum) {\n        const { datum, mouseCoords } = e;\n        const primaryDatum = filteredPrimaryData.find((d) => d.id === datum.id);\n        const secondaryDatum = filteredSecondaryData.find(\n          (d) => d.id === datum.id,\n        );\n        const primaryValue = primaryDatum\n          ? (primaryDatum.value / primaryTotal) * 100\n          : 0;\n        const secondaryValue = secondaryDatum\n          ? (secondaryDatum.value / secondaryTotal) * 100\n          : 0;\n        const primaryValueText =\n          primaryValue === 0 || primaryValue >= 0.01\n            ? primaryValue.toFixed(2) + \"%\"\n            : \"<0.01%\";\n        const secondaryValueText =\n          secondaryValue === 0 || secondaryValue >= 0.01\n            ? secondaryValue.toFixed(2) + \"%\"\n            : \"<0.01%\";\n        const primaryDiff = primaryValue - secondaryValue;\n        const secondaryDiff = secondaryValue - primaryValue;\n        let primaryDiffValue: string;\n        if (primaryDiff < 0) {\n          primaryDiffValue = \"\";\n        } else if (primaryDiff < 0.01) {\n          primaryDiffValue = \"+<0.01%\";\n        } else {\n          primaryDiffValue = \"+\" + primaryDiff.toFixed(2) + \"%\";\n        }\n        let secondaryDiffValue: string;\n        if (secondaryDiff < 0) {\n          secondaryDiffValue = \"\";\n        } else if (secondaryDiff < 0.01) {\n          secondaryDiffValue = \"+<0.01%\";\n        } else {\n          secondaryDiffValue = \"+\" + secondaryDiff.toFixed(2) + \"%\";\n        }\n\n        node.innerHTML = getStandardTooltip({\n          title: datum.title,\n          color: rgba(datum.color, 0.3),\n          rows: [\n            [\"\", secondaryCityName, primaryCityName],\n            [\n              getString(\"tooltip-text-share-of\", { value: compositionType }),\n              secondaryValueText,\n              primaryValueText,\n            ],\n            [\"Difference\", secondaryDiffValue, primaryDiffValue],\n          ],\n          boldColumns: [1, 2],\n          underlineRows: [0],\n        });\n        node.style.top = mouseCoords.y + \"px\";\n        node.style.left = mouseCoords.x + \"px\";\n        node.style.display = \"block\";\n      } else {\n        node.style.display = \"none\";\n      }\n    }\n  };\n\n  const highlightErrorPopup = highlightError ? (\n    <QuickError closeError={() => setHighlightError(false)}>\n      {getString(\"global-ui-error-industry-not-in-data-set\")}\n    </QuickError>\n  ) : null;\n\n  const expandCollapseText = {\n    toExpand: isClusterView\n      ? getString(\"cities-top-10-comparison-chart-expand-clusters\")\n      : getString(\"cities-top-10-comparison-chart-expand\"),\n    toCollapse: isClusterView\n      ? getString(\"cities-top-10-comparison-chart-collapse-clusters\")\n      : getString(\"cities-top-10-comparison-chart-collapse\"),\n  };\n  return (\n    <>\n      <ComparisonBarChart\n        primaryData={primaryData}\n        secondaryData={secondaryData}\n        nValuesToShow={10}\n        formatValue={formatAxisValue}\n        expandCollapseText={expandCollapseText}\n        onRowHover={setHovered}\n        highlighted={highlighted}\n        onHighlightError={() => setHighlightError(true)}\n        layout={Layout.Left}\n      />\n      <RapidTooltipRoot ref={tooltipRef} />\n      {highlightErrorPopup}\n    </>\n  );\n};\n\nexport default React.memo(Chart);\n","import React, { useEffect, useState, useRef } from \"react\";\nimport {\n  DigitLevel,\n  ClassificationNaicsIndustry,\n  CompositionType,\n  PeerGroup,\n  ClassificationNaicsCluster,\n} from \"../../../types/graphQL/graphQLTypes\";\nimport { useGlobalIndustryMap } from \"../../../hooks/useGlobalIndustriesData\";\nimport { usePrevious } from \"react-use\";\nimport { useWindowWidth } from \"../../../contextProviders/appContext\";\nimport { breakPoints } from \"../../../styling/GlobalGrid\";\nimport PreChartRow, {\n  VizNavItem,\n} from \"../../../components/general/PreChartRow\";\nimport ErrorBoundary from \"../ErrorBoundary\";\nimport styled from \"styled-components/macro\";\nimport {\n  clusterColorMap,\n  educationColorRange,\n  sectorColorMap,\n  wageColorRange,\n} from \"../../../styling/styleUtils\";\nimport SimpleError from \"../../transitionStateComponents/SimpleError\";\nimport LoadingBlock, {\n  LoadingOverlay,\n} from \"../../transitionStateComponents/VizLoadingBlock\";\nimport Chart, { FilteredDatum } from \"./Chart\";\nimport {\n  useComparisonQuery,\n  SuccessResponse,\n  RegionGroup,\n} from \"./cityIndustryComparisonQuery\";\nimport { Mode } from \"../../general/searchIndustryInGraphDropdown\";\nimport {\n  BottomAxisRoot,\n  BenchmarkRoot,\n  AxisLabelLeft,\n  AxisLabelRight,\n  AxisLabelBase,\n  LeftAxisRoot,\n  AxisLabelHigh,\n} from \"../verticalBarChart/RCABarChart\";\nimport PresenceToggle, { Highlighted } from \"../legend/PresenceToggle\";\nimport { ComparisonType } from \"../../navigation/secondaryHeader/comparisons/AddComparisonModal\";\nimport BenchmarkLegend from \"../legend/BenchmarkLegend\";\nimport {\n  AggregationMode,\n  CityRoutes,\n  ClusterLevel,\n  ColorBy,\n} from \"../../../routing/routes\";\nimport { createRoute } from \"../../../routing/Utils\";\nimport { useHistory } from \"react-router-dom\";\nimport useFluent, { possessive } from \"../../../hooks/useFluent\";\nimport { useGlobalClusterMap } from \"../../../hooks/useGlobalClusterData\";\nimport { scaleLinear } from \"d3-scale\";\nimport { useAggregateIndustryMap } from \"../../../hooks/useAggregateIndustriesData\";\nimport { defaultYear } from \"../../../Utils\";\nimport useCurrentCity from \"../../../hooks/useCurrentCity\";\n\nconst Root = styled.div`\n  width: 100%;\n  height: 100%;\n  grid-column: 1;\n  grid-row: 2;\n  position: relative;\n  display: grid;\n  grid-template-rows: 1fr 3rem auto;\n  grid-template-columns: 3.5rem 1fr;\n\n  @media ${breakPoints.small} {\n    grid-row: 3;\n    grid-column: 1;\n  }\n\n  @media ${breakPoints.small} {\n    grid-row: 3;\n    grid-column: 1;\n  }\n`;\n\nconst VizRoot = styled.div`\n  width: 100%;\n  height: 100%;\n  position: relative;\n  grid-column: 2;\n  grid-row: 1;\n`;\n\nconst VizContainer = styled.div`\n  width: 100%;\n  height: 100%;\n  position: absolute;\n\n  .react-comparison-bar-chart-title {\n    h2 {\n      text-transform: none;\n      font-weight: 600;\n    }\n  }\n`;\n\ninterface Props {\n  primaryCity: number;\n  comparison: number | RegionGroup | PeerGroup;\n  year: number;\n  highlighted: string | undefined;\n  setHighlighted: (value: string | undefined) => void;\n  digitLevel: DigitLevel;\n  compositionType: CompositionType;\n  hiddenSectors: ClassificationNaicsIndustry[\"id\"][];\n  vizNavigation: VizNavItem[];\n  clusterLevel: ClusterLevel;\n  isClusterView: boolean;\n  hiddenClusters: ClassificationNaicsCluster[\"id\"][];\n  colorBy: ColorBy;\n}\n\nconst TopIndustryComparisonBarChart = (props: Props) => {\n  const {\n    primaryCity,\n    comparison,\n    year,\n    digitLevel,\n    compositionType,\n    hiddenSectors,\n    highlighted,\n    setHighlighted,\n    vizNavigation,\n    clusterLevel,\n    isClusterView,\n    hiddenClusters,\n    colorBy,\n  } = props;\n\n  const currentCity = useCurrentCity();\n  const industryMap = useGlobalIndustryMap();\n  const clusterMap = useGlobalClusterMap();\n  const aggregateIndustryDataMap = useAggregateIndustryMap({\n    level: digitLevel,\n    year: defaultYear,\n    clusterLevel: parseInt(clusterLevel, 10),\n  });\n  const aggregateData = isClusterView\n    ? aggregateIndustryDataMap.data.clusters\n    : aggregateIndustryDataMap.data.industries;\n  const globalAggregateData = isClusterView\n    ? aggregateIndustryDataMap.data.clusterMinMax\n    : aggregateIndustryDataMap.data.globalMinMax;\n  const industryOrClusterMap = isClusterView ? clusterMap : industryMap;\n  const parentField = isClusterView ? \"clusterIdTopParent\" : \"naicsIdTopParent\";\n  const colorMap = isClusterView ? clusterColorMap : sectorColorMap;\n  const level = isClusterView ? clusterLevel : digitLevel;\n  const hiddenIndustriesOrClusters = isClusterView\n    ? hiddenClusters\n    : hiddenSectors;\n  const windowDimensions = useWindowWidth();\n  const getString = useFluent();\n  const history = useHistory();\n  const { loading, error, data } = useComparisonQuery({\n    primaryCity,\n    comparison,\n    year,\n    aggregation: isClusterView\n      ? AggregationMode.cluster\n      : AggregationMode.industries,\n  });\n  const rootRef = useRef<HTMLDivElement | null>(null);\n  const [dimensions, setDimensions] = useState<\n    { width: number; height: number } | undefined\n  >(undefined);\n  useEffect(() => {\n    const node = rootRef.current;\n    if (node) {\n      const { width, height } = node.getBoundingClientRect();\n      setDimensions({ width, height });\n    }\n  }, [rootRef, windowDimensions]);\n\n  let colorScale: (val: number) => string;\n  if (\n    colorBy === ColorBy.education &&\n    aggregateIndustryDataMap.data !== undefined\n  ) {\n    colorScale = scaleLinear()\n      .domain([\n        globalAggregateData.minYearsEducation,\n        globalAggregateData.medianYearsEducation,\n        globalAggregateData.maxYearsEducation,\n      ])\n      .range(educationColorRange as any) as any;\n  } else if (\n    colorBy === ColorBy.wage &&\n    aggregateIndustryDataMap.data !== undefined\n  ) {\n    colorScale = scaleLinear()\n      .domain([\n        globalAggregateData.minHourlyWage,\n        globalAggregateData.medianHourlyWage,\n        globalAggregateData.maxHourlyWage,\n      ])\n      .range(wageColorRange as any) as any;\n  } else {\n    colorScale = () => \"lightgray\";\n  }\n\n  const prevData = usePrevious(data);\n  let dataToUse: SuccessResponse | undefined;\n  if (data) {\n    dataToUse = data;\n  } else if (prevData) {\n    dataToUse = prevData;\n  } else {\n    dataToUse = undefined;\n  }\n\n  let output: React.ReactElement<any> | null;\n  if (\n    industryOrClusterMap.loading ||\n    !dimensions ||\n    (loading && prevData === undefined)\n  ) {\n    output = <LoadingBlock />;\n  } else if (error !== undefined) {\n    output = (\n      <LoadingOverlay>\n        <SimpleError />\n      </LoadingOverlay>\n    );\n    console.error(error);\n  } else if (industryOrClusterMap.error !== undefined) {\n    output = (\n      <LoadingOverlay>\n        <SimpleError />\n      </LoadingOverlay>\n    );\n    console.error(error);\n  } else if (dataToUse !== undefined) {\n    const { primaryCityIndustries, secondaryCityIndustries } = dataToUse;\n    let primaryTotal = 0;\n    let secondaryTotal = 0;\n    const filteredPrimaryData: FilteredDatum[] = [];\n    primaryCityIndustries.forEach(({ industryId, numCompany, numEmploy }) => {\n      const industry = industryOrClusterMap.data[industryId];\n      if (industry && industry.level + \"\" === level + \"\") {\n        const { name } = industry;\n        let color: string;\n        if (\n          (colorBy === ColorBy.education || colorBy === ColorBy.wage) &&\n          aggregateIndustryDataMap.data\n        ) {\n          const target =\n            industryId !== null ? aggregateData[industryId + \"\"] : undefined;\n          if (target) {\n            const targetValue =\n              colorBy === ColorBy.education\n                ? target.yearsEducationRank\n                : target.hourlyWageRank;\n            color = colorScale(targetValue);\n          } else {\n            color = \"lightgray\";\n          }\n        } else {\n          const colorDatum = industry\n            ? colorMap.find(\n                (s) => s.id === (industry as any)[parentField].toString(),\n              )\n            : undefined;\n          color = colorDatum ? colorDatum.color : \"lightgray\";\n        }\n        const topParent = (industry as any)[parentField];\n        const companies = numCompany ? numCompany : 0;\n        const employees = numEmploy ? numEmploy : 0;\n        primaryTotal =\n          compositionType === CompositionType.Companies\n            ? primaryTotal + companies\n            : primaryTotal + employees;\n        if (!hiddenIndustriesOrClusters.includes(topParent.toString())) {\n          filteredPrimaryData.push({\n            id: industryId,\n            value:\n              compositionType === CompositionType.Companies\n                ? companies\n                : employees,\n            title: name ? name : \"\",\n            topParent: topParent.toString(),\n            color,\n          });\n        }\n      }\n    });\n    const filteredSecondaryData: FilteredDatum[] = [];\n    secondaryCityIndustries.forEach(({ industryId, numCompany, numEmploy }) => {\n      const industry = industryOrClusterMap.data[industryId];\n      if (industry && industry.level + \"\" === level + \"\") {\n        const { name } = industry;\n        let color: string;\n        if (\n          (colorBy === ColorBy.education || colorBy === ColorBy.wage) &&\n          aggregateIndustryDataMap.data\n        ) {\n          const target =\n            industryId !== null ? aggregateData[industryId + \"\"] : undefined;\n          if (target) {\n            const targetValue =\n              colorBy === ColorBy.education\n                ? target.yearsEducationRank\n                : target.hourlyWageRank;\n            color = colorScale(targetValue);\n          } else {\n            color = \"lightgray\";\n          }\n        } else {\n          const colorDatum = industry\n            ? colorMap.find(\n                (s) => s.id === (industry as any)[parentField].toString(),\n              )\n            : undefined;\n          color = colorDatum ? colorDatum.color : \"lightgray\";\n        }\n        const topParent = (industry as any)[parentField];\n        const companies = numCompany ? numCompany : 0;\n        const employees = numEmploy ? numEmploy : 0;\n        secondaryTotal =\n          compositionType === CompositionType.Companies\n            ? secondaryTotal + companies\n            : secondaryTotal + employees;\n        if (!hiddenIndustriesOrClusters.includes(topParent.toString())) {\n          filteredSecondaryData.push({\n            id: industryId,\n            value:\n              compositionType === CompositionType.Companies\n                ? companies\n                : employees,\n            title: name ? name : \"\",\n            topParent: topParent.toString(),\n            color,\n          });\n        }\n      }\n    });\n    if (!filteredPrimaryData.length && !filteredSecondaryData.length) {\n      output = (\n        <LoadingOverlay>\n          <SimpleError\n            fluentMessageId={\"global-ui-error-no-sectors-selected\"}\n          />\n        </LoadingOverlay>\n      );\n    } else {\n      const loadingOverlay = loading ? <LoadingBlock /> : null;\n      output = (\n        <VizContainer>\n          <ErrorBoundary>\n            <Chart\n              key={dimensions.height.toString() + dimensions.width.toString()}\n              filteredPrimaryData={filteredPrimaryData}\n              filteredSecondaryData={filteredSecondaryData}\n              primaryTotal={primaryTotal}\n              secondaryTotal={secondaryTotal}\n              primaryCityId={primaryCity}\n              secondaryCityId={comparison}\n              highlighted={highlighted}\n              compositionType={compositionType}\n              isClusterView={isClusterView}\n            />\n          </ErrorBoundary>\n          {loadingOverlay}\n        </VizContainer>\n      );\n    }\n  } else {\n    output = null;\n  }\n\n  const onButtonClick = (value: Highlighted) => {\n    if (value === Highlighted.relative) {\n      const route = createRoute.city(CityRoutes.CityGoodAt, primaryCity + \"\");\n      history.push(route + history.location.search);\n    }\n  };\n\n  const cityName =\n    currentCity && currentCity.city && currentCity.city.name\n      ? currentCity.city.name\n      : \"---\";\n\n  const textLeft = getString(\"cities-top-10-comparison-chart-title\", {\n    name: \"Peers'\",\n    other: possessive([cityName]),\n  });\n  const textRight = getString(\"cities-top-10-comparison-chart-title\", {\n    name: possessive([cityName]),\n    other: \"Peers'\",\n  });\n\n  return (\n    <>\n      <PreChartRow\n        searchInGraphOptions={{\n          hiddenParents: isClusterView ? hiddenClusters : hiddenSectors,\n          digitLevel,\n          clusterLevel,\n          setHighlighted,\n          mode: isClusterView ? Mode.cluster : Mode.naics,\n        }}\n        settingsOptions={{\n          compositionType: true,\n          clusterLevel: isClusterView ? true : undefined,\n          digitLevel: isClusterView ? undefined : true,\n          colorBy: true,\n          aggregationMode: true,\n        }}\n        vizNavigation={vizNavigation}\n      />\n      <Root ref={rootRef}>\n        <LeftAxisRoot>\n          <AxisLabelBase>\n             {getString(\"global-absolute-presence-lower\")}\n          </AxisLabelBase>\n          <AxisLabelHigh>\n            {getString(\"global-absolute-presence-higher\")} \n          </AxisLabelHigh>\n        </LeftAxisRoot>\n        <BottomAxisRoot>\n          <AxisLabelLeft\n            dangerouslySetInnerHTML={{ __html: textLeft }}\n            style={{ whiteSpace: \"normal\" }}\n          />\n          <AxisLabelBase>\n            <PresenceToggle\n              togglePresence={true}\n              highlight={Highlighted.absolute}\n              showArrows={true}\n              onButtonClick={onButtonClick}\n            />\n          </AxisLabelBase>\n          <AxisLabelRight\n            dangerouslySetInnerHTML={{ __html: textRight }}\n            style={{ whiteSpace: \"normal\" }}\n          />\n        </BottomAxisRoot>\n        <BenchmarkRoot>\n          <BenchmarkLegend comparisonType={ComparisonType.Absolute} />\n        </BenchmarkRoot>\n        <VizRoot>{output}</VizRoot>\n      </Root>\n    </>\n  );\n};\n\nexport default TopIndustryComparisonBarChart;\n","import React, { useEffect, useState } from \"react\";\nimport EconomicComposition from \"./economicComposition\";\nimport Overview from \"./overview\";\nimport GoodAt from \"./goodAt\";\nimport { Switch, useHistory, matchPath, Route } from \"react-router-dom\";\nimport {\n  CityRoutes,\n  cityIdParam,\n  GlobalQueryParams,\n} from \"../../../routing/routes\";\nimport { createRoute } from \"../../../routing/Utils\";\nimport InnerPage from \"../../../components/templates/InnerPage\";\nimport useFluent from \"../../../hooks/useFluent\";\nimport useCurrentCityId from \"../../../hooks/useCurrentCityId\";\nimport { usePrevious } from \"react-use\";\nimport styled from \"styled-components\";\nimport { backgroundDark, primaryFont } from \"../../../styling/styleUtils\";\n\nconst Button = styled.button`\n  border: solid 1px #fff;\n  background-color: transparent;\n  color: #fff;\n  font-family: ${primaryFont};\n  font-size: 0.875rem;\n  margin-top: 0.75rem;\n\n  &:hover {\n    background-color: #fff;\n    color: ${backgroundDark};\n  }\n`;\n\nconst overviewTooltipLocalStorageKey =\n  \"cityProfileOverviewOneTimeTooltipLocalStorageKeyv1\";\nenum StringBoolean {\n  \"TRUE\" = \"TRUE\",\n  \"FALSE\" = \"FALSE\",\n}\n\nconst City = () => {\n  const getString = useFluent();\n  const getStringWithNewLines = (value: string) =>\n    getString(value).replace(/\\\\n/g, \"\\n\");\n  const history = useHistory();\n  const match = matchPath<{ [cityIdParam]: string }>(\n    history.location.pathname,\n    CityRoutes.CityBase,\n  );\n  const matchOverview = matchPath<{ [cityIdParam]: string }>(\n    history.location.pathname,\n    CityRoutes.CityOverview,\n  );\n  const cityId = useCurrentCityId();\n  const prevCityId = usePrevious(cityId);\n\n  const [showOverviewTooltip, setShowOverviewTooltip] =\n    useState<boolean>(false);\n  const dismissOverviewTooltip = () => {\n    setShowOverviewTooltip(false);\n    localStorage.setItem(overviewTooltipLocalStorageKey, StringBoolean.TRUE);\n  };\n\n  useEffect(() => {\n    const dismissed = localStorage.getItem(overviewTooltipLocalStorageKey);\n    if (\n      cityId &&\n      prevCityId &&\n      cityId !== prevCityId &&\n      !matchOverview?.isExact &&\n      dismissed !== StringBoolean.TRUE\n    ) {\n      setShowOverviewTooltip(true);\n    }\n  }, [matchOverview, cityId, prevCityId]);\n\n  useEffect(() => {\n    if (showOverviewTooltip && matchOverview?.isExact) {\n      setShowOverviewTooltip(false);\n      localStorage.setItem(overviewTooltipLocalStorageKey, StringBoolean.TRUE);\n    }\n  }, [matchOverview, showOverviewTooltip]);\n\n  useEffect(() => {\n    // If route is blank, default to first slide\n    if (match && match.isExact && match.params[cityIdParam]) {\n      history.replace(\n        createRoute.city(CityRoutes.CityOverview, match.params[cityIdParam]),\n      );\n    }\n  }, [history, match]);\n\n  const baseLinkData =\n    cityId !== null\n      ? [\n          {\n            label: getStringWithNewLines(\n              \"cities-single-page-titles-question-1\",\n            ),\n            url: createRoute.city(CityRoutes.CityOverview, cityId),\n            removeParams: [] as (keyof GlobalQueryParams)[],\n            tooltipText: showOverviewTooltip ? (\n              <>\n                {getString(\"city-overview-one-time-tooltip\")}\n                <br />\n                <Button onClick={dismissOverviewTooltip}>\n                  {getString(\"city-overview-one-time-tooltip-got-it\")}\n                </Button>\n              </>\n            ) : undefined,\n          },\n          {\n            label: getStringWithNewLines(\n              \"cities-single-page-titles-question-2\",\n            ),\n            url: createRoute.city(CityRoutes.CityEconomicComposition, cityId),\n            removeParams: [] as (keyof GlobalQueryParams)[],\n          },\n          {\n            label: getStringWithNewLines(\n              \"cities-single-page-titles-question-3\",\n            ),\n            url: createRoute.city(CityRoutes.CityGoodAt, cityId),\n            removeParams: [] as (keyof GlobalQueryParams)[],\n          },\n        ]\n      : [];\n\n  return (\n    <InnerPage baseLinkData={baseLinkData}>\n      <Switch>\n        <Route path={CityRoutes.CityOverview} component={Overview} />\n        <Route\n          path={CityRoutes.CityEconomicComposition}\n          component={EconomicComposition}\n        />\n        <Route path={CityRoutes.CityGoodAt} component={GoodAt} />\n      </Switch>\n    </InnerPage>\n  );\n};\n\nexport default City;\n","import React, { useEffect, useState, useRef } from \"react\";\nimport {\n  DigitLevel,\n  ClassificationNaicsIndustry,\n  CompositionType,\n  isValidPeerGroup,\n  PeerGroup,\n  ClassificationNaicsCluster,\n} from \"../../../types/graphQL/graphQLTypes\";\nimport { useGlobalIndustryMap } from \"../../../hooks/useGlobalIndustriesData\";\nimport { usePrevious } from \"react-use\";\nimport { useWindowWidth } from \"../../../contextProviders/appContext\";\nimport { breakPoints } from \"../../../styling/GlobalGrid\";\nimport PreChartRow, {\n  VizNavItem,\n} from \"../../../components/general/PreChartRow\";\nimport ErrorBoundary from \"../ErrorBoundary\";\nimport styled from \"styled-components/macro\";\nimport {\n  sectorColorMap,\n  secondaryFont,\n  baseColor,\n  clusterColorMap,\n} from \"../../../styling/styleUtils\";\nimport SimpleError from \"../../transitionStateComponents/SimpleError\";\nimport LoadingBlock, {\n  LoadingOverlay,\n} from \"../../transitionStateComponents/VizLoadingBlock\";\nimport { ClusterBarChartDatum } from \"react-fast-charts\";\nimport {\n  useComparisonQuery,\n  SuccessResponse,\n  RegionGroup,\n} from \"../comparisonBarChart/cityIndustryComparisonQuery\";\nimport orderBy from \"lodash/orderBy\";\nimport { rgba } from \"polished\";\nimport useGlobalLocationData from \"../../../hooks/useGlobalLocationData\";\nimport useFluent from \"../../../hooks/useFluent\";\nimport Chart, { Group } from \"./Chart\";\nimport { Mode } from \"../../general/searchIndustryInGraphDropdown\";\nimport PresenceToggle, { Highlighted } from \"../legend/PresenceToggle\";\nimport { ComparisonType } from \"../../navigation/secondaryHeader/comparisons/AddComparisonModal\";\nimport BenchmarkLegend from \"../legend/BenchmarkLegend\";\nimport {\n  AggregationMode,\n  CityRoutes,\n  ClusterLevel,\n} from \"../../../routing/routes\";\nimport { createRoute } from \"../../../routing/Utils\";\nimport { useHistory } from \"react-router-dom\";\nimport { useGlobalClusterMap } from \"../../../hooks/useGlobalClusterData\";\n\nconst Root = styled.div`\n  width: 100%;\n  height: 100%;\n  grid-column: 1;\n  grid-row: 2;\n  position: relative;\n  display: grid;\n  grid-template-rows: 4rem 2rem 1fr 3rem auto;\n\n  @media ${breakPoints.small} {\n    grid-row: 3;\n    grid-column: 1;\n  }\n`;\n\nconst BottomAxisRoot = styled.div`\n  grid-row: 4;\n  grid-column: 1;\n  white-space: nowrap;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  pointer-events: none;\n\n  @media (max-width: 990px) {\n    grid-template-columns: 1 / -1;\n  }\n\n  @media (max-width: 920px) {\n    justify-content: center;\n  }\n`;\n\nconst BenchmarkRoot = styled(BottomAxisRoot)`\n  grid-row: 5;\n  justify-content: center;\n  white-space: normal;\n`;\n\nconst AxisLabelBase = styled.div`\n  font-weight: 600;\n  font-size: 0.75rem;\n  color: ${baseColor};\n  text-transform: uppercase;\n\n  @media (max-width: 1000px) {\n    font-size: 0.6rem;\n  }\n\n  @media (max-height: 600px) {\n    font-size: 0.65rem;\n  }\n`;\n\nconst SizingContainer = styled.div`\n  width: 100%;\n  grid-row: 3;\n`;\n\nconst VizContainer = styled.div`\n  width: 100%;\n  height: 100%;\n  position: absolute;\n\n  .cluster-bar-chart-y-axis-label {\n    text-transform: uppercase;\n    font-size: 0.75rem;\n  }\n`;\n\nconst BreadCrumbList = styled.ul`\n  list-style: none;\n  padding: 0;\n  margin: 0;\n  display: flex;\n  align-items: center;\n\n  @media ${breakPoints.small} {\n    flex-wrap: wrap;\n  }\n`;\n\nconst breadCrumbFontSize = \"clamp(0.55rem, 0.9vw, 0.85rem)\";\n\nconst BreadCrumb = styled.li`\n  font-size: 0.6rem;\n  font-size: ${breadCrumbFontSize};\n  max-width: 20%;\n  padding-right: 2rem;\n  box-sizing: border-box;\n  font-family: ${secondaryFont};\n  position: relative;\n`;\n\nconst BreadCrumbLink = styled.button`\n  border: none;\n  background-color: transparent;\n  padding: 0;\n  font-size: 0.6rem;\n  font-size: ${breadCrumbFontSize};\n  font-family: ${secondaryFont};\n  color: rgb(78, 140, 141);\n  cursor: pointer;\n  text-align: left;\n  display: flex;\n  align-items: center;\n\n  span {\n    text-decoration: underline;\n  }\n\n  &:after {\n    content: \"\";\n    margin: 0 0.5rem;\n    font-size: 1rem;\n    text-decoration: none;\n    display: inline-block;\n    position: absolute;\n    right: 0;\n  }\n`;\n\nconst PrimarySecondaryLegend = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n`;\n\nconst LegendItem = styled.div`\n  display: flex;\n  align-items: center;\n`;\n\nconst LegendBlock = styled.div`\n  width: 2em;\n  height: 1rem;\n  margin: 0 0.1rem;\n`;\n\nconst LegendText = styled.div`\n  font-size: 0.75rem;\n  text-transform: uppercase;\n  margin: 0 0.5rem;\n`;\n\ninterface Props {\n  primaryCity: number;\n  comparison: number | RegionGroup | PeerGroup;\n  year: number;\n  highlighted: number | null;\n  setHighlighted: (value: string | undefined) => void;\n  compositionType: CompositionType;\n  hiddenSectors: ClassificationNaicsIndustry[\"id\"][];\n  vizNavigation: VizNavItem[];\n  isClusterView: boolean;\n  hiddenClusters: ClassificationNaicsCluster[\"id\"][];\n}\n\nconst IndustryZoomableBarChart = (props: Props) => {\n  const {\n    primaryCity,\n    comparison,\n    year,\n    compositionType,\n    highlighted,\n    hiddenSectors,\n    setHighlighted,\n    vizNavigation,\n    isClusterView,\n    hiddenClusters,\n  } = props;\n\n  const { loading, error, data } = useComparisonQuery({\n    primaryCity,\n    comparison,\n    year,\n    aggregation: isClusterView\n      ? AggregationMode.cluster\n      : AggregationMode.industries,\n  });\n  const history = useHistory();\n  const industryMap = useGlobalIndustryMap();\n  const clusterMap = useGlobalClusterMap({ skipLevel2: true });\n  const industryOrClusterMap = isClusterView ? clusterMap : industryMap;\n  const parentField = isClusterView ? \"clusterIdTopParent\" : \"naicsIdTopParent\";\n  const idField = isClusterView ? \"clusterId\" : \"naicsId\";\n  const colorMap = isClusterView ? clusterColorMap : sectorColorMap;\n  const hiddenIndustriesOrClusters = isClusterView\n    ? hiddenClusters\n    : hiddenSectors;\n  const windowDimensions = useWindowWidth();\n  const rootRef = useRef<HTMLDivElement | null>(null);\n  const [dimensions, setDimensions] = useState<\n    { width: number; height: number } | undefined\n  >(undefined);\n  const getString = useFluent();\n  const { data: globalData } = useGlobalLocationData();\n\n  useEffect(() => {\n    setHighlighted(undefined);\n  }, [isClusterView, setHighlighted]);\n\n  const primaryCityDatum = globalData\n    ? globalData.cities.find((c) => parseInt(c.cityId, 10) === primaryCity)\n    : undefined;\n  const primaryCityName =\n    primaryCityDatum && primaryCityDatum.name ? primaryCityDatum.name : \"\";\n\n  let secondaryCityName: string;\n  if (comparison === RegionGroup.World) {\n    secondaryCityName = getString(\"global-text-world\");\n  } else if (isValidPeerGroup(comparison)) {\n    secondaryCityName = getString(\"global-formatted-peer-groups\", {\n      type: comparison,\n    });\n  } else {\n    const secondaryCityDatum = globalData\n      ? globalData.cities.find((c) => parseInt(c.cityId, 10) === comparison)\n      : undefined;\n    secondaryCityName =\n      secondaryCityDatum && secondaryCityDatum.name\n        ? secondaryCityDatum.name\n        : \"\";\n  }\n\n  useEffect(() => {\n    const node = rootRef.current;\n    if (node) {\n      const { width, height } = node.getBoundingClientRect();\n      setDimensions({ width, height });\n    }\n  }, [rootRef, windowDimensions]);\n\n  const highlightIndustry = highlighted\n    ? industryOrClusterMap.data[highlighted]\n    : undefined;\n\n  const prevData = usePrevious(data);\n  let dataToUse: SuccessResponse | undefined;\n  if (data) {\n    dataToUse = data;\n  } else if (prevData) {\n    dataToUse = prevData;\n  } else {\n    dataToUse = undefined;\n  }\n\n  let output: React.ReactElement<any> | null;\n  if (\n    industryOrClusterMap.loading ||\n    !dimensions ||\n    (loading && prevData === undefined)\n  ) {\n    output = <LoadingBlock />;\n  } else if (error !== undefined) {\n    output = (\n      <LoadingOverlay>\n        <SimpleError />\n      </LoadingOverlay>\n    );\n    console.error(error);\n  } else if (industryOrClusterMap.error !== undefined) {\n    output = (\n      <LoadingOverlay>\n        <SimpleError />\n      </LoadingOverlay>\n    );\n    console.error(error);\n  } else if (dataToUse !== undefined) {\n    const { primaryCityIndustries, secondaryCityIndustries } = dataToUse;\n    const highlightedParent =\n      (highlightIndustry && highlightIndustry.level === DigitLevel.Six) ||\n      (isClusterView &&\n        highlightIndustry &&\n        highlightIndustry.level + \"\" === ClusterLevel.C3)\n        ? highlightIndustry.parentId\n        : highlighted;\n    const primaryTotal = primaryCityIndustries.reduce(\n      (total, { industryId, numCompany, numEmploy }) => {\n        const industry = industryOrClusterMap.data[industryId];\n        if (industry && industry.parentId === null) {\n          const companies = numCompany ? numCompany : 0;\n          const employees = numEmploy ? numEmploy : 0;\n          const increment =\n            compositionType === CompositionType.Companies\n              ? companies\n              : employees;\n          return total + increment;\n        } else {\n          return total;\n        }\n      },\n      0,\n    );\n    const secondaryTotal = secondaryCityIndustries.reduce(\n      (total, { industryId, numCompany, numEmploy }) => {\n        const industry = industryMap.data[industryId];\n        if (industry && industry.parentId === null) {\n          const companies = numCompany ? numCompany : 0;\n          const employees = numEmploy ? numEmploy : 0;\n          const increment =\n            compositionType === CompositionType.Companies\n              ? companies\n              : employees;\n          return total + increment;\n        } else {\n          return total;\n        }\n      },\n      0,\n    );\n    const barChartData: ClusterBarChartDatum[] = [];\n    [...primaryCityIndustries, ...secondaryCityIndustries].forEach(\n      ({ industryId, numCompany, numEmploy }, i) => {\n        const industry = industryOrClusterMap.data[industryId];\n        if (\n          industry &&\n          industry.name &&\n          industry.parentId === highlightedParent &&\n          !hiddenIndustriesOrClusters.includes(\n            (industry as any)[parentField].toString(),\n          )\n        ) {\n          const groupName =\n            i < primaryCityIndustries.length ? Group.Primary : Group.Secondary;\n          const companies = numCompany ? numCompany : 0;\n          const employees = numEmploy ? numEmploy : 0;\n          const colorDatum = colorMap.find(\n            (s) => s.id === (industry as any)[parentField].toString(),\n          );\n          let fill: string | undefined;\n          if (colorDatum) {\n            fill =\n              i < primaryCityIndustries.length\n                ? colorDatum.color\n                : rgba(colorDatum.color, 0.4);\n          } else {\n            fill = undefined;\n          }\n          const value =\n            compositionType === CompositionType.Companies\n              ? companies\n              : employees;\n          const total =\n            i < primaryCityIndustries.length ? primaryTotal : secondaryTotal;\n          barChartData.push({\n            groupName,\n            x: industry.name.replace(/ and /g, \" & \"),\n            y: (value / total) * 100,\n            fill,\n            onClick:\n              (!isClusterView && industry.level !== DigitLevel.Six) ||\n              (isClusterView && industry.level + \"\" !== ClusterLevel.C3 + \"\")\n                ? () => setHighlighted(industryId)\n                : undefined,\n          });\n        }\n      },\n    );\n    const sortedData = orderBy(\n      barChartData,\n      [\"groupName\", \"y\"],\n      [\"asc\", \"desc\"],\n    );\n    const loadingOverlay = loading ? <LoadingBlock /> : null;\n\n    output = (\n      <VizContainer style={{ height: dimensions.height }}>\n        <ErrorBoundary>\n          <Chart\n            data={sortedData}\n            compositionType={compositionType}\n            height={dimensions.height}\n            loading={loading}\n            primaryName={primaryCityName}\n            secondaryName={secondaryCityName}\n          />\n        </ErrorBoundary>\n        {loadingOverlay}\n      </VizContainer>\n    );\n  } else {\n    output = null;\n  }\n\n  const breadCrumbList = [];\n  let current = highlightIndustry;\n  while (current !== undefined) {\n    breadCrumbList.push(current);\n    const currentParentId = current.parentId;\n    current = currentParentId\n      ? industryOrClusterMap.data[currentParentId]\n      : undefined;\n  }\n  const breadCrumbs = breadCrumbList.reverse().map((industry, i) => {\n    const industryName = industry.name\n      ? industry.name.replace(\" and \", \" & \")\n      : \"\";\n    if (i === breadCrumbList.length - 1) {\n      return <BreadCrumb key={industry.id}>{industryName}</BreadCrumb>;\n    }\n    return (\n      <BreadCrumb key={industry.id}>\n        <BreadCrumbLink\n          onClick={() => setHighlighted((industry as any)[idField])}\n        >\n          <span>{industryName}</span>\n        </BreadCrumbLink>\n      </BreadCrumb>\n    );\n  });\n  const topLevelText = isClusterView\n    ? getString(\"global-ui-cluster-aggregation-level\", {\n        cluster: \"cluster_1\",\n      })\n    : getString(\"global-ui-sector-level\");\n  const topLevelBreadCrumb = breadCrumbList.length ? (\n    <BreadCrumb>\n      <BreadCrumbLink onClick={() => setHighlighted(undefined)}>\n        <span>{topLevelText}</span>\n      </BreadCrumbLink>\n    </BreadCrumb>\n  ) : (\n    <BreadCrumb>{topLevelText}</BreadCrumb>\n  );\n\n  const onButtonClick = (value: Highlighted) => {\n    if (value === Highlighted.relative) {\n      const route = createRoute.city(CityRoutes.CityGoodAt, primaryCity + \"\");\n      history.push(route + history.location.search);\n    }\n  };\n\n  return (\n    <>\n      <PreChartRow\n        searchInGraphOptions={{\n          hiddenParents: isClusterView ? hiddenClusters : hiddenSectors,\n          digitLevel: null,\n          clusterLevel: null,\n          setHighlighted,\n          mode: isClusterView ? Mode.cluster : Mode.naics,\n        }}\n        settingsOptions={{\n          compositionType: true,\n          aggregationMode: true,\n          digitLevel: isClusterView ? undefined : false,\n          clusterLevel: isClusterView ? false : undefined,\n        }}\n        vizNavigation={vizNavigation}\n      />\n      <Root>\n        <BreadCrumbList>\n          {topLevelBreadCrumb}\n          {breadCrumbs}\n        </BreadCrumbList>\n        <PrimarySecondaryLegend>\n          <LegendItem>\n            <LegendText>{primaryCityName}</LegendText>\n            <LegendBlock style={{ backgroundColor: \"#666\" }} />\n          </LegendItem>\n          <LegendItem>\n            <LegendBlock style={{ backgroundColor: rgba(\"#666\", 0.4) }} />\n            <LegendText>{secondaryCityName}</LegendText>\n          </LegendItem>\n        </PrimarySecondaryLegend>\n\n        <BottomAxisRoot>\n          <AxisLabelBase>\n            <PresenceToggle\n              togglePresence={true}\n              highlight={Highlighted.absolute}\n              showArrows={false}\n              onButtonClick={onButtonClick}\n            />\n          </AxisLabelBase>\n        </BottomAxisRoot>\n        <BenchmarkRoot>\n          <BenchmarkLegend comparisonType={ComparisonType.Absolute} />\n        </BenchmarkRoot>\n        <SizingContainer ref={rootRef}>{output}</SizingContainer>\n      </Root>\n    </>\n  );\n};\n\nexport default IndustryZoomableBarChart;\n","import React, { useState } from \"react\";\nimport TopIndustryComparisonBarChart from \"../../../../../components/dataViz/comparisonBarChart/TopIndustryComparisonBarChart\";\nimport IndustryZoomableBarChart from \"../../../../../components/dataViz/zoomableComparisonBarChart/IndustryZoomableBarChart\";\nimport { defaultYear } from \"../../../../../Utils\";\nimport {\n  defaultCompositionType,\n  CompositionType,\n  defaultDigitLevel,\n  isValidPeerGroup,\n  PeerGroup,\n  ClassificationNaicsCluster,\n  ClusterLevel,\n} from \"../../../../../types/graphQL/graphQLTypes\";\nimport useQueryParams from \"../../../../../hooks/useQueryParams\";\nimport { RegionGroup } from \"../../../../../components/dataViz/comparisonBarChart/cityIndustryComparisonQuery\";\nimport { createRoute } from \"../../../../../routing/Utils\";\nimport TrackedRoute from \"../../../../../routing/TrackedRoute\";\nimport {\n  CityRoutes,\n  cityIdParam,\n  ColorBy,\n} from \"../../../../../routing/routes\";\nimport { useHistory, Switch, matchPath } from \"react-router-dom\";\nimport SideText from \"../SideText\";\n\ninterface Props {\n  primaryCity: string;\n  secondaryCity: string;\n  hiddenSectors: string[];\n  clusterLevel: ClusterLevel;\n  isClusterView: boolean;\n  hiddenClusters: ClassificationNaicsCluster[\"id\"][];\n  colorBy: ColorBy;\n}\n\nconst CompositionComparison = (props: Props) => {\n  const {\n    primaryCity,\n    secondaryCity,\n    hiddenSectors,\n    clusterLevel,\n    isClusterView,\n    hiddenClusters,\n    colorBy,\n  } = props;\n\n  const { digit_level, composition_type } = useQueryParams();\n  const [highlighted, setHighlighted] = useState<string | undefined>(undefined);\n  const history = useHistory();\n  const isIndustryComparison = matchPath<{ [cityIdParam]: string }>(\n    history.location.pathname,\n    CityRoutes.CityGoodAtAbsolutePresenceComparison,\n  );\n  const vizNavigation = [\n    {\n      label: \"Bar Graph\",\n      active: !!(!isIndustryComparison || !isIndustryComparison.isExact),\n      onClick: () => {\n        setHighlighted(undefined);\n        history.push(\n          createRoute.city(CityRoutes.CityGoodAtAbsolutePresence, primaryCity) +\n            history.location.search,\n        );\n      },\n    },\n    {\n      label: \"Nested Bar Graph\",\n      active: !!(isIndustryComparison && isIndustryComparison.isExact),\n      onClick: () => {\n        setHighlighted(undefined);\n        history.push(\n          createRoute.city(\n            CityRoutes.CityGoodAtAbsolutePresenceComparison,\n            primaryCity,\n          ) + history.location.search,\n        );\n      },\n    },\n  ];\n\n  let comparison: number | RegionGroup | PeerGroup;\n  if (secondaryCity === RegionGroup.World) {\n    comparison = RegionGroup.World;\n  } else if (isValidPeerGroup(secondaryCity)) {\n    comparison = secondaryCity as PeerGroup;\n  } else {\n    comparison = parseInt(secondaryCity, 10);\n  }\n\n  return (\n    <>\n      <Switch>\n        <TrackedRoute\n          path={CityRoutes.CityGoodAtAbsolutePresenceComparison}\n          render={() => (\n            <>\n              <SideText\n                isClusterView={Boolean(isClusterView)}\n                prefix={\"absolute-nested-bar-chart\"}\n              />\n              <IndustryZoomableBarChart\n                primaryCity={parseInt(primaryCity, 10)}\n                comparison={comparison}\n                year={defaultYear}\n                setHighlighted={setHighlighted}\n                highlighted={highlighted ? parseInt(highlighted, 10) : null}\n                compositionType={\n                  composition_type\n                    ? (composition_type as CompositionType)\n                    : defaultCompositionType\n                }\n                hiddenSectors={hiddenSectors}\n                vizNavigation={vizNavigation}\n                isClusterView={isClusterView}\n                hiddenClusters={hiddenClusters}\n              />\n            </>\n          )}\n        />\n        <TrackedRoute\n          path={CityRoutes.CityGoodAtAbsolutePresence}\n          render={() => (\n            <>\n              <SideText\n                isClusterView={Boolean(isClusterView)}\n                prefix={\"absolute-presence\"}\n              />\n              <TopIndustryComparisonBarChart\n                primaryCity={parseInt(primaryCity, 10)}\n                comparison={comparison}\n                year={defaultYear}\n                setHighlighted={setHighlighted}\n                highlighted={highlighted}\n                digitLevel={\n                  digit_level ? parseInt(digit_level, 10) : defaultDigitLevel\n                }\n                compositionType={\n                  composition_type\n                    ? (composition_type as CompositionType)\n                    : defaultCompositionType\n                }\n                hiddenSectors={hiddenSectors}\n                vizNavigation={vizNavigation}\n                clusterLevel={clusterLevel}\n                isClusterView={isClusterView}\n                hiddenClusters={hiddenClusters}\n                colorBy={colorBy}\n              />\n            </>\n          )}\n        />\n      </Switch>\n    </>\n  );\n};\n\nexport default CompositionComparison;\n","import { DefaultContentWrapper } from \"../../../../styling/GlobalGrid\";\nimport useCurrentCityId from \"../../../../hooks/useCurrentCityId\";\nimport SimpleError from \"../../../../components/transitionStateComponents/SimpleError\";\nimport { LoadingOverlay } from \"../../../../components/transitionStateComponents/VizLoadingBlock\";\nimport React, { useState } from \"react\";\nimport {\n  ClassificationNaicsIndustry,\n  ClassificationNaicsCluster,\n} from \"../../../../types/graphQL/graphQLTypes\";\nimport { ContentGrid } from \"../../../../styling/styleUtils\";\nimport useQueryParams from \"../../../../hooks/useQueryParams\";\nimport useFluent from \"../../../../hooks/useFluent\";\nimport CategoryLabels from \"../../../../components/dataViz/legend/CategoryLabels\";\nimport EducationLegend from \"../../../../components/dataViz/legend/EducationLegend\";\nimport WageLegend from \"../../../../components/dataViz/legend/WageLegend\";\nimport useSectorMap from \"../../../../hooks/useSectorMap\";\nimport useClusterMap from \"../../../../hooks/useClusterMap\";\nimport UtilityBar from \"../../../../components/navigation/secondaryHeader/UtilityBar\";\nimport {\n  ColorBy,\n  defaultClusterLevel,\n  defaultColorBy,\n  AggregationMode,\n  defaultAggregationMode,\n  CityRoutes,\n  Routes,\n} from \"../../../../routing/routes\";\nimport RCABarChart from \"../../../../components/dataViz/verticalBarChart/RCABarChart\";\nimport { defaultDigitLevel } from \"../../../../types/graphQL/graphQLTypes\";\nimport SideText from \"./SideText\";\nimport { Switch } from \"react-router-dom\";\nimport TrackedRoute from \"../../../../routing/TrackedRoute\";\nimport AbsolutePresence from \"./absolutePresence\";\nimport useCurrentBenchmark from \"../../../../hooks/useCurrentBenchmark\";\nimport { useRouteMatch } from \"react-router-dom\";\n\nconst CityGoodAt = () => {\n  const cityId = useCurrentCityId();\n\n  const { cluster_level, digit_level, color_by, aggregation } =\n    useQueryParams();\n  const { benchmark } = useCurrentBenchmark();\n  const sectorMap = useSectorMap();\n  const clusterMap = useClusterMap();\n  const matchZoomableBarChart = useRouteMatch(\n    Routes.CityGoodAtAbsolutePresenceComparison,\n  );\n  const [hiddenSectors, setHiddenSectors] = useState<\n    ClassificationNaicsIndustry[\"id\"][]\n  >([]);\n  const [hiddenClusters, setHiddenClusters] = useState<\n    ClassificationNaicsCluster[\"id\"][]\n  >([]);\n  const toggleSector = (sectorId: ClassificationNaicsIndustry[\"id\"]) =>\n    hiddenSectors.includes(sectorId)\n      ? setHiddenSectors(hiddenSectors.filter((sId) => sId !== sectorId))\n      : setHiddenSectors([...hiddenSectors, sectorId]);\n  const isolateSector = (sectorId: ClassificationNaicsIndustry[\"id\"]) =>\n    hiddenSectors.length === sectorMap.length - 1 &&\n    !hiddenSectors.find((sId) => sId === sectorId)\n      ? setHiddenSectors([])\n      : setHiddenSectors([\n          ...sectorMap.map((s) => s.id).filter((sId) => sId !== sectorId),\n        ]);\n  const resetSectors = () => setHiddenSectors([]);\n\n  const toggleCluster = (clusterId: ClassificationNaicsCluster[\"id\"]) =>\n    hiddenClusters.includes(clusterId)\n      ? setHiddenClusters(hiddenClusters.filter((sId) => sId !== clusterId))\n      : setHiddenClusters([...hiddenClusters, clusterId]);\n  const isolateCluster = (clusterId: ClassificationNaicsCluster[\"id\"]) =>\n    hiddenClusters.length === clusterMap.length - 1 &&\n    !hiddenClusters.find((sId) => sId === clusterId)\n      ? setHiddenClusters([])\n      : setHiddenClusters([\n          ...clusterMap.map((s) => s.id).filter((sId) => sId !== clusterId),\n        ]);\n  const resetClusters = () => setHiddenClusters([]);\n\n  const [highlighted, setHighlighted] = useState<string | undefined>(undefined);\n  const getString = useFluent();\n\n  const isClusterView =\n    (!aggregation && defaultAggregationMode === AggregationMode.cluster) ||\n    aggregation === AggregationMode.cluster;\n\n  if (cityId === null) {\n    return (\n      <DefaultContentWrapper>\n        <LoadingOverlay>\n          <SimpleError fluentMessageId={\"global-ui-error-invalid-city\"} />\n        </LoadingOverlay>\n      </DefaultContentWrapper>\n    );\n  }\n\n  let legend: React.ReactElement<any> | null;\n  if (color_by === ColorBy.education && !matchZoomableBarChart) {\n    legend = <EducationLegend />;\n  } else if (color_by === ColorBy.wage && !matchZoomableBarChart) {\n    legend = <WageLegend />;\n  } else {\n    if (isClusterView) {\n      legend = (\n        <CategoryLabels\n          categories={clusterMap}\n          allowToggle={true}\n          toggleCategory={toggleCluster}\n          isolateCategory={isolateCluster}\n          hiddenCategories={hiddenClusters}\n          resetCategories={resetClusters}\n          resetText={getString(\"global-ui-reset-clusters\")}\n          fullWidth={false}\n        />\n      );\n    } else {\n      legend = (\n        <CategoryLabels\n          categories={sectorMap}\n          allowToggle={true}\n          toggleCategory={toggleSector}\n          isolateCategory={isolateSector}\n          hiddenCategories={hiddenSectors}\n          resetCategories={resetSectors}\n          resetText={getString(\"global-ui-reset-sectors\")}\n          fullWidth={true}\n        />\n      );\n    }\n  }\n\n  const clusterLevel = cluster_level ? cluster_level : defaultClusterLevel;\n  const digitLevel = digit_level\n    ? parseInt(digit_level, 10)\n    : defaultDigitLevel;\n  const colorBy = color_by ? color_by : defaultColorBy;\n\n  return (\n    <DefaultContentWrapper>\n      <ContentGrid>\n        <Switch>\n          <TrackedRoute\n            path={CityRoutes.CityGoodAtAbsolutePresence}\n            render={() => (\n              <>\n                <AbsolutePresence\n                  primaryCity={cityId}\n                  secondaryCity={benchmark}\n                  hiddenSectors={hiddenSectors}\n                  clusterLevel={clusterLevel}\n                  isClusterView={isClusterView}\n                  hiddenClusters={hiddenClusters}\n                  colorBy={colorBy}\n                />\n              </>\n            )}\n          />\n          <TrackedRoute\n            path={CityRoutes.CityGoodAt}\n            render={() => (\n              <>\n                <SideText\n                  isClusterView={Boolean(isClusterView)}\n                  prefix={\"relative-presence\"}\n                />\n                <RCABarChart\n                  isClusterView={Boolean(isClusterView)}\n                  highlighted={highlighted}\n                  setHighlighted={setHighlighted}\n                  hiddenSectors={hiddenSectors}\n                  hiddenClusters={hiddenClusters}\n                  clusterLevel={clusterLevel}\n                  digitLevel={digitLevel}\n                  colorBy={colorBy}\n                />\n              </>\n            )}\n          />\n        </Switch>\n        {legend}\n      </ContentGrid>\n      <UtilityBar />\n    </DefaultContentWrapper>\n  );\n};\n\nexport default CityGoodAt;\n","import React from \"react\";\nimport styled from \"styled-components/macro\";\nimport {\n  secondaryFont,\n  lightBaseColor,\n} from \"../../../styling/styleUtils\";\nimport { useStaticData } from \"../../../dataProvider\";\nimport useCurrentCityId from \"../../../hooks/useCurrentCityId\";\nimport { useHistory, matchPath } from \"react-router-dom\";\nimport { CityRoutes, cityIdParam } from \"../../../routing/routes\";\nimport { ValueOfCityRoutes, createRoute } from \"../../../routing/Utils\";\nimport queryString from \"query-string\";\nimport useQueryParams from \"../../../hooks/useQueryParams\";\n\nconst Root = styled.div`\n  display: flex;\n  gap: 0.5rem;\n  align-items: center;\n  height: 100%;\n\n  @media (max-width: 600px) {\n    flex-direction: column;\n    align-items: stretch;\n    gap: 0.3rem;\n  }\n`;\n\nconst StyledSelect = styled.select`\n  font-family: ${secondaryFont};\n  font-size: 0.7rem;\n  text-transform: uppercase;\n  background-color: #fff;\n  border: solid 1px ${lightBaseColor};\n  padding: 0.35rem 1.5rem 0.35rem 0.5rem;\n  cursor: pointer;\n  appearance: none;\n  background-image: url(\"data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23333' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e\");\n  background-repeat: no-repeat;\n  background-position: right 0.3rem center;\n  background-size: 0.8rem;\n  min-width: 0;\n\n  &:focus {\n    outline: none;\n    border-color: #333;\n  }\n\n  @media (max-width: 600px) {\n    width: 100%;\n  }\n`;\n\nconst CountrySelect = styled(StyledSelect)`\n  width: 130px;\n\n  @media (max-width: 600px) {\n    width: 100%;\n  }\n`;\n\nconst YearSelect = styled(StyledSelect)`\n  width: 80px;\n\n  @media (max-width: 600px) {\n    width: 100%;\n  }\n`;\n\nconst RegionSelect = styled(StyledSelect)`\n  width: clamp(200px, 30vw, 400px);\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n\n  @media (max-width: 600px) {\n    width: 100%;\n  }\n`;\n\nconst Label = styled.span`\n  font-family: ${secondaryFont};\n  font-size: 0.6rem;\n  text-transform: uppercase;\n  color: #666;\n  letter-spacing: 0.05em;\n\n  @media (max-width: 600px) {\n    display: none;\n  }\n`;\n\nconst CitySearch = () => {\n  const { data: blsData, loading } = useStaticData();\n  const cityId = useCurrentCityId();\n  const history = useHistory();\n  const params = useQueryParams();\n\n  if (loading || !blsData) {\n    return <Root />;\n  }\n\n  const years = blsData.metadata.years;\n  const currentYear = params.year || years[years.length - 1]?.toString() || \"2024\";\n\n  // Group regions by type\n  const nationals = blsData.regions\n    .filter((r) => r.regionType === \"National\")\n    .sort((a, b) => a.name.localeCompare(b.name));\n  const metros = blsData.regions\n    .filter((r) => r.regionType === \"Metro\")\n    .sort((a, b) => a.name.localeCompare(b.name));\n  const states = blsData.regions\n    .filter((r) => r.regionType === \"State\")\n    .sort((a, b) => a.name.localeCompare(b.name));\n\n  const onRegionChange = (e: React.ChangeEvent<HTMLSelectElement>) => {\n    const regionId = e.target.value;\n    Object.entries(CityRoutes).forEach(([_key, value]) => {\n      const match = matchPath<{ [cityIdParam]: string }>(\n        history.location.pathname,\n        value,\n      );\n      if (match && match.isExact && match.path) {\n        history.push(\n          createRoute.city(\n            match.path as ValueOfCityRoutes,\n            regionId,\n          ) + history.location.search,\n        );\n      }\n    });\n  };\n\n  const onYearChange = (e: React.ChangeEvent<HTMLSelectElement>) => {\n    const year = e.target.value;\n    const { year: _oldYear, ...otherParams } = params;\n    const query = queryString.stringify({ ...otherParams, year });\n    history.push(history.location.pathname + (query ? \"?\" + query : \"\"));\n  };\n\n  return (\n    <Root>\n      <Label>Country</Label>\n      <CountrySelect value=\"us\" onChange={() => {}}>\n        <option value=\"us\">United States</option>\n      </CountrySelect>\n\n      <Label>Year</Label>\n      <YearSelect value={currentYear} onChange={onYearChange}>\n        {years.map((y) => (\n          <option key={y} value={y.toString()}>\n            {y}\n          </option>\n        ))}\n      </YearSelect>\n\n      <Label>Region</Label>\n      <RegionSelect value={cityId || \"\"} onChange={onRegionChange}>\n        {nationals.length > 0 && (\n          <optgroup label=\"National\">\n            {nationals.map((r) => (\n              <option key={r.regionId} value={r.regionId}>\n                {r.name}\n              </option>\n            ))}\n          </optgroup>\n        )}\n        {metros.length > 0 && (\n          <optgroup label=\"Metropolitan Areas\">\n            {metros.map((r) => (\n              <option key={r.regionId} value={r.regionId}>\n                {r.name}\n              </option>\n            ))}\n          </optgroup>\n        )}\n        {states.length > 0 && (\n          <optgroup label=\"States\">\n            {states.map((r) => (\n              <option key={r.regionId} value={r.regionId}>\n                {r.name}\n              </option>\n            ))}\n          </optgroup>\n        )}\n      </RegionSelect>\n    </Root>\n  );\n};\n\nexport default CitySearch;\n","import React from \"react\";\nimport { SecondaryHeaderContainer } from \"../../../styling/GlobalGrid\";\nimport styled from \"styled-components/macro\";\nimport {\n  backgroundMedium,\n  defaultPadding,\n} from \"../../../styling/styleUtils\";\nimport { UtilityBarPortal } from \"./UtilityBar\";\nimport { columnsToRowsBreakpoint } from \"../Utils\";\nimport CitySearch from \"./CitySearch\";\nimport { Route, Switch } from \"react-router-dom\";\nimport { CityRoutes } from \"../../../routing/routes\";\n\nconst Root = styled(SecondaryHeaderContainer)`\n  background-color: ${backgroundMedium};\n  padding: 0.4rem ${defaultPadding}rem;\n  box-sizing: border-box;\n  display: grid;\n  grid-template-columns: 1fr auto;\n  grid-gap: 0.7rem;\n  pointer-events: auto;\n  min-height: 40px;\n\n  @media (max-width: 1100px) {\n    padding: 0.55rem;\n  }\n\n  @media (max-width: ${columnsToRowsBreakpoint}px) {\n    grid-template-columns: auto;\n    grid-rows-columns: auto auto;\n    padding-bottom: 0.45rem;\n    min-height: 83px;\n  }\n`;\n\nconst SecondaryHeader = () => {\n  return (\n    <Root>\n      <Switch>\n        <Route path={CityRoutes.CityBase} component={CitySearch} />\n      </Switch>\n      <UtilityBarPortal />\n    </Root>\n  );\n};\n\nexport default SecondaryHeader;\n","import React from \"react\";\nimport styled from \"styled-components/macro\";\nimport { breakPoints } from \"../../../styling/GlobalGrid\";\nimport { Link, useHistory, matchPath } from \"react-router-dom\";\nimport { Props as BaseProps } from \"./\";\nimport {\n  baseColor,\n  primaryColorLight,\n  secondaryFont,\n} from \"../../../styling/styleUtils\";\nimport raw from \"raw.macro\";\n\nconst Root = styled.div`\n  padding-top: 0.75rem;\n  display: none;\n  align-items: center;\n  justify-content: center;\n  grid-template-columns: auto 1fr auto;\n\n  @media ${breakPoints.small} {\n    display: grid;\n  }\n`;\n\nconst MobileButtonContainer = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n`;\n\nconst MobileButton = styled.button`\n  background-color: ${primaryColorLight};\n  border: none;\n  padding: 0.75rem 1.25rem;\n  font-family: ${secondaryFont};\n  text-transform: uppercase;\n  font-size: 0.85rem;\n  color: ${baseColor};\n  max-width: 300px;\n  display: flex;\n  align-items: center;\n  pointer-events: all;\n`;\n\nconst ChevronSVG = raw(\"../../../assets/icons/chevron.svg\");\n\nconst arrowStyles = `\n  margin: 1rem 0.5rem;\n  color: ${baseColor};\n  text-decoration: none;\n  pointer-events: all;\n`;\n\nconst ArrowBase = styled(Link)`\n  ${arrowStyles}\n`;\n\nconst DisabledArrow = styled.div`\n  ${arrowStyles}\n  opacity: 0.25;\n`;\n\nconst SvgBase = styled.div`\n  width: 2.75rem;\n  height: 1.85rem;\n  padding: 0.35rem 0.5rem;\n  box-sizing: border-box;\n\n  svg {\n    width: 100%;\n    height: 100%;\n\n    polyline {\n      stroke: ${baseColor};\n    }\n  }\n`;\n\nconst NextSvg = styled(SvgBase)`\n  svg {\n    transform: rotate(-90deg);\n  }\n`;\nconst PrevSvg = styled(SvgBase)`\n  svg {\n    transform: rotate(90deg);\n  }\n`;\n\nconst DownArrow = styled.span`\n  width: 0.9rem;\n  height: 0.9rem;\n  margin: 0 0.7rem;\n  flex-shrink: 0;\n  display: inline-block;\n  box-sizing: border-box;\n\n  svg {\n    width: 100%;\n    height: 100%;\n\n    polyline {\n      fill: ${baseColor};\n    }\n  }\n`;\n\nconst UpArrow = styled(DownArrow)`\n  svg {\n    transform: rotate(180deg);\n  }\n`;\n\ninterface Props extends BaseProps {\n  mobileMenuOpen: boolean;\n  toggleMenu: () => void;\n  closeMenu: () => void;\n}\n\nconst MobileMenu = ({\n  baseLinkData,\n  toggleMenu,\n  mobileMenuOpen,\n  closeMenu,\n}: Props) => {\n  const history = useHistory();\n\n  if (baseLinkData.length === 0) {\n    console.warn(\"MobileMenu component are recieving baseLinkData of length 0\");\n    return null;\n  }\n\n  const linkIndex = baseLinkData.findIndex((d) => {\n    const match = matchPath(history.location.pathname, d.url);\n    return match ? true : false;\n  });\n\n  if (linkIndex === -1) {\n    console.warn(\n      \"URL did not match any links provided to MobileMenu component\",\n    );\n    return null;\n  } else {\n    const pageTitle = baseLinkData[linkIndex].label;\n    const prevLink =\n      linkIndex > 0 ? (\n        <ArrowBase\n          to={baseLinkData[linkIndex - 1].url + history.location.search}\n          onClick={() => closeMenu()}\n        >\n          <PrevSvg dangerouslySetInnerHTML={{ __html: ChevronSVG }} />\n        </ArrowBase>\n      ) : (\n        <DisabledArrow>\n          <PrevSvg dangerouslySetInnerHTML={{ __html: ChevronSVG }} />\n        </DisabledArrow>\n      );\n    const nextLink =\n      linkIndex < baseLinkData.length - 1 ? (\n        <ArrowBase\n          to={baseLinkData[linkIndex + 1].url + history.location.search}\n          onClick={() => closeMenu()}\n        >\n          <NextSvg dangerouslySetInnerHTML={{ __html: ChevronSVG }} />\n        </ArrowBase>\n      ) : (\n        <DisabledArrow>\n          <NextSvg dangerouslySetInnerHTML={{ __html: ChevronSVG }} />\n        </DisabledArrow>\n      );\n\n    const toggleArrow = mobileMenuOpen ? (\n      <UpArrow dangerouslySetInnerHTML={{ __html: ChevronSVG }} />\n    ) : (\n      <DownArrow dangerouslySetInnerHTML={{ __html: ChevronSVG }} />\n    );\n\n    return (\n      <Root>\n        {prevLink}\n        <MobileButtonContainer>\n          <MobileButton onClick={toggleMenu}>\n            {pageTitle}\n            {toggleArrow}\n          </MobileButton>\n        </MobileButtonContainer>\n        {nextLink}\n      </Root>\n    );\n  }\n};\n\nexport default MobileMenu;\n","import React, { useRef, useEffect, useState, useContext } from \"react\";\nimport {\n  NavigationContainer,\n  breakPoints,\n  breakPointValues,\n} from \"../../../styling/GlobalGrid\";\nimport {\n  secondaryFont,\n  baseColor,\n  primaryColor,\n  primaryColorLight,\n  lightBorderColor,\n  backgroundDark,\n} from \"../../../styling/styleUtils\";\nimport styled from \"styled-components/macro\";\nimport { Link, useHistory, matchPath } from \"react-router-dom\";\nimport AppContext from \"../../../contextProviders/appContext\";\nimport MobileMenu from \"./MobileMenu\";\nimport { GlobalQueryParams } from \"../../../routing/routes\";\nimport useQueryParams from \"../../../hooks/useQueryParams\";\nimport queryString from \"query-string\";\n\nconst collapsibleMenuClassName = \"collapsible-side-menu-root\";\n\nconst Container = styled(NavigationContainer)`\n  pointer-events: all;\n\n  &:hover {\n    .${collapsibleMenuClassName} {\n      outline: dashed 1px ${lightBorderColor};\n    }\n  }\n\n  @media ${breakPoints.small} {\n    &:hover {\n      .${collapsibleMenuClassName} {\n        outline: none;\n      }\n    }\n  }\n`;\n\nconst rootWidth = {\n  default: 240, // in px\n  medium: 205, // in px\n};\n\nconst Root = styled.div`\n  width: ${rootWidth.default}px;\n  position: relative;\n  padding-top: 1rem;\n  margin: auto;\n  box-sizing: border-box;\n\n  svg {\n    height: 380px;\n    position: relative;\n    pointer-events: none;\n    left: -2px;\n\n    path {\n      fill: none;\n      stroke: #1f262b;\n      stroke-miterlimit: 10;\n      stroke-width: 2px;\n\n      @media not all and (min-resolution: 0.001dpcm) {\n        @media {\n          fill: #fff;\n        }\n      }\n    }\n\n    circle {\n      fill: #151f26;\n    }\n  }\n\n  @media ${breakPoints.medium} {\n    width: ${rootWidth.medium}px;\n\n    svg {\n      height: 280px;\n    }\n  }\n\n  @media ${breakPoints.small} {\n    display: none;\n    height: auto;\n    max-height: initial;\n    width: 100%;\n    max-width: 300px;\n    position: absolute;\n    z-index: 150;\n    background-color: #fff;\n    border: solid 1px ${lightBorderColor};\n    margin: 0 auto;\n    right: 0;\n    left: 0;\n\n    svg {\n      display: none;\n    }\n  }\n`;\n\nconst clipPathIdDesktop = \"side-navigation-circle-menu-clip-path-desktop\";\nconst clipPathIdTablet = \"side-navigation-circle-menu-clip-path-tablet\";\n\nconst LinkContainer = styled.div`\n  clip-path: url(#${clipPathIdDesktop});\n\n  @media ${breakPoints.medium} {\n    webkit-clip-path: none;\n    clip-path: url(#${clipPathIdTablet});\n  }\n\n  @media ${breakPoints.small} {\n    clip-path: none;\n  }\n\n  @media not all and (min-resolution: 0.001dpcm) {\n    @media {\n      clip-path: none;\n    }\n  }\n`;\n\nconst acitveLinkClass = \"main-circle-side-nav-active-nav-link-page\";\n\nconst NavLink = styled(Link)`\n  position: absolute;\n  font-family: ${secondaryFont};\n  text-transform: uppercase;\n  font-size: 0.7rem;\n  letter-spacing: -0.3px;\n  font-weight: 600;\n  text-decoration: none;\n  white-space: pre-line;\n  padding-left: 1.25rem;\n  transform: translate(0, -40%);\n  color: ${baseColor};\n  transition: all 0.2s ease;\n  box-sizing: border-box;\n  pointer-events: auto;\n\n  &:after {\n    content: \"\";\n    z-index: -1;\n    position: absolute;\n    left: 0;\n    top: 0;\n    width: 100%;\n    height: 150%;\n  }\n\n  &:before {\n    content: \"\";\n    z-index: -1;\n    position: absolute;\n    width: 200%;\n    height: 120%;\n    background-color: ${primaryColorLight};\n    top: -10%;\n    left: -250%;\n    transition: all 0.2s ease;\n  }\n\n  &:hover:before,\n  &.${acitveLinkClass}:before {\n    left: -95%;\n  }\n\n  @media ${breakPoints.medium} {\n    font-size: 0.6rem;\n  }\n\n  @media ${breakPoints.small} {\n    position: static;\n    display: block;\n    transform: translate(0);\n    font-size: 0.85rem;\n    margin: 0.5rem 0.5rem;\n    padding: 0.5rem 0.5rem 0.85rem;\n    border-bottom: solid 1px ${lightBorderColor};\n    white-space: normal;\n\n    &:before,\n    &:after {\n      display: none;\n    }\n\n    &:last-of-type {\n      border-bottom: none;\n    }\n  }\n`;\n\nconst BetaIcon = styled.div`\n  position: absolute;\n  font-family: ${secondaryFont};\n  text-transform: uppercase;\n  letter-spacing: -0.3px;\n  font-style: italic;\n  font-weight: 600;\n  color: #fff;\n  background-color: ${primaryColor};\n  font-size: 8px;\n  padding: 1px 3px 1px 2px;\n  top: 0;\n  transform: translate(0, calc(-100% - 0.1rem));\n  text-align: center;\n  font-size: 0.6rem;\n\n  @media ${breakPoints.small} {\n    top: -0.3rem;\n    right: 0;\n  }\n`;\n\nconst CollapseButton = styled.button`\n  position: absolute;\n  top: 0;\n  right: 0;\n  transform: translate(0, -100%);\n  font-family: ${secondaryFont};\n  text-transform: uppercase;\n  background-color: transparent;\n  border: none;\n  font-size: 0.6rem;\n\n  &:hover {\n    background-color: ${baseColor};\n    color: #fff;\n  }\n\n  @media ${breakPoints.small} {\n    display: none;\n  }\n`;\n\nconst CollapsedMenu = styled.div`\n  position: relative;\n  padding-top: 1rem;\n  margin: auto;\n  box-sizing: border-box;\n  height: 380px;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  width: 2rem;\n\n  &:hover {\n    z-index: 1000;\n  }\n\n  @media ${breakPoints.medium} {\n    height: 280px;\n  }\n\n  @media ${breakPoints.small} {\n    display: none;\n  }\n`;\n\nconst CollapsedLink = styled(Link)`\n  white-space: nowrap;\n  min-width: 1rem;\n  width: 1rem;\n  height: 1rem;\n  border-radius: 1000px;\n  border: solid 2px ${baseColor};\n  font-size: 0;\n  color: rgba(0, 0, 0, 0);\n  margin-left: 0.3rem;\n  transition: all 0.2s ease;\n  letter-spacing: -0.3px;\n  font-weight: 600;\n  text-decoration: none;\n  display: flex;\n\n  &:hover {\n    font-family: ${secondaryFont};\n    text-transform: uppercase;\n    font-size: 0.7rem;\n    padding: 0 1.25rem;\n    color: #fff;\n    background-color: ${baseColor};\n    width: min-content;\n  }\n\n  &.${acitveLinkClass}:before {\n    content: \"\";\n    display: block;\n    width: 0.75rem;\n    height: 0.75rem;\n    background-color: ${baseColor};\n    margin: auto;\n    border-radius: 1000px;\n  }\n`;\n\nconst ExpandButton = styled.div`\n  width: 1.15rem;\n  writing-mode: vertical-rl;\n  text-orientation: mixed;\n  background-color: ${baseColor};\n  color: #fff;\n  transform: rotate(180deg);\n  padding: 0.4rem 0.2rem;\n  text-transform: uppercase;\n  font-size: 0.75rem;\n  font-family: ${secondaryFont};\n  cursor: pointer;\n  letter-spacing: 1px;\n`;\n\nconst ExtendArrow = styled.span`\n  display: inline-block;\n  transform: rotate(90deg);\n  position: relative;\n  left: -0.1rem;\n  padding: 3px 0;\n  cursor: pointer;\n`;\n\nconst Tooltip = styled.div`\n  position: fixed;\n  transform: translate(120px, -50%);\n  background-color: ${backgroundDark};\n  color: #fff;\n  padding: 0.5rem 0.75rem;\n  font-size: 0.8rem;\n  z-index: 100;\n  pointer-events: all;\n  max-width: 170px;\n\n  &:before {\n    content: \"\";\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    left: -0.4rem;\n    margin: auto;\n    width: 0;\n    height: 0;\n    border-top: 0.4rem solid transparent;\n    border-bottom: 0.4rem solid transparent;\n\n    border-right: 0.4rem solid ${backgroundDark};\n  }\n`;\n\ninterface LinkDatum {\n  label: string;\n  url: string;\n  top: number;\n  absoluteTop: number;\n  left: number;\n  beta?: boolean;\n  tooltipText?: React.ReactNode;\n  removeParams?: (keyof GlobalQueryParams)[];\n}\n\nconst radius = 4.37;\n\nexport interface Props {\n  baseLinkData: {\n    label: string;\n    url: string;\n    beta?: boolean;\n    tooltipText?: React.ReactNode;\n    removeParams?: (keyof GlobalQueryParams)[];\n  }[];\n}\n\ninterface SideNavProps extends Props {\n  setCollapsed: (value: boolean) => void;\n  collapsed: boolean;\n}\n\nconst SideNavigation = ({\n  baseLinkData,\n  collapsed,\n  setCollapsed,\n}: SideNavProps) => {\n  const history = useHistory();\n  const params = useQueryParams();\n  const { windowDimensions } = useContext(AppContext);\n\n  const [linkData, setLinkData] = useState<LinkDatum[]>([]);\n  const [mobileMenuOpen, setMobileMenuOpen] = useState<boolean>(false);\n  const [containerHovered, setContainerHovered] = useState<boolean>(false);\n\n  const rootRef = useRef<HTMLDivElement | null>(null);\n\n  const circle_0 = useRef<SVGCircleElement | null>(null);\n  const circle_1 = useRef<SVGCircleElement | null>(null);\n  const circle_2 = useRef<SVGCircleElement | null>(null);\n  const circle_3 = useRef<SVGCircleElement | null>(null);\n  const circle_4 = useRef<SVGCircleElement | null>(null);\n\n  useEffect(() => {\n    if (collapsed) {\n      setLinkData(\n        baseLinkData.map((l) => ({ ...l, top: 0, left: 0, absoluteTop: 0 })),\n      );\n    } else {\n      const refArray = [circle_0, circle_1, circle_2, circle_3, circle_4];\n      const pageScrollTop =\n        document.documentElement.scrollTop || document.body.scrollTop;\n      const containerPosition =\n        rootRef && rootRef.current ? rootRef.current.offsetTop : 0;\n      const offset = pageScrollTop - containerPosition;\n      const newLinkDatum: LinkDatum[] = [];\n      refArray.forEach((ref, i) => {\n        if (i >= baseLinkData.length) return;\n        const node = ref.current;\n        if (node) {\n          const { top, left } = node.getBoundingClientRect();\n          newLinkDatum.push({\n            ...baseLinkData[i],\n            top: top + offset,\n            left,\n            absoluteTop: top,\n          });\n        }\n      });\n      setLinkData([...newLinkDatum]);\n    }\n  }, [\n    rootRef,\n    circle_0,\n    circle_1,\n    circle_2,\n    circle_3,\n    circle_4,\n    baseLinkData,\n    windowDimensions,\n    collapsed,\n    mobileMenuOpen,\n  ]);\n\n  const tooltips: React.ReactElement[] = [];\n\n  const links = linkData.map((d, i) => {\n    const match = matchPath(history.location.pathname, baseLinkData[i].url);\n    const className = match ? acitveLinkClass : undefined;\n    const beta = d.beta ? <BetaIcon>Beta</BetaIcon> : null;\n    let url = d.url;\n    if (d.removeParams) {\n      const newParams: any = {};\n      for (const key in params) {\n        if (!d.removeParams.includes(key as any)) {\n          newParams[key] = params[key as keyof GlobalQueryParams];\n        }\n      }\n      const query = queryString.stringify(newParams);\n      url = query ? url + \"?\" + query : url;\n    } else {\n      url = url + history.location.search;\n    }\n    if (d.tooltipText && !mobileMenuOpen && !collapsed) {\n      tooltips.push(\n        <Tooltip style={{ top: d.absoluteTop, left: d.left }}>\n          {d.tooltipText}\n        </Tooltip>,\n      );\n    }\n    const LinkRoot = mobileMenuOpen || !collapsed ? NavLink : CollapsedLink;\n    return (\n      <LinkRoot\n        to={url}\n        key={d.label + d.url}\n        style={{ top: d.top, left: d.left }}\n        className={className}\n        onClick={() => (mobileMenu ? setMobileMenuOpen(false) : null)}\n      >\n        {d.label}\n        {beta}\n      </LinkRoot>\n    );\n  });\n\n  const mobileMenu =\n    windowDimensions.width <= breakPointValues.width.small ||\n    windowDimensions.height <= breakPointValues.height.small ? (\n      <MobileMenu\n        baseLinkData={baseLinkData}\n        mobileMenuOpen={mobileMenuOpen}\n        toggleMenu={() => setMobileMenuOpen((current) => !current)}\n        closeMenu={() => setMobileMenuOpen(false)}\n      />\n    ) : null;\n\n  const collapseButton = containerHovered ? (\n    <CollapseButton onClick={() => setCollapsed(true)}>\n      {\"<\"} Collapse\n    </CollapseButton>\n  ) : null;\n\n  const menu =\n    mobileMenuOpen || !collapsed ? (\n      <Root\n        ref={rootRef}\n        style={{\n          display: mobileMenuOpen ? \"block\" : undefined,\n        }}\n        className={collapsibleMenuClassName}\n      >\n        {collapseButton}\n        <LinkContainer>{links}</LinkContainer>\n        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 70 377.85\">\n          <clipPath id={clipPathIdDesktop}>\n            <path d=\"M0,0v0.8C41.6,35.5,68.3,112,64.4,199.4C61,274.8,35.6,340.1,0,376.4l0,4.4h366.4V0H0z\" />\n          </clipPath>\n          <clipPath id={clipPathIdTablet}>\n            <path d=\"M0,0v0.6c30.7,25.5,50.4,81.9,47.5,146.3C44.9,202.5,26.2,250.6,0,277.3l0,3.2h270V0H0z\" />\n          </clipPath>\n          <path\n            d=\"M569.33,197.85c42.17,34.26,69.37,111.25,65.4,199.38-3.4,75.47-28.83,140.75-64.37,177\"\n            transform=\"translate(-568.7 -197.07)\"\n          />\n          <circle ref={circle_0} cx=\"20.1\" cy=\"20.4\" r={radius} />\n          <circle ref={circle_1} cx=\"53.4\" cy=\"90.1\" r={radius} />\n          <circle ref={circle_2} cx=\"65.7\" cy=\"184.6\" r={radius} />\n          {baseLinkData.length > 3 && <circle ref={circle_3} cx=\"55.8\" cy=\"269.3\" r={radius} />}\n          {baseLinkData.length > 4 && <circle ref={circle_4} cx=\"25.3\" cy=\"347\" r={radius} />}\n        </svg>\n      </Root>\n    ) : (\n      <CollapsedMenu>\n        <ExpandButton onClick={() => setCollapsed(false)}>\n          Extend\n          <ExtendArrow>{\">\"}</ExtendArrow>\n        </ExpandButton>\n        {links}\n      </CollapsedMenu>\n    );\n\n  return (\n    <>\n      <Container\n        onMouseEnter={() => setContainerHovered(true)}\n        onMouseLeave={() => setContainerHovered(false)}\n      >\n        {mobileMenu}\n        {menu}\n      </Container>\n      {tooltips}\n    </>\n  );\n};\n\nexport default SideNavigation;\n","import React, { useState } from \"react\";\nimport Header from \"../navigation/header\";\nimport SecondaryHeader from \"../navigation/secondaryHeader\";\nimport SideNavigation, { Props as NavProps } from \"../navigation/sideNav\";\nimport { Root as RootBase, ContentContainer } from \"../../styling/GlobalGrid\";\nimport styled from \"styled-components/macro\";\n\nconst Root = styled(RootBase)`\n  pointer-events: none;\n`;\n\ntype Props = NavProps & {\n  children: React.ReactNode;\n};\n\nconst InnerPage = (props: Props) => {\n  const { children, baseLinkData } = props;\n  const [collapsed, setCollapsed] = useState<boolean>(false);\n  return (\n    <Root>\n      <Header />\n      <SecondaryHeader />\n      <SideNavigation\n        baseLinkData={baseLinkData}\n        collapsed={collapsed}\n        setCollapsed={setCollapsed}\n      />\n      <ContentContainer key={\"container-collapsed-\" + collapsed}>\n        {children}\n      </ContentContainer>\n    </Root>\n  );\n};\n\nexport default InnerPage;\n","import React from \"react\";\nimport { primaryFont } from \"../../../styling/styleUtils\";\nimport styled, { css } from \"styled-components/macro\";\nimport CityverseLogoSVG from \"../../../assets/icons/cities-logo-dark.svg\";\nimport GitHubIconSVG from \"./assets/github.svg\";\nimport { Routes } from \"../../../routing/routes\";\nimport { Link } from \"react-router-dom\";\n\nconst Root = styled.div`\n  grid-column: 1 / -1;\n  grid-row: -1;\n  color: #333;\n`;\n\nconst Container = styled.div`\n  padding: 2rem 2rem 2rem;\n  background-color: #e6e6e6;\n`;\n\nconst smallMediaWidth = 900; // in px\n\nconst Content = styled.div`\n  display: grid;\n  grid-column-gap: 3rem;\n  grid-template-columns: 2fr auto auto 2fr;\n  max-width: 1200px;\n  margin: 0 auto;\n\n  @media (max-width: 1000px) {\n    grid-column-gap: 1.5rem;\n  }\n  @media (max-width: ${smallMediaWidth}px) {\n    grid-template-columns: 1fr 1fr;\n    grid-template-rows: auto auto auto;\n  }\n`;\n\nconst ColumnOrRow = styled.div`\n  display: flex;\n  flex-direction: column;\n  margin-bottom: 1rem;\n`;\n\nconst CityverseLogo = styled.img`\n  width: 250px;\n  max-width: 100%;\n  height: 100%;\n`;\n\nconst Subtitle = styled.h4`\n  margin: 0.25rem 0 0;\n  font-weight: 400;\n  text-transform: none;\n  font-size: 0.865rem;\n  text-decoration: none;\n  color: #333;\n`;\n\nconst CityverseVersion = styled.p`\n  margin: 0.5rem 0 0;\n  font-style: italic;\n  text-align: center;\n  width: 100%;\n`;\n\nconst CenteredColumn = styled(ColumnOrRow)`\n  justify-content: flex-start;\n  margin-bottom: 0;\n`;\n\nconst InternalLinksColumn = styled(ColumnOrRow)`\n  display: flex;\n  flex-direction: column;\n\n  @media (max-width: ${smallMediaWidth}px) {\n    grid-column: 1;\n    grid-row: 2;\n    padding: 2rem 0 0;\n    display: flex;\n    align-items: center;\n    text-align: center;\n  }\n`;\n\nconst ExternalLinksColumn = styled(ColumnOrRow)`\n  display: flex;\n  flex-direction: column;\n\n  @media (max-width: ${smallMediaWidth}px) {\n    grid-column: 2;\n    grid-row: 2;\n    padding: 2rem 0 0;\n    display: flex;\n    align-items: center;\n    text-align: center;\n  }\n`;\n\nconst CityverseLogoColumn = styled(CenteredColumn)`\n  display: flex;\n  align-items: center;\n  text-align: center;\n\n  @media (max-width: ${smallMediaWidth}px) {\n    grid-column: 1 / -1;\n    grid-row: 1;\n  }\n`;\n\nconst AttributionColumn = styled(CenteredColumn)`\n  display: flex;\n  align-items: flex-start;\n  justify-content: flex-start;\n\n  @media (max-width: ${smallMediaWidth}px) {\n    grid-column: 1 / -1;\n    grid-row: 3;\n    align-items: center;\n    text-align: center;\n  }\n`;\n\nconst AttributionInfo = styled.small`\n  margin-top: 0;\n  width: 100%;\n  max-width: 300px;\n  font-family: ${primaryFont};\n  font-size: 0.75rem;\n  line-height: 1.6;\n\n  a {\n    color: #333;\n  }\n`;\n\nconst GitHubLink = styled.a`\n  display: inline-flex;\n  align-items: center;\n  gap: 0.4rem;\n  margin-top: 0.75rem;\n  color: #333;\n  text-decoration: none;\n  font-size: 0.85rem;\n\n  &:hover {\n    text-decoration: underline;\n  }\n`;\n\nconst GitHubIcon = styled.img`\n  width: 1.25rem;\n  height: 1.25rem;\n`;\n\nconst linkStyles = css`\n  color: #333;\n  text-decoration: none;\n  text-transform: uppercase;\n  margin-bottom: 0.5rem;\n\n  &:hover {\n    text-decoration: underline;\n  }\n\n  @media (max-width: 1000px) {\n    font-size: 0.75rem;\n  }\n`;\n\nconst StyledInternalLink = styled(Link)`\n  ${linkStyles}\n`;\nconst StyledExternalLink = styled.a`\n  ${linkStyles}\n`;\n\nconst LicenseAndReadme = styled.div`\n  padding: 0.5rem;\n  text-align: center;\n  background-color: #333;\n  color: #fff;\n  font-size: 0.875rem;\n  margin-bottom: 0;\n\n  a {\n    color: #fff;\n    text-decoration: none;\n    border-bottom: solid 1px transparent;\n\n    &:hover {\n      border-bottom-color: #fff;\n    }\n  }\n`;\n\nconst StandardFooter = () => {\n  return (\n    <Root>\n      <Container>\n        <Content>\n          <CityverseLogoColumn>\n            <Link to={Routes.Landing}>\n              <CityverseLogo\n                src={CityverseLogoSVG}\n                alt={\"Metroverse-Jobs\"}\n              />\n            </Link>\n            <Subtitle>BLS Occupation Data Explorer</Subtitle>\n            <CityverseVersion>\n              Version {process.env.REACT_APP_METROVERSE_VERSION}\n            </CityverseVersion>\n          </CityverseLogoColumn>\n          <InternalLinksColumn>\n            <StyledInternalLink to={Routes.Landing}>\n              Region Profiles\n            </StyledInternalLink>\n            <StyledInternalLink to={Routes.AboutBase}>About</StyledInternalLink>\n            <StyledInternalLink to={Routes.ContactBase}>\n              Contact\n            </StyledInternalLink>\n            <StyledInternalLink to={Routes.FaqBase}>FAQ</StyledInternalLink>\n          </InternalLinksColumn>\n          <ExternalLinksColumn>\n            <StyledExternalLink\n              href=\"https://metroverse.cid.harvard.edu/\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n            >\n              Original Metroverse\n            </StyledExternalLink>\n            <StyledExternalLink\n              href=\"https://github.com/shahzorkhan123/metroverse-jobs\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n            >\n              GitHub Repo\n            </StyledExternalLink>\n            <StyledExternalLink\n              href=\"https://www.bls.gov/oes/\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n            >\n              BLS OES Data\n            </StyledExternalLink>\n          </ExternalLinksColumn>\n          <AttributionColumn>\n            <AttributionInfo>\n              Built on the open-source{\" \"}\n              <a\n                href=\"https://metroverse.cid.harvard.edu/\"\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n              >\n                Metroverse\n              </a>{\" \"}\n              by the{\" \"}\n              <a\n                href=\"https://growthlab.cid.harvard.edu/\"\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n              >\n                Growth Lab\n              </a>{\" \"}\n              at Harvard University.\n            </AttributionInfo>\n            <GitHubLink\n              href=\"https://github.com/shahzorkhan123/metroverse-jobs\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n            >\n              <GitHubIcon\n                src={GitHubIconSVG}\n                alt=\"GitHub\"\n              />\n              View on GitHub\n            </GitHubLink>\n          </AttributionColumn>\n        </Content>\n      </Container>\n      <LicenseAndReadme>\n        <div>\n          Licensed under{\" \"}\n          <a\n            href=\"https://creativecommons.org/licenses/by-nc-sa/4.0/\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n            Attribution-NonCommercial-ShareAlike 4.0 International (CC BY-NC-SA\n            4.0)\n          </a>\n          .\n        </div>\n        <div style={{ marginTop: \"0.4rem\" }}>\n          Built on{\" \"}\n          <a\n            href=\"https://github.com/cid-harvard/cities-atlas-front-end\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n            Metroverse\n          </a>\n          {\" by \"}\n          <a\n            href=\"https://growthlab.cid.harvard.edu/\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n            Harvard Growth Lab\n          </a>\n          {\" | \"}\n          Data from{\" \"}\n          <a\n            href=\"https://www.bls.gov/oes/\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n            BLS OES\n          </a>\n        </div>\n      </LicenseAndReadme>\n    </Root>\n  );\n};\n\nexport default StandardFooter;\n","import React from \"react\";\nimport Header from \"../../navigation/header\";\nimport {\n  InformationalPageRoot as RootBase,\n  ContentContainer,\n  breakPoints,\n} from \"../../../styling/GlobalGrid\";\nimport {\n  primaryColorDark,\n  primaryHoverColor,\n  lightBaseColor,\n  baseColor,\n} from \"../../../styling/styleUtils\";\nimport styled from \"styled-components/macro\";\nimport Footer from \"./Footer\";\n\nexport const rootId = \"infromational-page-root-scroll-id\";\n\nconst Root = styled(RootBase)`\n  overflow: auto;\n`;\n\nconst ContentStandard = styled(ContentContainer)`\n  display: grid;\n  padding: 1rem;\n  grid-template-columns: auto 15rem;\n  grid-column-gap: 5rem;\n  max-width: 950px;\n  width: 100%;\n  box-sizing: border-box;\n  margin: 0 auto;\n  position: relative;\n\n  h3 {\n    color: ${baseColor};\n  }\n\n  h4 {\n    color: ${lightBaseColor};\n    font-weight: 600;\n    margin-bottom: 0.5rem;\n  }\n\n  p a,\n  h4 a {\n    color: ${primaryColorDark};\n\n    &:hover {\n      color: ${primaryHoverColor};\n    }\n  }\n\n  li {\n    margin-bottom: 0.5rem;\n  }\n\n  cite {\n    display: block;\n    margin: 2rem 0 2rem;\n    font-style: normal;\n    padding-left: 0.875rem;\n    border-left: solid 1px #dfdfdf;\n    color: ${lightBaseColor};\n  }\n\n  @media (max-width: 760px) {\n    grid-template-columns: auto 8rem;\n    grid-column-gap: 1rem;\n  }\n\n  @media (max-width: 400px) {\n    grid-template-columns: auto 4rem;\n    grid-column-gap: 0.75rem;\n  }\n\n  @media ${breakPoints.small} {\n    height: initial;\n  }\n`;\n\nconst ContentFull = styled(ContentContainer)`\n  padding: 1rem;\n  width: 100%;\n  position: relative;\n  box-sizing: border-box;\n`;\n\ninterface Props {\n  children: React.ReactNode;\n  contentFull?: boolean;\n}\n\nconst InformationalPage = (props: Props) => {\n  const { children, contentFull } = props;\n  const Content = contentFull ? ContentFull : ContentStandard;\n  return (\n    <Root id={rootId}>\n      <Header />\n      <Content>{children}</Content>\n      <Footer />\n    </Root>\n  );\n};\n\nexport default InformationalPage;\n","import React, { useEffect, useState } from \"react\";\nimport styled from \"styled-components/macro\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport {\n  primaryColor,\n  backgroundMedium,\n  backgroundDark,\n} from \"../../../styling/styleUtils\";\nimport debounce from \"lodash/debounce\";\nimport { rootId } from \"./\";\n\nconst StickyContainer = styled.div`\n  position: sticky;\n  top: 1rem;\n  display: flex;\n  flex-direction: column;\n`;\n\nconst LinkBase = styled(Link)`\n  padding: 0.75rem 0.65rem;\n  border-left: solid 4px rgba(0, 0, 0, 0);\n  text-transform: uppercase;\n  color: ${backgroundDark};\n  text-decoration: none;\n  margin-bottom: 0.65rem;\n  font-size: 1.1rem;\n\n  &:hover,\n  &.active {\n    background-color: ${backgroundMedium};\n    border-left-color: ${primaryColor};\n  }\n\n  @media (max-width: 760px) {\n    font-size: 0.9rem;\n    padding: 0.5rem 0.35rem;\n  }\n\n  @media (max-width: 400px) {\n    font-size: 0.75rem;\n    padding: 0.35rem 0.15rem;\n  }\n`;\n\nexport interface Section {\n  label: string;\n  route: string;\n  active: boolean;\n  Component: (props: any) => JSX.Element;\n  ref: React.MutableRefObject<HTMLDivElement | null>;\n}\n\ninterface Props {\n  sections: Section[];\n}\n\nconst Content = (props: Props) => {\n  const { sections } = props;\n  const { replace } = useHistory();\n  const [firstRender, setFirstRender] = useState<boolean>(true);\n\n  useEffect(() => {\n    const node = document.querySelector(\"#\" + rootId);\n    const onScroll = debounce(() => {\n      if (node) {\n        const currentSection = [...sections].reverse().find(({ ref }) => {\n          const section = ref.current;\n          if (section && section.offsetTop < node.scrollTop + 200) {\n            return true;\n          } else {\n            return false;\n          }\n        });\n        if (currentSection) {\n          replace(currentSection.route);\n        }\n      }\n    }, 50);\n    if (node) {\n      node.addEventListener(\"scroll\", onScroll);\n    }\n    return () => {\n      if (node) {\n        node.removeEventListener(\"scroll\", onScroll);\n      }\n    };\n  }, [sections, replace]);\n\n  useEffect(() => {\n    if (firstRender) {\n      const currentSection = sections.findIndex(({ active }) => active);\n      if (currentSection !== -1 && sections[currentSection]) {\n        const node = sections[currentSection].ref.current;\n        const root = document.querySelector(\"#\" + rootId);\n        if (currentSection === 0 && root) {\n          root.scrollTo({ top: 0, behavior: \"smooth\" });\n        } else if (node) {\n          node.scrollIntoView({ behavior: \"smooth\" });\n        }\n      }\n      setFirstRender(false);\n    }\n  }, [sections, firstRender]);\n\n  const navLinks: React.ReactElement<any>[] = [];\n  const contentSections: React.ReactElement<any>[] = [];\n  sections.forEach(({ route, label, active, ref, Component }) => {\n    navLinks.push(\n      <LinkBase\n        to={route}\n        key={\"side-nav-to-\" + route}\n        className={active ? \"active\" : undefined}\n        onClick={() => setFirstRender(true)}\n      >\n        {label}\n      </LinkBase>,\n    );\n    contentSections.push(\n      <div key={\"component-for-\" + route} ref={ref}>\n        <Component />\n      </div>,\n    );\n  });\n  return (\n    <>\n      <div>{contentSections}</div>\n      <div>\n        <StickyContainer>{navLinks}</StickyContainer>\n      </div>\n    </>\n  );\n};\n\nexport default Content;\n","import React from \"react\";\nimport useFluent from \"../../../hooks/useFluent\";\n\nconst AboutWhatIs = () => {\n  const getString = useFluent();\n  return (\n    <>\n      <h1>{getString(\"about-what-is-title\")}</h1>\n      <div\n        dangerouslySetInnerHTML={{ __html: getString(\"about-what-is-html\") }}\n      />\n    </>\n  );\n};\n\nexport default AboutWhatIs;\n","import React from \"react\";\nimport useFluent from \"../../../hooks/useFluent\";\nimport styled from \"styled-components/macro\";\nimport { baseColor } from \"../../../styling/styleUtils\";\n\nconst Content = styled.div`\n  .team-member-name {\n    color: ${baseColor};\n  }\n`;\n\nconst AboutTeam = () => {\n  const getString = useFluent();\n  return (\n    <>\n      <h1>{getString(\"about-team-title\")}</h1>\n      <Content\n        dangerouslySetInnerHTML={{ __html: getString(\"about-team-html\") }}\n      />\n    </>\n  );\n};\n\nexport default AboutTeam;\n","import React from \"react\";\nimport useFluent from \"../../../hooks/useFluent\";\n\nconst AboutPilotUserGroup = () => {\n  const getString = useFluent();\n  return (\n    <>\n      <h1>{getString(\"about-pilot-user-group-title\")}</h1>\n      <div\n        dangerouslySetInnerHTML={{\n          __html: getString(\"about-pilot-user-group-html\"),\n        }}\n      />\n    </>\n  );\n};\n\nexport default AboutPilotUserGroup;\n","import React from \"react\";\nimport useFluent from \"../../../hooks/useFluent\";\n\nconst AboutResearch = () => {\n  const getString = useFluent();\n  return (\n    <>\n      <h1>{getString(\"about-research-title\")}</h1>\n      <div\n        dangerouslySetInnerHTML={{ __html: getString(\"about-research-html\") }}\n      />\n    </>\n  );\n};\n\nexport default AboutResearch;\n","import React from \"react\";\nimport useFluent from \"../../../hooks/useFluent\";\n\nconst AboutGrowthLab = () => {\n  const getString = useFluent();\n  return (\n    <>\n      <h1>{getString(\"about-growth-lab-title\")}</h1>\n      <div\n        dangerouslySetInnerHTML={{ __html: getString(\"about-growth-lab-html\") }}\n      />\n      {/*buffer needed in order to compensate for such a small amount of content*/}\n      <div style={{ height: \"25vh\" }} />\n    </>\n  );\n};\n\nexport default AboutGrowthLab;\n","import React, { useRef } from \"react\";\nimport Content, {\n  Section,\n} from \"../../../components/templates/informationalPage/Content\";\nimport { AboutRoutes } from \"../../../routing/routes\";\nimport { useRouteMatch } from \"react-router-dom\";\nimport Helmet from \"react-helmet\";\nimport useFluent from \"../../../hooks/useFluent\";\nimport AboutWhatIs from \"./AboutWhatIs\";\nimport AboutTeam from \"./AboutTeam\";\nimport AboutPilotUserGroup from \"./AboutPilotUserGroup\";\nimport AboutResearch from \"./AboutResearch\";\nimport AboutGrowthLab from \"./AboutGrowthLab\";\n\nconst About = () => {\n  const getString = useFluent();\n  const sections: Section[] = [\n    {\n      label: getString(\"about-what-is-title\"),\n      route: AboutRoutes.AboutWhatIs,\n      active: Boolean(useRouteMatch(AboutRoutes.AboutWhatIs)),\n      Component: AboutWhatIs,\n      ref: useRef<HTMLDivElement | null>(null),\n    },\n    {\n      label: getString(\"about-team-title\"),\n      route: AboutRoutes.AboutTeam,\n      active: Boolean(useRouteMatch(AboutRoutes.AboutTeam)),\n      Component: AboutTeam,\n      ref: useRef<HTMLDivElement | null>(null),\n    },\n    {\n      label: getString(\"about-pilot-user-group-title\"),\n      route: AboutRoutes.AboutPilotUserGroup,\n      active: Boolean(useRouteMatch(AboutRoutes.AboutPilotUserGroup)),\n      Component: AboutPilotUserGroup,\n      ref: useRef<HTMLDivElement | null>(null),\n    },\n    {\n      label: getString(\"about-research-title\"),\n      route: AboutRoutes.AboutResearch,\n      active: Boolean(useRouteMatch(AboutRoutes.AboutResearch)),\n      Component: AboutResearch,\n      ref: useRef<HTMLDivElement | null>(null),\n    },\n    {\n      label: getString(\"about-growth-lab-title\"),\n      route: AboutRoutes.AboutGrowthLab,\n      active: Boolean(useRouteMatch(AboutRoutes.AboutGrowthLab)),\n      Component: AboutGrowthLab,\n      ref: useRef<HTMLDivElement | null>(null),\n    },\n  ];\n\n  return (\n    <>\n      <Helmet>\n        <title>\n          {\"About | \" + getString(\"meta-data-title-default-suffix\")}\n        </title>\n        <meta\n          property=\"og:title\"\n          content={\"About | \" + getString(\"meta-data-title-default-suffix\")}\n        />\n      </Helmet>\n      <Content sections={sections} />\n    </>\n  );\n};\n\nexport default About;\n","import React from \"react\";\nimport useFluent from \"../../../hooks/useFluent\";\nimport Helmet from \"react-helmet\";\n\nconst Contact = () => {\n  const getString = useFluent();\n  return (\n    <div>\n      <Helmet>\n        <title>\n          {getString(\"navigation-contact\") +\n            \" | \" +\n            getString(\"meta-data-title-default-suffix\")}\n        </title>\n        <meta\n          property=\"og:title\"\n          content={\n            getString(\"navigation-contact\") +\n            \" | \" +\n            getString(\"meta-data-title-default-suffix\")\n          }\n        />\n      </Helmet>\n      <h1>{getString(\"contact-us-title\")}</h1>\n      <p dangerouslySetInnerHTML={{ __html: getString(\"contact-us-para-1\") }} />\n      <p dangerouslySetInnerHTML={{ __html: getString(\"contact-us-para-2\") }} />\n    </div>\n  );\n};\n\nexport default Contact;\n","import React, { useLayoutEffect, useRef, useState } from \"react\";\nimport styled from \"styled-components\";\n\nexport const borderColor = \"#999\";\n\nconst LargeTerm = styled.dt`\n  font-size: 1.5rem;\n  line-height: 1.14;\n  color: rgb(51, 51, 51);\n  border-top: 1px solid ${borderColor};\n  background-color: rgba(90, 111, 140, 0.1);\n  padding: 1rem;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n\n  &:hover {\n    background-color: rgba(90, 111, 140, 0.35);\n    cursor: pointer;\n  }\n`;\nconst SmallTerm = styled(LargeTerm)`\n  font-size: 1rem;\n  padding: 0.75rem;\n  line-height: 0.75rem;\n`;\n\nconst Definition = styled.dd`\n  transition: height 200ms ease-in-out;\n  overflow: hidden;\n  box-sizing: border-box;\n  margin-left: 0;\n\n  a {\n    color: rgb(39, 86, 197);\n\n    &:hover {\n      text-decoration: underline;\n    }\n  }\n`;\n\nconst Paragraph = styled.p`\n  padding: 1rem;\n  border-top: 1px solid ${borderColor};\n`;\n\nconst Icon = styled.div`\n  font-size: 2rem;\n`;\n\nexport interface IProps {\n  term: string;\n  definition: string;\n  smallLabel?: boolean;\n}\n\nconst GlossaryItem = (props: IProps) => {\n  const { term, definition, smallLabel } = props;\n\n  const [domElmHeight, setDomElmHeight] = useState<number>(0);\n  const [expandedHeight, setExpandedHeight] = useState<\"auto\" | number>(\"auto\");\n  const [icon, setIcon] = useState<\"+\" | \"-\">(\"+\");\n  const definitionElm = useRef<HTMLElement | null>(null);\n\n  useLayoutEffect(() => {\n    const node = definitionElm.current;\n    if (node !== null) {\n      setDomElmHeight(node.clientHeight);\n      setExpandedHeight(0);\n    }\n  }, [definitionElm]);\n\n  const toggleDefinition = () => {\n    if (expandedHeight === 0) {\n      setExpandedHeight(domElmHeight);\n      setIcon(\"-\");\n    } else {\n      setExpandedHeight(0);\n      setIcon(\"+\");\n    }\n  };\n\n  const Term = smallLabel === true ? SmallTerm : LargeTerm;\n\n  return (\n    <>\n      <Term onClick={toggleDefinition}>\n        {term}\n        <Icon>{icon}</Icon>\n      </Term>\n      <Definition ref={definitionElm} style={{ height: expandedHeight }}>\n        <Paragraph dangerouslySetInnerHTML={{ __html: definition }} />\n      </Definition>\n    </>\n  );\n};\n\nexport default GlossaryItem;\n","import React from \"react\";\nimport useFluent from \"../../../hooks/useFluent\";\nimport Helmet from \"react-helmet\";\nimport Item from \"./GlossaryItem\";\n\ninterface IDatum {\n  question: string;\n  answer: string;\n}\n\nconst Faq = () => {\n  const getString = useFluent();\n\n  const content: IDatum[] = [\n    {\n      question: getString(\"faq-list-Q1-q\"),\n      answer: getString(\"faq-list-Q1-a\"),\n    },\n    {\n      question: getString(\"faq-list-Q2-q\"),\n      answer: getString(\"faq-list-Q2-a\"),\n    },\n    {\n      question: getString(\"faq-list-Q3-q\"),\n      answer: getString(\"faq-list-Q3-a\"),\n    },\n    {\n      question: getString(\"faq-list-Q4-q\"),\n      answer: getString(\"faq-list-Q4-a\"),\n    },\n    {\n      question: getString(\"faq-list-Q5-q\"),\n      answer: getString(\"faq-list-Q5-a\"),\n    },\n    {\n      question: getString(\"faq-list-Q6-q\"),\n      answer: getString(\"faq-list-Q6-a\"),\n    },\n    {\n      question: getString(\"faq-list-Q7-q\"),\n      answer: getString(\"faq-list-Q7-a\"),\n    },\n    {\n      question: getString(\"faq-list-Q8-q\"),\n      answer: getString(\"faq-list-Q8-a\"),\n    },\n    {\n      question: getString(\"faq-list-Q9-q\"),\n      answer: getString(\"faq-list-Q9-a\"),\n    },\n    {\n      question: getString(\"faq-list-Q10-q\"),\n      answer: getString(\"faq-list-Q10-a\"),\n    },\n  ];\n\n  const pairs = content.map(({ question, answer }, index) => (\n    <Item key={index} term={question} definition={answer} />\n  ));\n\n  return (\n    <div>\n      <Helmet>\n        <title>\n          {getString(\"navigation-faq\") +\n            \" | \" +\n            getString(\"meta-data-title-default-suffix\")}\n        </title>\n        <meta\n          property=\"og:title\"\n          content={\n            getString(\"navigation-faq\") +\n            \" | \" +\n            getString(\"meta-data-title-default-suffix\")\n          }\n        />\n      </Helmet>\n      <h1>{getString(\"faq-title\")}</h1>\n      {pairs}\n      <div style={{ marginBottom: \"5rem\" }} />\n    </div>\n  );\n};\n\nexport default Faq;\n","import React from \"react\";\nimport { Route, Switch } from \"react-router-dom\";\nimport { Routes } from \"../../routing/routes\";\nimport InformationalPage from \"../../components/templates/informationalPage\";\nimport About from \"./about\";\nimport Contact from \"./contact\";\nimport Faq from \"./faq\";\n\nconst City = () => {\n  return (\n    <InformationalPage>\n      <Switch>\n        <Route path={Routes.AboutBase} component={About} />\n        <Route path={Routes.ContactBase} component={Contact} />\n        <Route path={Routes.FaqBase} component={Faq} />\n      </Switch>\n    </InformationalPage>\n  );\n};\n\nexport default City;\n","import React from \"react\";\nimport GlobalStyles from \"./styling/GlobalStyles\";\nimport Helmet from \"react-helmet\";\nimport { Route, Switch } from \"react-router-dom\";\nimport Landing from \"./pages/landing\";\nimport City from \"./pages/cities/profiles\";\nimport Informational from \"./pages/informational\";\nimport { Routes } from \"./routing/routes\";\nimport \"./styling/fonts/fonts.css\";\nimport AppContext, { useWindowWidth } from \"./contextProviders/appContext\";\nimport { OverlayPortal } from \"./components/standardModal\";\nimport useFluent from \"./hooks/useFluent\";\n\nfunction App() {\n  const windowDimensions = useWindowWidth();\n  const getString = useFluent();\n  const defaultMetaTitle = getString(\"meta-data-title-default\");\n  return (\n    <>\n      <Helmet>\n        <title>{defaultMetaTitle}</title>\n        <meta property=\"og:title\" content={defaultMetaTitle} />\n      </Helmet>\n      <GlobalStyles />\n      <AppContext.Provider value={{ windowDimensions }}>\n        <Switch>\n          <Route exact path={Routes.Landing} component={Landing} />\n          <Route path={Routes.CityBase} component={City} />\n          <Route path={Routes.AboutBase} component={Informational} />\n          <Route path={Routes.ContactBase} component={Informational} />\n          <Route path={Routes.FaqBase} component={Informational} />\n          <Route component={Landing} />\n        </Switch>\n        <OverlayPortal />\n      </AppContext.Provider>\n    </>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === \"localhost\" ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === \"[::1]\" ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/,\n    ),\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener(\"load\", () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            \"This web app is being served cache-first by a service \" +\n              \"worker. To learn more, visit https://bit.ly/CRA-PWA\",\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === \"installed\") {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                \"New content is available and will be used when all \" +\n                  \"tabs for this page are closed. See https://bit.ly/CRA-PWA.\",\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log(\"Content is cached for offline use.\");\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error(\"Error during service worker registration:\", error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { \"Service-Worker\": \"script\" },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get(\"content-type\");\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf(\"javascript\") === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        \"No internet connection found. App is running in offline mode.\",\n      );\n    });\n}\n\nexport function unregister() {\n  if (\"serviceWorker\" in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport {\n  appLocalizationAndBundle as fluentValue,\n  AppLocalizationAndBundleContext as FluentText,\n} from \"./contextProviders/getFluentLocalizationContext\";\nimport { HashRouter } from \"react-router-dom\";\nimport * as serviceWorker from \"./serviceWorker\";\nimport { StaticDataProvider } from \"./dataProvider\";\n\nReactDOM.render(\n  <StaticDataProvider>\n    <FluentText.Provider value={fluentValue}>\n      <HashRouter>\n        <App />\n      </HashRouter>\n    </FluentText.Provider>\n  </StaticDataProvider>,\n  document.getElementById(\"root\"),\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.register();\n","module.exports = __webpack_public_path__ + \"static/media/benchmark_comparator.1146d6d7.svg\";"],"sourceRoot":""}