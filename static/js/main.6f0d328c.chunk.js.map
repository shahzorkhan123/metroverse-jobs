{"version":3,"sources":["assets/icons/cities-logo.svg","components/general/howToRead/static/treemap.png","components/general/howToRead/static/industry_space.png","components/general/howToRead/static/swot.png","assets/icons/population.svg","assets/icons/ranking.svg","assets/icons/gdppercapita.svg","assets/icons/datareliability.svg","assets/icons/topindustries.svg","assets/icons/topknowledgecluster.svg","assets/icons/topsimilarcities.svg","assets/icons/cities-logo-dark.svg","components/templates/informationalPage/assets/github.svg","routing/routes.ts","styling/GlobalGrid.ts","styling/styleUtils.ts","styling/GlobalStyles.tsx","routing/Utils.ts","contextProviders/getFluentLocalizationContext.ts","hooks/useFluent.ts","Utils.ts","hooks/useCurrentCityId.ts","contextProviders/appContext.ts","components/navigation/header/index.tsx","components/standardModal/index.tsx","components/standardModal/BasicModal.tsx","pages/landing/Heading.tsx","dataProvider/index.tsx","types/graphQL/graphQLTypes.ts","components/general/Tooltip.tsx","hooks/useGlobalLocationData.ts","components/transitionStateComponents/SimpleLoader.tsx","components/transitionStateComponents/SimpleError.tsx","components/general/Utils.ts","styling/utils/panelSearchKeywordFormatter.tsx","pages/landing/SearchBar.tsx","pages/landing/index.tsx","components/navigation/Utils.ts","hooks/useCurrentCity.ts","components/navigation/secondaryHeader/UtilityBar.tsx","components/general/dataDisclaimer/index.tsx","components/navigation/secondaryHeader/guide/FirstTimeModal.tsx","components/navigation/secondaryHeader/guide/CitiesGuide.tsx","components/navigation/secondaryHeader/guide/index.tsx","components/navigation/secondaryHeader/share/shareFn.ts","components/navigation/secondaryHeader/share/ShareModal.tsx","components/navigation/secondaryHeader/share/index.tsx","hooks/useGlobalIndustriesData.ts","components/transitionStateComponents/VizLoadingBlock.tsx","components/dataViz/ErrorBoundary.tsx","components/transitionStateComponents/SimpleTextLoading.tsx","utilities/rapidTooltip.ts","hooks/useAggregateIndustriesData.ts","components/transitionStateComponents/QuickError.tsx","components/dataViz/treeMap/CompositionTreeMap.tsx","components/general/searchIndustryInGraphDropdown/index.tsx","hooks/useGlobalClusterData.ts","components/dataViz/treeMap/ClusterCompositionTreeMap.tsx","components/dataViz/legend/Label.tsx","components/dataViz/legend/CategoryLabels.tsx","hooks/useSectorMap.ts","hooks/useClusterMap.ts","hooks/useQueryParams.ts","hooks/useLevelLoader.ts","pages/cities/profiles/economicComposition/cityComposition/DownloadImageOverlay.tsx","components/dataViz/legend/EducationLegend.tsx","components/dataViz/legend/WageLegend.tsx","components/general/searchIndustryInGraphDropdown/ToggleDropdown.tsx","components/general/PreChartRow.tsx","components/dataViz/settings/CurrentSettingsTooltip.tsx","components/dataViz/settings/RCAThresholdSlider.tsx","components/analytics/googleAnalyticsEvent.ts","components/dataViz/settings/index.tsx","components/general/howToRead/index.tsx","components/dataViz/comparisonBarChart/cityIndustryComparisonQuery.ts","components/general/StandardSideTextBlock.tsx","components/transitionStateComponents/StandardSideTextLoading.tsx","pages/cities/profiles/economicComposition/cityComposition/SideText.tsx","pages/cities/profiles/economicComposition/cityComposition/index.tsx","pages/cities/profiles/economicComposition/index.tsx","components/navigation/secondaryHeader/comparisons/AddComparisonModal.tsx","components/dataViz/industrySpace/chart/useRCAData.ts","pages/cities/profiles/overview/widgets/styleUtils.ts","pages/cities/profiles/overview/widgets/topRow/index.tsx","hooks/useCurrentBenchmark.ts","components/dataViz/legend/PresenceToggle.tsx","pages/cities/profiles/overview/widgets/bottomRow/TopRCA.tsx","components/dataViz/similarCitiesMap/useProximityData.ts","pages/cities/profiles/overview/widgets/bottomRow/TopCities.tsx","pages/cities/profiles/overview/widgets/bottomRow/index.tsx","pages/cities/profiles/overview/widgets/DisclaimerText.tsx","pages/cities/profiles/overview/widgets/index.tsx","pages/cities/profiles/overview/concepts/index.tsx","pages/cities/profiles/overview/map/CityMap.tsx","pages/cities/profiles/overview/map/index.tsx","pages/cities/profiles/overview/index.tsx","components/dataViz/verticalBarChart/getNiceLogValues.ts","components/dataViz/verticalBarChart/Industries.tsx","components/dataViz/verticalBarChart/Clusters.tsx","hooks/useClusterRCAData.ts","components/dataViz/legend/BenchmarkLegend.tsx","components/dataViz/verticalBarChart/RCABarChart.tsx","components/dataViz/zoomableComparisonBarChart/Chart.tsx","pages/cities/profiles/goodAt/SideText.tsx","routing/TrackedRoute.tsx","components/dataViz/comparisonBarChart/Chart.tsx","components/dataViz/comparisonBarChart/TopIndustryComparisonBarChart.tsx","pages/cities/profiles/index.tsx","components/dataViz/zoomableComparisonBarChart/IndustryZoomableBarChart.tsx","pages/cities/profiles/goodAt/absolutePresence/index.tsx","pages/cities/profiles/goodAt/index.tsx","components/navigation/secondaryHeader/CitySearch.tsx","components/navigation/secondaryHeader/index.tsx","components/navigation/sideNav/MobileMenu.tsx","components/navigation/sideNav/index.tsx","components/templates/InnerPage.tsx","components/templates/informationalPage/Footer.tsx","components/templates/informationalPage/index.tsx","components/templates/informationalPage/Content.tsx","pages/informational/about/AboutWhatIs.tsx","pages/informational/about/AboutTeam.tsx","pages/informational/about/AboutPilotUserGroup.tsx","pages/informational/about/AboutResearch.tsx","pages/informational/about/AboutGrowthLab.tsx","pages/informational/about/index.tsx","pages/informational/contact/index.tsx","pages/informational/faq/GlossaryItem.tsx","pages/informational/faq/index.tsx","pages/informational/index.tsx","App.tsx","serviceWorker.ts","index.tsx","assets/icons/benchmark_comparator.svg"],"names":["module","exports","ClusterMode","breakPointValues","medium","mediumSmall","small","breakPoints","lines","pageTop","preHeaderTop","preHeaderBottom","headerTop","headerBottom","secondaryHeaderTop","secondaryHeaderBottom","preContentTop","preContentBottom","contentTop","contentBottom","postContentTop","postContentBottom","footerTop","footerBottom","postFooterTop","postFooterBottom","pageBottom","pageLeft","navLeft","navRight","contentLeft","contentRight","pageRight","Root","styled","div","InformationalPageRoot","PrimaryHeaderContainer","SecondaryHeaderContainer","NavigationContainer","ContentContainer","DefaultContentWrapper","sectorColorMap","id","color","clusterColorMap","intensityColorRange","educationColorRange","wageColorRange","primaryFont","secondaryFont","noOutlineOnFocus","css","ContentGrid","fadeIn","keyframes","fadeInAnimation","SearchContainerDark","span","rgba","SearchContainerLight","BlockButton","button","BlockButtonHighlighted","FullPageOverlay","radioButtonCss","$checked","ContentTitle","h2","ContentParagraph","p","ButtonBase","Mult","FractionMult","GlobalStyles","createGlobalStyle","CityRoutes","CityBase","CityOverview","CityEconomicComposition","CityGoodAt","CityGoodAtAbsolutePresence","CityGoodAtAbsolutePresenceComparison","CityIndustrySpacePosition","CityGrowthOpportunities","CityGrowthOpportunitiesTable","CitySimilarCities","AboutRoutes","AboutBase","AboutWhatIs","AboutTeam","AboutPilotUserGroup","AboutResearch","AboutGrowthLab","Routes","Landing","ContactBase","FaqBase","NodeSizing","defaultClusterMode","outline","ColorBy","CityNodeSizing","defaultNodeSizing","cityEmployees","CityColorBy","ClusterLevel","AggregationMode","defaultCityNodeSizing","population","defaultAggregationMode","industries","defaultClusterLevel","C3","defaultColorBy","sector","createRoute","route","cityId","replace","messages","generateBundles","bundle","FluentBundle","_locales","addMessages","localizationAndBundle","localization","ReactLocalization","LocalizationAndBundleContext","createContext","getLocalizationInfo","appLocalizationAndBundle","AppLocalizationAndBundleContext","possessive","word","length","ordinalNumber","input","j","k","ordinalSuffix","useContext","getString","numberWithCommas","x","toString","ranges","divider","suffix","formatNumber","n","decimalPlaces","fixedRange","undefined","range","parseFloat","toFixed","rangesLong","formatNumberLong","decimalToFraction","decimal","top","bottom","Math","pow","floor","gcd","a","b","display","filterOutliers","arr","values","concat","sort","q1","q3","ceil","iqr","maxValue","minValue","filter","defaultCityPool","prevCity","history","useHistory","match","matchPath","location","pathname","params","random","initialWindowDimension","width","window","innerWidth","height","innerHeight","windowDimensions","useWindowWidth","useState","setWindowDimensions","useEffect","updateWindowDimensions","debounce","addEventListener","removeEventListener","citiesLogoSVG","cityIconSVG","NavSection","Logo","h1","MobileLogo","StyledLink","Link","H2","defaultPadding","$active","MobileH2","BetaLabel","NavIcon","MobileNavIcon","MobileMenuButton","Icon","Bar","CenterBar","MobileMenu","Header","useFluent","mobileMenuOpen","setMobileMenuOpen","matchCity","useRouteMatch","matchSimilarCities","matchAbout","matchContact","matchFaq","currentCityId","useCurrentCityId","similarCitiesRoute","profileCitiesOverviewRoute","menuButtonText","closeMenu","to","aria-label","dangerouslySetInnerHTML","__html","style","transform","Boolean","onClick","zIndex","position","opacity","className","OverlayPortal","tabIndex","Overlay","Container","dimensions","Content","Modal","props","children","onClose","overlayPortalContainerNodeRef","useRef","isModalRendered","setIsModalRendered","node","document","querySelector","current","focus","closeOnEsc","e","key","createPortal","growIn","CloseButton","rest","closeButton","CityIcon","Description","h3","Or","UseMapText","MapPanIcon","WhatIsACityLinkContainer","WhatIsACityLink","ModalContent","Heading","cityModalOpen","setCityModalOpen","modal","BasicModal","BASE_URL","process","StaticDataContext","data","loading","error","loadedLevels","loadLevel","levelLoading","meta","maxDigitLevel","useStaticData","DigitLevel","StaticDataProvider","setData","setLoading","setError","setLoadedLevels","setLevelLoading","setMeta","levelFetchingRef","Set","cancelled","fetch","metaRes","ok","Error","status","json","metaData","datasets","dataset","file","mainRes","mainData","levels","console","String","load","loadedKeysRef","fetchAndMerge","useCallback","levelKey","has","country","year","levelFiles","filename","add","then","res","extData","prev","base","ext","existingCodes","occupations","map","o","socCode","newOccupations","existingGroups","majorGroups","g","groupId","newGroups","mergedRegionData","regionData","Object","entries","regionId","yearData","records","existingSocs","r","newRecords","mergedAggregates","aggregates","agg","byOccupation","minMaxStats","mergeExtension","delete","size","catch","err","level","includes","allLevels","keys","test","Number","max","Provider","value","CompositionType","defaultDigitLevel","Two","IncomeClassType","DevGroupType","DataFlagType","PeerGroup","defaultCompositionType","Employees","TooltipPosition","TooltipTheme","isValidPeerGroup","GlobalPopulation","GlobalIncome","GlobalEuclideanDistance","RegionalPopulation","RegionalIncome","RegionalEuclideanDistance","Region","regionTypeLabels","useGlobalLocationData","blsData","countries","Array","from","regions","regionType","rt","countryId","code","toLowerCase","nameShortEn","cities","name","nameList","centroidLat","centroidLon","gdppc","incomeClass","region","regionPopRank","regionGdppcRank","dataFlag","GREEN","getCountryStringId","locationDataToHierarchicalTreeData","response","push","title","parent_id","useGlobalLocationHierarchicalTreeData","responseData","Ring","animation","ChildBase","baseSize","themeColor","FirstChild","SecondChild","ThirdChild","SimpleLoader","fluentMessageId","message","timeout","NewDataQualityLevel","MoreInformationI","TooltipBase","$overrideStyles","$theme","Dark","ArrowContainer","$position","Bottom","Arrow","GenericSpan","Tooltip","explanation","cursor","theme","tooltipPosition","overrideStyles","delay","rootEl","tooltipEl","isTooltipShown","setIsTooltipShown","left","coords","setCoords","useLayoutEffect","tooltipElm","rootElm","tooltipHeight","offsetHeight","tooltipWidth","offsetWidth","tooltipTopValue","tooltipLeftValue","tooltipSpacing","classList","remove","cssText","tooltip","overlayPortalContainerNode","arrow","ReactDOM","ref","onMouseEnter","clientY","clientX","setTimeout","onMouseLeave","clearTimeout","onMouseMove","RootDark","RootLight","KeywordText","KeywordElement","keywords","query","safeQuery","RegExp","trim","text","total","join","React","memo","setHighlighted","onPanelHover","onTraverseLevel","highlighted","focusOnRender","topLevelTitle","onSelect","val","onHover","selectedValue","disallowSelectionLevels","defaultPlaceholderText","showCount","resultsIdentation","matchingKeywordFormatter","CenterPanel","SearchContainer","LoadingContainer","QuickLinks","QuickLink","Attribution","searchBar","navigateToRegion","SimpleError","searchData","d","gdp","href","target","rel","columnsToRowsBreakpoint","UtilityBarButtonBase","SvgBase","Text","LargeSvg","TooltipContent","useCurrentCity","city","find","c","collapsedSizeMediaQueryValues","min","collapsedSizeMediaQuery","textClassName","ExpandingButton","DownloadType","dataQualityColors","Map","LOW","MEDIUM","HIGH","getNewDataQualityLevel","assignedNewDataQualityLevel","YELLOW","ORANGE","RED","DisclaimerSvg","$flagColor","DisclaimerSvgLarge","Title","Para","EnlargedTextLabel","LargeDot","DataDisclaimer","currentCity","modalOpen","setModalOpen","flagColor","alertTitle","description","dataQualityLevel","get","backgroundColor","img","StartGuideButton","DismissButton","CheckboxLabel","label","Checkbox","localStorageKey","dismissedSinceSession","FirstTimeModal","startGuide","initialCheckedValue","parseInt","localStorage","getItem","isNaN","checked","setChecked","closeModal","setItem","newCheckedCount","src","CityverseLogoURL","htmlFor","type","onChange","joyrideClassNames","steps","content","disableBeacon","placement","CitiesGuide","run","filteredSteps","element","offsetParent","continuous","showProgress","spotlightClicks","locale","back","close","last","next","skip","styles","options","primaryColor","callback","action","floaterProps","disableAnimation","Guide","runTutorial","setRunTutorial","getShareWindowParams","getShareFunctions","url","shareFacebook","shareURL","encodeURIComponent","open","shareTwitter","shareLinkedIn","summary","source","shareEmail","subjectCopy","bodyBeforeLineBreakCopy","bodyAfterLineBreakCopy","subject","bodyBeforeLineBreak","bodyAfterLineBreak","SectionTitle","CopyUrlBar","CopyIcon","UrlText","CopyButton","SocialMediaContainer","SocialMediaButton","copied","setCopied","copyText","navigator","clipboard","writeText","Share","ShareModal","UtilityBarRoot","UtilityBarPortal","UtilityBar","onDownloadImageButtonClick","onDownloadDataButtonClick","returnInline","hideGuide","secondaryHeaderUtilityBarContainerNodeRef","isUtilityBarRendered","setIsUtilityBarRendered","screenfull","isEnabled","isFullscreen","setIsFullscreen","downloadDataButton","downloadImageButton","expandButton","onFullscreenClose","exit","off","request","on","guide","useGlobalIndustriesData","occ","naicsId","parentId","parentCode","substring","naicsIdTopParent","majorGroupId","tradable","useGlobalIndustryMap","forEach","industry","industryDataToMap","LoadingOverlay","LoadingBlock","ErrorBoundary","state","hasError","errorInfo","this","_error","Component","Spinner","bounceDelay","Bounce","Bounce1","Bounce2","RapidTooltipRoot","getStandardTooltip","columnCount","rows","i","row","underline","underlineRows","ii","alignment","boldColumns","grid","additionalContent","additionalHTML","hideArrow","titleStyle","simple","defaultMinMax","minSumNumCompany","maxSumNumCompany","minSumNumEmploy","maxSumNumEmploy","minAvgNumCompany","maxAvgNumCompany","minAvgNumEmploy","maxAvgNumEmploy","minYearsEducation","maxYearsEducation","minHourlyWage","maxHourlyWage","medianHourlyWage","medianYearsEducation","useAggregateIndustryMap","variables","clusters","globalMinMax","clusterMinMax","yearStr","wages","avgWage","complexities","avgComplexity","wagesFiltered","complexitiesFiltered","sortedWages","sortedComplexities","medianWage","round","medianComplexity","minWage","maxWage","minComplexity","maxComplexity","occData","yearsEducation","hourlyWage","yearsEducationRank","hourlyWageRank","sumNumCompany","sumNumEmploy","totalEmploy","avgNumCompany","avgNumEmploy","mg","matchingOccs","reduce","s","clusterId","QuickError","closeError","duration","TreeMapContainer","socParent","knownCodes","prefix","digits","endsWith","renumbered","standard","Mode","useEconomicCompositionQuery","numCompany","numEmploy","totEmp","aMean","digitLevel","compositionType","hiddenSectors","colorBy","setIndicatorContent","industryMap","rootRef","tooltipContentRef","highlightedTooltipRef","setDimensions","aggregateIndustryDataMap","onCellClick","onDrillDown","sectorId","getBoundingClientRect","dataToUse","prevData","usePrevious","output","indicator","tooltipContent","education","wage","SimpleTextLoading","availableCodes","childrenOf","ind","ancestor","set","residualValues","parentInd","parentEmploy","parentCompany","childEmploySum","childCompanySum","childCode","childInd","employ","company","colorScale","treeMapData","adjustedValueMap","companies","employees","some","ci","residual","Companies","topLevelParentId","scaleLinear","domain","fill","transformed","transformData","colorMap","loadingOverlay","highlightedCell","treeMapCells","industryWithData","hAdj","share","shareString","targetValue","innerHTML","pointerEvents","x0","x1","y0","clearHighlighted","highlightErrorPopup","fallbackTitle","cells","numCellsTier","chartContainerWidth","chartContainerHeight","onMouseOverCell","adjusted","onMouseLeaveChart","noop","useGlobalClusterData","clusterIdTopParent","useGlobalClusterMap","_options","cluster","clusterDataToMap","useClusterCompositionQuery","socToMajorGroup","majorGroupAgg","mgId","rcaNumCompany","rcaNumEmploy","clusterLevel","hiddenClusters","clusterMap","Four","allRCAValues","minMax","extent","scaleSymlog","clusterIndustryDatum","clusterWithData","Button","Block","HideIsolateRoot","HideIsolateContent","HideIsolateText","Hr","hr","ButtonWrapper","HideIsolateButton","Label","category","toggleCategory","isolateCategory","isHidden","isIsolated","isHovered","setIsHovered","toggleButton","isolateButton","hideIsolateButtons","hideIsolate","borderColor","RootBase","StandardRoot","FullWidthRoot","StandardContent","FullWidthContent","fadeAndSlideIn","fadeAndSlideDown","ResetLabelsButtonContainer","ResetLabelsButton","ReloadIcon","CategoryLabels","categories","fullWidth","allowToggle","hiddenCategories","resetCategories","resetText","labels","resetButton","queryString","parse","search","useLevelLoader","digit_level","useQueryParams","lvl","treeMapCellsNode","cityName","aggregationMode","industryResponse","clusterResponse","effectRan","setEffectRan","boundingRect","canvas","createElement","context","getContext","cell","beginPath","rect","y1","fillStyle","strokeStyle","stroke","html2canvas","allowTaint","cellLabels","drawImage","link","download","toDataURL","click","Labels","IntensityLegend","jumpIn","DropdownContainer","ToggleButton","rerenderKey","isDropdownVisible","setIsDropdownVisible","internalSelectedValue","setInternalSelectedValue","dropdown","maxResults","VizNavStyle","hierarchalSearchData","tiers","searchPanel","hiddenParents","mode","hidden","sectorMap","useSectorMap","useClusterMap","industrySearchData","industryDataToHierarchicalTreeData","useGlobalIndustryHierarchicalTreeData","clusterSearchData","clusterDataToHierarchicalTreeData","useGlobalClusterHierarchicalTreeData","locationSearchData","useWindowSize","naics","geo","ToggleDropdown","visibility","Segment","Subtitle","em","CurrentSettingsTooltip","nodeSizingValue","settingsOptions","compositionText","composition_type","aggregationText","upperFirst","aggregation","detailLevel","sixDigitOnlyMessage","Six","cluster_overlay","hideClusters","clusterOverlayMode","nodeSizing","node_sizing","rca","sizeBy","defaultColorByText","nodes","color_by","citySizeBy","cityNodeSizing","city_node_sizing","cityColorBy","city_color_by","proximity","rcaThreshold","rca_threshold","SliderContainer","RCAThresholdSlider","updateValue","initialValue","logScale","scaleLog","logScaleWithZero","convertValue","logValue","invert","ReactSlider","thumbClassName","trackClassName","defaultValue","renderThumb","valueNow","onAfterChange","v","googleAnalyticsEvent","_category","_action","_label","slideIn","ContentRoot","SettingGrid","SettingsInputContainer","DisabledSettingsInputContainer","CompostionButtonBase","CompostionButtonHighlight","DisabledLabel","DigitLevelButton","$selected","DigitLevelSoloButton","ResetButton","Settings","compositionOptions","digitLevelOptions","clusterLevelOptions","clusterOverlayToggle","nodeSizingOptions","colorByOptions","cityColorByOptions","cityNodeSizingOptions","updateSetting","param","stringify","newUrl","CompanyButton","EmployeeButton","InputContainer","LabelContainer","tooltipText","disabledOptions","ClusterButton","NaicButton","Sector","Three","Five","C1","cluster_level","overlay","none","nodeSizingActive","currentValue","sizeByRca","cityCompanies","uniform","globalEmployees","globalCompanies","labelText","defaultIsSelected","gdpPpp","Image","HowToRead","isTreemap","isIndustrySpace","isSwot","isExact","TreemapPNG","IndustrySpacePNG","SwotPNG","$hasIndicator","RowBase","LeftColumn","IndicatorTooltipContainer","RightColumn","IndicatorRoot","SettingsButton","NavButton","HighlightedNavButton","UnderlineNavButton","UnderlineHighlightedNavButton","NavButtonTooltip","ButtonNavContainer","RegionGroup","searchInGraphOptions","vizNavigation","vizNavigationStyle","settingsOpen","setSettingsOpen","indicatorTooltip","indicatorElm","rightColumnStyle","justifyContent","vizNavigationButtonElms","Underline","active","vizNavigationButtons","searchInGraph","settingsButton","settingsPanel","ScrollContainer","StandardSideTextBlock","clearStyles","Fragment","alignItems","flickerAnimation","TitleBar","ParaBar","StandardSideTextLoading","marginBottom","SideText","locations","composition","cityNamePlural","allSectors","count","largestSector","orderBy","secondLargestSector","para1","para2","Helmet","property","TreeMapRoot","EconomicComposition","prevHighlighted","setHiddenSectors","setHiddenClusters","queryParams","sectorMapRef","queryParamsRef","maxDigitLevelRef","legend","currentLevel","allSectorIds","nextLevel","otherParams","activeDownload","setActiveDownload","indicatorContent","treeMapRef","globalLocationData","isClusterTreeMap","cellsNode","targetCity","DownloadImageOverlay","EducationLegend","WageLegend","sId","treeMapViz","ClusterCompositionTreeMap","ComparisonType","useComparisonQuery","primaryId","primaryCity","primaryRegionData","primaryYearData","primaryCityIndustries","industryId","secondaryCityIndustries","comparison","World","secondaryId","secondaryRegionData","secondaryYearData","nationalData","nationalYearData","H1","Grid","ContinueButtonContainer","ContinueButton","ContainerTitle","AboutText","AddComparisonModal","comparisonType","continueButtonRef","globalData","benchmark","intialSelected","selected","setSelected","prevValue","closeModalWithoutConfirming","Relative","selectCityTitle","about","Absolute","BenchmarkSVG","neverEmpty","disabled","TitleBase","globalBreakPoints","WrappableText","YearText","ValueBase","ListItem","DataLegend","SmallDot","LegendContainer","LegendRow","TopRow","cityLoading","dataQualityTooltip","toUpperCase","PopulationSVG","GdpPerCapitaSVG","RankingSVG","DataReliabilitySVG","useCurrentBenchmark","benchmarkName","benchmarkNameShort","StringBoolean","Highlighted","useClusterIntensityQuery","blsLoading","naicsData","naicsRca","clusterData","c1Rca","c3Rca","useRCAData","variable","peerGroup","partnerCityIds","Cell","TopRCA","topIndustriesElement","topClustersElement","industriesGreaterThan1","dd","topIndustries","slice","clustersGreaterThan1","topClusters","TopIndustriesSVG","TopClustersSVG","useProximityData","cityPartnerEucdistScale","minGlobalEucdist","p20GlobalEucdist","p40GlobalEucdist","p60GlobalEucdist","p80GlobalEucdist","maxGlobalEucdist","TopCities","topCitiesElement","globalLocations","minPop","maxPop","topLocations","partnerId","cntry","countryText","TopCitiesSVG","BottomRow","DisclaimerText","cityPeerGroupCountsRegion","regionName","cityPeerGroupCounts","Row","Widgets","disclaimer","SectionHeader","Section","Concepts","Placeholder","CityMap","_props","MapRoot","fitBounds","bounds","padding","right","ContentBlock","WidgetContainer","MapContainer","ConceptsContainer","SimilarCities","tickMarksForMinMax","Industries","highlightError","setHighlightError","tooltipRef","filteredIndustryRCA","scale","nice","numberOfXAxisTicks","highPresenceScale","lowPresenceScale","highPresenceData","lowPresenceData","colorDatum","datum","primaryData","secondaryData","formatValue","direction","scaleToUse","Direction","Over","scaledValue","onRowHover","mouseCoords","y","onHighlightError","nValuesToShow","expandCollapseText","toExpand","toCollapse","Clusters","filteredClusterRCA","ButtonsRoot","OneTimeTooltip","DismissTooltipButton","HighlightedTooltipText","EquationContainer","Division","Subtraction","Top","BenchmarkText","PresenceToggle","togglePresence","highlight","showArrows","onButtonClick","initialShowOverviewTooltip","TRUE","showOverviewTooltip","setShowOverviewTooltip","highlightedStyles","relativePresenceTooltip","absolutePresenceTooltip","presenceButtons","relative","absolute","arrowLeft","arrowRight","oneTimeTooltip","rotate","strong","BenchmarkLegend","benchmarkModal","newBenchmark","LeftAxisRoot","BottomAxisRoot","BenchmarkRoot","AxisLabelBase","AxisLabelLeft","AxisLabelRight","AxisLabelHigh","VizRoot","VizContainer","RCABarChart","isClusterView","industryData","viz","Group","benchmarkType","cityNamePossessive","its","the","peerGroupName","peerGroupPossessive","industrialKnowledgeCluster","industrysClusters","industryCluster","para3","para4","TrackedRoute","formatAxisValue","filteredPrimaryData","filteredSecondaryData","primaryTotal","secondaryTotal","primaryCityId","secondaryCityId","secondaryDatum","d2","difference","primaryDatum","secondaryCityName","primaryCityDatum","primaryCityName","secondaryCityDatum","primaryDiffValue","secondaryDiffValue","primaryValue","secondaryValue","primaryValueText","secondaryValueText","primaryDiff","secondaryDiff","layout","Layout","Left","TopIndustryComparisonBarChart","aggregateData","globalAggregateData","industryOrClusterMap","parentField","hiddenIndustriesOrClusters","topParent","textLeft","other","textRight","whiteSpace","primaryName","secondaryName","setHovered","filteredData","groupName","Primary","Secondary","removeHovered","allYValues","dataWithHover","maxY","prevMaxY","vizType","VizType","ClusterBarChart","axisLabels","formatAxis","animateBars","axisMinMax","minY","animateAxis","animationDuration","startMaxY","startMinY","chartTitle","SizingContainer","BreadCrumbList","ul","BreadCrumb","li","BreadCrumbLink","PrimarySecondaryLegend","LegendItem","LegendBlock","LegendText","IndustryZoomableBarChart","idField","highlightIndustry","highlightedParent","barChartData","sortedData","breadCrumbList","currentParentId","breadCrumbs","reverse","industryName","topLevelText","topLevelBreadCrumb","CompositionComparison","secondaryCity","isIndustryComparison","path","render","matchZoomableBarChart","StyledSelect","select","CountrySelect","YearSelect","RegionSelect","CitySearch","years","metadata","currentYear","nationals","localeCompare","metros","states","SecondaryHeader","component","MobileButtonContainer","MobileButton","ChevronSVG","arrowStyles","ArrowBase","DisabledArrow","NextSvg","PrevSvg","DownArrow","UpArrow","baseLinkData","toggleMenu","warn","linkIndex","findIndex","pageTitle","prevLink","nextLink","toggleArrow","rootWidth","LinkContainer","acitveLinkClass","NavLink","BetaIcon","CollapseButton","CollapsedMenu","CollapsedLink","ExpandButton","ExtendArrow","SideNavigation","collapsed","setCollapsed","AppContext","linkData","setLinkData","containerHovered","setContainerHovered","circle_0","circle_1","circle_2","circle_3","circle_4","l","absoluteTop","refArray","offset","documentElement","scrollTop","body","offsetTop","newLinkDatum","tooltips","links","beta","removeParams","newParams","LinkRoot","mobileMenu","collapseButton","menu","xmlns","viewBox","cx","cy","InnerPage","City","getStringWithNewLines","matchOverview","prevCityId","dismissed","Overview","GoodAt","ColumnOrRow","CityverseLogo","h4","CityverseVersion","CenteredColumn","InternalLinksColumn","ExternalLinksColumn","CityverseLogoColumn","AttributionColumn","AttributionInfo","GitHubLink","GitHubIcon","linkStyles","StyledInternalLink","StyledExternalLink","LicenseAndReadme","StandardFooter","CityverseLogoSVG","alt","REACT_APP_METROVERSE_VERSION","GitHubIconSVG","marginTop","rootId","ContentStandard","ContentFull","InformationalPage","contentFull","Footer","StickyContainer","LinkBase","sections","firstRender","setFirstRender","onScroll","currentSection","section","root","scrollTo","behavior","scrollIntoView","navLinks","contentSections","About","Contact","LargeTerm","dt","SmallTerm","Definition","Paragraph","GlossaryItem","term","definition","smallLabel","domElmHeight","setDomElmHeight","expandedHeight","setExpandedHeight","icon","setIcon","definitionElm","clientHeight","Term","Faq","pairs","question","answer","index","App","defaultMetaTitle","exact","Informational","isLocalhost","hostname","registerValidSW","swUrl","config","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","log","onUpdate","onSuccess","fluentValue","getElementById","URL","origin","headers","contentType","indexOf","ready","unregister","reload","checkValidServiceWorker"],"mappings":"6GAAAA,EAAOC,QAAU,IAA0B,yC,oBCA3CD,EAAOC,QAAU,IAA0B,qC,oBCA3CD,EAAOC,QAAU,IAA0B,4C,oBCA3CD,EAAOC,QAAU,IAA0B,kC,oBCA3CD,EAAOC,QAAU,IAA0B,wC,oBCA3CD,EAAOC,QAAU,IAA0B,qC,oBCA3CD,EAAOC,QAAU,IAA0B,0C,oBCA3CD,EAAOC,QAAU,IAA0B,6C,oBCA3CD,EAAOC,QAAU,IAA0B,2C,oBCA3CD,EAAOC,QAAU,IAA0B,iD,oBCA3CD,EAAOC,QAAU,IAA0B,8C,oBCA3CD,EAAOC,QAAU,IAA0B,8C,oBCA3CD,EAAOC,QAAU,IAA0B,oC,kHC4C/BC,E,+CC1CCC,EACJ,CACLC,OAAQ,KACRC,YAAa,IACbC,MAAO,KAJEH,EAMH,CACNC,OAAQ,IACRC,YAAa,IACbC,MAAO,KAIEC,EAAc,CACzBH,OAAO,0BAAD,OAA4BD,EAAuBC,OAAnD,oDAC6BD,EAAwBC,OADrD,OAENC,YAAY,0BAAD,OAA4BF,EAAuBE,YAAnD,oDACwBF,EAAwBE,YADhD,OAEXC,MAAM,0BAAD,OAA4BH,EAAuBG,MAAnD,mDAC6BH,EAAwBG,MADrD,QAIDE,EACE,CAEJC,QAAS,+BACTC,aAAc,oCACdC,gBAAiB,uCACjBC,UAAW,iCACXC,aAAc,oCACdC,mBAAoB,0CACpBC,sBAAuB,6CACvBC,cAAe,qCACfC,iBAAkB,wCAClBC,WAAY,kCACZC,cAAe,qCACfC,eAAgB,sCAChBC,kBAAmB,yCACnBC,UAAW,iCACXC,aAAc,oCACdC,cAAe,qCACfC,iBAAkB,wCAClBC,WAAY,mCApBVlB,EAsBK,CACPmB,SAAU,gCACVC,QAAS,+BACTC,SAAU,gCACVC,YAAa,mCACbC,aAAc,oCACdC,UAAW,kCAIFC,EAAOC,IAAOC,IAAV,mEAAGD,CAAH,+XAUT1B,EAAWC,QAAWD,EAAWE,aACjCF,EAAWG,gBAAmBH,EAAWI,UACzCJ,EAAWK,aAAgBL,EAAWM,mBACtCN,EAAWO,sBAAyBP,EAAWQ,cAC/CR,EAAWS,iBAAoBT,EAAWU,WAC1CV,EAAWW,cAAiBX,EAAWY,eACvCZ,EAAWa,kBAAqBb,EAAWc,UAC3Cd,EAAWe,aAAgBf,EAAWgB,cACtChB,EAAWiB,iBAAoBjB,EAAWkB,WAG1ClB,EAAcmB,SAAYnB,EAAcoB,QACxCpB,EAAcqB,SAAYrB,EAAcsB,YACxCtB,EAAcuB,aAAgBvB,EAAcwB,UAEzCzB,EAAYD,OAQV8B,EAAwBF,IAAOC,IAAV,oFAAGD,CAAH,uUAU1B1B,EAAWC,QAAWD,EAAWE,aACjCF,EAAWG,gBAAmBH,EAAWI,UACzCJ,EAAWK,aAAgBL,EAAWM,mBACtCN,EAAWO,sBAAyBP,EAAWQ,cAC/CR,EAAWS,iBAAoBT,EAAWU,WAC1CV,EAAWW,cAAiBX,EAAWY,eACvCZ,EAAWa,kBAAqBb,EAAWc,UAC3Cd,EAAWe,aAAgBf,EAAWgB,cACtChB,EAAWiB,iBAAoBjB,EAAWkB,WAG1ClB,EAAcmB,SAAYnB,EAAcoB,QACxCpB,EAAcqB,SAAYrB,EAAcsB,YACxCtB,EAAcuB,aAAgBvB,EAAcwB,WAGvCK,EAAyBH,IAAOC,IAAV,qFAAGD,CAAH,8CACrB1B,EAAWI,UAAeJ,EAAWK,aAClCL,EAAcmB,SAAcnB,EAAcwB,WAE9CM,EAA2BJ,IAAOC,IAAV,uFAAGD,CAAH,8CACvB1B,EAAWM,mBACnBN,EAAWO,sBACAP,EAAcmB,SAAcnB,EAAcwB,WAE9CO,EAAsBL,IAAOC,IAAV,kFAAGD,CAAH,8HAClB1B,EAAWU,WAAgBV,EAAWW,cACnCX,EAAcoB,QAAapB,EAAcqB,SAG/CtB,EAAYD,MACPE,EAAWQ,cAAmBR,EAAWS,iBACtCT,EAAcmB,SAAcnB,EAAcwB,WAIhDQ,EAAmBN,IAAOC,IAAV,+EAAGD,CAAH,oEACf1B,EAAWU,WAAgBV,EAAWW,cACnCX,EAAcsB,YAAiBtB,EAAcuB,cAIjDU,EAAwBP,IAAOC,IAAV,oFAAGD,CAAH,0C,GAKCA,IAAOC,IAAV,kFAAGD,CAAH,8CAClB1B,EAAWY,eAAoBZ,EAAWa,kBACvCb,EAAcmB,SAAcnB,EAAcwB,W,OC/G9CU,EAAiB,CAC5B,CAAEC,GAAI,KAAMC,MAAO,WACnB,CAAED,GAAI,KAAMC,MAAO,WACnB,CAAED,GAAI,KAAMC,MAAO,WACnB,CAAED,GAAI,KAAMC,MAAO,WACnB,CAAED,GAAI,KAAMC,MAAO,WACnB,CAAED,GAAI,KAAMC,MAAO,WACnB,CAAED,GAAI,KAAMC,MAAO,WACnB,CAAED,GAAI,KAAMC,MAAO,WACnB,CAAED,GAAI,KAAMC,MAAO,WACnB,CAAED,GAAI,KAAMC,MAAO,WACnB,CAAED,GAAI,KAAMC,MAAO,WACnB,CAAED,GAAI,KAAMC,MAAO,WACnB,CAAED,GAAI,KAAMC,MAAO,WACnB,CAAED,GAAI,KAAMC,MAAO,WACnB,CAAED,GAAI,KAAMC,MAAO,WACnB,CAAED,GAAI,KAAMC,MAAO,WACnB,CAAED,GAAI,KAAMC,MAAO,WACnB,CAAED,GAAI,KAAMC,MAAO,WACnB,CAAED,GAAI,KAAMC,MAAO,WACnB,CAAED,GAAI,KAAMC,MAAO,WACnB,CAAED,GAAI,KAAMC,MAAO,WACnB,CAAED,GAAI,KAAMC,MAAO,YAGRC,EAAkB,CAC7B,CAAEF,GAAI,IAAKC,MAAO,WAClB,CAAED,GAAI,IAAKC,MAAO,WAClB,CAAED,GAAI,IAAKC,MAAO,WAClB,CAAED,GAAI,IAAKC,MAAO,WAClB,CAAED,GAAI,IAAKC,MAAO,WAClB,CAAED,GAAI,IAAKC,MAAO,WAClB,CAAED,GAAI,IAAKC,MAAO,YAGPE,EAAsB,CAAC,UAAW,WAElCC,EAAsB,CAAC,UAAW,UAAW,WAE7CC,EAAiB,CAAC,UAAW,UAAW,WAExCC,EAAc,gCACdC,EAAgB,gCAOhBC,EAAmBC,YAAH,sFAMhBC,EAAcnB,IAAOC,IAAV,8EAAGD,CAAH,8fAeU/B,EAAuBC,OAKvBD,EAAuBE,YAI9CE,EAAYD,OAyBjBgD,GAnB2BpB,IAAOC,IAAV,oFAAGD,CAAH,wRAanB3B,EAAYD,OAMRiD,YAAH,6FAUCC,EAAkBJ,YAAH,oFAEbE,GAiBFG,GAdavB,IAAOC,IAAV,6EAAGD,CAAH,0HASaA,IAAOwB,KAAV,uFAAGxB,CAAH,uEAKEA,IAAOC,IAAV,sFAAGD,CAAH,mpDASfgB,EAIEA,EAMKS,YA1KM,UA0Ke,KAyCrBA,YAnNM,UAmNe,KA3NjB,UAEI,YA2QnBC,EAAuB1B,IAAOC,IAAV,uFAAGD,CAAH,02BAEhBgB,EAKEA,EA1RW,UAaE,UAbF,kDAQE,UAFJ,WAwUfW,EAAc3B,IAAO4B,OAAV,8EAAG5B,CAAH,sQAhUM,8BAiVnB3B,EAAYH,QAKV2D,EAAyB7B,YAAO2B,GAAV,yFAAG3B,CAAH,mEAtVL,qBA+VjB8B,EAAkB9B,IAAOC,IAAV,kFAAGD,CAAH,uJAaf+B,EAAiBb,YAAH,koBAgBrB,qBAAGc,SAA2B,eAAiB,KA5XvB,+BAoZjBC,EAAejC,IAAOkC,GAAV,+EAAGlC,CAAH,6HAId3B,EAAYH,OAIZG,EAAYF,YAIZE,EAAYD,OAKV+D,EAAmBnC,IAAOoC,EAAV,oFAAGpC,CAAH,gHAGlB3B,EAAYH,OAIZG,EAAYF,YAIZE,EAAYD,OAKViE,EAAarC,IAAO4B,OAAV,8EAAG5B,CAAH,ygBArbO,UAybbgB,EAzba,qBA6djBsB,EAAOtC,IAAOwB,KAAV,wEAAGxB,CAAH,sCAIJuC,EAAevC,IAAOwB,KAAV,gFAAGxB,CAAH,sCCxRVwC,GD6RuBxC,IAAOC,IAAV,0FAAGD,CAAH,yBChfdyC,YAAH,48HAaC1B,EDlBM,UA6Ea,QA5ER,UAcA,UC0JTA,I,wCHxKR2B,GAAa,CACxBC,SAAU,gBACVC,aAAc,yBACdC,wBAAyB,qCACzBC,WAAY,wBACZC,2BAA4B,iCAC5BC,qCACE,4CACFC,0BAA2B,kCAC3BC,wBAAyB,qCACzBC,6BAA8B,2CAC9BC,kBAAmB,gCAGRC,GAAc,CACzBC,UAAW,SACXC,YAAa,4BACbC,UAAW,cACXC,oBAAqB,0BACrBC,cAAe,kBACfC,eAAgB,qBAWLC,GAAM,iDACjBC,QAAS,KACNnB,IACAW,IAXwB,CAC3BS,YAAa,aAGU,CACvBC,QAAS,U,SAWC/F,K,kBAAAA,E,kBAAAA,E,aAAAA,M,KAML,IAEKgG,GAFCC,GAAkCjG,EAAYkG,S,SAE/CF,K,kBAAAA,E,UAAAA,E,mCAAAA,E,mCAAAA,E,+BAAAA,E,gCAAAA,Q,KASL,IAEKG,GAMAC,GARCC,GAAgCL,GAAWM,e,SAE5CH,K,gBAAAA,E,sBAAAA,E,aAAAA,Q,cAMAC,K,kBAAAA,E,wBAAAA,E,iBAAAA,Q,KAML,IAEKG,GAIAC,GAMAC,GAZCC,GAAwCN,GAAeO,Y,SAExDJ,K,uBAAAA,Q,cAIAC,K,OAAAA,E,OAAAA,E,QAAAA,Q,cAMAC,K,mBAAAA,E,yBAAAA,Q,KAKL,IAAMG,GACXH,GAAgBI,WAELC,GAAoCN,GAAaO,GACjDC,GAA0Bb,GAAQc,OI5FlCC,GACL,SAACC,EAA0BC,GAA3B,OACJD,EAAME,QAAQ,UAAmBD,I,wCC8CrC,GAf4B,SAACE,GAAsB,IAAD,YAGtCC,GAFJC,EAAS,IAAIC,gBAAa,CAAC,UAEjC,SAAUF,EAAgBG,GAA1B,kEACE,OADF,SACQF,EADR,uCADAA,EAAOG,YAAYL,GAInB,IACMM,EAAwB,CAAEC,aADX,IAAIC,qBAAkBP,KACGC,UAE9C,MAAO,CACLI,wBACAG,6BAHmCC,wBAAcJ,IAUjDK,CAAoB,i88CAFCC,GADzB,GACEN,sBAC8BO,GAFhC,GAEEJ,6BClDWK,GAAa,SAAC,GAA8B,IAA7BC,EAA4B,qBAEtD,MAAsB,MADAA,EAAKA,EAAKC,OAAS,GAEhCD,EAAO,IAEPA,EAAO,MA6BLE,GAAgB,SAAC,GAAD,IAAEC,EAAF,4BAC3BA,EAhBoB,SAAC,GAA+B,IAA9BA,EAA6B,qBAC7CC,EAAID,EAAQ,GAChBE,EAAIF,EAAQ,IACd,OAAU,IAANC,GAAiB,KAANC,EACN,KAEC,IAAND,GAAiB,KAANC,EACN,KAEC,IAAND,GAAiB,KAANC,EACN,KAEF,KAICC,CAAc,CAACH,KAEV,cACb,IAAQX,EAAiBe,qBAAWT,IAA5BN,aAGR,OAFmC,kBACjCA,EAAagB,UAAb,MAAAhB,EAAY,a,SCvCT,SAASiB,GAAiBC,GAC/B,OAAOA,EAAEC,WAAW3B,QAAQ,wBAAyB,KAGvD,IAAM4B,GAAS,CACb,CAAEC,QAAS,KAAMC,OAAQ,KACzB,CAAED,QAAS,KAAMC,OAAQ,KACzB,CAAED,QAAS,KAAMC,OAAQ,KACzB,CAAED,QAAS,IAAKC,OAAQ,KACxB,CAAED,QAAS,IAAKC,OAAQ,KACxB,CAAED,QAAS,IAAKC,OAAQ,MAGbC,GAAe,SAACC,EAAWC,GACtC,IADiE,EAC3DC,OAA+BC,IAAlBF,EAA8BA,EAAgB,EADA,eAE7CL,IAF6C,IAEjE,2BAA4B,CAAC,IAAlBQ,EAAiB,QAC1B,GAAIJ,GAAKI,EAAMP,QACb,OAAOQ,YAAYL,EAAII,EAAMP,SAASS,QAAQJ,IAAeE,EAAMN,QAJN,8BAOjE,YAAyBK,IAAlBF,EAA8BD,EAAEM,QAAQL,GAAiBD,EAAEL,YAG9DY,GAAa,CACjB,CAAEV,QAAS,KAAMC,OAAQ,eACzB,CAAED,QAAS,KAAMC,OAAQ,eACzB,CAAED,QAAS,KAAMC,OAAQ,YACzB,CAAED,QAAS,IAAKC,OAAQ,WACxB,CAAED,QAAS,IAAKC,OAAQ,WACxB,CAAED,QAAS,IAAKC,OAAQ,aAGbU,GAAmB,SAACR,GAAe,IAAD,iBACzBO,IADyB,IAC7C,2BAAgC,CAAC,IAAtBH,EAAqB,QAC9B,GAAIJ,GAAKI,EAAMP,QACb,OAAOQ,YAAYL,EAAII,EAAMP,SAASS,QAAQ,IAAM,IAAMF,EAAMN,QAHvB,8BAM7C,OAAOE,EAAEL,YAOJ,IAAMc,GAAoB,SAAUC,GACzC,IAAIC,EAAuBD,EAAQf,WAAW3B,QAAQ,SAAU,IAC1D4C,EAAiBC,KAAKC,IAAI,GAAIH,EAAI1B,QACpCyB,EAAU,IACZC,GAAOA,EAAME,KAAKE,MAAML,GAAWE,GAErC,IAAMlB,EAVR,SAASsB,EAAIC,EAAWC,GACtB,OAAOA,EAAIF,EAAIE,EAAGD,EAAIC,GAAKD,EASjBD,CAAIL,EAAeC,GAC7B,MAAO,CACLD,IAAMA,EAAiBjB,EACvBkB,OAAQA,EAASlB,EACjByB,QAAUR,EAAiBjB,EAAI,IAAMkB,EAASlB,IAI3C,SAAS0B,GAAeC,GAE7B,IAAMC,EAASD,EAAIE,SAGnBD,EAAOE,MAAK,SAAUP,EAAGC,GACvB,OAAOD,EAAIC,KAOb,IAAMO,EAAKH,EAAOT,KAAKE,MAAMO,EAAOrC,OAAS,IAEvCyC,EAAKJ,EAAOT,KAAKc,KAAKL,EAAOrC,QAAU,EAAI,KAC3C2C,EAAMF,EAAKD,EAGXI,EAAWH,EAAW,IAANE,EAChBE,EAAWL,EAAW,IAANG,EAQtB,OALuBN,EAAOS,QAAO,SAAUrC,GAC7C,OAAOA,GAAKmC,GAAYnC,GAAKoC,KAO1B,I,GAAME,GAAkB,CAC7B,IACA,IACA,KACA,GACA,KACA,KACA,IACA,MACA,KACA,MACA,KACA,MACA,KACA,MACA,KACA,KACA,KACA,IACA,IACA,M,UC9GEC,GAA0B,KAEf,cACb,IAAMC,EAAUC,cACVC,EAAQC,YACZH,EAAQI,SAASC,SACjBlH,GAAWC,UAETyC,EACFqE,GAASA,EAAMI,OAAN,OAA4BJ,EAAMI,OAAN,OAA4BP,GAMnE,OAJKlE,GRboB,WQaVA,IACbA,EAASiE,GAAgBS,aAAOT,GAAgB/C,OAAS,IAAIU,YAE/DsC,GAAWlE,EACJA,G,oBCbH2E,GAAyB,CAC7BC,MAAOC,OAAOC,WACdC,OAAQF,OAAOG,aAEFpE,2BAA2B,CACxCqE,iBAAkBN,KAGPO,GAAiB,WAC5B,MAAgDC,mBAE9CR,IAFF,oBAAOM,EAAP,KAAyBG,EAAzB,KAiBA,OAbAC,qBAAU,WACR,IAAMC,EAAyBC,MAAS,WACtCH,EAAoB,CAClBR,MAAOC,OAAOC,WACdC,OAAQF,OAAOG,gBAEhB,KAEH,OADAH,OAAOW,iBAAiB,SAAUF,GAC3B,WACLT,OAAOY,oBAAoB,SAAUH,MAEtC,IAEIL,GChBIS,GAAa,kcACbC,GAAW,i9DAElBhL,GAAOC,YAAOG,GAAV,mEAAGH,CAAH,0RACOgB,ERFa,UARF,WQ2BtBgK,GAAahL,IAAOC,IAAV,yEAAGD,CAAH,sEAOViL,GAAOjL,IAAOkL,GAAV,mEAAGlL,CAAH,+OA0BJmL,GAAanL,IAAOkL,GAAV,yEAAGlL,CAAH,kGAeVoL,GAAapL,YAAOqL,MAAV,yEAAGrL,CAAH,2BAIVsL,GAAKtL,IAAOkC,GAAV,iEAAGlC,CAAH,ycAEOuL,GAiBD,qBAAGC,QAAyB,SAAW,IRlGzB,WQsHtBC,GAAWzL,YAAOsL,IAAV,uEAAGtL,CAAH,6CRtHc,WQ2Hf0L,GAAY1L,IAAOwB,KAAV,wEAAGxB,CAAH,oLAWhB2L,GAAU3L,IAAOC,IAAV,sEAAGD,CAAH,8SA6BP4L,GAAgB5L,YAAO2L,IAAV,4EAAG3L,CAAH,8CAMb6L,GAAmB7L,IAAO4B,OAAV,gFAAG5B,CAAH,+QAeLgB,GAOX8K,GAAO9L,IAAOwB,KAAV,oEAAGxB,CAAH,oHAQJ+L,GAAM/L,IAAOwB,KAAV,mEAAGxB,CAAH,kGAOHgM,GAAYhM,YAAO+L,IAAV,yEAAG/L,CAAH,4QAyBTiM,GAAajM,IAAOC,IAAV,0EAAGD,CAAH,qHR/Nc,WQ+WfkM,GArIA,WACb,IAAMrF,EAAYsF,KAClB,EAA4C5B,oBAAkB,GAA9D,oBAAO6B,EAAP,KAAuBC,EAAvB,KACQrC,EAAUM,KAAVN,MACFsC,EAAYC,YAAc3I,GAAOjB,UACjC6J,EAAqBD,YAAc3I,GAAOR,mBAC1CqJ,EAAaF,YAAc3I,GAAON,WAClCoJ,EAAeH,YAAc3I,GAAOE,aACpC6I,EAAWJ,YAAc3I,GAAOG,SAChC6I,EAAgBC,KAChBC,EAAqBF,EACvB1H,GAAiBtB,GAAOR,kBAAmBwJ,GAC3ChJ,GAAOR,kBACL2J,EAA6BH,EAC/B1H,GAAiBtB,GAAOjB,SAAUiK,GAClChJ,GAAOjB,SACX,GAAIqH,GAAS,IAAK,CAChB,IAAMgD,EAEAnG,GADe,IAAnBuF,EACc,iBACA,mBACVa,EAAY,kBAAMZ,GAAkB,IAC1C,OACE,kBAAC,GAAD,KACE,kBAACjB,GAAD,CAAY8B,GAAItJ,GAAOC,SACrB,kBAACoH,GAAD,CACEkC,aAAYtG,EAAU,mBACtBuG,wBAAyB,CAAEC,OAAQvC,OAGvC,kBAACE,GAAD,KACE,kBAAC,GAAD,CACEsC,MAAO,CACLC,UAAWnB,EACP,kBACA,uBAGN,kBAAChB,GAAD,CAAY8B,GAAItJ,GAAOC,SACrB,kBAACsH,GAAD,CACEgC,aAAYtG,EAAU,mBACtBuG,wBAAyB,CAAEC,OAAQvC,OAGvC,kBAACM,GAAD,CAAY8B,GAAIH,GACd,kBAACtB,GAAD,CAAUD,QAASgC,QAAQlB,IAAcE,IACvC,kBAACZ,GAAD,CACEwB,wBAAyB,CAAEC,OAAQtC,MAEpClE,EAAU,8BAGf,kBAACuE,GAAD,CAAYqC,QAASR,EAAWC,GAAIJ,GAClC,kBAACrB,GAAD,CAAUD,QAASgC,QAAQhB,IACxB3F,EAAU,gCAGf,kBAACuE,GAAD,CAAYqC,QAASR,EAAWC,GAAItJ,GAAOL,aACzC,kBAACkI,GAAD,CAAUD,QAASgC,QAAQf,IACxB5F,EAAU,sBAGf,kBAACuE,GAAD,CAAYqC,QAASR,EAAWC,GAAItJ,GAAOG,SACzC,kBAAC0H,GAAD,CAAUD,QAASgC,QAAQb,IACxB9F,EAAU,oBAGf,kBAACuE,GAAD,CAAYqC,QAASR,EAAWC,GAAItJ,GAAOE,aACzC,kBAAC2H,GAAD,CAAUD,QAASgC,QAAQd,IACxB7F,EAAU,yBAIjB,kBAACgF,GAAD,CACE4B,QAAS,kBAAMpB,GAAmBD,IAClCkB,MAAO,CACLI,OAAQtB,EAAiB,SAAO5E,EAChCmG,SAAUvB,EAAiB,aAAU5E,IAGvC,kBAACsE,GAAD,KACE,kBAACC,GAAD,CAAKuB,MAAO,CAAEM,QAASxB,EAAiB,OAAI5E,KAC5C,kBAACwE,GAAD,CACE6B,UAAWzB,EAAiB,mBAAgB5E,IAE9C,kBAACuE,GAAD,CAAKuB,MAAO,CAAEM,QAASxB,EAAiB,OAAI5E,MAE7CwF,KAMT,OACE,kBAAC,GAAD,KACE,kBAAC5B,GAAD,CAAY8B,GAAItJ,GAAOC,SACrB,kBAACoH,GAAD,CACEkC,aAAYtG,EAAU,mBACtBuG,wBAAyB,CAAEC,OAAQvC,OAGvC,kBAACE,GAAD,KACE,kBAACI,GAAD,CAAY8B,GAAIH,GACd,kBAACzB,GAAD,CAAIE,QAASgC,QAAQlB,IAAcE,IACjC,kBAACb,GAAD,CAASyB,wBAAyB,CAAEC,OAAQtC,MAC3ClE,EAAU,8BAGf,kBAACuE,GAAD,CAAY8B,GAAIJ,GACd,kBAACxB,GAAD,CAAIE,QAASgC,QAAQhB,IAClB3F,EAAU,8BACX,kBAAC6E,GAAD,eAGJ,kBAACN,GAAD,CAAY8B,GAAItJ,GAAOL,aACrB,kBAAC+H,GAAD,CAAIE,QAASgC,QAAQf,IAClB5F,EAAU,sBAGf,kBAACuE,GAAD,CAAY8B,GAAItJ,GAAOG,SACrB,kBAACuH,GAAD,CAAIE,QAASgC,QAAQb,IAAY9F,EAAU,oBAE7C,kBAACuE,GAAD,CAAY8B,GAAItJ,GAAOE,aACrB,kBAACwH,GAAD,CAAIE,QAASgC,QAAQd,IAClB7F,EAAU,2B,SCjXZiH,GAAgB,kBAC3B,yBACErN,GANoC,2BAOpC6M,MAAO,CACLK,SAAU,WACVD,OAPsB,KASxBK,UAAW,KAMThO,GAAOC,IAAOC,IAAV,0EAAGD,CAAH,mIAaJgO,GAAUhO,IAAOC,IAAV,6EAAGD,CAAH,8GAgBPiO,GAAYjO,IAAOC,IAAV,+EAAGD,CAAH,wNAGA,qBAAGkO,WAAclE,SACpB,qBAAGkE,WAAc/D,SAnCF,KA8CrBgE,GAAUnO,IAAOC,IAAV,6EAAGD,CAAH,wSA9Cc,KAwHZoO,GA9CD,SAACC,GACb,IAAQC,EAAqCD,EAArCC,SAAUC,EAA2BF,EAA3BE,QAASvE,EAAkBqE,EAAlBrE,MAAOG,EAAWkE,EAAXlE,OAE5BqE,EAAgCC,iBAA2B,MAEjE,EAA8ClE,oBAAkB,GAAhE,oBAAOmE,EAAP,KAAwBC,EAAxB,KAsCA,OApCAlE,qBAAU,WACR,IAAMmE,EAAOC,SAASC,cAAT,WAjGuB,6BAoGvB,OAATF,IACFJ,EAA8BO,QAAUH,EACxCJ,EAA8BO,QAAQC,QACtCL,GAAmB,MAEpB,IAEHlE,qBAAU,WACR,IAAMwE,EAAa,SAACC,GAAD,MACP,WAAVA,EAAEC,KAAoBZ,EAAUA,IAAY,MAE9C,OADAM,SAASjE,iBAAiB,UAAWqE,GAC9B,kBAAMJ,SAAShE,oBAAoB,UAAWoE,MACpD,CAACV,KAIkB,IAApBG,GAC0C,OAA1CF,EAA8BO,QAEtBK,uBACN,kBAAC,GAAD,KACE,kBAACpB,GAAD,CAASP,QAASc,IAClB,kBAACN,GAAD,CAAWC,WAAY,CAAElE,QAAOG,WAC9B,kBAAC,GAAD,KAAUmE,KAGdE,EAA8BO,SAGxB,MC/HNM,GAAShO,YAAH,kHAUNtB,GAAOC,IAAOC,IAAV,mEAAGD,CAAH,2NVGoB,UUAfqP,IAWTC,GAActP,IAAO4B,OAAV,0EAAG5B,CAAH,mKAOAgB,GAMF,YAACqN,GACd,IAAQC,EAAsBD,EAAtBC,SAAaiB,EAArB,aAA8BlB,EAA9B,cACMxH,EAAYsF,KACZqD,EAAcnB,EAAME,QACxB,kBAACe,GAAD,CAAa7B,QAASY,EAAME,SAA5B,UACK1H,EAAU,oBAEb,KACJ,OACE,kBAAC,GAAU0I,EACT,kBAAC,GAAD,KACGjB,EACAkB,KCzCHzP,GAAOC,IAAOC,IAAV,oEAAGD,CAAH,6EACOgB,GAMXiK,GAAOjL,IAAOkL,GAAV,oEAAGlL,CAAH,sIAmBJsL,GAAKtL,IAAOkC,GAAV,kEAAGlC,CAAH,wLX7BoB,WW2CtByP,GAAWzP,IAAOC,IAAV,wEAAGD,CAAH,8JAqBR0P,GAAc1P,IAAO2P,GAAV,2EAAG3P,CAAH,sMAgBX4P,GAAK5P,IAAOwB,KAAV,kEAAGxB,CAAH,0KAgBF6P,GAAa7P,IAAOwB,KAAV,0EAAGxB,CAAH,sCAKV8P,GAAa9P,IAAOwB,KAAV,0EAAGxB,CAAH,8KAqBV+P,GAA2B/P,IAAOC,IAAV,wFAAGD,CAAH,wFAUxBgQ,GAAkBhQ,IAAO4B,OAAV,+EAAG5B,CAAH,2PAKJe,GAaJkP,GAAejQ,IAAOC,IAAV,6EAAGD,CAAH,2GXtJG,WWqNbkQ,GAjDC,WACd,IAAMrJ,EAAYsF,KAClB,EAA0C5B,oBAAkB,GAA5D,oBAAO4F,EAAP,KAAsBC,EAAtB,KAGMC,EAAQF,EACZ,kBAACG,GAAD,CAAYtG,MAAO,QAASG,OAAQ,OAAQoE,QAF3B,kBAAM6B,GAAiB,KAGtC,kBAACH,GAAD,KACE,uBACE7C,wBAAyB,CACvBC,OAAQxG,EAAU,4CAGtB,uBACEuG,wBAAyB,CACvBC,OAAQxG,EAAU,8CAKxB,KACJ,OACE,kBAAC,GAAD,KACE,kBAAC,GAAD,CACEuG,wBAAyB,CAAEC,OAAQvC,IACnCqC,aAAYtG,EAAU,qBAExB,kBAAC,GAAD,KACE,kBAAC4I,GAAD,CAAUrC,wBAAyB,CAAEC,OAAQtC,MAC5ClE,EAAU,2BAEb,kBAAC6I,GAAD,KACE,8BAAO7I,EAAU,+BACjB,kBAAC+I,GAAD,KAAK/I,EAAU,yBACf,kBAACgJ,GAAD,KACE,kBAACC,GAAD,CAAY1C,wBAAyB,CAAEC,OAtMlC,i6BAuMJxG,EAAU,mCAGf,kBAACkJ,GAAD,KACE,kBAACC,GAAD,CAAiBvC,QArCL,kBAAM2C,GAAiB,KAsChCvJ,EAAU,yCAGdwJ,I,kBCjMDE,GAAWC,wBAEXC,GAAoBzK,wBAAyB,CACjD0K,KAAM,KACNC,SAAS,EACTC,MAAO,KACPC,aAAc,GACdC,UAAW,aACXC,cAAc,EACdC,KAAM,KACNC,cAAe,IAGJC,GAAgB,kBAAMtK,qBAAW6J,KAmEvC,IC1GKU,GAQA3M,GDkGC4M,GAA+B,SAAC,GAAkB,IAAhB9C,EAAe,EAAfA,SAC7C,EAAwB/D,mBAAyB,MAAjD,oBAAOmG,EAAP,KAAaW,EAAb,KACA,EAA8B9G,oBAAS,GAAvC,oBAAOoG,EAAP,KAAgBW,EAAhB,KACA,EAA0B/G,mBAAuB,MAAjD,oBAAOqG,EAAP,KAAcW,EAAd,KACA,EAAwChH,mBAAmB,IAA3D,oBAAOsG,EAAP,KAAqBW,EAArB,KACA,EAAwCjH,oBAAS,GAAjD,oBAAOwG,EAAP,KAAqBU,EAArB,KACA,EAAwBlH,mBAAgC,MAAxD,oBAAOyG,EAAP,KAAaU,EAAb,KAGMC,EAAmBlD,iBAAoB,IAAImD,KAGjDnH,qBAAU,WACR,IAAIoH,GAAY,EADF,8CAGd,qCAAAvJ,EAAA,+EAG0BwJ,MAAM,GAAD,OAAIvB,GAAJ,mBAH/B,WAGUwB,EAHV,QAIiBC,GAJjB,sBAI2B,IAAIC,MAAJ,eAAkBF,EAAQG,OAA1B,mBAJ3B,uBAK2CH,EAAQI,OALnD,UAKUC,EALV,QAOQP,EAPR,sDAQIH,EAAQU,GAGyB,IAA7BA,EAASC,SAAS/L,OAX1B,uBAYY,IAAI2L,MAAM,qCAZtB,eAcUK,EAAUF,EAASC,SAAS,GAdtC,UAiB0BP,MAAM,GAAD,OAAIvB,GAAJ,YAAgB+B,EAAQC,OAjBvD,YAiBUC,EAjBV,QAkBiBR,GAlBjB,uBAkB2B,IAAIC,MAAJ,eAAkBO,EAAQN,OAA1B,qBAA6CI,EAAQC,OAlBhF,yBAmBoCC,EAAQL,OAnB5C,WAmBUM,EAnBV,QAqBQZ,EArBR,mDAsBIR,EAAQoB,GACRjB,EAAgBc,EAAQI,QACxBpB,GAAW,GAxBf,sDA0BQO,EA1BR,mDA2BIc,QAAQ/B,MAAM,2BAAd,MACAW,EAAS,gBAAeU,MAAf,KAA6B,IAAIA,MAAMW,OAAO,EAAD,MACtDtB,GAAW,GA7Bf,2DAHc,sBAqCd,OArCc,mCAoCduB,GACO,WAAQhB,GAAY,KAC1B,IAGH,IAAMiB,EAAgBrE,iBAAoB,IAAImD,KAExCmB,EAAgBC,uBACpB,SAACC,GACC,IACEH,EAAc/D,QAAQmE,IAAID,KAC1BtB,EAAiB5C,QAAQmE,IAAID,IAC5BjC,GACAN,EAJH,CASA,IAAM4B,EAAUtB,EAAKqB,SAAS,GAC9B,GAAKC,EAAL,CACA,IAAMnD,EAAG,UAAMmD,EAAQa,QAAd,YAAyBb,EAAQc,MACpCC,EAAarC,EAAKqC,WAAWlE,GACnC,GAAKkE,GAAeA,EAAWJ,GAA/B,CAIA,IAAMK,EAAWD,EAAWJ,GAC5BtB,EAAiB5C,QAAQwE,IAAIN,GAC7BxB,GAAgB,GAEhBK,MAAM,GAAD,OAAIvB,GAAJ,YAAgB+C,IAClBE,MAAK,SAACC,GACL,IAAKA,EAAIzB,GAAI,MAAM,IAAIC,MAAJ,eAAkBwB,EAAIvB,OAAtB,qBAAyCoB,IAC5D,OAAOG,EAAItB,UAEZqB,MAAK,SAACE,GACLrC,GAAQ,SAACsC,GAAD,OAAWA,EAhJ7B,SAAwBC,EAAeC,GAerC,IAbA,IAAMC,EAAgB,IAAIlC,IAAIgC,EAAKG,YAAYC,KAAI,SAACC,GAAD,OAAOA,EAAEC,YACtDC,EAAiBN,EAAIE,YAAY3K,QACrC,SAAC6K,GAAD,OAAQH,EAAcZ,IAAIe,EAAEC,YAIxBE,EAAiB,IAAIxC,IAAIgC,EAAKS,YAAYL,KAAI,SAACM,GAAD,OAAOA,EAAEC,YACvDC,EAAYX,EAAIQ,YAAYjL,QAChC,SAACkL,GAAD,OAAQF,EAAelB,IAAIoB,EAAEC,YAIzBE,EAAgB,eAAQb,EAAKc,YACnC,MAAmCC,OAAOC,QAAQf,EAAIa,YAAtD,eAAmE,CAA9D,2BAAOG,EAAP,KAAiBC,EAAjB,KACEL,EAAiBI,KACpBJ,EAAiBI,GAAY,IAE/B,IAJiE,iBAI5D,2BAAOzB,EAAP,KAAa2B,EAAb,KACEN,EAAiBI,GAAUzB,KAC9BqB,EAAiBI,GAAUzB,GAAQ,IAGrC,IAAM4B,EAAe,IAAIpD,IACvB6C,EAAiBI,GAAUzB,GAAMY,KAAI,SAACiB,GAAD,OAAOA,EAAEf,YAE1CgB,EAAaH,EAAQ3L,QAAO,SAAC6L,GAAD,OAAQD,EAAa9B,IAAI+B,EAAEf,YAC7DO,EAAiBI,GAAUzB,GAA3B,uBACKqB,EAAiBI,GAAUzB,IADhC,aAEK8B,KAXP,MAA8BP,OAAOC,QAAQE,GAA7C,eAAyD,IAkB3D,IADA,IAAMK,EAAgB,eAAQvB,EAAKwB,YACnC,MAA0BT,OAAOC,QAAQf,EAAIuB,YAA7C,eAA0D,CAArD,2BAAOhC,EAAP,KAAaiC,EAAb,KACEF,EAAiB/B,GAGpB+B,EAAiB/B,GAAQ,CACvBkC,aAAa,2BACRH,EAAiB/B,GAAMkC,cACvBD,EAAIC,cAETC,YAAaJ,EAAiB/B,GAAMmC,aAPtCJ,EAAiB/B,GAAQiC,EAY7B,OAAO,2BACFzB,GADL,IAEEG,YAAY,GAAD,oBAAMH,EAAKG,aAAX,aAA2BI,IACtCE,YAAY,GAAD,oBAAMT,EAAKS,aAAX,aAA2BG,IACtCE,WAAYD,EACZW,WAAYD,IAwFoBK,CAAe7B,EAAMD,GAAWC,KAC1Db,EAAc/D,QAAQwE,IAAIN,GAC1BtB,EAAiB5C,QAAQ0G,OAAOxC,GAChCxB,EAAgBE,EAAiB5C,QAAQ2G,KAAO,MAEjDC,OAAM,SAACC,GACNjD,QAAQ/B,MAAR,yBAAgCqC,EAAhC,KAA6C2C,GAC7CjE,EAAiB5C,QAAQ0G,OAAOxC,GAChCxB,EAAgBE,EAAiB5C,QAAQ2G,KAAO,WAGtD,CAAC1E,EAAMN,IAGHI,EAAYkC,uBAChB,SAAC6C,GACKhF,EAAaiF,SAASD,KAG1B9C,EAAcH,OAAOiD,IAGrB9C,EAAc,GAAD,OAAI8C,EAAJ,WAGbrE,GAAgB,SAACmC,GACf,OAAIA,EAAKmC,SAASD,GAAelC,EAC1B,uBAAIA,GAAJ,CAAUkC,IAAOhN,aAG5B,CAACgI,EAAckC,IAIb9B,EAAgB,EACpB,GAAID,GAAQA,EAAKqB,SAAS/L,OAAS,EAAG,CACpC,IAAMgM,EAAUtB,EAAKqB,SAAS,GACxBlD,EAAG,UAAMmD,EAAQa,QAAd,YAAyBb,EAAQc,MACpCC,EAAarC,EAAKqC,WAAWlE,IAAQ,GAErC4G,EAAS,uBACVzD,EAAQI,QADE,aAEViC,OAAOqB,KAAK3C,GAAYjK,QAAO,SAAA1C,GAAC,MAAI,QAAQuP,KAAKvP,MAAIsN,IAAIkC,UAE9DjF,EAAgB8E,EAAUzP,OAAS,EAAI4B,KAAKiO,IAAL,MAAAjO,KAAI,aAAQ6N,IAAa,EAGlE,OACE,kBAACtF,GAAkB2F,SAAnB,CACEC,MAAO,CAAE3F,OAAMC,UAASC,QAAOC,eAAcC,YAAWC,eAAcC,OAAMC,kBAE3E3C,K,SCjPK6C,O,mBAAAA,I,aAAAA,I,iBAAAA,I,eAAAA,I,eAAAA,I,cAAAA,Q,cAQA3M,O,WAAAA,I,WAAAA,I,YAAAA,Q,KAML,IAEK8R,GAFCC,GAAgCpF,GAAWqF,K,SAE5CF,K,mBAAAA,E,uBAAAA,Q,KAKL,IAiBKG,GAQAC,GAQAC,GAwLAC,GAzNCC,GACXP,GAAgBQ,W,SAgBNL,K,UAAAA,E,YAAAA,E,YAAAA,E,UAAAA,E,eAAAA,Q,cAQAC,K,UAAAA,E,UAAAA,E,aAAAA,Q,cAQAC,K,cAAAA,E,gBAAAA,E,gBAAAA,E,WAAAA,Q,cAwLAC,K,8BAAAA,E,6BAAAA,E,yCAAAA,E,kCAAAA,E,iCAAAA,E,6CAAAA,E,iBAAAA,Q,KAUL,I,qBC/OKG,GAKAC,GD0OCC,GAAmB,SAACZ,GAAD,OAC9BA,IAAUO,GAAUM,kBACpBb,IAAUO,GAAUO,cACpBd,IAAUO,GAAUQ,yBACpBf,IAAUO,GAAUS,oBACpBhB,IAAUO,GAAUU,gBACpBjB,IAAUO,GAAUW,2BACpBlB,IAAUO,GAAUY,QElNhBC,GAA2C,CAC/C,SAAY,WACZ,MAAS,SACT,MAAS,sBAGLC,GAAwB,WAC5B,MAA0CxG,KAA5ByG,EAAd,EAAQjH,KAAeC,EAAvB,EAAuBA,QAASC,EAAhC,EAAgCA,MAEhC,IAAK+G,EACH,MAAO,CAAEhH,UAASC,QAAOF,UAAMlJ,GAkCjC,MAAO,CAAEmJ,SAAS,EAAOC,WAAOpJ,EAAWkJ,KADb,CAAEkH,UA7BZC,MAAMC,KAAK,IAAIlG,IAAI+F,EAAQI,QAAQ/D,KAAI,SAACiB,GAAD,OAAOA,EAAE+C,gBACtBhE,KAAI,SAACiE,GAAD,MAAS,CACzDC,UAAWD,EACXE,KAAMF,EAAGG,cACTC,YAAaZ,GAAiBQ,IAAOA,EACrCxX,GAAIwX,MAwBqCK,OApBfX,EAAQI,QAAQ/D,KAAI,SAACiB,GAAD,MAAQ,CACtD7P,OAAQ6P,EAAEJ,SACV0D,KAAMtD,EAAEsD,KACRL,UAAWjD,EAAE+C,WACbvX,GAAIwU,EAAEJ,SACN2D,SAAU,KACVC,YAAa,KACbC,YAAa,KACb/T,WAAY,KACZgU,MAAO,KACPC,YAAa,KACbC,OAAQ,KACRC,cAAe,KACfC,gBAAiB,KACjBC,SAAUrC,GAAasC,UAM0BlB,QAFpB,MAM3BmB,GAAqB,SAACzY,GAAD,wBAA2CA,IAEzD0Y,GAAqC,SAChDzI,GAEA,IAAM0I,EAA0B,GAChC,QAAa5R,IAATkJ,EAAoB,CACtB,IAAQ4H,EAAsB5H,EAAtB4H,OAAQV,EAAclH,EAAdkH,UAChBwB,EAASC,KAAT,MAAAD,EAAQ,aACHxB,EAAU5D,KAAI,gBAAGqE,EAAH,EAAGA,YAAaH,EAAhB,EAAgBA,UAAhB,MAAiC,CAChDzX,GAAIyY,GAAmBhB,GACvBoB,MAAuB,OAAhBjB,EAAuBA,EAAc,UAC5CkB,UAAW,KACX1D,MAAO,SALH,oBAOHyC,EAAOtE,KAAI,YAAsC,IAA3BvT,EAA0B,EAAlC2E,OAAYmT,EAAsB,EAAtBA,KAAML,EAAgB,EAAhBA,UACjC,MAAO,CACLzX,KACA6Y,MAAgB,OAATf,EAAgBA,EAAO,kBAAoB9X,EAClD8Y,UAAWL,GAAmBhB,GAC9BrC,MAAO,WAKf,OAAOuD,GAaII,GAAwC,WACnD,MAA+C9B,KAAvC/G,EAAR,EAAQA,QAASC,EAAjB,EAAiBA,MAAa6I,EAA9B,EAAwB/I,KAExB,MAAO,CAAEC,UAASC,QAAOF,KADZyI,GAAmCM,KAInC/B,MCnITgC,GAAO1Z,IAAOC,IAAV,yEAAGD,CAAH,0FAGC,gBAAG0V,EAAH,EAAGA,KAAH,OAAeA,GALT,MAML,gBAAGA,EAAH,EAAGA,KAAH,OAAeA,GANV,MASXiE,GAAYtY,YAAH,2EAMTuY,GAAY5Z,IAAOC,IAAV,8EAAGD,CAAH,sPAOJ,gBAAG0V,EAAH,EAAGA,KAAH,OAAeA,EAAc,GAAPA,EAAamE,MAClC,gBAAGnE,EAAH,EAAGA,KAAH,OAAeA,EAAc,GAAPA,EAAamE,MACnC,gBAAGnE,EAAH,EAAGA,KAAH,OAAeA,EAAc,GAAPA,EAAamE,KACnC,gBAAGnE,EAAH,EAAGA,KAAH,OAAeA,EAAc,GAAPA,EAAamE,KACzC,gBAAGC,EAAH,EAAGA,WAAH,OAAqBA,GAA0B,YAEtCH,IACG,gBAAGG,EAAH,EAAGA,WAAH,OAAqBA,GAA0B,aAI3DC,GAAa/Z,YAAO4Z,IAAV,+EAAG5Z,CAAH,6BAGVga,GAAcha,YAAO4Z,IAAV,gFAAG5Z,CAAH,4BAGXia,GAAaja,YAAO4Z,IAAV,+EAAG5Z,CAAH,6BAqBDka,GAZM,SAAC7L,GACpB,IAAQ3N,EAAgB2N,EAAhB3N,MAAOgV,EAASrH,EAATqH,KACf,OACE,kBAACgE,GAAD,CAAMhE,KAAMA,GACV,kBAACqE,GAAD,CAAYD,WAAYpZ,EAAOgV,KAAMA,IACrC,kBAACsE,GAAD,CAAaF,WAAYpZ,EAAOgV,KAAMA,IACtC,kBAACuE,GAAD,CAAYH,WAAYpZ,EAAOgV,KAAMA,IACrC,kBAACkE,GAAD,CAAWE,WAAYpZ,EAAOgV,KAAMA,MCtDpC3V,GAAOC,IAAOC,IAAV,uEAAGD,CAAH,qEAOK,eAMR,IALLma,EAKI,EALJA,gBACAzZ,EAII,EAJJA,MAKMmG,EAAYsF,KACZiO,EACFvT,EADYsT,GAEF,8BACd,OAAO,kBAAC,GAAD,CAAM7M,MAAO,CAAE5M,UAAU0Z,I,mBHbtBrD,K,sBAAAA,E,iBAAAA,Q,cAKAC,K,cAAAA,E,aAAAA,Q,KAKZ,IAgJIqD,GIlEQC,GJzENva,GAAOC,IAAOwB,KAAV,iNAWJ+Y,GAAmBva,IAAOwB,KAAV,qPdhBQ,WcoCxBgZ,GAAcxa,IAAOC,IAAV,ivBAUb,qBAAGwa,gBACe,0BAA4B,qBd/CpB,WcmDR,qBAAGC,SACV1D,GAAa2D,KdpDE,UcoDsB,UACzC,qBAAGD,SACC1D,GAAa2D,KAAO,OdtDL,acwDxB,qBAAGD,SACQ1D,GAAa2D,KdzDA,UAbE,YcaE,iCACK,gCACZ,gCADY,iCAoFjCC,GAAiB5a,IAAOC,IAAV,gKAML,qBAAG4a,YACA9D,GAAgB+D,OAC1B,sBACA,wBACJ,qBAAGD,YAA+B9D,GAAgB+D,OAAS,UAAY,MAGrEC,GAAQ/a,IAAOC,IAAV,0nBAeA,qBAAG4a,YACM9D,GAAgB+D,OAAS,OAAS,OAK9C,qBAAGJ,SACQ1D,GAAa2D,KdxHF,UAbE,acsI1B,qBAAGE,YACW9D,GAAgB+D,OAAS,6BAA+B,MAWpE,qBAAGJ,SACQ1D,GAAa2D,KdtIF,UcsI0B,UAClD,qBAAGE,YACW9D,GAAgB+D,OAAS,6BAA+B,MAItEE,GAAchb,IAAOwB,KAAV,+CA8JFyZ,GA9IC,SAAC5M,GACf,IACE6M,EAOE7M,EAPF6M,YACA5M,EAMED,EANFC,SACA6M,EAKE9M,EALF8M,OACAC,EAIE/M,EAJF+M,MACAC,EAGEhN,EAHFgN,gBACAC,EAEEjN,EAFFiN,eACAC,EACElN,EADFkN,MAEIC,EAAS/M,iBAA8B,MACvCgN,EAAYhN,iBAA8B,MAC1CD,EAAgCC,iBAA2B,MAEjE,EAA4ClE,oBAAkB,GAA9D,oBAAOmR,EAAP,KAAuBC,EAAvB,KACA,EAA4BpR,mBAAwC,CAClEvC,IAAK,EACL4T,KAAM,IAFR,oBAAOC,EAAP,KAAeC,EAAf,KAKAC,2BAAgB,WACd,IAAMnN,EAAOC,SAASC,cAAT,WLhMuB,6BKmMpCN,EAA8BO,QAAUH,EACxC,IAAMoN,EAAaP,EAAU1M,QACvBkN,EAAUT,EAAOzM,QACvB,GAAmB,OAAfiN,GAAmC,OAAZC,EAAkB,CAC3C,IAAQjU,EAAc6T,EAAd7T,IAAK4T,EAASC,EAATD,KAEPM,EAAgBF,EAAWG,aAC3BC,EAAeJ,EAAWK,YAC5BC,EAAkBtU,EAHC,GAGsBkU,EACzCK,EAAmBX,EAAOQ,EAAe,EACzCE,EAAkB,GAAKjB,IAAoBtE,GAAgB+D,QAE7DwB,EAAkBtU,EAAMwU,GACxBR,EAAWS,UAAUlJ,IA/LF,kCAiMnByI,EAAWS,UAAUC,OAjMF,iCAmMjBH,EAZmB,KAarBA,EAbqB,IAgBrBA,GAAoBH,EAhBC,IAiBrBnS,OAAOC,aAGPqS,EAAmBtS,OAAOC,WAAakS,EApBlB,IAsBnBnS,OAAOC,WAAa0R,EAAOY,GAE7BR,EAAWS,UAAUlJ,IAjNK,kCAmN1ByI,EAAWS,UAAUC,OAnNK,kCAqN5BV,EAAW1O,MAAMqP,QAAjB,0BACUJ,EADV,6BAESD,EAFT,uCAMD,CAACZ,EAAgBG,EAAQR,IAC5B,IAWIuB,EAXEC,EAA6BrO,EAA8BO,QAE3D+N,EAAQxB,EAAiB,KAC7B,kBAACV,GAAD,CACEC,UAAWQ,EACXxN,UAhOiC,iCAkOjC,kBAACkN,GAAD,CAAOL,OAAQU,EAAOP,UAAWQ,KAUnCuB,GAJmB,IAAnBlB,GAC+B,OAA/BmB,GACA3B,EAEU6B,IAAS3N,aACjB,kBAACoL,GAAD,CACEwC,IAAKvB,EACLf,OAAQU,EACRX,gBAAiBa,GAEhBJ,EACA4B,GAEHD,GAGQ,KAGZ,IAAMI,EAAe,SAAC/N,GACpB4M,EAAU,CAAE9T,IAAKkH,EAAEgO,QAAStB,KAAM1M,EAAEiO,UAChC5B,EACFlB,GAAU+C,YAAW,kBAAMzB,GAAkB,KAAOJ,GAEpDI,GAAkB,IAGhB0B,EAAe,SAACnO,GACpB4M,EAAU,CAAE9T,IAAKkH,EAAEgO,QAAStB,KAAM1M,EAAEiO,UACpCG,aAAajD,IACbsB,GAAkB,IAEd4B,EAAc,SAACrO,GACnB4M,EAAU,CAAE9T,IAAKkH,EAAEgO,QAAStB,KAAM1M,EAAEiO,WAGtC,YAAiB3V,IAAb8G,EAEA,kBAAC0M,GAAD,CACEiC,aAAcA,EACdM,YAAaA,EACbF,aAAcA,EACdL,IAAKxB,EACLlO,MAAO,CAAE6N,WAER7M,EACAsO,GAKH,kBAAC,GAAD,CACEK,aAAcA,EACdM,YAAaA,EACbF,aAAcA,EACd/P,MAAO,CAAE6N,UACT6B,IAAKxB,GAEL,kBAACjB,GAAD,CAAkBnN,wBAAyB,CAAEC,OA/SlC,4OAgTVuP,IKjTHY,GAAWxd,IAAO5B,MAAV,4FAAG4B,CAAH,+JAaRyd,GAAYzd,IAAO5B,MAAV,6FAAG4B,CAAH,uJnBfU,WmB4BnB0d,GAAc1d,IAAOC,IAAV,+FAAGD,CAAH,qBACAgB,GAGX2c,GAAiB,SAAC,GAQjB,IAPLC,EAOI,EAPJA,SACAxC,EAMI,EANJA,MACAyC,EAKI,EALJA,MAMMC,EAAY,IAAIC,OAAOF,EAAMxY,QAAQ,YAAa,IAAI2Y,OAAQ,MAC9DnX,EAAYsF,KACZ8R,EAAOpX,EAAU,8BAA+B,CAAE+W,aAClDvQ,EAASxG,EAAU,8BAA+B,CAAE+W,aAAYvY,QACpEyY,GACA,SAACrU,GAAD,6DACkDA,EADlD,gBAGI1J,EAAOqb,IAAUpE,GAAa2D,KAAO6C,GAAWC,GACtD,OACE,kBAAC,GAAD,CACEvC,YAAa,kBAACwC,GAAD,KAAcO,GAC3B1C,MAAO,IACPH,MAAOA,GAEP,kBAACrb,EAAD,CAAMqN,wBAAyB,CAAEC,cAKxB,YAAC+N,GAAD,OACb,SAAC3R,EAAiB8F,EAAgBsO,GAChC,IAAMK,EAAQzU,EAAMnD,OAASiJ,EAAKjJ,OAClC,GACImD,EAAMnD,SAAW4X,GAAyB,IAAhB3O,EAAKjJ,QAC/BiJ,EAAKjJ,SAAW4X,GAA0B,IAAjBzU,EAAMnD,OAKjC,OAAO,KAHP,IAAMsX,EAAW,uBAAInU,GAAJ,aAAc8F,IAAM4O,KAAK,MAC1C,OAAO,kBAAC,GAAD,CAAgBP,SAAUA,EAAUxC,MAAOA,EAAOyC,MAAOA,MC1BvDO,OAAMC,MA5BH,SAAChQ,GACjB,IACEqC,EAMErC,EANFqC,KACA4N,EAKEjQ,EALFiQ,eACAC,EAIElQ,EAJFkQ,aACAC,EAGEnQ,EAHFmQ,gBACAC,EAEEpQ,EAFFoQ,YACAC,EACErQ,EADFqQ,cAEI7X,EAAYsF,KAClB,OACE,kBAAC,KAAD,CACEuE,KAAMA,EACNiO,cAAe9X,EAAU,yBACzB+X,SAAU,SAACC,GAAD,OAASP,EAAeO,IAClCC,QAASP,EACTC,gBAAiBA,EACjBO,cAAeN,EACfO,wBAAyB,CAAC,KAC1BC,uBAAwBpY,EAAU,8BAClCqY,WAAW,EACXC,kBAAmB,KACnBT,cAAeA,EACfU,yBAA0BA,GAAyBpI,GAAa2D,WCvBhE5a,GAAOC,IAAOC,IAAV,gEAAGD,CAAH,iIAUJqf,GAAcrf,IAAOC,IAAV,uEAAGD,CAAH,6CAMXsf,GAAkBtf,IAAOC,IAAV,2EAAGD,CAAH,oqDAGJgB,EAIEA,ErB/BS,qBqB+HtBue,GAAmBvf,IAAOC,IAAV,4EAAGD,CAAH,wOAchBwf,GAAaxf,IAAOC,IAAV,sEAAGD,CAAH,uFAQVyf,GAAYzf,IAAO4B,OAAV,qEAAG5B,CAAH,8NrBjJe,UqBuJbgB,ErBvJa,WqBiKxB0e,GAAc1f,IAAOC,IAAV,uEAAGD,CAAH,sMAQAgB,GAwHF6C,GA7GC,WACd,IAqBI8b,EArBJ,EAAiCjI,KAAzB/G,EAAR,EAAQA,QAASC,EAAjB,EAAiBA,MAAOF,EAAxB,EAAwBA,KAClBnH,EAAUC,cACV3C,EAAYsF,KAEZyT,EAAmB5M,uBACvB,SAAC6B,GACC,IAAM1P,EAAQvB,GAAOhB,aAAayC,QAAQ,UAAWwP,GACrDtL,EAAQ8P,KAAKlU,KAEf,CAACoE,IAGGqV,EAAW5L,uBACf,SAAC6L,GACmB,MAAdA,EAAIhJ,OACN+J,EAAiBf,EAAIpe,MAGzB,CAACmf,IAIH,IAAgB,IAAZjP,EACFgP,EACE,kBAACJ,GAAD,KACE,kBAAC,GAAD,MACC1Y,EAAU,4BAFb,YAKG,QAAcW,IAAVoJ,EACT+B,QAAQ/B,MAAMA,GACd+O,EACE,kBAACJ,GAAD,KACE,kBAACM,GAAD,CAAanf,MAAO,gBAGnB,QAAa8G,IAATkJ,EAAoB,CAC7B,IAAMoP,EAAa3G,GAAmCzI,GAAMsD,KAAI,SAAC+L,GAAD,mBAAC,eAC5DA,GAD2D,IAE9Dpb,WAAY,EACZqb,IAAK,OAEPL,EACE,kBAAC,GAAD,CACEjP,KAAMoP,EACNxB,eAAgBM,EAChBL,aAAc,aACdC,gBAAiB,aACjBC,YAAa,KACbC,eAAe,SAInBiB,EAAY,qCAGd,OACE,kBAAC,GAAD,KACE,kBAACN,GAAD,KACE,kBAAC,GAAD,MACA,kBAACC,GAAD,KAAkBK,GAClB,kBAACH,GAAD,KACE,kBAACC,GAAD,CAAWhS,QAAS,kBAAMmS,EAAiB,4BAA3C,4BAGA,kBAACH,GAAD,CAAWhS,QAAS,kBAAMmS,EAAiB,sBAA3C,cAGA,kBAACH,GAAD,CAAWhS,QAAS,kBAAMmS,EAAiB,oBAA3C,YAGA,kBAACH,GAAD,CAAWhS,QAAS,kBAAMmS,EAAiB,iBAA3C,WAKJ,kBAACF,GAAD,gBACW,IACT,uBACEO,KAAK,sCACLC,OAAO,SACPC,IAAI,uBAHN,cAMK,IARP,mEAUY,IACV,uBACEF,KAAK,2BACLC,OAAO,SACPC,IAAI,uBAHN,WAMK,IAjBP,IAkBI,IACF,uBACEF,KAAK,8BACLC,OAAO,SACPC,IAAI,uBAHN,SAnBF,O,oBC1QOC,GAA0BniB,EAAuBG,MAEjDiiB,GAAuBrgB,IAAO4B,OAAV,kFAAG5B,CAAH,kgBtBJR,UsBYRgB,EtBZQ,UsBCY,KA8Bdof,GA/BC,KAwCXE,GAAUtgB,IAAOwB,KAAV,qEAAGxB,CAAH,0StBxCK,UsBCY,KA2DdogB,GA5DC,KAuEXG,GAAOvgB,IAAOwB,KAAV,kEAAGxB,CAAH,0KAtEoB,KA6E8BogB,GAC/D,EAImBA,IAKVI,GAAWxgB,YAAOsgB,IAAV,sEAAGtgB,CAAH,iFAvFgB,MAiGxBygB,GAAiBzgB,IAAOC,IAAV,4EAAGD,CAAH,qFACVgB,GC1FF0f,GAVQ,WACrB,IAAMtb,EAASyH,KACf,EAA0B6K,KAAlB/G,EAAR,EAAQA,QAASD,EAAjB,EAAiBA,KAKjB,MAAO,CAAEC,UAASgQ,KAFhBvb,GAAUsL,EAAOA,EAAK4H,OAAOsI,MAAK,SAACC,GAAD,OAAOA,EAAEzb,SAAWA,UAAUoC,ILHvDsZ,GAAgC,CAC3CC,IAAK9iB,EAAuBG,MAAQ,EACpC+X,IAAK,MAGM6K,GAAuB,wCAEpBF,GAA8BC,IAFV,kCAGpBD,GAA8B3K,IAHV,SAMvB8K,GAAgB,mCAEhBC,GAAkBlhB,YAAOqC,GAAV,6EAAGrC,CAAH,+wBAKjBghB,GlBJmB,UkBgCvBC,GlBhCuB,UkBsDrBA,K,SAwBG3G,K,oBAAAA,E,wBAAAA,E,mBAAAA,Q,KAML,I,YM9DK6G,GN8DCC,GAAyB,IAAIC,IAAI,CAC5C,CAAC/G,GAAoBgH,IAAK,WAC1B,CAAChH,GAAoBiH,OAAQ,WAC7B,CAACjH,GAAoBkH,KAAM,aAGhBC,GAAyB,SACpCzI,GAEA,IAAI0I,EAYJ,OAXI1I,IAAarC,GAAasC,MAC5ByI,EAA8BpH,GAAoBkH,KAElDxI,IAAarC,GAAagL,QAC1B3I,IAAarC,GAAaiL,OAE1BF,EAA8BpH,GAAoBiH,OACzCvI,IAAarC,GAAakL,MACnCH,EAA8BpH,GAAoBgH,KAG7CI,GO5FHI,GAAgB9hB,YAAOsgB,IAAV,gFAAGtgB,CAAH,sJAOH,qBAAG+hB,cAGL,qBAAGA,cAGH,qBAAGA,aHxCoB,MGkD/BC,GAAqBhiB,YAAO8hB,IAAV,qFAAG9hB,CAAH,2GHlDa,MG6D/BqP,GAAShO,YAAH,kHAUNtB,GAAOC,IAAOC,IAAV,uEAAGD,CAAH,0RAGKqP,GzB3EU,WyB0FnB4S,GAAQjiB,IAAOkL,GAAV,wEAAGlL,CAAH,2KzB1Fc,WyBqGnBkiB,GAAOliB,IAAOoC,EAAV,uEAAGpC,CAAH,sEzB9FkB,UACK,WyB0G3BsP,GAActP,IAAO4B,OAAV,8EAAG5B,CAAH,mKzBlHQ,UyByHRgB,GAMXmhB,GAAoBniB,YAAOugB,IAAV,oFAAGvgB,CAAH,wBAYjBoiB,IAPapiB,IAAOC,IAAV,6EAAGD,CAAH,4FAOCA,IAAOC,IAAV,2EAAGD,CAAH,6EAqFCqiB,GA9EQ,WACrB,IAAMxb,EAAYsF,KACZmW,EAAc5B,KACpB,EAAkCnW,oBAAkB,GAApD,oBAAOgY,EAAP,KAAkBC,EAAlB,KACMnY,EAAmBC,KAErBmY,EzBxJmB,UyByJnBC,EAAqB,GACrBC,EAAsB,GAC1B,GAAIL,GAAeA,EAAY3B,KAAM,CACnC,IAAQ3H,EAAasJ,EAAY3B,KAAzB3H,SACF4J,EAAmBnB,GAAuBzI,GAChDyJ,EAAYrB,GAAkByB,IAAID,GAE9BA,IAAqBtI,GAAoBkH,MAC3CkB,EAAa7b,EAAU,6CACvB8b,EAAc9b,EAAU,sCACf+b,IAAqBtI,GAAoBiH,QAClDmB,EAAa7b,EAAU,+CACvB8b,EAAc9b,EAAU,wCACf+b,IAAqBtI,GAAoBgH,MAClDoB,EAAa7b,EAAU,4CACvB8b,EAAc9b,EAAU,qCAI5B,IAAMwJ,EAAQkS,EACZ,kBAAC,GAAD,CAAOhU,QAAS,kBAAMiU,GAAa,IAAQxY,MAAO,QAASG,OAAQ,SACjE,kBAAC,GAAD,KACE,kBAAC8X,GAAD,KACE,kBAACD,GAAD,CACE5U,wBAAyB,CAAEC,OAvJtB,ygBAwJL0U,WAAYU,IAEb5b,EAAU,6BALb,MAK8C6b,GAE9C,kBAACR,GAAD,CAAM9U,wBAAyB,CAAEC,OAAQsV,KACzC,kBAACT,GAAD,KACGrb,EAAU,qCADb,OAGE,kBAAC,KAAD,CAAMqG,GAAItJ,GAAOG,SACd8C,EAAU,yCAGf,kBAACqb,GAAD,CACE9U,wBAAyB,CACvBC,OAAQxG,EAAU,8BAGtB,kBAAC,GAAD,CAAa4G,QAAS,kBAAM+U,GAAa,KAAzC,YAGF,KAEJ,OACE,oCACE,kBAAC,GAAD,CACEtH,YACE7Q,EAAiBL,MH3MU,MG4M3BK,EAAiBL,MAAQoW,GACvB,kBAACK,GAAD,KACG5Z,EAAU,8BAEX,KAENsU,OAAO,UACPE,gBAAiBtE,GAAgB+D,QAEjC,kBAACuF,GAAD,CAAsB5S,QAAS,kBAAM+U,GAAa,KAChD,kBAACJ,GAAD,CAAU9U,MAAO,CAAEwV,gBAAiBL,KACpC,kBAACN,GAAD,KAAoBO,KAGvBrS,I,mDCrNDhB,GAAShO,YAAH,kHAUNtB,GAAOC,IAAOC,IAAV,0EAAGD,CAAH,6W1BDoB,U0BIfqP,IAqBTpE,GAAOjL,IAAO+iB,IAAV,0EAAG/iB,CAAH,kBAIJugB,GAAOvgB,IAAOC,IAAV,0EAAGD,CAAH,+DAMJgjB,GAAmBhjB,IAAO4B,OAAV,sFAAG5B,CAAH,uL1B1CW,UADL,W0B0DtBijB,GAAgBjjB,IAAO4B,OAAV,mFAAG5B,CAAH,oIAUbkjB,GAAgBljB,IAAOmjB,MAAV,mFAAGnjB,CAAH,kEAObojB,GAAWpjB,IAAOwG,MAAV,8EAAGxG,CAAH,uBAKRqjB,GAAkB,wCACpBC,IAAwB,EA6DbC,GAvDQ,SAAC,GAA2B,IAAzBC,EAAwB,EAAxBA,WAClBC,EAAsBC,SAC1BC,aAAaC,QAAQP,IACrB,IAEF,EAAkC9Y,mBAChCsZ,MAAMJ,IAAwBA,EAAsB,GADtD,oBAAOlB,EAAP,KAAkBC,EAAlB,KAGA,EAA8BjY,oBAAkB,GAAhD,oBAAOuZ,EAAP,KAAgBC,EAAhB,KACMC,EAAa,WAGjB,GAFAxB,GAAa,GACbc,IAAwB,EACpBQ,EACFH,aAAaM,QAAQZ,GAAiB,SACjC,CACL,IAAMa,EAAkBL,MAAMJ,GAC1B,EACAA,EAAsB,EAC1BE,aAAaM,QAAQZ,GAAiBa,EAAgBld,cAW1D,OAAIub,IAAce,GAEd,kBAAC,GAAD,CAAO/U,QAASyV,EAAYha,MAAO,QAASG,OAAQ,SAClD,kBAAC,GAAD,KACE,kBAAC,GAAD,CAAMga,IAAKC,OACX,kBAAC,GAAD,oCACA,kBAACpB,GAAD,CAAkBvV,QAbV,WACd+U,GAAa,GACbc,IAAwB,EACxBK,aAAaM,QAAQZ,GAAiB,KACtCG,MASM,iCAGA,kBAACP,GAAD,CAAexV,QAASuW,GAAxB,WACA,kBAACd,GAAD,CAAemB,QAAQ,qCACrB,kBAACjB,GAAD,CACEkB,KAAK,WACL7jB,GAAG,oCACHqjB,QAASA,EACTS,SAAU,SAACrV,GAAD,OAAO6U,EAAW7U,EAAEgR,OAAO4D,YALzC,yBAaD,MChJHvD,GAAOvgB,IAAOC,IAAV,mDAGGukB,GACC,8BADDA,GAEI,kCAFJA,GAGW,0CAHXA,GAIA,8BAJAA,GAKI,qCALJA,GAMA,6BANAA,GAOS,sCAPTA,GAQM,oCARNA,GASE,+BATFA,GAUU,yCAVVA,GAWE,+BAGTC,GAAgB,CACpB,CACEvE,OAAQ,IAAMsE,GAEdE,QACE,kBAAC,GAAD,0IAKFC,eAAe,EACfC,UAAW,cAEb,CACE1E,OAAQ,IAAMsE,GAEdE,QACE,kBAAC,GAAD,8GAKFC,eAAe,EACfC,UAAW,cAEb,CACE1E,OAAQ,IAAMsE,GAEdE,QACE,kBAAC,GAAD,qFAKFC,eAAe,EACfC,UAAW,cAEb,CACE1E,OAAQ,IAAMsE,GAEdE,QACE,kBAAC,GAAD,gEAEFC,eAAe,EACfC,UAAW,cAEb,CACE1E,OAAQ,IAAMsE,GAEdE,QACE,kBAAC,GAAD,0FAKFC,eAAe,EACfC,UAAW,cAEb,CACE1E,OAAQ,IAAMsE,GAEdE,QACE,kBAAC,GAAD,2FAKFC,eAAe,EACfC,UAAW,cAEb,CACE1E,OAAQ,IAAMsE,GAEdE,QACE,kBAAC,GAAD,+HAKFC,eAAe,EACfC,UAAW,cAEb,CACE1E,OAAQ,IAAMsE,GAEdE,QACE,kBAAC,GAAD,oNAMFC,eAAe,EACfC,UAAW,cAEb,CACE1E,OAAQ,IAAMsE,GAEdE,QACE,kBAAC,GAAD,+FAKFC,eAAe,EACfC,UAAW,cAEb,CACE1E,OAAQ,IAAMsE,GAEdE,QAAS,kBAAC,GAAD,6DACTC,eAAe,EACfC,UAAW,cAEb,CACE1E,OAAQ,IAAMsE,GAEdE,QACE,kBAAC,GAAD,qEAEFC,eAAe,EACfC,UAAW,iBAqDAC,GA3CK,SAACxW,GACnB,IAAQyW,EAA6BzW,EAA7ByW,IAAKvW,EAAwBF,EAAxBE,QAASiV,EAAenV,EAAfmV,WAQhBuB,EAAgBN,GAAMrb,QAAO,YAAiB,IAAd8W,EAAa,EAAbA,OAC9B8E,EAAUnW,SAASC,cAA2BoR,GACpD,OAAmB,OAAZ8E,GAA6C,OAAzBA,EAAQC,gBAGrC,OACE,oCACE,kBAAC,KAAD,CACER,MAAOM,EACPD,IAAKA,EACLI,YAAY,EACZC,cAAc,EACdC,iBAAiB,EACjBC,OAAQ,CACNC,KAAM,OACNC,MAAO,QACPC,KAAM,SACNC,KAAM,OACNC,KAAM,QAERC,OAAQ,CACNC,QAAS,CACPC,a3B9KgB,U2B+KhBnY,OAAQ,MAGZoY,SAjCW,SAACtf,GAChB,IAAQuf,EAAWvf,EAAXuf,OACO,UAAXA,GAAiC,UAAXA,GACxBxX,KA+BEyX,aAAc,CAAEC,kBAAkB,KAEpC,kBAAC,GAAD,CAAgBzC,WAAYA,MC7InB0C,GAlCD,WACZ,IAAM7b,EAAmBC,KACnBzD,EAAYsF,KAClB,EAAsC5B,oBAAkB,GAAxD,oBAAO4b,EAAP,KAAoBC,EAApB,KACA,OACE,oCACE,kBAAC,GAAD,CACElL,YACE7Q,EAAiBL,MNpBU,MMqB3BK,EAAiBL,MAAQoW,GACvB,kBAACK,GAAD,KAAiB5Z,EAAU,oBACzB,KAENsU,OAAO,UACPE,gBAAiBtE,GAAgB+D,QAEjC,kBAACuF,GAAD,CACE5S,QAAS,kBAAM2Y,GAAe,IAC9BvY,UAAW2W,IAEX,kBAAChE,GAAD,CAAUpT,wBAAyB,CAAEC,OAtB7B,iZAuBR,kBAACkT,GAAD,KAAO1Z,EAAU,sBAGrB,kBAAC,GAAD,CACEie,IAAKqB,EACL5X,QAAS,kBAAM6X,GAAe,IAC9B5C,WAAY,kBAAM4C,GAAe,IACjCjX,IAAKgX,EAAYnf,eC7CnBqf,GAAuB,SAACrc,EAAeG,GAAhB,0EACkCA,EADlC,kBACkDH,IAkDhEsc,GAhDW,SAACC,GACzB,MAAO,CACLC,cAAe,WACb,IACMC,EAAQ,UADE,sCACF,cAAmBC,mBAAmBH,IACpDtc,OAAO0c,KAAKF,EAAU,GAAIJ,GAAqB,IAAK,OAGtDO,aAAc,SAAC3I,GACb,IACMwI,EAAQ,UADE,mCACF,kBACdC,mBAAmBH,GADL,mBAEbG,mBAAmBzI,GAFN,0BAIdhU,OAAO0c,KAAKF,EAAU,GAAIJ,GAAqB,IAAK,OAGtDQ,cAAe,SAACvN,EAAewN,GAG7B,IAEMC,EAASL,mBAAmBH,GAC5BE,EAAQ,UAHE,wCAGF,8BAEdC,mBAAmBH,GAFL,oBAGZG,mBAAmBpN,GAHP,sBAIVoN,mBAAmBI,GAJT,qBAKXJ,mBAAmBK,IACtB9c,OAAO0c,KAAKF,EAAU,GAAIJ,GAAqB,IAAK,OAGtDW,WAAY,SACVC,EACAC,EACAC,GAEA,IAAMC,EAAUV,mBAAmBO,GAC7BI,EAAsBX,mBAAmBQ,GACzCI,EAAqBZ,mBAAmBS,GAExClH,EAAI,0BAAsBmH,EAAtB,iBAAsCC,EAAtC,uBAAwEC,GAElFrd,OAAON,SAASsW,KAAOA,KCpBvB5Q,GAAShO,YAAH,kHAUNtB,GAAOC,IAAOC,IAAV,sEAAGD,CAAH,kNAGKqP,G9BnCU,W8B8CnBC,GAActP,IAAO4B,OAAV,6EAAG5B,CAAH,wJAMAgB,GAMXumB,GAAevnB,IAAOC,IAAV,8EAAGD,CAAH,sFAIDe,GAGXuf,GAAUtgB,IAAOC,IAAV,yEAAGD,CAAH,gDAzDI,WAoEXwnB,GAAaxnB,IAAOC,IAAV,4EAAGD,CAAH,0KAWVynB,GAAWznB,YAAOsgB,IAAV,0EAAGtgB,CAAH,2BAIR0nB,GAAU1nB,IAAOC,IAAV,yEAAGD,CAAH,8CAKP2nB,GAAa3nB,IAAO4B,OAAV,4EAAG5B,CAAH,6IACCe,EAzFA,WAkGX6mB,GAAuB5nB,IAAOC,IAAV,sFAAGD,CAAH,iDAMpB6nB,GAAoB7nB,IAAO4B,OAAV,mFAAG5B,CAAH,sHAaR,YAACqO,GACd,IAAQE,EAAYF,EAAZE,QAER,EAA4BhE,oBAAkB,GAA9C,oBAAOud,EAAP,KAAeC,EAAf,KAMMC,EAAWF,EAAS,SAAW,OAErC,EACExB,GAAkBrc,OAAON,SAASsW,MAD5BuG,EAAR,EAAQA,cAAeI,EAAvB,EAAuBA,aAAcC,EAArC,EAAqCA,cAAeG,EAApD,EAAoDA,WAGpD,OACE,kBAAC,GAAD,CAAOzY,QAASA,EAASpE,OAAO,OAAOH,MAAM,SAC3C,kBAAC,GAAD,KACE,kBAACud,GAAD,oBACA,kBAACC,GAAD,CAAY/Z,QAdH,WACbwa,UAAUC,UAAUC,UAAUle,OAAON,SAASsW,MAC9C8H,GAAU,GACV3K,YAAW,kBAAM2K,GAAU,KAAQ,OAY7B,kBAACN,GAAD,CAAUra,wBAAyB,CAAEC,OAtIlC,ykCAuIH,kBAACqa,GAAD,KAAUzd,OAAON,SAASsW,MAC1B,kBAAC0H,GAAD,KAAaK,IAEf,kBAACT,GAAD,6BACA,kBAACK,GAAD,KACE,kBAACC,GAAD,CACEpa,QAAS,kBAAMmZ,EAAa,8BAE5B,kBAAC,GAAD,CAASxZ,wBAAyB,CAAEC,OA9IhC,gnBAgJN,kBAACwa,GAAD,CACEpa,QAAS,kBAAMoZ,EAAc,2BAA4B,MAEzD,kBAAC,GAAD,CAASzZ,wBAAyB,CAAEC,OAhJ/B,wfAkJP,kBAACwa,GAAD,CAAmBpa,QAAS,kBAAM+Y,MAChC,kBAAC,GAAD,CAASpZ,wBAAyB,CAAEC,OAhJ/B,gaAkJP,kBAACwa,GAAD,CACEva,MAAO,CAAEtD,MAAO,WAChByD,QAAS,kBACPuZ,EACE,2BACA,2BACA/c,OAAON,SAASsW,QAIpB,kBAAC,GAAD,CAAS7S,wBAAyB,CAAEC,OAzJlC,q5BA4JN,kBAAC,GAAD,CAAaI,QAASc,GAAtB,aCtIO6Z,GA7BD,WACZ,IAAM/d,EAAmBC,KACnBzD,EAAYsF,KAClB,EAAkC5B,oBAAkB,GAApD,oBAAOgY,EAAP,KAAkBC,EAAlB,KAGMnS,EAAQkS,EAAY,kBAAC8F,GAAD,CAAY9Z,QADnB,kBAAMiU,GAAa,MAC0B,KAChE,OACE,oCACE,kBAAC,GAAD,CACEtH,YACE7Q,EAAiBL,MTvBU,MSwB3BK,EAAiBL,MAAQoW,GACvB,kBAACK,GAAD,KAAiB5Z,EAAU,oBACzB,KAENsU,OAAO,UACPE,gBAAiBtE,GAAgB+D,QAEjC,kBAACuF,GAAD,CAAsB5S,QAfV,kBAAM+U,GAAa,KAgB7B,kBAAClC,GAAD,CAASlT,wBAAyB,CAAEC,OAtB5B,ufAuBR,kBAACkT,GAAD,KAAO1Z,EAAU,sBAGpBwJ,IPfDiY,GAAiBtoB,IAAOC,IAAV,iFAAGD,CAAH,4FAIGogB,IAOVmI,GAAmB,kBAC9B,kBAACD,GAAD,CAAgB7nB,GAHkB,kC,SAMxB0gB,K,cAAAA,E,aAAAA,Q,KAYZ,I,MAuJeqH,GAvJI,SAACna,GAClB,IACEoa,EAIEpa,EAJFoa,2BACAC,EAGEra,EAHFqa,0BACAC,EAEEta,EAFFsa,aACAC,EACEva,EADFua,UAEI/hB,EAAYsF,KAEZ0c,EAA4Cpa,iBAChD,MAGF,EACElE,oBAAkB,GADpB,oBAAOue,EAAP,KAA6BC,EAA7B,KAEA,EAAwCxe,mBACtCye,KAAWC,WAAaD,KAAWE,cADrC,oBAAOA,EAAP,KAAqBC,EAArB,KAIM9e,EAAmBC,KAEzBG,qBAAU,WACR,IAAMmE,EAAOC,SAASC,cAAT,WAxCmB,gCA2CnB,OAATF,IACFia,EAA0C9Z,QAAUH,EACpDma,GAAwB,MAEzB,IAEH,IAAMK,EAAqBV,EACzB,kBAAC,GAAD,CACExN,YACE7Q,EAAiBL,MFlFY,MEmF7BK,EAAiBL,MAAQoW,GACvB,kBAACK,GAAD,KACG5Z,EAAU,4BAEX,KAENsU,OAAO,UACPE,gBAAiBtE,GAAgB+D,QAEjC,kBAACuF,GAAD,CAAsB5S,QAASib,GAC7B,kBAACpI,GAAD,CAASlT,wBAAyB,CAAEC,OA1EnB,m6BA2EjB,kBAACkT,GAAD,KAAO1Z,EAAU,8BAGnB,KAEEwiB,EAAsBZ,EAC1B,kBAAC,GAAD,CACEvN,YACE7Q,EAAiBL,MFtGY,MEuG7BK,EAAiBL,MAAQoW,GACvB,kBAACK,GAAD,KACG5Z,EAAU,6BAEX,KAENsU,OAAO,UACPE,gBAAiBtE,GAAgB+D,QAEjC,kBAACuF,GAAD,CAAsB5S,QAASgb,GAC7B,kBAACjI,GAAD,CAAUpT,wBAAyB,CAAEC,OA/FnB,+1BAgGlB,kBAACkT,GAAD,KAAO1Z,EAAU,+BAGnB,KAsBEyiB,EAAeN,KAAWC,UAC9B,kBAAC,GAAD,CACE/N,YACE7Q,EAAiBL,MF9IY,ME+I7BK,EAAiBL,MAAQoW,GACvB,kBAACK,GAAD,KAGM5Z,EAFFqiB,EAEY,iBADA,qBAGd,KAEN/N,OAAO,UACPE,gBAAiBtE,GAAgB+D,QAEjC,kBAACuF,GAAD,CAAsB5S,QAnCA,WACxB,IAAM8b,EAAoB,kBAAMJ,GAAgB,IAC5CH,KAAWC,YACRD,KAAWE,cAUdF,KAAWQ,OACXR,KAAWS,IAAI,SAAUF,GACzBJ,GAAgB,IAXhBH,KAAWU,UAAUlW,MAAK,WACxB4J,YAAW,WACT+L,GAAgB,GACZH,KAAWC,WACbD,KAAWW,GAAG,SAAUJ,KAEzB,WA0BL,kBAACjJ,GAAD,CACElT,wBAAyB,CACvBC,OAAS6b,EA5IA,qgCADF,qyBAgJX,kBAAC3I,GAAD,KAGM1Z,EAFFqiB,EAEY,iBADA,uBAKlB,KAEEU,EAAQhB,EAAY,KAAO,kBAAC,GAAD,MAE3BlE,EACJ,oCACE,kBAAC,GAAD,MACC4E,EACAM,EACAP,EACAD,EACD,kBAAC,GAAD,OAkBJ,OAb2B,IAAzBN,GACsD,OAAtDD,EAA0C9Z,QAEjCK,uBACPsV,EACAmE,EAA0C9Z,SAEnC4Z,EACAjE,EAEA,MQnKPmF,GAA0B,WAC9B,MAA0C3Y,KAA5ByG,EAAd,EAAQjH,KAAeC,EAAvB,EAAuBA,QAASC,EAAhC,EAAgCA,MAEhC,OAAK+G,EAiBE,CAAEhH,SAAS,EAAOC,WAAOpJ,EAAWkJ,KADb,CAAE7L,WAZI8S,EAAQ5D,YAAYC,KAAI,SAAC8V,GAAD,MAAU,CACpErpB,GAAIqpB,EAAI5V,QACR6V,QAASD,EAAI5V,QACbiE,KAAM2R,EAAI5V,QACVqE,KAAMuR,EAAIvR,KACV1C,MAAOiU,EAAIjU,MACXmU,SAAUF,EAAIG,WAAavG,SAASoG,EAAIG,WAAWC,UAAU,EAAG,GAAI,IAAM,KAC1ED,WAAYH,EAAIG,WAChBE,iBAAkBzG,SAASoG,EAAIM,aAAc,IAC7CC,UAAU,QAZH,CAAE1Z,UAASC,QAAOF,UAAMlJ,IAwDtB8iB,GAAuB,WAClC,MAA+CT,KAE/C,MAAO,CAAElZ,QAFT,EAAQA,QAEUC,MAFlB,EAAiBA,MAEQF,KAdD,SAACA,GACzB,IAAM0I,EAAwB,QACjB5R,IAATkJ,GACqBA,EAAf7L,WACG0lB,SAAQ,SAACC,GAClBpR,EAASoR,EAAST,SAAWS,KAGjC,OAAOpR,EAKMqR,CADb,EAAwB/Z,QAKXmZ,M,uCCjGFa,GAAiB1qB,IAAOC,IAAV,sFAAGD,CAAH,0MAsBZ2qB,GANM,kBACnB,kBAACD,GAAD,KACE,kBAAC,GAAD,CAAchV,KAAM,O,wCCgBTkV,G,oDA7Bb,WAAYvc,GAAY,IAAD,+BACrB,cAAMA,IACDwc,MAAQ,CAAEC,UAAU,GAFJ,E,sDAUvB,SAAkBla,EAAcma,GAE9BpY,QAAQ/B,MAAMA,EAAOma,K,oBAGvB,WACE,OAAIC,KAAKH,MAAMC,SAGX,kBAACJ,GAAD,KACE,kBAAC7K,GAAD,CAAa1F,gBAAiB,+BAK7B6Q,KAAK3c,MAAMC,Y,uCApBpB,SAAgC2c,GAE9B,MAAO,CAAEH,UAAU,O,GARKI,aCJtBC,GAAUnrB,IAAOC,IAAV,iFAAGD,CAAH,gFAOPorB,GAAc/pB,YAAH,6LAUXgqB,GAASrrB,IAAOC,IAAV,gFAAGD,CAAH,6JnChBkB,UmCuBforB,IAGTE,GAAUtrB,YAAOqrB,IAAV,iFAAGrrB,CAAH,6BAIPurB,GAAUvrB,YAAOqrB,IAAV,iFAAGrrB,CAAH,6BAIE,cACb,OACE,kBAACmrB,GAAD,KACE,kBAACG,GAAD,MACA,kBAACC,GAAD,MACA,kBAACF,GAAD,QC9BOG,GAAmBxrB,IAAOC,IAAV,qFAAGD,CAAH,mWAmBhByrB,GAAqB,SAACjlB,GACjC,IAAMklB,EACJllB,EAAMmlB,KAAKrlB,QAAUE,EAAMmlB,KAAK,GAAGrlB,OAASE,EAAMmlB,KAAK,GAAGrlB,OAAS,EAEjEqlB,EAAe,GACnBnlB,EAAMmlB,KAAKpB,SAAQ,SAACtV,EAAG2W,GACrB,IAAIC,EAAM,GACJC,EACJtlB,EAAMulB,eAAiBvlB,EAAMulB,cAAcjW,SAAS8V,GAChD,iDACA,GACN3W,EAAEsV,SAAQ,SAAC1J,EAAGmL,GACZ,IAAMC,EACG,IAAPD,EACI,iDACA,gDACA1e,EACJ9G,EAAM0lB,aAAe1lB,EAAM0lB,YAAYpW,SAASkW,GAAhD,kCAC+BC,GAD/B,OAC2CH,EAD3C,KAEI,GACND,GAAS,0CAAsCve,EAAtC,YAA+CuT,EAA/C,aAEX8K,GAAcE,KAGhB,IAAMM,EAAOR,EAAKrlB,OAAL,6HAI6ColB,EAJ7C,mCAMPC,EANO,oBAST,GAEES,EAAoB5lB,EAAM6lB,eAAN,eACd7lB,EAAM6lB,eADQ,UAEtB,GACEvP,EAAQtW,EAAM8lB,UAChB,GADU,0DtBpDuB,gCsBoDvB,qEAQRC,EAAa/lB,EAAMgmB,OAAN,mEAEMhmB,EAAM9F,MAFZ,KAInB,MAAM,8DAAN,OAE8C6rB,EAF9C,uBAGQ/lB,EAAM8S,MAHd,iCAKM6S,EALN,mBAMMC,EANN,6BAQItP,EARJ,SCOI2P,GAAgB,CACpBC,iBAAkB,EAClBC,iBAAkB,EAClBC,gBAAiB,EACjBC,gBAAiB,EACjBC,iBAAkB,EAClBC,iBAAkB,EAClBC,gBAAiB,EACjBC,gBAAiB,EACjBC,kBAAmB,EACnBC,kBAAmB,EACnBC,cAAe,EACfC,cAAe,EACfC,iBAAkB,EAClBC,qBAAsB,GAGXC,GAA0B,SAACC,GACtC,MAA0Cvc,KAA5ByG,EAAd,EAAQjH,KAAeC,EAAvB,EAAuBA,QAASC,EAAhC,EAAgCA,MAE1BwI,EAAwB,CAC5BvU,WAAY,GACZ6oB,SAAU,GACVC,aAAa,eAAMlB,IACnBmB,cAAc,eAAMnB,KAGtB,IAAK9U,EACH,MAAO,CAAEhH,UAASC,QAAOF,KAAM0I,GAGjC,IAAMyU,EAAUJ,EAAUra,KAAKpM,WACzBoO,EAAauC,EAAQvC,WAAWyY,GAEtC,IAAKzY,EACH,MAAO,CAAEzE,SAAS,EAAOC,WAAOpJ,EAAWkJ,KAAM0I,GAGnD,IAAQ9D,EAAiBF,EAAjBE,aAGFwY,EAAQnZ,OAAOhM,OAAO2M,GAActB,KAAI,SAACC,GAAD,OAAOA,EAAE8Z,WACjDC,EAAerZ,OAAOhM,OAAO2M,GAActB,KAAI,SAACC,GAAD,OAAOA,EAAEga,iBAExDC,EAAgBzlB,GAAeqlB,GAC/BK,EAAuB1lB,GAAeulB,GAEtCI,EAAc,aAAIN,GAAOjlB,MAAK,SAACP,EAAGC,GAAJ,OAAUD,EAAIC,KAC5C8lB,EAAqB,aAAIL,GAAcnlB,MAAK,SAACP,EAAGC,GAAJ,OAAUD,EAAIC,KAC1D+lB,EAAaF,EAAYlmB,KAAKqmB,MAAMH,EAAY9nB,OAAS,KAAO,EAChEkoB,EAAmBH,EAAmBnmB,KAAKqmB,MAAMF,EAAmB/nB,OAAS,KAAO,EAEpFmoB,EAAUvmB,KAAK6Y,IAAL,MAAA7Y,KAAI,aAAQgmB,IACtBQ,EAAUxmB,KAAKiO,IAAL,MAAAjO,KAAI,aAAQgmB,IACtBS,EAAgBzmB,KAAK6Y,IAAL,MAAA7Y,KAAI,aAAQimB,IAC5BS,EAAgB1mB,KAAKiO,IAAL,MAAAjO,KAAI,aAAQimB,IAElC/U,EAASuU,aAAT,2BACKvU,EAASuU,cADd,IAEET,kBAAmByB,EACnBxB,kBAAmByB,EACnBrB,qBAAsBiB,EACtBpB,cAAeqB,EACfpB,cAAeqB,EACfpB,iBAAkBgB,IAGpBlV,EAASwU,cAAT,eAA8BxU,EAASuU,cAGvC,cAAiChZ,OAAOC,QAAQU,GAAhD,eAA+D,CAA1D,2BAAOpB,EAAP,KAAgB2a,EAAhB,KACGC,EAAiBD,EAAQZ,cACzBc,EAAaF,EAAQd,QAEvBiB,EAAqBF,EAAiBH,EAAgBA,EAAgBG,EACtEE,EAAqBJ,IAAeI,EAAqBJ,GAE7D,IAAIK,EAAiBF,EAAaN,EAAUA,EAAUM,EAClDE,EAAiBP,IAASO,EAAiBP,GAE/CtV,EAASvU,WAAWqP,GAAW,CAC7B6V,QAASrG,SAASxP,EAAS,KAAO,EAClCgb,cAAe,EACfC,aAAcN,EAAQO,YACtBC,cAAe,EACfC,aAAc,EACdR,iBACAC,aACAC,qBACAC,kBAxE+D,qBA6ElDtX,EAAQtD,aA7E0C,yBA6ExDkb,EA7EwD,QA8E3DC,EAAe7X,EAAQ5D,YAC1B3K,QAAO,SAAC6K,GAAD,OAAOA,EAAEmW,eAAiBmF,EAAGhb,WACpCP,KAAI,SAACC,GAAD,OAAOqB,EAAarB,EAAEC,YAC1B9K,OAAOoE,SAEJugB,EAAUyB,EAAalpB,OAAS,EAClCkpB,EAAaC,QAAO,SAACC,EAAGzb,GAAJ,OAAUyb,EAAIzb,EAAE8Z,UAAS,GAAKyB,EAAalpB,OAC/D,EACE2nB,EAAgBuB,EAAalpB,OAAS,EACxCkpB,EAAaC,QAAO,SAACC,EAAGzb,GAAJ,OAAUyb,EAAIzb,EAAEga,gBAAe,GAAKuB,EAAalpB,OACrE,EAEA0oB,EAAqBf,EAAgBU,EAAgBA,EAAgBV,EACrEe,EAAqBJ,IAAeI,EAAqBJ,GAE7D,IAAIK,EAAiBlB,EAAUU,EAAUA,EAAUV,EAC/CkB,EAAiBP,IAASO,EAAiBP,GAE/CtV,EAASsU,SAAS6B,EAAGhb,SAAW,CAC9Bob,UAAWjM,SAAS6L,EAAGhb,QAAS,IAChC2a,cAAe,EACfC,aAAc,EACdE,cAAe,EACfC,aAAc,EACdR,eAAgBb,EAChBc,WAAYhB,EACZiB,qBACAC,mBA5BJ,2BAAuC,IA7E4B,8BA6GnE,MAAO,CAAEte,SAAS,EAAOC,WAAOpJ,EAAWkJ,KAAM0I,I,SCpN7ChY,GAASC,YAAH,oJAYNtB,GAAOC,IAAOC,IAAV,sEAAGD,CAAH,8HAYJmO,GAAUnO,IAAOC,IAAV,yEAAGD,CAAH,iNACSyB,YtCZU,UsCYa,IAK9BL,IAMTkO,GAActP,IAAO4B,OAAV,6EAAG5B,CAAH,yGA+BF4vB,GAfI,SAACvhB,GAClB,IAAQwhB,EAAmCxhB,EAAnCwhB,WAAYC,EAAuBzhB,EAAvByhB,SAAUxhB,EAAaD,EAAbC,SAI9B,OAFA8O,WAAWyS,EAAYC,GAAsB,KAG3C,kBAAC,GAAD,KACE,kBAAC,GAAD,KACGxhB,EACD,kBAAC,GAAD,CAAab,QAASoiB,GAAtB,WC1BF9vB,GAAOC,IAAOC,IAAV,2EAAGD,CAAH,4GAOC3B,EAAYD,OAMjB2xB,GAAmB/vB,IAAOC,IAAV,uFAAGD,CAAH,qCAWtB,SAASgwB,GAAU7X,EAAc8X,GAC/B,IAAMC,EAAS/X,EAAK+R,UAAU,EAAG,GAC3BiG,EAAShY,EAAK+R,UAAU,GAC9B,GAAI/R,EAAKiY,SAAS,SAAU,OAAO,KACnC,GAAIjY,EAAKiY,SAAS,MAAO,OAAOF,EAAS,OACzC,GAAI/X,EAAKiY,SAAS,KAAM,CAEtB,IAAMC,EAAaH,EAASC,EAAOjG,UAAU,EAAG,GAAK,KAC/CoG,EAAaJ,EAASC,EAAO,GAAK,MACxC,OAAIE,IAAeC,EAAiBA,EAChCL,GACKA,EAAW/c,IAAImd,GAAcA,EAE/BC,EAET,OAAOJ,EAASC,EAAOjG,UAAU,EAAG,GAAK,IAmB3C,I,SCSYqG,GDTNC,GAA8B,SAAC/C,GACnC,MAA0Cvc,KAA5ByG,EAAd,EAAQjH,KAAeC,EAAvB,EAAuBA,QAASC,EAAhC,EAAgCA,MAEhC,IAAK+G,EACH,MAAO,CAAEhH,UAASC,QAAOF,UAAMlJ,GAGjC,IAAMkN,EAAaiD,EAAQjD,WAAW+Y,EAAUroB,QAChD,IAAKsP,EACH,MAAO,CAAE/D,SAAS,EAAOC,WAAOpJ,EAAWkJ,KAAM,CAAE7L,WAAY,KAGjE,IAAMiQ,EAAWJ,EAAW+Y,EAAUra,KAAKpM,YAC3C,OAAK8N,EAYE,CAAEnE,SAAS,EAAOC,WAAOpJ,EAAWkJ,KAAM,CAAE7L,WARDiQ,EAASd,KAAI,SAAC+L,GAAD,MAAQ,CACrEtf,GAAIsf,EAAE7L,QACN6V,QAAShK,EAAE7L,QACXuc,WAAY1Q,EAAEC,IACd0Q,UAAW3Q,EAAE4Q,OACbC,MAAO7Q,EAAE6Q,YARF,CAAEjgB,SAAS,EAAOC,WAAOpJ,EAAWkJ,KAAM,CAAE7L,WAAY,MA2fpDuZ,OAAMC,MA9dM,SAAChQ,GAC1B,IACEjJ,EAQEiJ,EARFjJ,OACAgO,EAOE/E,EAPF+E,KACAyd,EAMExiB,EANFwiB,WACAC,EAKEziB,EALFyiB,gBACArS,EAIEpQ,EAJFoQ,YACAsS,EAGE1iB,EAHF0iB,cACAC,EAEE3iB,EAFF2iB,QACAC,EACE5iB,EADF4iB,oBAEIC,EAAc5G,KACdzjB,EAAYsF,KACZ9B,EAAmBC,KACnB6mB,EAAU1iB,iBAA8B,MACxC2iB,EAAoB3iB,iBAA8B,MAClD4iB,EAAwB5iB,iBAA8B,MAC5D,EAAoClE,wBAElC/C,GAFF,oBAAO0G,EAAP,KAAmBojB,EAAnB,KAGA,EAAiCd,GAA4B,CAC3DprB,SACAgO,SAFMzC,EAAR,EAAQA,QAASC,EAAjB,EAAiBA,MAAOF,EAAxB,EAAwBA,KAIlB6gB,EAA2B/D,GAAwB,CACvD3X,MAAOgb,EACPzd,KlCvKuB,OkC0KnBoe,EAAcxe,uBAAY,SAACvS,GAC/B,GAAK4N,EAAMojB,YAAX,CACA,IAAMjH,EAAW0G,EAAYxgB,KAAKjQ,GAClC,GAAK+pB,EAAL,CACA,IAAMkH,EAAWlH,EAASL,iBAAiBnjB,WAC3CqH,EAAMojB,YAAYC,EAAUb,OAC3B,CAACK,EAAaL,EAAYxiB,IAE7B5D,qBAAU,WACR,IAAMmE,EAAOuiB,EAAQpiB,QACjBH,GACFwO,YAAW,WACT,MAA0BxO,EAAK+iB,wBAAvB3nB,EAAR,EAAQA,MAAOG,EAAf,EAAeA,OACfmnB,EAAc,CAAEtnB,QAAOG,aACtB,KAEJ,CAACgnB,EAAS9mB,IAEb,IACIunB,EADEC,EAAWC,aAAYphB,GAG3BkhB,EADElhB,IAEOmhB,QAGGrqB,GAGd,IAIIuqB,EAJEC,EAAuB,CAC3B/T,UAAMzW,EACNyqB,oBAAgBzqB,GAGlB,GACE0pB,EAAYvgB,UACXzC,GACAyC,QAAwBnJ,IAAbqqB,IACVb,IAAY7sB,GAAQ+tB,WAAalB,IAAY7sB,GAAQguB,OACrDZ,EAAyB5gB,QAE3BqhB,EAAU/T,KACR,oCACGpX,EAAU,yBAA2B,KACtC,kBAACurB,GAAD,OAGJL,EAAS,kBAAC,GAAD,WACJ,QAAcvqB,IAAVoJ,EACTohB,EAAU/T,KAAOpX,EAAU,yBAA2B,WACtDkrB,EACE,kBAACrH,GAAD,KACE,kBAAC7K,GAAD,OAGJlN,QAAQ/B,MAAMA,QACT,QAA0BpJ,IAAtB0pB,EAAYtgB,MACrBohB,EAAU/T,KAAOpX,EAAU,yBAA2B,WACtDkrB,EACE,kBAACrH,GAAD,KACE,kBAAC7K,GAAD,OAGJlN,QAAQ/B,MAAMsgB,EAAYtgB,YACrB,QAC8BpJ,IAAnC+pB,EAAyB3gB,OACxBogB,IAAY7sB,GAAQ+tB,WAAalB,IAAY7sB,GAAQguB,KASjD,QAAkB3qB,IAAdoqB,EAAyB,CAClC,IADkC,EAC1B/sB,EAAe+sB,EAAf/sB,WAMFwtB,EAAiB,IAAIzgB,IAAI/M,EAAWmP,KAAI,SAAC4X,GAAD,OAAOA,EAAE7B,YACjDuI,EAAa,IAAIjR,IARW,eASRxc,GATQ,IASlC,2BAAsC,CAAC,IAA1BklB,EAAyB,QAAzBA,QACLwI,EAAMrB,EAAYxgB,KAAKqZ,GAC7B,GAAIwI,GAAqB,OAAdA,EAAI1c,OAAkB0c,EAAI1c,OAASgb,EAAY,CAExD,IADA,IAAI2B,EAAWxC,GAAUjG,EAASsI,GAC3BG,IAAaH,EAAenf,IAAIsf,IACrCA,EAAWxC,GAAUwC,EAAUH,GAE7BG,IACGF,EAAWpf,IAAIsf,IAAWF,EAAWG,IAAID,EAAU,IACxDF,EAAWzP,IAAI2P,GAAWnZ,KAAK0Q,MAlBH,gCA4BlC,IAAM2I,EAAiB,IAAIrR,IAC3BiR,EAAW/H,SAAQ,SAACjc,EAAU2b,GAC5B,IAAM0I,EAAY9tB,EAAW+b,MAAK,SAACgL,GAAD,OAAOA,EAAE7B,UAAYE,KACvD,GAAK0I,EAAL,CACA,IAAMC,EAAeD,EAAUjC,WAAa,EACtCmC,EAAgBF,EAAUlC,YAAc,EAC1CqC,EAAiB,EACjBC,EAAkB,EACtBzkB,EAASic,SAAQ,SAACyI,GAChB,IAAMC,EAAWpuB,EAAW+b,MAAK,SAACgL,GAAD,OAAOA,EAAE7B,UAAYiJ,KAClDC,IACFH,GAAkBG,EAASvC,WAAa,EACxCqC,GAAmBE,EAASxC,YAAc,MAG9CiC,EAAeD,IAAIxI,EAAY,CAC7BiJ,OAAQhrB,KAAKiO,IAAI,EAAGyc,EAAeE,GACnCK,QAASjrB,KAAKiO,IAAI,EAAG0c,EAAgBE,SAIzC,IA8CIK,EA9CEC,EAA8B,GAE9BC,EAAmB,IAAIjS,IACzBnD,EAAQ,EAqEZ,IAAK,IAAM0N,KApEX/mB,EAAW0lB,SAAQ,YAAyC,IAAtCR,EAAqC,EAArCA,QAAS0G,EAA4B,EAA5BA,WAAYC,EAAgB,EAAhBA,UACnClG,EAAW0G,EAAYxgB,KAAKqZ,GAClC,GAAIS,GAA+B,OAAnBA,EAAS3U,OAAkB2U,EAAS3U,OAASgb,EAAY,CACvE,IAAQtY,EAA2BiS,EAA3BjS,KAAM4R,EAAqBK,EAArBL,iBACd,GAAI4G,EAAcjb,SAASqU,EAAiBnjB,YAAa,OAEzD,IAMIusB,EAAY9C,GAA0B,EACtC+C,EAAY9C,GAAwB,EAExC,IATiB4B,EAAWzP,IAAIkH,IAAY,IACR0J,MAAK,SAAC5S,GACxC,IAAM6S,EAAKxC,EAAYxgB,KAAKmQ,GAC5B,OAAO6S,GAAmB,OAAbA,EAAG7d,OAAkB6d,EAAG7d,OAASgb,GAAcwB,EAAenf,IAAI2N,MAMzD,CAEtB,IAAM8S,EAAWjB,EAAe7P,IAAIkH,GACpC,IAAK4J,GAAaA,EAAST,QAAU,GAAKS,EAASR,SAAW,EAC5D,OAEFI,EAAYI,EAASR,QACrBK,EAAYG,EAAST,OAGvBI,EAAiBb,IAAI1I,EAAS,CAAEmJ,OAAQM,EAAWL,QAASI,IAC5DrV,EACE4S,IAAoBxa,GAAgBsd,UAChC1V,EAAQqV,EACRrV,EAAQsV,EACd,IAAMnd,EACJya,IAAoBxa,GAAgBsd,UAChCL,EACAC,EACNH,EAAYha,KAAK,CACf5Y,GAAIspB,EACJ1T,QACAiD,MAAOf,GAAc,GACrBsb,iBAAkB1J,EAAiBnjB,iBASvCosB,EAHApC,IAAY7sB,GAAQ+tB,gBACc1qB,IAAlC+pB,EAAyB7gB,KAEZojB,eACVC,OAAO,CACNxC,EAAyB7gB,KAAKid,aAAaT,kBAC3CqE,EAAyB7gB,KAAKid,aAAaJ,qBAC3CgE,EAAyB7gB,KAAKid,aAAaR,oBAE5C1lB,MAAM5G,GAETmwB,IAAY7sB,GAAQguB,WACc3qB,IAAlC+pB,EAAyB7gB,KAEZojB,eACVC,OAAO,CACNxC,EAAyB7gB,KAAKid,aAAaP,cAC3CmE,EAAyB7gB,KAAKid,aAAaL,iBAC3CiE,EAAyB7gB,KAAKid,aAAaN,gBAE5C5lB,MAAM3G,GAEI,aAECuyB,EACd,QAAuB7rB,IAAnB6rB,EAAYzH,GAAkB,CAChC,IAAIoI,OAAwB,EAC5B,IACGhD,IAAY7sB,GAAQ+tB,WAAalB,IAAY7sB,GAAQguB,OACtDZ,EAAyB7gB,KACzB,CACA,IAAMwP,EACJqR,EAAyB7gB,KAAK7L,WAAWwuB,EAAYzH,GAAGnrB,IAC1D,GAAIyf,EAKF8T,EAAOZ,EAHLpC,IAAY7sB,GAAQ+tB,UAChBhS,EAAO8O,mBACP9O,EAAO+O,gBAIjBoE,EAAYzH,GAAGoI,KAAOA,EAG1B,GAAKX,EAAY/sB,OASV,CACL,IAAM2tB,EAAcC,aAAc,CAChCxjB,KAAM2iB,EACNrpB,MAAOkE,EAAWlE,MAClBG,OAAQ+D,EAAW/D,OACnBgqB,SAAU3zB,IAEN4zB,EAAiBzjB,EAAU,kBAAC,GAAD,MAAmB,KAgE9C0jB,EAAkBJ,EAAYK,aAAa1T,MAC/C,SAACb,GAAD,OAAOA,EAAEtf,KAAOge,KAGlB,GAAIA,GAAe4V,EAAiB,CAClC,IAAMzlB,GAAOyiB,EAAsBtiB,QAC7Byb,GAAW0G,EAAYxgB,KAAK+N,GAC5B8V,GAAmB1vB,EAAW+b,MAClC,qBAAGmJ,UAA0BtL,KAE/B,GAAI+L,IAAY+J,IAAoB3lB,GAAM,CACxC,IAAMlO,GAAQF,EAAeogB,MAC3B,SAACC,GAAD,OAAOA,EAAEpgB,KAAO+pB,GAASL,iBAAiBnjB,cAGtCwtB,GAAOlB,EAAiBzQ,IAAIpE,GAC5BgS,GAAa+D,GACfA,GAAKrB,QACLoB,GAAiB9D,YAAc,EAC7BC,GAAY8D,GACdA,GAAKtB,OACLqB,GAAiB7D,WAAa,EAC5BE,GAAQ2D,GAAiB3D,MAAQ2D,GAAiB3D,MAAQ,EAK1D6D,IAHJ3D,IAAoBxa,GAAgBQ,UAChC4Z,GACAD,IACiBvS,EAAS,IAC1BwW,GAAcD,GAAQ,IAAO,SAAWA,GAAM9sB,QAAQ,GAAK,IAC3DgkB,GAAmB,CACvB,CAAC9kB,EAAU,wBAA0B,IAAK2jB,GAASrS,MACnD,CAACtR,EAAU,kBAAoB,IAAKuM,EAAKpM,YACzC,CAAC,aAAcF,GAAiBM,GAAac,KAAKqmB,MAAMmC,OACxD,CACE7pB,EAAU,wBAAyB,CAAEwP,MAAOya,IAC1C,IACF4D,IAEF,CAAC,mBAAoB,IAAM5tB,GAAiBM,GAAac,KAAKqmB,MAAMqC,OACpE,CAAC,gBAAiB,IAAM9pB,GAAiBM,GAAac,KAAKqmB,MAAMkC,QAEnE,IACGO,IAAY7sB,GAAQ+tB,WAAalB,IAAY7sB,GAAQguB,OACtDZ,EAAyB7gB,KACzB,CACA,IAAMwP,GACJqR,EAAyB7gB,KAAK7L,WAAW2lB,GAAST,SACpD,GAAI7J,GAAQ,CACV,IAAMyU,GACJ3D,IAAY7sB,GAAQ+tB,UAChBhS,GAAO4O,eACP5O,GAAO6O,WACbpD,GAAKtS,KAAK,CACRxS,EAAU,4BAA6B,CAAEyd,KAAM0M,KAC9CA,IAAY7sB,GAAQguB,KAAO,IAAM,IAAMwC,GAAYhtB,QAAQ,MAIlEiH,GAAKgmB,UACHnJ,GAAmB,CACjBnS,MAAOkR,GAASjS,KAAOiS,GAASjS,KAAO,GACvC7X,MAAOA,GAAQe,YAAKf,GAAMA,MAAO,IAAO,OACxCirB,QACAO,YAAa,CAAC,EAAG,KAJnB,2GASFtd,GAAKtB,MAAMK,SAAW,WACtBiB,GAAKtB,MAAMunB,cAAgB,MAC3BjmB,GAAKtB,MAAM6N,OAAS,UACpBvM,GAAKtB,MAAM9E,QAAU,QACrBoG,GAAKtB,MAAMsO,KACTyY,EAAgBS,IACfT,EAAgBU,GAAKV,EAAgBS,IAAM,EAC5C,KACFlmB,GAAKtB,MAAMtF,IAAMqsB,EAAgBW,GAAK,GAAK,KAK3CpmB,GAAKhE,iBAAiB,SAJG,SAAnBqqB,IACJ5mB,EAAM4mB,mBACNrmB,GAAK/D,oBAAoB,QAASoqB,WAIjC,CACL,IAAMrmB,GAAOyiB,EAAsBtiB,QAC/BH,KACFA,GAAKtB,MAAM9E,QAAU,QAIzB,IAAM0sB,GACJzW,IAAgB4V,EACd,kBAAC,GAAD,CAAYxE,WAAYxhB,EAAM4mB,kBAC3BpuB,EAAU,6CAEX,KAENmrB,EAAU/T,KAAOtN,EACf,oCACG9J,EAAU,yBAA2B,KACtC,kBAACurB,GAAD,OAGF,UAAGvrB,EAAU,yBAAb,aAA0CC,GAAiBM,GAAac,KAAKqmB,MAAMrQ,KAAnF,KACArX,EAAU,uCAEZmrB,EAAUC,eAAiBprB,EAAU,wBACrC,IAAMsuB,GACJ,6FAEArE,EAFA,4DAKFiB,EACE,kBAAChC,GAAD,KACE,kBAAC,GAAD,CACE7U,YAAa,yBAAK8B,IAAKoU,IACvBjW,OAAQ,UACRG,gBAAgB,GAEhB,kBAAC,GAAD,KACE,kBAAC,KAAD,CACEmD,YAAaA,EACb2W,MAAOnB,EAAYK,aACnBe,aAAc,EACdC,oBAAqBpnB,EAAWlE,MAChCurB,qBAAsBrnB,EAAW/D,OACjCqnB,YAAaA,EACbgE,gBA/LM,SAAC/0B,GACf,IAAMmO,EAAOwiB,EAAkBriB,QACzByb,EAAW0G,EAAYxgB,KAAKjQ,GAC5B8zB,EAAmB1vB,EAAW+b,MAClC,qBAAGmJ,UAA0BtpB,KAE/B,GAAI+pB,GAAY+J,GAAoB3lB,EAAM,CACxC,IAAMlO,EAAQF,EAAeogB,MAC3B,SAACC,GAAD,OAAOA,EAAEpgB,KAAO+pB,EAASL,iBAAiBnjB,cAGtCyuB,EAAWnC,EAAiBzQ,IAAIpiB,GAChCgwB,EAAagF,EACfA,EAAStC,QACToB,EAAiB9D,YAAc,EAC7BC,EAAY+E,EACdA,EAASvC,OACTqB,EAAiB7D,WAAa,EAC5BE,EAAQ2D,EAAiB3D,MAAQ2D,EAAiB3D,MAAQ,EAK1D6D,GAHJ3D,IAAoBxa,GAAgBQ,UAChC4Z,EACAD,GACiBvS,EAAS,IAC1BwW,EAAcD,EAAQ,IAAO,SAAWA,EAAM9sB,QAAQ,GAAK,IAC3DgkB,EAAmB,CACvB,CAAC9kB,EAAU,wBAA0B,IAAK2jB,EAASrS,MACnD,CAACtR,EAAU,kBAAoB,IAAKuM,EAAKpM,YACzC,CAAC,aAAcF,GAAiBM,GAAac,KAAKqmB,MAAMmC,MACxD,CACE7pB,EAAU,wBAAyB,CAAEwP,MAAOya,IAC1C,IACF4D,GAEF,CAAC,mBAAoB,IAAM5tB,GAAiBM,GAAac,KAAKqmB,MAAMqC,MACpE,CAAC,gBAAiB,IAAM9pB,GAAiBM,GAAac,KAAKqmB,MAAMkC,OAEnE,IACGO,IAAY7sB,GAAQ+tB,WAAalB,IAAY7sB,GAAQguB,OACtDZ,EAAyB7gB,KACzB,CACA,IAAMwP,EACJqR,EAAyB7gB,KAAK7L,WAAW2lB,EAAST,SACpD,GAAI7J,EAAQ,CACV,IAAMyU,EACJ3D,IAAY7sB,GAAQ+tB,UAChBhS,EAAO4O,eACP5O,EAAO6O,WACbpD,EAAKtS,KAAK,CACRxS,EAAU,4BAA6B,CAAEyd,KAAM0M,KAC9CA,IAAY7sB,GAAQguB,KAAO,IAAM,IAAMwC,EAAYhtB,QAAQ,MAIlEiH,EAAKgmB,UAAYnJ,GAAmB,CAClCnS,MAAOkR,EAASjS,KAAOiS,EAASjS,KAAO,GACvC7X,MAAOA,EAAQe,YAAKf,EAAMA,MAAO,IAAO,OACxCirB,OACAO,YAAa,CAAC,EAAG,OAsIbwJ,kBAAmBC,KACnBR,cAAeA,OAIpBf,EACAc,SAtNLlD,EAAU/T,KAAOpX,EAAU,yBAA2B,WACtDkrB,EACE,kBAACrH,GAAD,KACE,kBAAC7K,GAAD,CACE1F,gBAAiB,8CAuNzB4X,EAAS,UAhXTC,EAAU/T,KAAOpX,EAAU,yBAA2B,WACtDkrB,EACE,kBAACrH,GAAD,KACE,kBAAC7K,GAAD,OAGJlN,QAAQ/B,MAAM2gB,EAAyB3gB,OA8WzC,OADAqgB,EAAoBe,GAElB,oCACE,kBAAC,GAAD,CAAMhV,IAAKmU,GACRY,EACD,kBAACvG,GAAD,CAAkBxO,IAAKqU,SEvkBzBuE,GAAuB,WAC3B,MAA0C1kB,KAA5ByG,EAAd,EAAQjH,KAAeC,EAAvB,EAAuBA,QAASC,EAAhC,EAAgCA,MAEhC,OAAK+G,EAeE,CAAEhH,SAAS,EAAOC,WAAOpJ,EAAWkJ,KADb,CAAEgd,SAVJ/V,EAAQtD,YAAYL,KAAI,SAACub,GAAD,MAAS,CAC3DI,UAAWJ,EAAGhb,QACdyV,SAAU,KACV6L,mBAAoBnS,SAAS6L,EAAGhb,QAAS,IACzCsB,MAAO,EACP0C,KAAMgX,EAAGhX,KACT8R,UAAU,EACV5pB,GAAI8uB,EAAGhb,cAVA,CAAE5D,UAASC,QAAOF,UAAMlJ,IA4DtBsuB,GAAsB,SAACC,GAClC,MAA+CH,KAE/C,MAAO,CAAEjlB,QAFT,EAAQA,QAEUC,MAFlB,EAAiBA,MAEQF,KApBF,SACvBA,GAEA,IAAM0I,EAAuB,QAChB5R,IAATkJ,GACmBA,EAAbgd,SACCnD,SAAQ,SAACyL,GAChB5c,EAAS4c,EAAQrG,WAAaqG,KAGlC,OAAO5c,EASM6c,CADb,EAAwBvlB,QAKXklB,M,QC1DT71B,GAAOC,IAAOC,IAAV,kFAAGD,CAAH,4GAOC3B,EAAYD,OAMjB2xB,GAAmB/vB,IAAOC,IAAV,8FAAGD,CAAH,qCAwBTk2B,GAA6B,SAACzI,GACzC,MAA+Cvc,KAAjCyG,EAAd,EAAQjH,KAER,GAFA,EAAuBC,UAEJgH,EACjB,MAAO,CAAEhH,SAAS,EAAMC,WAAOpJ,EAAWkJ,UAAMlJ,GAGlD,IAAMkN,EAAaiD,EAAQjD,WAAW+Y,EAAUroB,QAChD,IAAKsP,EACH,MAAO,CAAE/D,SAAS,EAAOC,WAAOpJ,EAAWkJ,UAAMlJ,GAGnD,IAAMsN,EAAWJ,EAAW+Y,EAAUra,OAASsB,ErC3FtB,MqC4FzB,IAAKI,EACH,MAAO,CAAEnE,SAAS,EAAOC,WAAOpJ,EAAWkJ,UAAMlJ,GAInD,IAAM2uB,EAA0C,GAChDxe,EAAQ5D,YAAYwW,SAAQ,SAACtW,GAC3BkiB,EAAgBliB,EAAEC,SAAWD,EAAEmW,gBAIjC,IAAMgM,EAAiE,GAqBvE,OApBAthB,EAASyV,SAAQ,SAACT,GAChB,IAAMuM,EAAOF,EAAgBrM,EAAI5V,UAAY,KACxCkiB,EAAcC,KACjBD,EAAcC,GAAQ,CAAEnD,OAAQ,EAAGlT,IAAK,IAE1CoW,EAAcC,GAAMnD,QAAUpJ,EAAI6G,OAClCyF,EAAcC,GAAMrW,KAAO8J,EAAI9J,OAc1B,CACLrP,SAAS,EACTC,WAAOpJ,EACPkJ,KAAM,CAAEgd,SAd0B/Y,OAAOC,QAAQwhB,GAAepiB,KAChE,oCAAEqiB,EAAF,KAAQhhB,EAAR,WAAkB,CAChBsa,UAAW0G,EACXxgB,MAAO,EACP4a,WAAYpb,EAAI2K,IAChB0Q,UAAWrb,EAAI6d,OACfoD,cAAe,EACfC,aAAc,SAycLnY,OAAMC,MAlbM,SAAChQ,GAC1B,IACEjJ,EAQEiJ,EARFjJ,OACAgO,EAOE/E,EAPF+E,KACA0d,EAMEziB,EANFyiB,gBACArS,EAKEpQ,EALFoQ,YACA+X,EAIEnoB,EAJFmoB,aACAvF,EAGE5iB,EAHF4iB,oBACAD,EAEE3iB,EAFF2iB,QACAyF,EACEpoB,EADFooB,eAEIC,EAAaZ,KACbjvB,EAAYsF,KACZ9B,EAAmBC,KACnB6mB,EAAU1iB,iBAA8B,MACxC2iB,EAAoB3iB,iBAA8B,MAClD4iB,EAAwB5iB,iBAA8B,MAC5D,EAAoClE,wBAElC/C,GAFF,oBAAO0G,EAAP,KAAmBojB,EAAnB,KAGA,EAAiC4E,GAA2B,CAAE9wB,SAAQgO,SAA9DzC,EAAR,EAAQA,QAASC,EAAjB,EAAiBA,MAAOF,EAAxB,EAAwBA,KAClB6gB,EAA2B/D,GAAwB,CACvD3X,MAAO1E,GAAWwlB,KAClBvjB,KrCtKuB,KqCuKvBojB,aAAc9S,SAAS8S,EAAc,MAGvC/rB,qBAAU,WACR,IAAMmE,EAAOuiB,EAAQpiB,QACjBH,GACFwO,YAAW,WACT,MAA0BxO,EAAK+iB,wBAAvB3nB,EAAR,EAAQA,MAAOG,EAAf,EAAeA,OACfmnB,EAAc,CAAEtnB,QAAOG,aACtB,KAEJ,CAACgnB,EAAS9mB,IAEb,IACIunB,EADEC,EAAWC,aAAYphB,GAG3BkhB,EADElhB,IAEOmhB,QAGGrqB,GAGd,IAIIuqB,EAJEC,EAAuB,CAC3B/T,UAAMzW,EACNyqB,oBAAgBzqB,GAGlB,GACEkvB,EAAW/lB,UACVzC,GACAyC,QAAwBnJ,IAAbqqB,IACVb,IAAY7sB,GAAQ+tB,WAAalB,IAAY7sB,GAAQguB,OACrDZ,EAAyB5gB,QAE3BqhB,EAAU/T,KACR,oCACGpX,EAAU,mBAAqB,KAChC,kBAACurB,GAAD,OAGJL,EAAS,kBAAC,GAAD,WACJ,QAAcvqB,IAAVoJ,EACTohB,EAAU/T,KAAOpX,EAAU,mBAAqB,WAChDkrB,EACE,kBAACrH,GAAD,KACE,kBAAC7K,GAAD,OAGJlN,QAAQ/B,MAAMA,QACT,QAAyBpJ,IAArBkvB,EAAW9lB,MACpBohB,EAAU/T,KAAOpX,EAAU,mBAAqB,WAChDkrB,EACE,kBAACrH,GAAD,KACE,kBAAC7K,GAAD,OAGJlN,QAAQ/B,MAAM8lB,EAAW9lB,YACpB,QAC8BpJ,IAAnC+pB,EAAyB3gB,OACxBogB,IAAY7sB,GAAQ+tB,WAAalB,IAAY7sB,GAAQguB,KASjD,QAAkB3qB,IAAdoqB,EAAyB,CAClC,IAkDIwB,EAlDE1F,EAAWkE,EAAUlE,SAAStkB,QAClC,SAACyX,GAAD,OAAOA,EAAEhL,OAASgL,EAAEhL,MAAM7O,aAAewvB,KAErCnD,EAA8B,GAE9BuD,EAAelJ,EAAS1Z,KAAI,SAAC6M,GACjC,OAAIiQ,IAAoBxa,GAAgBQ,UAC/B+J,EAAE0V,aAAe1V,EAAE0V,aAAe,EAElC1V,EAAEyV,cAAgBzV,EAAEyV,cAAgB,KAIzCO,EAASC,aAAOF,GAElB1Y,EAAQ,EAiEZ,IAAK,IAAM0N,KAhEX8B,EAASnD,SAAQ,YAA2C,IAAxCoF,EAAuC,EAAvCA,UAAWc,EAA4B,EAA5BA,WAAYC,EAAgB,EAAhBA,UACnCsF,EAAUU,EAAWhmB,KAAKif,GAChC,GACEqG,GACAA,EAAQngB,OACRmgB,EAAQngB,MAAM7O,aAAewvB,EAC7B,CACA,IAAQje,EAA6Byd,EAA7Bzd,KAAMsd,EAAuBG,EAAvBH,mBACd,GACEA,IACCY,EAAe3gB,SAAS+f,EAAmB7uB,YAC5C,CACA,IAAMusB,EAAY9C,GAA0B,EACtC+C,EAAY9C,GAAwB,EAC1CxS,EACE4S,IAAoBxa,GAAgBsd,UAChC1V,EAAQqV,EACRrV,EAAQsV,EACd,IAAMnd,EACJya,IAAoBxa,GAAgBsd,UAChCL,EACAC,EACNH,EAAYha,KAAK,CACf5Y,GAAIkvB,EACJtZ,QACAiD,MAAOf,GAAc,GACrBsb,iBAAkBgC,EACdA,EAAmB7uB,WACnB2oB,EAAU3oB,kBAWpBosB,EAHApC,IAAY7sB,GAAQ+tB,gBACc1qB,IAAlC+pB,EAAyB7gB,KAEZojB,eACVC,OAAO,CACNxC,EAAyB7gB,KAAKkd,cAAcV,kBAC5CqE,EAAyB7gB,KAAKkd,cAAcL,qBAC5CgE,EAAyB7gB,KAAKkd,cAAcT,oBAE7C1lB,MAAM5G,GAETmwB,IAAY7sB,GAAQguB,WACc3qB,IAAlC+pB,EAAyB7gB,KAEZojB,eACVC,OAAO,CACNxC,EAAyB7gB,KAAKkd,cAAcR,cAC5CmE,EAAyB7gB,KAAKkd,cAAcN,iBAC5CiE,EAAyB7gB,KAAKkd,cAAcP,gBAE7C5lB,MAAM3G,GAEIi2B,eACVhD,OAAO8C,GACPpvB,MAAM7G,GAIKyyB,EACd,QAAuB7rB,IAAnB6rB,EAAYzH,GAAkB,CAChC,IAAIoI,OAAwB,EACtBgD,EACJzF,EAAyB7gB,KAAKgd,SAAS2F,EAAYzH,GAAGnrB,IAMpDuzB,EAJFhD,IAAY7sB,GAAQ+tB,gBACc1qB,IAAlC+pB,EAAyB7gB,KAErBsmB,EACK5D,EACL4D,EAAqBhI,oBAGhB,OAGTgC,IAAY7sB,GAAQguB,WACc3qB,IAAlC+pB,EAAyB7gB,KAErBsmB,EACK5D,EAAW4D,EAAqB/H,gBAEhC,YAGFznB,EAET6rB,EAAYzH,GAAGoI,KAAOA,EAI1B,GAAKX,EAAY/sB,OASV,CACL,IAAM2tB,EAAcC,aAAc,CAChCxjB,KAAM2iB,EACNrpB,MAAOkE,EAAWlE,MAClBG,OAAQ+D,EAAW/D,OACnBgqB,SAAUxzB,IAENyzB,EAAiBzjB,EAAU,kBAAC,GAAD,MAAmB,KA6D9C0jB,EAAkBJ,EAAYK,aAAa1T,MAC/C,SAACb,GAAD,OAAOA,EAAEtf,KAAOge,KAGlB,GAAIA,GAAe4V,EAAiB,CAClC,IAAMzlB,EAAOyiB,EAAsBtiB,QAC7BinB,EAAUU,EAAWhmB,KAAK+N,GAC1BwY,EAAkBvJ,EAAS9M,MAC/B,qBAAG+O,YAA8BlR,KAEnC,GAAIuX,GAAWiB,GAAmBroB,EAAM,CACtC,IAAM6hB,EAAawG,EAAgBxG,WAC/BwG,EAAgBxG,WAChB,EACEC,EAAYuG,EAAgBvG,UAC9BuG,EAAgBvG,UAChB,EAKE+D,GAHJ3D,IAAoBxa,GAAgBQ,UAChC4Z,EACAD,GACiBvS,EAAS,IAC1BwW,EAAcD,EAAQ,IAAO,SAAWA,EAAM9sB,QAAQ,GAAK,IAC3DjH,GAAQC,EAAgBigB,MAC5B,SAACC,GAAD,OACEmV,EAAQH,oBACRhV,EAAEpgB,KAAOu1B,EAAQH,mBAAmB7uB,cAElC2kB,GAAO,CACX,CAAC9kB,EAAU,kBAAoB,IAAKuM,EAAKpM,YACzC,CAAC,aAAcF,GAAiBM,GAAac,KAAKqmB,MAAMmC,MACxD,CACE7pB,EAAU,wBAAyB,CAAEwP,MAAOya,IAC1C,IACF4D,GAEF,CAAC,gBAAiB,IAAM5tB,GAAiBM,GAAac,KAAKqmB,MAAMkC,OAEnE,IACGO,IAAY7sB,GAAQ+tB,WAAalB,IAAY7sB,GAAQguB,OACtDZ,EAAyB7gB,KACzB,CACA,IAAMwP,GACJqR,EAAyB7gB,KAAKgd,SAASsI,EAAQrG,WACjD,GAAIzP,GAAQ,CACV,IAAMyU,GACJ3D,IAAY7sB,GAAQ+tB,UAChBhS,GAAO4O,eACP5O,GAAO6O,WACbpD,GAAKtS,KAAK,CACRxS,EAAU,4BAA6B,CAAEyd,KAAM0M,KAC9CA,IAAY7sB,GAAQguB,KAAO,IAAM,IAAMwC,GAAYhtB,QAAQ,MAIlEiH,EAAKgmB,UACHnJ,GAAmB,CACjBnS,MAAO0c,EAAQzd,KAAOyd,EAAQzd,KAAO,GACrC7X,MAAOA,GAAQe,YAAKf,GAAMA,MAAO,IAAO,OACxCirB,QACAO,YAAa,CAAC,EAAG,KAJnB,yFASFtd,EAAKtB,MAAMK,SAAW,WACtBiB,EAAKtB,MAAMunB,cAAgB,MAC3BjmB,EAAKtB,MAAM6N,OAAS,UACpBvM,EAAKtB,MAAM9E,QAAU,QACrBoG,EAAKtB,MAAMsO,KACTyY,EAAgBS,IACfT,EAAgBU,GAAKV,EAAgBS,IAAM,EAC5C,KACFlmB,EAAKtB,MAAMtF,IAAMqsB,EAAgBW,GAAK,GAAK,KAK3CpmB,EAAKhE,iBAAiB,SAJG,SAAnBqqB,IACJ5mB,EAAM4mB,mBACNrmB,EAAK/D,oBAAoB,QAASoqB,WAIjC,CACL,IAAMrmB,GAAOyiB,EAAsBtiB,QAC/BH,KACFA,GAAKtB,MAAM9E,QAAU,QAIzB,IAAM0sB,GACJzW,IAAgB4V,EACd,kBAAC,GAAD,CAAYxE,WAAYxhB,EAAM4mB,kBAC3BpuB,EAAU,6CAEX,KAENmrB,EAAU/T,KAAOtN,EACf,oCACG9J,EAAU,yBAA2B,KACtC,kBAACurB,GAAD,OAGF,UAAGvrB,EAAU,yBAAb,aAA0CC,GAAiBM,GAAac,KAAKqmB,MAAMrQ,KAAnF,KACArX,EAAU,uCAEZmrB,EAAUC,eAAiBprB,EAAU,wBACrC,IAAMsuB,GACJ,2FAEArE,EAFA,0DAKFiB,EACE,kBAAC,GAAD,KACE,kBAAC,GAAD,CACE7W,YAAa,yBAAK8B,IAAKoU,IACvBjW,OAAQ,UACRG,gBAAgB,GAEhB,kBAAC,GAAD,KACE,kBAAC,KAAD,CACEmD,YAAaA,EACb2W,MAAOnB,EAAYK,aACnBe,aAAc,EACdC,oBAAqBpnB,EAAWlE,MAChCurB,qBAAsBrnB,EAAW/D,OACjCqnB,YAAamE,KACbH,gBAzLM,SAAC/0B,GACf,IAAMmO,EAAOwiB,EAAkBriB,QACzBinB,EAAUU,EAAWhmB,KAAKjQ,GAC1Bw2B,EAAkBvJ,EAAS9M,MAC/B,qBAAG+O,YAA8BlvB,KAEnC,GAAIu1B,GAAWiB,GAAmBroB,EAAM,CACtC,IAAM6hB,EAAawG,EAAgBxG,WAC/BwG,EAAgBxG,WAChB,EACEC,EAAYuG,EAAgBvG,UAC9BuG,EAAgBvG,UAChB,EAKE+D,GAHJ3D,IAAoBxa,GAAgBQ,UAChC4Z,EACAD,GACiBvS,EAAS,IAC1BwW,EAAcD,EAAQ,IAAO,SAAWA,EAAM9sB,QAAQ,GAAK,IAC3DjH,EAAQC,EAAgBigB,MAC5B,SAACC,GAAD,OACEmV,EAAQH,oBACRhV,EAAEpgB,KAAOu1B,EAAQH,mBAAmB7uB,cAElC2kB,EAAO,CACX,CAAC9kB,EAAU,kBAAoB,IAAKuM,EAAKpM,YACzC,CAAC,aAAcF,GAAiBM,GAAac,KAAKqmB,MAAMmC,MACxD,CACE7pB,EAAU,wBAAyB,CAAEwP,MAAOya,IAC1C,IACF4D,GAEF,CAAC,gBAAiB,IAAM5tB,GAAiBM,GAAac,KAAKqmB,MAAMkC,OAEnE,IACGO,IAAY7sB,GAAQ+tB,WAAalB,IAAY7sB,GAAQguB,OACtDZ,EAAyB7gB,KACzB,CACA,IAAMwP,EACJqR,EAAyB7gB,KAAKgd,SAASsI,EAAQrG,WACjD,GAAIzP,EAAQ,CACV,IAAMyU,EACJ3D,IAAY7sB,GAAQ+tB,UAChBhS,EAAO4O,eACP5O,EAAO6O,WACbpD,EAAKtS,KAAK,CACRxS,EAAU,4BAA6B,CAAEyd,KAAM0M,KAC9CA,IAAY7sB,GAAQguB,KAAO,IAAM,IAAMwC,EAAYhtB,QAAQ,MAIlEiH,EAAKgmB,UAAYnJ,GAAmB,CAClCnS,MAAO0c,EAAQzd,KAAOyd,EAAQzd,KAAO,GACrC7X,MAAOA,EAAQe,YAAKf,EAAMA,MAAO,IAAO,OACxCirB,OACAO,YAAa,CAAC,EAAG,OAmIbwJ,kBAAmBC,KACnBR,cAAeA,OAIpBf,EACAc,SAhNLlD,EAAU/T,KAAOpX,EAAU,mBAAqB,WAChDkrB,EACE,kBAACrH,GAAD,KACE,kBAAC7K,GAAD,CACE1F,gBAAiB,8CAiNzB4X,EAAS,UA9UTC,EAAU/T,KAAOpX,EAAU,mBAAqB,WAChDkrB,EACE,kBAACrH,GAAD,KACE,kBAAC7K,GAAD,OAGJlN,QAAQ/B,MAAM2gB,EAAyB3gB,OA4UzC,OADAqgB,EAAoBe,GAElB,oCACE,kBAAC,GAAD,CAAMhV,IAAKmU,GACRY,EACD,kBAACvG,GAAD,CAAkBxO,IAAKqU,SC9iBzBtxB,GAAOC,IAAOC,IAAV,8DAAGD,CAAH,kDAEOe,GAGXm2B,GAASl3B,IAAO4B,OAAV,gEAAG5B,CAAH,+TAOKe,EAWbE,GAGEk2B,GAAQn3B,IAAOC,IAAV,+DAAGD,CAAH,yTAUL,qBAAGgC,SAA2B,eAAiB,MAe/Co1B,GAAkBp3B,IAAOC,IAAV,yEAAGD,CAAH,oIASjBsB,GAGE+1B,GAAqBr3B,IAAOC,IAAV,4EAAGD,CAAH,uDAMlBs3B,GAAkBt3B,IAAOC,IAAV,yEAAGD,CAAH,sI3C/DS,W2CwExB4a,GAAiB5a,IAAOC,IAAV,wEAAGD,CAAH,mEAOd+a,GAAQ/a,IAAOC,IAAV,+DAAGD,CAAH,wJ3C/EmB,W2CyFxBiiB,GAAQjiB,IAAOC,IAAV,+DAAGD,CAAH,qFAOLu3B,GAAKv3B,IAAOw3B,GAAV,4DAAGx3B,CAAH,0CAKFsP,GAActP,IAAO4B,OAAV,sEAAG5B,CAAH,yGAUXy3B,GAAgBz3B,IAAOC,IAAV,wEAAGD,CAAH,0CAIb03B,GAAoB13B,IAAO4B,OAAV,4EAAG5B,CAAH,iLAGNgB,EAKbC,EACAc,E3C5H0B,W2CgNf41B,GA9DD,SAAC,GAMD,IAAD,IALXC,SAAYl3B,EAKD,EALCA,MAAO6X,EAKR,EALQA,KACnBsf,EAIW,EAJXA,eACAC,EAGW,EAHXA,gBACAC,EAEW,EAFXA,SACAC,EACW,EADXA,WAEA,EAAkCztB,oBAAkB,GAApD,oBAAO0tB,EAAP,KAAkBC,EAAlB,KACMrxB,EAAYsF,KACZgsB,EAAeN,EACnB,kBAACH,GAAD,CAAmB11B,SAAU+1B,EAAUtqB,QAASoqB,GAC7ChxB,EAAU,mBAEX,KACEuxB,EAAgBN,EACpB,kBAACJ,GAAD,CAAmB11B,SAAUg2B,EAAYvqB,QAASqqB,GAC/CjxB,EAAU,wBAEX,KACEwxB,EACJD,GAAiBD,EACf,kBAACV,GAAD,KACGU,EACAC,GAED,KACAE,EAAcL,EAClB,kBAACb,GAAD,KACE,kBAACC,GAAD,KACE,kBAACC,GAAD,KACE,kBAAC,GAAD,KAAQ/e,GACR,kBAACgf,GAAD,CAAIjqB,MAAO,CAAEirB,YAAa73B,KACzB23B,GAEH,kBAAC,GAAD,KACE,kBAAC,GAAD,OAEF,kBAAC,GAAD,CAAa5qB,QAAS,kBAAMyqB,GAAa,KAAzC,UAGF,KACJ,OACE,kBAAC,GAAD,CACEjb,aAAc,kBAAMib,GAAa,IACjC7a,aAAc,kBAAM6a,GAAa,IACjC5qB,MAAO,CAAEI,OAAQuqB,EAAY,SAAMzwB,IAEnC,kBAAC,GAAD,CACE8F,MAAO,CACLwV,gBAAiBmV,EAAYx2B,YAAKf,EAAO,SAAO8G,EAChDoG,QAASmqB,EAAW,QAAMvwB,GAE5BiG,QAASoqB,GAET,kBAACV,GAAD,CAAO7pB,MAAO,CAAEwV,gBAAiBpiB,GAASsB,SAAU+1B,IACnDxf,GAEF+f,ICpNDE,GAAWx4B,IAAOC,IAAV,+EAAGD,CAAH,6FAMH3B,EAAYD,OAKjBq6B,GAAez4B,YAAOw4B,IAAV,mFAAGx4B,CAAH,2CAKZ04B,GAAgB14B,YAAOw4B,IAAV,oFAAGx4B,CAAH,yBAIb24B,GAAkB34B,IAAOC,IAAV,sFAAGD,CAAH,8IAQV3B,EAAYD,OAKjBw6B,GAAmB54B,YAAO24B,IAAV,uFAAG34B,CAAH,oDAGX3B,EAAYD,OAKjBy6B,GAAiBx3B,YAAH,4OAiBdy3B,GAAmBz3B,YAAH,yOAiBhB03B,GAA6B/4B,IAAOC,IAAV,iGAAGD,CAAH,uHAY1Bg5B,GAAoBh5B,IAAO4B,OAAV,wFAAG5B,CAAH,gaAER64B,G5C/FU,UAcO,8B4CoGfC,IAOXG,GAAaj5B,IAAOC,IAAV,iFAAGD,CAAH,iJ5CzHS,W4C2OVk5B,GA1EQ,SAAC7qB,GACtB,IACI0jB,EADIoH,EAA0B9qB,EAA1B8qB,WAAYC,EAAc/qB,EAAd+qB,UAEpB,GAAI/qB,EAAMgrB,YAAa,CACrB,IACExB,EAKExpB,EALFwpB,eACAC,EAIEzpB,EAJFypB,gBACAwB,EAGEjrB,EAHFirB,iBACAC,EAEElrB,EAFFkrB,gBACAC,EACEnrB,EADFmrB,UAGIC,EAASN,EAAWnlB,KAAI,SAAC4jB,GAC7B,IAAMG,IAAauB,EAAiB1Y,MAAK,SAACngB,GAAD,OAAQA,IAAOm3B,EAASn3B,MAC3Du3B,EACJsB,EAAiBhzB,SAAW6yB,EAAW7yB,OAAS,IAAMyxB,EACxD,OACE,kBAAC,GAAD,CACE5oB,IAAK,gBAAkByoB,EAASn3B,GAChCm3B,SAAUA,EACVC,eAAgB,kBAAMA,EAAeD,EAASn3B,KAC9Cq3B,gBAAiB,kBAAMA,EAAgBF,EAASn3B,KAChDs3B,SAAUA,EACVC,WAAYA,OAKZ0B,EAAcJ,EAAiBhzB,OACnC,kBAACyyB,GAAD,KACE,kBAACC,GAAD,CAAmBvrB,QAAS8rB,GAC1B,kBAACN,GAAD,CAAY7rB,wBAAyB,CAAEC,OA5L/B,kSA4L0D,IACjEmsB,IAGH,KAEJzH,EACE,oCACG0H,EACAC,OAGA,CACL,IAAMD,EAASN,EAAWnlB,KAAI,SAAC4jB,GAAD,OAC5B,kBAAC,GAAD,CACEzoB,IAAK,gBAAkByoB,EAASn3B,GAChCm3B,SAAUA,EACVG,UAAU,EACVC,YAAY,OAIhBjG,EAAS,oCAAG0H,GAGd,IAAM15B,EAAOq5B,EAAYV,GAAgBD,GACnCtqB,EAAUirB,EAAYR,GAAmBD,GAE/C,OACE,kBAAC54B,EAAD,KACE,kBAACoO,EAAD,CACEN,UACGQ,EAAMgrB,YAEH7U,GADAA,IAILuN,KCtOM,cACb,IAAMlrB,EAAYsF,KAClB,OAAO3L,EAAewT,KAAI,gBAAGvT,EAAH,EAAGA,GAAH,MAAoB,CAC5CA,KACAC,MAFwB,EAAOA,MAG/B6X,KAAM1R,EAAU,4BAA8BpG,QCLnC,cACb,IAAMoG,EAAYsF,KAClB,OAAOxL,EAAgBqT,KAAI,gBAAGvT,EAAH,EAAGA,GAAH,MAAoB,CAC7CA,KACAC,MAFyB,EAAOA,MAGhC6X,KAAM1R,EAAU,0BAA4BpG,QCJjC,cACb,IAAM8I,EAAUC,cAIhB,OAHemwB,KAAYC,MACzBrwB,EAAQI,SAASkwB,SCFftjB,GAAoBpF,GAAWqF,IAUxBsjB,GAAiB,WAC5B,IAAQC,EAAgBC,KAAhBD,YACR,EAAkD7oB,KAA1CJ,EAAR,EAAQA,UAAWD,EAAnB,EAAmBA,aAAcE,EAAjC,EAAiCA,aAE3B8f,EAAakJ,EACfrW,SAASqW,EAAa,IACtBxjB,GAWJ,OATA9L,qBAAU,WAER,IAAK,IAAIwvB,EAAM,EAAGA,GAAOpJ,EAAYoJ,IAC9BppB,EAAaiF,SAASmkB,IACzBnpB,EAAUmpB,KAGb,CAACpJ,EAAY/f,EAAWD,IAEpB,CAAEE,eAAcF,eAAcggB,e,qBCWxB,YAACxiB,GACd,IACEjJ,EAYEiJ,EAZFjJ,OACAgO,EAWE/E,EAXF+E,KACA7E,EAUEF,EAVFE,QACAuiB,EASEziB,EATFyiB,gBACAC,EAQE1iB,EARF0iB,cACAF,EAOExiB,EAPFwiB,WACAqJ,EAME7rB,EANF6rB,iBACAC,EAKE9rB,EALF8rB,SACA1D,EAIEpoB,EAJFooB,eACA2D,EAGE/rB,EAHF+rB,gBACA5D,EAEEnoB,EAFFmoB,aACAxF,EACE3iB,EADF2iB,QAGIqJ,EAAmB7J,GAA4B,CAAEprB,SAAQgO,SACzDknB,EAAkBpE,GAA2B,CAAE9wB,SAAQgO,SACvD8d,EAAc5G,KACdoM,EAAaZ,KACbvE,EAA2B/D,GAAwB,CACvD3X,MAAOgb,EACPzd,K5CjEuB,K4CkEvBojB,aAAc9S,SAAS8S,EAAc,MAEvC,EAAkCjsB,oBAAkB,GAApD,oBAAOgwB,EAAP,KAAkBC,EAAlB,KAiPA,OA/OA/vB,qBAAU,WACR,QAC4BjD,IAA1B6yB,EAAiB3pB,OAChBwgB,EAAYvgB,UACZugB,EAAYtgB,YACYpJ,IAAzB8yB,EAAgB5pB,OACfgmB,EAAW/lB,UACX+lB,EAAW9lB,QACyB,IAArC2gB,EAAyB5gB,UACxB4gB,EAAyB3gB,YACQpJ,IAAlC+pB,EAAyB7gB,OACxB6pB,EACD,CACAC,GAAa,GACb,IAIIpH,EACAe,EALEsG,EAAeP,EAAiBvI,wBAChC3nB,EAA6B,EAArBywB,EAAazwB,MACrBG,EAA+B,EAAtBswB,EAAatwB,OACtBkpB,EAA8B,GAGpC,GAAI+G,IAAoB31B,GAAgBuxB,QAAS,CAC/C,IAAQtI,EAAa4M,EAAgB5pB,KAA7Bgd,SACRyG,EAAWxzB,EAKTyyB,EAHApC,IAAY7sB,GAAQ+tB,gBACc1qB,IAAlC+pB,EAAyB7gB,KAEZojB,eACVC,OAAO,CACNxC,EAAyB7gB,KAAKkd,cAAcV,kBAC5CqE,EAAyB7gB,KAAKkd,cAAcL,qBAC5CgE,EAAyB7gB,KAAKkd,cAAcT,oBAE7C1lB,MAAM5G,GAETmwB,IAAY7sB,GAAQguB,WACc3qB,IAAlC+pB,EAAyB7gB,KAEZojB,eACVC,OAAO,CACNxC,EAAyB7gB,KAAKkd,cAAcR,cAC5CmE,EAAyB7gB,KAAKkd,cAAcN,iBAC5CiE,EAAyB7gB,KAAKkd,cAAcP,gBAE7C5lB,MAAM3G,GAEI,aAEf4sB,EAASnD,SAAQ,YAA2C,IAAxCoF,EAAuC,EAAvCA,UAAWc,EAA4B,EAA5BA,WAAYC,EAAgB,EAAhBA,UACnCsF,EAAUU,EAAWhmB,KAAKif,GAChC,GACEqG,GACkB,OAAlBA,EAAQngB,OACRmgB,EAAQngB,MAAM7O,aAAewvB,EAC7B,CACA,IAAQje,EAA6Byd,EAA7Bzd,KAAMsd,EAAuBG,EAAvBH,mBACd,IACGY,EAAe3gB,SACb+f,EAA8B7uB,YAEjC,CACA,IAEIgtB,EAFET,EAAY9C,GAA0B,EACtC+C,EAAY9C,GAAwB,EAEpCsG,EACJzF,EAAyB7gB,KAAKgd,SAASiC,GAMrCqE,EAJFhD,IAAY7sB,GAAQ+tB,gBACc1qB,IAAlC+pB,EAAyB7gB,KAErBsmB,EACK5D,EACL4D,EAAqBhI,oBAGhB,OAGTgC,IAAY7sB,GAAQguB,WACc3qB,IAAlC+pB,EAAyB7gB,KAErBsmB,EACK5D,EACL4D,EAAqB/H,gBAGhB,YAGFznB,EAET6rB,EAAYha,KAAK,CACf5Y,GAAIkvB,EACJtZ,MACEya,IAAoBxa,GAAgBsd,UAChCL,EACAC,EACNla,MAAOf,GAAc,GACrByb,OACAH,iBAAmBgC,EAA8B7uB,sBAKpD,CACL,IAAQnC,EAAew1B,EAAiB3pB,KAAhC7L,WACRsvB,EAAW3zB,EAKT4yB,EAHApC,IAAY7sB,GAAQ+tB,gBACc1qB,IAAlC+pB,EAAyB7gB,KAEZojB,eACVC,OAAO,CACNxC,EAAyB7gB,KAAKid,aAAaT,kBAC3CqE,EAAyB7gB,KAAKid,aAAaJ,qBAC3CgE,EAAyB7gB,KAAKid,aAAaR,oBAE5C1lB,MAAM5G,GAETmwB,IAAY7sB,GAAQguB,WACc3qB,IAAlC+pB,EAAyB7gB,KAEZojB,eACVC,OAAO,CACNxC,EAAyB7gB,KAAKid,aAAaP,cAC3CmE,EAAyB7gB,KAAKid,aAAaL,iBAC3CiE,EAAyB7gB,KAAKid,aAAaN,gBAE5C5lB,MAAM3G,GAEI,aAEf+D,EAAW0lB,SAAQ,YAAyC,IAAtCR,EAAqC,EAArCA,QAAS0G,EAA4B,EAA5BA,WAAYC,EAAgB,EAAhBA,UACnClG,EAAW0G,EAAYxgB,KAAKqZ,GAClC,GAAIS,GAAYA,EAAS3U,QAAUgb,EAAY,CAC7C,IAAQtY,EAA2BiS,EAA3BjS,KAAM4R,EAAqBK,EAArBL,iBACd,IAAK4G,EAAcjb,SAASqU,EAAiBnjB,YAAa,CACxD,IAEIgtB,EAFET,EAAY9C,GAA0B,EACtC+C,EAAY9C,GAAwB,EAE1C,IACGM,IAAY7sB,GAAQ+tB,WAAalB,IAAY7sB,GAAQguB,OACtDZ,EAAyB7gB,KACzB,CACA,IAAMwP,EACJqR,EAAyB7gB,KAAK7L,WAAWklB,GACrC4K,EACJ3D,IAAY7sB,GAAQ+tB,UAChBhS,EAAO8O,mBACP9O,EAAO+O,eACb+E,EAAOZ,EAAWuB,GAEpBtB,EAAYha,KAAK,CACf5Y,GAAIspB,EACJ1T,MACEya,IAAoBxa,GAAgBsd,UAChCL,EACAC,EACNla,MAAOf,GAAc,GACrByb,OACAH,iBAAkB1J,EAAiBnjB,kBAM7C,IAAMitB,EAAcC,aAAc,CAChCxjB,KAAM2iB,EACNrpB,QACAG,SACAgqB,aAEIuG,EAAS7rB,SAAS8rB,cAAc,UACtCD,EAAO1wB,MAAQA,EACf0wB,EAAOvwB,OAASA,EAChB,IAAMywB,EAAUF,EAAOG,WAAW,MAC9BD,GACF3G,EAAYK,aAAa/J,SAAQ,SAACuQ,GAChCF,EAAQG,YACRH,EAAQI,KAAKF,EAAKhG,GAAIgG,EAAK9F,GAAI8F,EAAK/F,GAAI+F,EAAKG,IAC7CL,EAAQM,UAAYJ,EAAKp6B,MACzBk6B,EAAQ5G,OACR4G,EAAQO,YAAc,OACtBP,EAAQQ,YAEVC,KAAYnB,EAAkB,CAC5BoB,YAAY,EACZxY,gBAAiB,kBAEhBtP,MAAK,SAAC+nB,GACLX,EAAQY,UAAUD,EAAY,EAAG,EAAGvxB,EAAOG,GAC3C,IAAMsxB,EAAO5sB,SAAS8rB,cAAc,KACpCc,EAAKC,SAAWvB,EAAQ,UACjBA,EADiB,gDAC+BrJ,EAD/B,eACqD1d,EADrD,QAEpB,4BACJqoB,EAAKxb,KAAOya,EAAOiB,UAAU,aAC7BF,EAAKG,QACLH,EAAK/e,SACLnO,OAEDoH,OAAM,SAACzG,GACNyD,QAAQ/B,MAAM1B,GACdX,SAGJoE,QAAQ/B,MAAM,6BAA+B8pB,GAC7CnsB,QAGH,CACDgjB,EACA6I,EACAC,EACAC,EACApJ,EACAwF,EACAnoB,EACAuiB,EACAD,EACA2F,EACAzF,EACA0F,EACAyD,EACAC,EACA/mB,EACA4d,EACAuJ,IAGEF,EAAiBzpB,QACnB+B,QAAQ/B,MAAMypB,EAAiBzpB,OAC/BrC,KAGE+rB,EAAgB1pB,QAClB+B,QAAQ/B,MAAM0pB,EAAgB1pB,OAC9BrC,KAIA,kBAACzM,EAAD,KACE,kBAAC,GAAD,QChTA02B,GAAWx4B,IAAOC,IAAV,gFAAGD,CAAH,uCAGH3B,EAAYD,OAKjBq6B,GAAez4B,YAAOw4B,IAAV,oFAAGx4B,CAAH,kEAQZ04B,GAAgB14B,YAAOw4B,IAAV,qFAAGx4B,CAAH,yBAIbmO,GAAUnO,IAAOC,IAAV,+EAAGD,CAAH,yBAIP+L,GAAM/L,IAAOC,IAAV,2EAAGD,CAAH,0FAKHa,EAAoB,GACpBA,EAAoB,GACpBA,EAAoB,IAIpBg7B,GAAS77B,IAAOC,IAAV,8EAAGD,CAAH,4FA6BG87B,GAlBS,SAACztB,GACvB,IACMtO,EADgBsO,EAAd+qB,UACiBV,GAAgBD,GACnC5xB,EAAYsF,KAElB,OACE,kBAACpM,EAAD,CAAM8N,UAAW2W,IACf,kBAAC,GAAD,KACE,kBAACqX,GAAD,KACE,6BAAMh1B,EAAU,yBAChB,6BAAMA,EAAU,2BAElB,kBAAC,GAAD,SC1DF2xB,GAAWx4B,IAAOC,IAAV,2EAAGD,CAAH,uCAGH3B,EAAYD,OAKjBq6B,GAAez4B,YAAOw4B,IAAV,+EAAGx4B,CAAH,kEAQZ04B,GAAgB14B,YAAOw4B,IAAV,gFAAGx4B,CAAH,yBAIbmO,GAAUnO,IAAOC,IAAV,0EAAGD,CAAH,yBAIP+L,GAAM/L,IAAOC,IAAV,sEAAGD,CAAH,0FAKHc,EAAe,GACfA,EAAe,GACfA,EAAe,IAIf+6B,GAAS77B,IAAOC,IAAV,yEAAGD,CAAH,4FA6BG87B,GAlBS,SAACztB,GACvB,IACMtO,EADgBsO,EAAd+qB,UACiBV,GAAgBD,GACnC5xB,EAAYsF,KAElB,OACE,kBAACpM,EAAD,CAAM8N,UAAW2W,IACf,kBAAC,GAAD,KACE,kBAAC,GAAD,KACE,6BAAM3d,EAAU,qBAChB,6BAAMA,EAAU,uBAElB,kBAAC,GAAD,S,UCpDF9G,GAAOC,IAAOC,IAAV,2EAAGD,CAAH,oEAOJ+7B,GAAS16B,YAAH,6MAkBN26B,GAAoBh8B,IAAOC,IAAV,wFAAGD,CAAH,sMAMR+7B,IAOTE,GAAej8B,YAAOkhB,IAAV,mFAAGlhB,CAAH,yFACPghB,GAMFC,IA+EM7C,OAAMC,MA7DS,SAAChQ,GAC7B,IACEiQ,EAMEjQ,EANFiQ,eACA4d,EAKE7tB,EALF6tB,YACAld,EAIE3Q,EAJF2Q,wBACAc,EAGEzR,EAHFyR,WACAb,EAEE5Q,EAFF4Q,uBACAN,EACEtQ,EADFsQ,cAGI9X,EAAYsF,KAElB,EAAkD5B,qBAAlD,oBAAO4xB,EAAP,KAA0BC,EAA1B,KACA,EACE7xB,qBADF,oBAAO8xB,EAAP,KAA8BC,EAA9B,KAeMC,EAAWJ,EACf,kBAACH,GAAD,KACE,kBAAC,KAAD,CACE7sB,IAAK,wCAA0C+sB,EAC/CxrB,KAAMoP,EACNnB,cAAeA,EACfK,wBAAyBA,EACzBC,uBAAwBA,EACxBC,WAAW,EACXC,kBAAmB,EACnBP,SAtBW,SAACmB,GAEdzB,EADEyB,EACaA,EAAEtf,QAEF+G,GAEjB80B,EAAyBvc,GACf,OAANA,GACFqc,GAAqB,IAenBI,WAAY,IACZjuB,QAAS,kBACN8tB,EAAsD,KAA9BD,GAAqB,IAEhD1d,eAAe,KAGjB,KAEJ,OACE,kBAAC,GAAD,KACE,kBAACud,GAAD,CAAcxuB,QAAS,kBAAM2uB,GAAqB,KAChD,0BAAMhvB,wBAAyB,CAAEC,OApHf,6cAqHlB,yBAAKQ,UAAWoT,IACbpa,EAAU,2CAGd01B,MZ3GDhd,GAAmBvf,IAAOC,IAAV,sGAAGD,CAAH,iFxCpBQ,WwC2BxBsf,GAAkBtf,YAAO0B,GAAV,qGAAG1B,CAAH,ilCAiEVghB,K,SAUCuP,K,cAAAA,E,kBAAAA,E,WAAAA,Q,KAeZ,I,MaiDYkM,Gb0GGre,OAAMC,MA3JS,SAAChQ,GAC7B,IAiBIquB,EACAC,EACA3d,EACAC,EACAN,EA6BAie,EAjDFC,EAMExuB,EANFwuB,cACAve,EAKEjQ,EALFiQ,eACAuS,EAIExiB,EAJFwiB,WACA2F,EAGEnoB,EAHFmoB,aACAsG,EAEEzuB,EAFFyuB,KACAC,EACE1uB,EADF0uB,OAGIl2B,EAAYsF,KACZ6wB,EAAYC,KACZvG,EAAawG,KACbC,ERzD6C,WACnD,MAA+CtT,KAE/C,MAAO,CAAElZ,QAFT,EAAQA,QAEUC,MAFlB,EAAiBA,MAEQF,KAvBgB,SACzCA,GAEA,IAAM0I,EAA0B,QACnB5R,IAATkJ,GACqBA,EAAf7L,WACG0lB,SAAQ,YAAyC,IAAtCR,EAAqC,EAArCA,QAASxR,EAA4B,EAA5BA,KAAM1C,EAAsB,EAAtBA,MAAOmU,EAAe,EAAfA,SAC7B,OAATzR,GAA2B,OAAV1C,GACnBuD,EAASC,KAAK,CACZ5Y,GAAIspB,EACJzQ,MAAOf,EACP1C,QACA0D,UAAwB,OAAbyQ,EAAoB,KAAOA,EAAShjB,gBAKvD,OAAOoS,EAKMgkB,CADb,EAAwB1sB,OQwDG2sB,GACrBC,ECjE4C,WAClD,MAA+C1H,KAE/C,MAAO,CAAEjlB,QAFT,EAAQA,QAEUC,MAFlB,EAAiBA,MAEQF,KAvBe,SACxCA,GAEA,IAAM0I,EAA0B,QACnB5R,IAATkJ,GACmBA,EAAbgd,SACCnD,SAAQ,YAAiC,IAA9BoF,EAA6B,EAA7BA,UAAWpX,EAAkB,EAAlBA,KAAM1C,EAAY,EAAZA,MACtB,OAAT0C,GAA2B,OAAV1C,GACnBuD,EAASC,KAAK,CACZ5Y,GAAIkvB,EACJrW,MAAOf,EACP1C,QACA0D,UAAW,UAKnB,OAAOH,EAKMmkB,CADb,EAAwB7sB,ODgEE8sB,GACpBC,EAAqBjkB,KACrBnP,EAAmBqzB,eAoCzB,GA7BIZ,IAASvM,GAAKoN,OAChBjB,EAAuBS,EAAmBzsB,KAE1CsO,GADA2d,EAAQ9L,GAEJhZ,MAAMC,KAAKD,MAAM8kB,GAAO3mB,aACxBxO,EACJyX,EAAyBpY,EAAU,yCACnC8X,EAAgB9X,EAAU,2BACjBi2B,IAASvM,GAAKyF,SACvB0G,EAAuBY,EAAkB5sB,KACzCisB,EAAQnG,EACRxX,EACEwX,IAAiBhyB,GAAaO,GAAK,CAAC,QAAKyC,EAC3CyX,EAAyBpY,EAAU,uCACnC8X,EAAgB9X,EAAU,6BACjBi2B,IAASvM,GAAKqN,KACvBlB,EAAuBe,EAAmB/sB,KAC1CsO,EAA0B,CAAC,KAC3B2d,EAAQ,KACR1d,EAAyB,qBACzBN,EAAgB,cAEhB+d,EAAuB,GACvBC,EAAQ,KACR1d,EAAyB,GACzBN,EAAgB,IAKfme,IAASvM,GAAKoN,OAASR,EAAmBxsB,SAC1CmsB,IAASvM,GAAKyF,SAAWsH,EAAkB3sB,SAC3CmsB,IAASvM,GAAKqN,KAAOH,EAAmB9sB,QAEzCisB,EACE,kBAAC,GAAD,KACE,kBAAC,GAAD,YAGC,GAAIE,IAASvM,GAAKoN,YAAsCn2B,IAA7B21B,EAAmBvsB,MACnD+B,QAAQ/B,MAAMusB,EAAmBvsB,OACjCgsB,EACE,kBAAC,GAAD,KACE,kBAAC/c,GAAD,YAGC,GAAIid,IAASvM,GAAKyF,cAAuCxuB,IAA5B81B,EAAkB1sB,MACpD+B,QAAQ/B,MAAM0sB,EAAkB1sB,OAChCgsB,EACE,kBAAC,GAAD,KACE,kBAAC/c,GAAD,YAGC,GAAIid,IAASvM,GAAKqN,UAAoCp2B,IAA7Bi2B,EAAmB7sB,MACjD+B,QAAQ/B,MAAM6sB,EAAmB7sB,OACjCgsB,EACE,kBAAC,GAAD,KACE,kBAAC/c,GAAD,YAGC,GACJid,IAASvM,GAAKoN,OAASd,EAAcv2B,SAAW02B,EAAU12B,QAC1Dw2B,IAASvM,GAAKyF,SAAW6G,EAAcv2B,SAAWowB,EAAWpwB,OAE9Ds2B,EACE,kBAAC,GAAD,KACE,kBAAC/c,GAAD,CAAa1F,gBAAiB,sCAG7B,QAA6B3S,IAAzBk1B,EAAoC,CAC7C,IAOM5c,EAA4B4c,EAAqBtzB,QACrD,gBAAGyM,EAAH,EAAGA,MAAOpV,EAAV,EAAUA,GAAV,OACa,OAAVk8B,GAA6B,OAAV9mB,GAAkBA,GAAS8mB,KAC9CE,EAAc/mB,SAASrV,MAO1Bm8B,EAHAvyB,EAAiBL,MAAQ8W,GAA8B3K,KACvD9L,EAAiBL,MAAQ8W,GAA8BC,IAGrD,kBAAC,KAAD,CACE5R,IAAG,mCAA8B0hB,GAA9B,OAA2C2F,GAA3C,OAA0DsG,GAC7DpsB,KAAMoP,EACNnB,cAAeA,EACfK,wBAAyBA,EACzBC,uBAAwBA,EACxBC,WAAW,EACXC,kBAAmB,EACnBP,SA1BW,SAACmB,GAEdzB,EADEyB,EACaA,EAAEtf,QAEF+G,IAuBbg1B,WAAY,MAKd,kBAACqB,GAAD,CACE7e,wBAAyBA,EACzBV,eAAgBA,EAChB4d,YAAW,UAAKrL,GAAL,OAAkB2F,GAAlB,OAAiCsG,GAC5Chd,WAAYA,EACZb,uBAAwBA,EACxBN,cAAeA,SAKrBie,EAAc,KAGhB,OACE,kBAAC,GAAD,CACE/uB,UACGkvB,OAIGv1B,EAHAs1B,IAASvM,GAAKqN,IACZpZ,GACAA,GAGRlX,MAAOyvB,EAAS,CAAEe,WAAY,eAAat2B,GAE1Co1B,M,oBc3PD78B,GAAOC,IAAOC,IAAV,+EAAGD,CAAH,wBAIJiiB,GAAQjiB,IAAOC,IAAV,gFAAGD,CAAH,6CAKL+9B,GAAU/9B,IAAOC,IAAV,kFAAGD,CAAH,sGAQPg+B,GAAWh+B,IAAOi+B,GAAV,mFAAGj+B,CAAH,qCAgLCk+B,GAvKgB,SAAC7vB,GAC9B,IAsEI8vB,EAtEIC,EAAoB/vB,EAApB+vB,gBAEFv0B,EAASmwB,KACTnzB,EAAYsF,KAEZkyB,OACgC72B,IAApC42B,EAAgBtN,gBACd,kBAACiN,GAAD,KACE,kBAACC,GAAD,KAAWn3B,EAAU,+BACrB,4BACGgD,EAAOy0B,iBACJz0B,EAAOy0B,iBACPznB,KAGN,KAEA0nB,OACgC/2B,IAApC42B,EAAgBhE,gBACd,kBAAC2D,GAAD,KACE,kBAACC,GAAD,KAAWn3B,EAAU,+BACrB,4BACG23B,KACC30B,EAAO40B,YAAc50B,EAAO40B,YAAc75B,MAI9C,KAEA85B,OAC2Bl3B,IAA/B42B,EAAgBvN,WACd,kBAACkN,GAAD,KACE,kBAACC,GAAD,KAAWn3B,EAAU,2BACrB,4BACGgD,EAAOkwB,YACJlwB,EAAOkwB,YAC+B,kBAA/BqE,EAAgBvN,YACrBuN,EAAgBvN,WAAW8N,oBAC3BxtB,GAAWytB,IACXroB,GAAmB,IACxB1P,EAAU,2BAGb,KAEA2vB,OAC6BhvB,IAAjC42B,EAAgB5H,aACd,kBAACuH,GAAD,KACE,kBAACC,GAAD,KAAWn3B,EAAU,4BACrB,4BACGA,EAAU,sCAAuC,CAChDmvB,QAEMnsB,EAAOg1B,oBAKjB,KAEAC,OACmCt3B,IAAvC42B,EAAgBW,mBACd,kBAAChB,GAAD,KACE,kBAACC,GAAD,KAAWn3B,EAAU,4BACrB,4BACGgD,EAAOg1B,gBAAkBh1B,EAAOg1B,gBAAkB56B,KAGrD,KAOJk6B,EAHsC,kBAA/BC,EAAgBY,YACvBn1B,EAAOo1B,cAAgBj7B,GAAWk7B,IAEhB76B,GAEoB,kBAA/B+5B,EAAgBY,YACvBZ,EAAgBY,WAAWE,MAC1Br1B,EAAOo1B,YAEUj7B,GAAWk7B,IAEVr1B,EAAOo1B,YAEtBp1B,EAAOo1B,YADP56B,GAGN,IAAM86B,OAC2B33B,IAA/B42B,EAAgBY,WACd,kBAACjB,GAAD,KACE,kBAACC,GAAD,KAAWn3B,EAAU,0BACrB,4BACGA,EAAU,2BAA4B,CAAEyd,KAAM6Z,MAGjD,KAEAiB,OAC6B53B,IAAjC42B,EAAgB5H,aAA6B,UAAYryB,GAAQc,OAC7D+rB,OACwBxpB,IAA5B42B,EAAgBpN,QACd,kBAAC+M,GAAD,KACE,kBAACC,GAAD,KACsC,kBAA5BI,EAAgBpN,SACxBoN,EAAgBpN,QAAQqO,MACpBx4B,EAAU,2BACVA,EAAU,uBAEhB,4BAAKgD,EAAOy1B,SAAWz1B,EAAOy1B,SAAWF,IAEzC,KAEAG,OAC+B/3B,IAAnC42B,EAAgBoB,eACd,kBAACzB,GAAD,KACE,kBAACC,GAAD,KAAWn3B,EAAU,0BACrB,4BACGA,EAAU,2BAA4B,CACrCyd,KAAMza,EAAO41B,iBACT51B,EAAO41B,iBACP/6B,OAIR,KAEAg7B,OAC4Bl4B,IAAhC42B,EAAgBsB,YACd,kBAAC3B,GAAD,KACE,kBAACC,GAAD,KAAWn3B,EAAU,4BACrB,4BACG23B,KACC30B,EAAO81B,cAAgB91B,EAAO81B,cAAgBp7B,GAAYq7B,aAI9D,KAEAC,OAC6Br4B,IAAjC42B,EAAgByB,aACd,kBAAC9B,GAAD,KACE,kBAACC,GAAD,sBACA,iCAA8Bx2B,IAAzBqC,EAAOi2B,cAA8Bj2B,EAAOi2B,cAAgB,IAEjE,KAEN,OACE,kBAAC,GAAD,KACE,kBAAC,GAAD,KAAQj5B,EAAU,8BAClB,kBAACk3B,GAAD,KACE,4BAAKl3B,EAAU,gCAEhBw3B,EACAE,EACAG,EACAlI,EACAsI,EACAK,EACAnO,EACA6O,EACAH,EACAH,I,mBCnMDx/B,GAAOC,IAAOC,IAAV,2EAAGD,CAAH,wCAIJ+/B,GAAkB//B,IAAOC,IAAV,sFAAGD,CAAH,8gBAPO,2BvDAA,oBuDAA,2BACA,sDvDMI,UuDNJ,2BvDOE,UuDPF,2BvDMI,WuD2HjBggC,GA1DY,SAAC,GAA0C,IAAxCC,EAAuC,EAAvCA,YAAaC,EAA0B,EAA1BA,aACnCC,EAAWC,eAAWrM,OAAO,CAAC,KAAO,MAAMtsB,MAAM,CAAC,EAAG,MAErD44B,EAAmB,SAAChqB,GAAD,OAAoBA,EAAQ8pB,EAAS9pB,GAAS,GACjEiqB,EAAe,SAACjqB,GACpB,IAAMkqB,EAAWlqB,EAAQ8pB,EAASK,OAAOnqB,GAAS,EAC9C/O,EAAgB,EAgBpB,OAdEA,EADEi5B,EAAW,KACG,EACPA,EAAW,KACJ,EACPA,EAAW,IACJ,EACPA,EAAW,GACJ,EACPA,EAAW,GACJ,EACPA,EAAW,IAAMA,EAAW,KACrB,EAEA,EAEXlqB,EAAQ3O,WAAW64B,EAAS54B,QAAQL,IAAkB,GAc/D,OACE,kBAAC,GAAD,KACE,kBAACy4B,GAAD,KACE,kBAACU,GAAA,EAAD,CACE5yB,UAjHiB,0BAkHjB6yB,eAjHkB,2BAkHlBC,eAjHkB,2BAkHlBC,aACE/c,MAAMqc,GACFG,EAAiB,GACjBA,EAAiBH,GAEvBW,YAvBY,SAClBz+B,EACAyoB,GAFkB,OAIlB,0BAAWzoB,EACT,gDACkB,SADlB,IACwBk+B,EAAazV,EAAMiW,aAkBvC3qB,IAAK,IACL4K,IAAK,EACLggB,cAAe,SAACC,GAAD,OAAef,EAAYK,EAAaU,UC7HlDC,GARc,SAC3BC,EACAC,EACAC,KCwCIC,GAAUhgC,YAAH,qOAkBPtB,GAAOC,IAAOC,IAAV,qEAAGD,CAAH,4QASKqhC,GAGJhjC,EAAYD,OAOjBkjC,GAActhC,IAAOC,IAAV,4EAAGD,CAAH,0VAoBN3B,EAAYD,MAKZC,EAAYD,OAKjB6jB,GAAQjiB,IAAOkL,GAAV,sEAAGlL,CAAH,uVzD5FmB,UALG,UyDsGhBgB,EzDjGa,WyD0HxBsO,GAActP,IAAO4B,OAAV,4EAAG5B,CAAH,gKAOAgB,GAIXmN,GAAUnO,IAAOC,IAAV,wEAAGD,CAAH,6DAMPuhC,GAAcvhC,IAAOC,IAAV,4EAAGD,CAAH,yIASXwhC,GAAyBxhC,IAAOC,IAAV,uFAAGD,CAAH,+BAKtByhC,GAAiCzhC,YAAOwhC,IAAV,+FAAGxhC,CAAH,sCAK9B0hC,GAAuB1hC,YAAO2B,GAAV,qFAAG3B,CAAH,6HzD7KD,WyDyLnB2hC,GAA4B3hC,YAAO6B,GAAV,0FAAG7B,CAAH,6HzDzLN,WyDsMnB23B,GAAQ33B,IAAOmjB,MAAV,uEAAGnjB,CAAH,yFAMA3B,EAAYH,QAKjB0jC,GAAgB5hC,YAAO23B,IAAV,+EAAG33B,CAAH,kBAIb6hC,GAAmB7hC,IAAO4B,OAAV,kFAAG5B,CAAH,2uBzDtMQ,+ByDwON,qBAAG8hC,UzDxOG,UyDyOK,SzDzOL,UyDsQnBzjC,EAAYH,QAKjB6jC,GAAuB/hC,YAAO6hC,IAAV,sFAAG7hC,CAAH,4BAMpBgiC,GAAchiC,YAAO2B,GAAV,6EAAG3B,CAAH,uBAm0BFiiC,GAxxBE,SAAC5zB,GAChB,IAoCI6zB,EAsGA9H,EAgDA+H,EA2HAC,EAyGAC,EA0DAC,EAyHAC,EA6EAC,EA0BAC,EAxrBIl0B,EAA6BF,EAA7BE,QAAS6vB,EAAoB/vB,EAApB+vB,gBACX70B,EAAUC,cACVK,EAASmwB,KACTnzB,EAAYsF,KACV8E,EAAkBC,KAAlBD,cAEFyxB,EAAgB,SAACC,EAAetsB,GACpC,IAAMwH,EAAQ8b,KAAYiJ,UAAZ,2BAA2B/4B,GAA3B,mBAAoC84B,EAAQtsB,KACpDwsB,EAAShlB,EACXtU,EAAQI,SAASC,SAAW,IAAMiU,EAClCtU,EAAQI,SAASC,SACrBq3B,GAAqB,cAAe0B,EAAhB,UAA0BtsB,IAC9C9M,EAAQ8P,KAAKwpB,IAyBf,QAAwCr7B,IAApC42B,EAAgBtN,gBAA+B,CACjD,IAAMgS,GACFj5B,EAAOy0B,kBACPznB,KAA2BP,GAAgBsd,WAC7C/pB,EAAOy0B,mBAAqBhoB,GAAgBsd,UACxC+N,GACAD,GAEAqB,GACFl5B,EAAOy0B,kBACPznB,KAA2BP,GAAgBQ,WAC7CjN,EAAOy0B,mBAAqBhoB,GAAgBQ,UACxC6qB,GACAD,GACAsB,GACgC,IAApC5E,EAAgBtN,gBACZ0Q,GACAC,GACAwB,GACgC,IAApC7E,EAAgBtN,gBAA4B6G,GAAQiK,GAChDsB,GACgC,IAApC9E,EAAgBtN,gBACZjqB,EAAU,wBACVA,EAAU,iCACVs8B,EACuC,kBAApC/E,EAAgBtN,iBACvBsN,EAAgBtN,gBAAgBqS,gBAC5B/E,EAAgBtN,gBAAgBqS,gBAChC,GACNjB,EACE,kBAACX,GAAD,KACE,kBAAC,GAAD,CAASrmB,YAAagoB,IACtB,kBAACD,EAAD,KACGp8B,EAAU,+BAEb,kBAACm8B,EAAD,KACE,kBAACD,EAAD,CACEt1B,QACE01B,EAAgBrtB,SAASQ,GAAgBQ,gBACrCtP,EACA,kBACEk7B,EAAc,mBAAoBpsB,GAAgBQ,YAE1DjJ,UACEs1B,EAAgBrtB,SAASQ,GAAgBQ,WACrC,uBACAtP,GAGN,kBAAC,GAAD,CACE0T,YACEioB,EAAgBrtB,SAASQ,GAAgBQ,WACrCjQ,EAAU,gCACV,KAENuU,MAAOpE,GAAa2D,KACpBQ,OACEgoB,EAAgBrtB,SAASQ,GAAgBQ,WACrC,UACA,WAGLR,GAAgBQ,YAGrB,kBAACgsB,EAAD,CACEr1B,QACE01B,EAAgBrtB,SAASQ,GAAgBsd,gBACrCpsB,EACA,kBACEk7B,EAAc,mBAAoBpsB,GAAgBsd,YAE1D/lB,UACEs1B,EAAgBrtB,SAASQ,GAAgBsd,WACrC,uBACApsB,GAGN,kBAAC,GAAD,CACE0T,YACEioB,EAAgBrtB,SAASQ,GAAgBsd,WACrC/sB,EAAU,gCACV,KAENuU,MAAOpE,GAAa2D,KACpBQ,OACEgoB,EAAgBrtB,SAASQ,GAAgBsd,WACrC,UACA,WAGLtd,GAAgBsd,mBAO3BsO,EAAqB,KAIvB,QAAwC16B,IAApC42B,EAAgBhE,gBAA+B,CACjD,IAAMgJ,GACFv5B,EAAO40B,aACP75B,KAA2BH,GAAgBuxB,SAC7CnsB,EAAO40B,cAAgBh6B,GAAgBuxB,QACnC2L,GACAD,GACA2B,GACFx5B,EAAO40B,aACP75B,KAA2BH,GAAgBI,YAC7CgF,EAAO40B,cAAgBh6B,GAAgBI,WACnC88B,GACAD,GACAsB,GACgC,IAApC5E,EAAgBhE,gBACZoH,GACAC,GACAwB,GACgC,IAApC7E,EAAgBhE,gBAA2BzC,GAAQiK,GACrDxH,EACE,kBAACmH,GAAD,KACE,kBAAC,GAAD,CAASrmB,YAAarU,EAAU,+BAChC,kBAAC,EAAD,KACGA,EAAU,+BAEb,kBAAC,EAAD,KACE,kBAACw8B,EAAD,CACE51B,QAAS,kBACPi1B,EAAc,cAAej+B,GAAgBI,cAG9CgC,EAAU,gCAEb,kBAACu8B,EAAD,CACE31B,QAAS,kBACPi1B,EAAc,cAAej+B,GAAgBuxB,WAG9CnvB,EAAU,oCAMnBuzB,EAAkB,KAIpB,QAAmC5yB,IAA/B42B,EAAgBvN,WAA0B,CAC5C,IAAMmS,GAC2B,IAA/B5E,EAAgBvN,WACZ2Q,GACAC,GACAwB,GAC2B,IAA/B7E,EAAgBvN,WAAuB8G,GAAQiK,GAC3CsB,GAC2B,IAA/B9E,EAAgBvN,WACZhqB,EAAU,wBACVA,EAAU,iCACV83B,EACkC,kBAA/BP,EAAgBvN,YACvBuN,EAAgBvN,WAAW8N,oBACvBP,EAAgBvN,WAAW8N,oBAC3B,GACAiC,EACkC,kBAA/BxC,EAAgBvN,YACvBuN,EAAgBvN,WAAWta,kBACvB6nB,EAAgBvN,WAAWta,kBAC3BA,GACN4rB,EAAoBxD,EAClB,kBAAC4C,GAAD,KACE,kBAAC,GAAD,CAASrmB,YAAagoB,IACtB,kBAAC,EAAD,KAAiBr8B,EAAU,2BAC3B,kBAAC,EAAD,KACE,kBAACk7B,GAAD,CAAsBD,WAAW,GAC9B3wB,GAAWytB,IADd,IACoB/3B,EAAU,0BAE9B,+BACE,4BAAK83B,MAKX,kBAAC4C,GAAD,KACE,kBAAC,GAAD,CAASrmB,YAAagoB,IACtB,kBAAC,EAAD,KAAiBr8B,EAAU,2BAC3B,kBAAC,EAAD,KACE,kBAACg7B,GAAD,CACEp0B,QAAS,kBAAMi1B,EAAc,cAAevxB,GAAWmyB,SACvDxB,WACiC,IAA/B1D,EAAgBvN,cACbhnB,EAAOkwB,aAAe6G,IAAiBzvB,GAAWmyB,QACnDz5B,EAAOkwB,cAAgB5oB,GAAWmyB,OAAOt8B,aAG7C,8BACGmK,GAAWmyB,OADd,IACuBz8B,EAAU,yBADjC,KAC6D,IAC1DA,EAAU,4BAGf,kBAACg7B,GAAD,CACEp0B,QAAS,kBAAMi1B,EAAc,cAAevxB,GAAWqF,MACvDsrB,WACiC,IAA/B1D,EAAgBvN,cACbhnB,EAAOkwB,aAAe6G,IAAiBzvB,GAAWqF,KACnD3M,EAAOkwB,cAAgB5oB,GAAWqF,IAAIxP,aAG1C,8BACGmK,GAAWqF,IADd,IACoB3P,EAAU,2BAGhC,kBAACg7B,GAAD,CACEp0B,QAAS,kBAAMi1B,EAAc,cAAevxB,GAAWoyB,QACvDzB,WACiC,IAA/B1D,EAAgBvN,cACbhnB,EAAOkwB,aAAe6G,IAAiBzvB,GAAWoyB,OACnD15B,EAAOkwB,cAAgB5oB,GAAWoyB,MAAMv8B,aAG5C,8BACGmK,GAAWoyB,MADd,IACsB18B,EAAU,2BAGlC,kBAACg7B,GAAD,CACEp0B,QAAS,kBAAMi1B,EAAc,cAAevxB,GAAWwlB,OACvDmL,WACiC,IAA/B1D,EAAgBvN,cACbhnB,EAAOkwB,aAAe6G,IAAiBzvB,GAAWwlB,MACnD9sB,EAAOkwB,cAAgB5oB,GAAWwlB,KAAK3vB,aAG3C,8BACGmK,GAAWwlB,KADd,IACqB9vB,EAAU,2BAGhCoK,GAAiBE,GAAWqyB,MAC7B,kBAAC3B,GAAD,CACEp0B,QAAS,kBAAMi1B,EAAc,cAAevxB,GAAWqyB,OACvD1B,WACiC,IAA/B1D,EAAgBvN,cACbhnB,EAAOkwB,aAAe6G,IAAiBzvB,GAAWqyB,MACnD35B,EAAOkwB,cAAgB5oB,GAAWqyB,KAAKx8B,aAG3C,8BACGmK,GAAWqyB,KADd,IACqB38B,EAAU,2BAIhCoK,GAAiBE,GAAWytB,KAC7B,kBAACiD,GAAD,CACEp0B,QAAS,kBAAMi1B,EAAc,cAAevxB,GAAWytB,MACvDkD,WACiC,IAA/B1D,EAAgBvN,cACbhnB,EAAOkwB,aAAe6G,IAAiBzvB,GAAWytB,KACnD/0B,EAAOkwB,cAAgB5oB,GAAWytB,IAAI53B,aAG1C,8BACGmK,GAAWytB,IADd,IACoB/3B,EAAU,kCAQtCs7B,EAAoB,KAGtB,QAAqC36B,IAAjC42B,EAAgB5H,aAA4B,CAC9C,IAAMwM,GAC6B,IAAjC5E,EAAgB5H,aACZgL,GACAC,GACAwB,GAC6B,IAAjC7E,EAAgB5H,aAAyBmB,GAAQiK,GAC7CsB,GAC6B,IAAjC9E,EAAgB5H,aACZ3vB,EAAU,0BACVA,EAAU,mCACVs8B,EACoC,kBAAjC/E,EAAgB5H,cACvB4H,EAAgB5H,aAAa2M,gBACzB/E,EAAgB5H,aAAa2M,gBAC7B,GACNf,EACE,kBAACb,GAAD,KACE,kBAAC,GAAD,CAASrmB,YAAagoB,IACtB,kBAAC,EAAD,KAAiBr8B,EAAU,4BAC3B,kBAAC,EAAD,KACE,kBAACg7B,GAAD,CACEp0B,QACG01B,EAAgBrtB,SAAStR,GAAai/B,SAEnCj8B,EADA,kBAAMk7B,EAAc,gBAAiBl+B,GAAai/B,KAGxD51B,UACEs1B,EAAgBrtB,SAAStR,GAAai/B,IAClC,uBACAj8B,EAENs6B,WACmC,IAAjC1D,EAAgB5H,gBACb3sB,EAAO65B,eACR5+B,KAAwBN,GAAai/B,IACrC55B,EAAO65B,gBAAkBl/B,GAAai/B,KAG1C,kBAAC,GAAD,CACEvoB,YACEioB,EAAgBrtB,SAAStR,GAAai/B,IAClC58B,EAAU,gCACV,KAENuU,MAAOpE,GAAa2D,KACpBQ,OACEgoB,EAAgBrtB,SAAStR,GAAai/B,IAClC,UACA,WAGN,8BACG58B,EAAU,sCAAuC,CAChDmvB,QAAS,WAAaxxB,GAAai/B,QAK3C,kBAAC5B,GAAD,CACEp0B,QACG01B,EAAgBrtB,SAAStR,GAAaO,SAEnCyC,EADA,kBAAMk7B,EAAc,gBAAiBl+B,GAAaO,KAGxD8I,UACEs1B,EAAgBrtB,SAAStR,GAAaO,IAClC,uBACAyC,EAENs6B,WACmC,IAAjC1D,EAAgB5H,gBACb3sB,EAAO65B,eACR5+B,KAAwBN,GAAaO,IACrC8E,EAAO65B,gBAAkBl/B,GAAaO,KAG1C,kBAAC,GAAD,CACEmW,YACEioB,EAAgBrtB,SAAStR,GAAaO,IAClC8B,EAAU,gCACV,KAENuU,MAAOpE,GAAa2D,KACpBQ,OACEgoB,EAAgBrtB,SAAStR,GAAaO,IAClC,UACA,WAGN,8BACG8B,EAAU,sCAAuC,CAChDmvB,QAAS,WAAaxxB,GAAaO,eASjDq9B,EAAsB,KAIxB,QAA2C56B,IAAvC42B,EAAgBW,mBAAkC,CACpD,IAAMiE,GACmC,IAAvC5E,EAAgBW,mBACZyC,GACAC,GACAwB,GACmC,IAAvC7E,EAAgBW,mBAA8BpH,GAAQiK,GAClDsB,GACmC,IAAvC9E,EAAgBW,mBACZl4B,EAAU,4BACVA,EAAU,qCAChBw7B,EACE,kBAACd,GAAD,KACE,kBAAC,GAAD,CAASrmB,YAAagoB,IACtB,kBAAC,EAAD,KAAiBr8B,EAAU,4BAC3B,kBAAC,EAAD,KACE,kBAACg7B,GAAD,CACEp0B,QAAS,kBACPi1B,EAAc,kBAAmB1kC,EAAYkG,UAE/C49B,WACIj4B,EAAOg1B,iBACP56B,KAAuBjG,EAAYkG,SACrC2F,EAAOg1B,kBAAoB7gC,EAAYkG,SAGzC,8BAAOs6B,KAAWxgC,EAAYkG,WAEhC,kBAAC29B,GAAD,CACEp0B,QAAS,kBACPi1B,EAAc,kBAAmB1kC,EAAY2lC,UAE/C7B,WACIj4B,EAAOg1B,iBACP56B,KAAuBjG,EAAY2lC,SACrC95B,EAAOg1B,kBAAoB7gC,EAAY2lC,SAGzC,8BAAOnF,KAAWxgC,EAAY2lC,WAEhC,kBAAC9B,GAAD,CACEp0B,QAAS,kBAAMi1B,EAAc,kBAAmB1kC,EAAY4lC,OAC5D9B,WACIj4B,EAAOg1B,iBACP56B,KAAuBjG,EAAY4lC,MACrC/5B,EAAOg1B,kBAAoB7gC,EAAY4lC,MAGzC,8BAAOpF,KAAWxgC,EAAY4lC,eAMtCvB,EAAuB,KAIzB,QAAmC76B,IAA/B42B,EAAgBY,WAA0B,CAC5C,IAAM6E,GAC2B,IAA/BzF,EAAgBY,YACsB,kBAA/BZ,EAAgBY,WACnBgE,GACiB,IAArBa,EACIrC,GACAC,GACAwB,GAAsC,IAArBY,EAA4BlM,GAAQiK,GACrDhB,EACkC,kBAA/BxC,EAAgBY,YACvBZ,EAAgBY,WAAWE,IACvBl7B,GAAWk7B,IACX76B,GACAy/B,EACkC,kBAA/B1F,EAAgBY,YACvBn1B,EAAOo1B,cAAgBj7B,GAAWk7B,IAC9B0B,EACA/2B,EAAOo1B,YACP8E,EACkC,kBAA/B3F,EAAgBY,YACvBZ,EAAgBY,WAAWE,IACzB,kBAAC2C,GAAD,CACEp0B,QAAS,kBAAMi1B,EAAc,cAAe1+B,GAAWk7B,MACvD4C,WACIgC,GAAgBlD,IAAiB58B,GAAWk7B,KAC9C4E,IAAiB9/B,GAAWk7B,KAG9B,8BACGr4B,EAAU,2BAA4B,CAAEyd,KAAMtgB,GAAWk7B,QAG5D,KACNoD,EACE,kBAACf,GAAD,KACE,kBAAC,GAAD,CAASrmB,YAAarU,EAAU,0BAChC,kBAAC,EAAD,KAAiBA,EAAU,0BAC3B,kBAAC,EAAD,KACGk9B,EACD,kBAAClC,GAAD,CACEp0B,QAAS,kBACPi1B,EAAc,cAAe1+B,GAAWM,gBAE1Cw9B,WACIgC,GAAgBlD,IAAiB58B,GAAWM,eAC9Cw/B,IAAiB9/B,GAAWM,eAG9B,8BACGuC,EAAU,2BAA4B,CACrCyd,KAAMtgB,GAAWM,kBAIvB,kBAACu9B,GAAD,CACEp0B,QAAS,kBACPi1B,EAAc,cAAe1+B,GAAWggC,gBAE1ClC,WACIgC,GAAgBlD,IAAiB58B,GAAWggC,eAC9CF,IAAiB9/B,GAAWggC,eAG9B,8BACGn9B,EAAU,2BAA4B,CACrCyd,KAAMtgB,GAAWggC,kBAIvB,kBAACnC,GAAD,CACEp0B,QAAS,kBAAMi1B,EAAc,cAAe1+B,GAAWigC,UACvDnC,WACIgC,GAAgBlD,IAAiB58B,GAAWigC,SAC9CH,IAAiB9/B,GAAWigC,SAG9B,8BACGp9B,EAAU,2BAA4B,CACrCyd,KAAMtgB,GAAWigC,YAIvB,kBAACpC,GAAD,CACEp0B,QAAS,kBACPi1B,EAAc,cAAe1+B,GAAWkgC,kBAE1CpC,WACIgC,GAAgBlD,IAAiB58B,GAAWkgC,iBAC9CJ,IAAiB9/B,GAAWkgC,iBAG9B,8BACGr9B,EAAU,2BAA4B,CACrCyd,KAAMtgB,GAAWkgC,oBAIvB,kBAACrC,GAAD,CACEp0B,QAAS,kBACPi1B,EAAc,cAAe1+B,GAAWmgC,kBAE1CrC,WACIgC,GAAgBlD,IAAiB58B,GAAWmgC,iBAC9CL,IAAiB9/B,GAAWmgC,iBAG9B,8BACGt9B,EAAU,2BAA4B,CACrCyd,KAAMtgB,GAAWmgC,2BAQ7B7B,EAAoB,KAItB,QAAgC96B,IAA5B42B,EAAgBpN,QAAuB,CACzC,IAAMgS,GACwB,IAA5B5E,EAAgBpN,QACZwQ,GACAC,GACAwB,GACwB,IAA5B7E,EAAgBpN,QAAoB2G,GAAQiK,GACxCsB,EAC+B,kBAA5B9E,EAAgBpN,SACvBoN,EAAgBpN,QAAQqO,MACpBx4B,EAAU,2BACVA,EAAU,qBACVu9B,EAC+B,kBAA5BhG,EAAgBpN,SACvBoN,EAAgBpN,QAAQqO,MACpBx4B,EAAU,2BACVA,EAAU,sBACVu4B,OAC6B53B,IAAjC42B,EAAgB5H,aACZ,uCACA,iCACA6N,IACHx6B,EAAOy1B,UAAYz1B,EAAOy1B,WAAan7B,GAAQc,OAC5C46B,GACJzB,EAAgByB,cAAgBwE,GAC9B,kBAAC,GAAD,CACEl1B,IAAK,kBAAoBtF,EAAOi2B,cAChCG,YAAa,SAACe,GAAD,OAAO0B,EAAc,gBAAiB1B,IACnDd,aACEr2B,EAAOi2B,cAAgBp4B,WAAWmC,EAAOi2B,eAAiB,IAG5D,KACNyC,EACE,kBAAChB,GAAD,KACE,kBAAC,GAAD,CAASrmB,YAAagoB,IACtB,kBAAC,EAAD,KAAiBkB,GACjB,kBAAC,EAAD,KACE,kBAACvC,GAAD,CACEp0B,QACG42B,QAEG78B,EADA,kBAAMk7B,EAAc,WAAYv+B,GAAQc,SAG9C68B,UAAWuC,IAEX,6BACGjF,EACAS,KAGL,kBAACgC,GAAD,CACEp0B,QAAS,kBAAMi1B,EAAc,WAAYv+B,GAAQ+tB,YACjD4P,UAAWj4B,EAAOy1B,WAAan7B,GAAQ+tB,WAEvC,8BACGrrB,EAAU,4BAA6B,CACtCyd,KAAMngB,GAAQ+tB,cAIpB,kBAAC2P,GAAD,CACEp0B,QAAS,kBAAMi1B,EAAc,WAAYv+B,GAAQguB,OACjD2P,UAAWj4B,EAAOy1B,WAAan7B,GAAQguB,MAEvC,8BACGtrB,EAAU,4BAA6B,CAAEyd,KAAMngB,GAAQguB,gBAOlEoQ,EAAiB,KAInB,QAAoC/6B,IAAhC42B,EAAgBsB,YAA2B,CAC7C,IAAMsD,IAC4B,IAAhC5E,EAAgBsB,YACZ8B,GACAC,GACAwB,IAC4B,IAAhC7E,EAAgBsB,YAAwB/H,GAAQiK,GAClDY,EACE,kBAACjB,GAAD,KACE,kBAAC,GAAD,CAASrmB,YAAarU,EAAU,4BAChC,kBAAC,GAAD,KAAiBA,EAAU,4BAC3B,kBAAC,GAAD,KACE,kBAACk7B,GAAD,CAAsBD,WAAW,GAC9BtD,KAAWj6B,GAAYq7B,YAE1B,+BACE,4BAAK/4B,EAAU,oCAMvB27B,EAAqB,KAIvB,QAAuCh7B,IAAnC42B,EAAgBoB,eAA8B,CAChD,IAAMwD,IAC+B,IAAnC5E,EAAgBoB,eACZgC,GACAC,GACAwB,IAC+B,IAAnC7E,EAAgBoB,eAA0B7H,GAAQiK,GACpDa,EACE,kBAAClB,GAAD,KACE,kBAAC,GAAD,CAASrmB,YAAarU,EAAU,+BAChC,kBAAC,GAAD,KAAiBA,EAAU,0BAC3B,kBAAC,GAAD,KACE,kBAACg7B,GAAD,CACEp0B,QAAS,kBACPi1B,EAAc,mBAAoBt+B,GAAeO,aAEnDm9B,WACIj4B,EAAO41B,kBACP/6B,KAA0BN,GAAeO,YAC3CkF,EAAO41B,mBAAqBr7B,GAAeO,YAG7C,8BACGkC,EAAU,2BAA4B,CACrCyd,KAAMlgB,GAAeO,eAI3B,kBAACk9B,GAAD,CACEp0B,QAAS,kBACPi1B,EAAc,mBAAoBt+B,GAAekgC,SAEnDxC,WACIj4B,EAAO41B,kBACP/6B,KAA0BN,GAAekgC,QAC3Cz6B,EAAO41B,mBAAqBr7B,GAAekgC,QAG7C,8BACGz9B,EAAU,2BAA4B,CACrCyd,KAAMlgB,GAAekgC,WAI3B,kBAACzC,GAAD,CACEp0B,QAAS,kBACPi1B,EAAc,mBAAoBt+B,GAAe6/B,UAEnDnC,WACIj4B,EAAO41B,kBACP/6B,KAA0BN,GAAe6/B,SAC3Cp6B,EAAO41B,mBAAqBr7B,GAAe6/B,SAG7C,8BACGp9B,EAAU,2BAA4B,CACrCyd,KAAMlgB,GAAe6/B,mBAQjCxB,EAAwB,KAG1B,OACE,kBAAC,GAAD,KACE,kBAACnB,GAAD,KACE,kBAAC,GAAD,KACE,0BAAMl0B,wBAAyB,CAAEC,OAtiC7B,4+BAuiCHxG,EAAU,sBACX,kBAAC,GAAD,CAAa4G,QAASc,GAAtB,SAEF,kBAAC,GAAD,KACG2zB,EACA9H,EACA+H,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACD,kBAACT,GAAD,CAAav0B,QA/vBC,WAahB5D,EAXFkwB,YAWElwB,EAVF65B,cAUE75B,EATFy0B,iBASEz0B,EARFg1B,gBAQEh1B,EAPFo1B,YAOEp1B,EANFy1B,SAMEz1B,EALF81B,cAKE91B,EAJF41B,iBAIE51B,EAHF40B,YAGE50B,EAFFi2B,cAVF,IAWKvwB,EAXL,aAYI1F,EAZJ,gKAaMgU,EAAQ8b,KAAYiJ,UAAZ,eAA2BrzB,IACnCszB,EAAShlB,EACXtU,EAAQI,SAASC,SAAW,IAAMiU,EAClCtU,EAAQI,SAASC,SACrBL,EAAQ8P,KAAKwpB,KA8uBJh8B,EAAU,iC,+DCjlCjBwI,GAAShO,YAAH,kHAUNtB,GAAOC,IAAOC,IAAV,qEAAGD,CAAH,oXAGKqP,G1DvBU,W0DiDnBk1B,GAAQvkC,IAAO+iB,IAAV,sEAAG/iB,CAAH,kCAKLsP,GAActP,IAAO4B,OAAV,4EAAG5B,CAAH,mK1DtDQ,U0D6DRgB,GAsDFwjC,GA9CG,WAChB,IAQIzd,EARElgB,EAAYsF,KAElB,EAAkC5B,oBAAkB,GAApD,oBAAOgY,EAAP,KAAkBC,EAAlB,KAEMiiB,EAAYl4B,YAAc3I,GAAOf,yBACjC6hC,EAAkBn4B,YAAc3I,GAAOX,2BACvC0hC,EAASp4B,YAAc3I,GAAOV,yBAWpC,GARIuhC,GAAaA,EAAUG,QACzB7d,EAAS8d,KACAH,GAAmBA,EAAgBE,QAC5C7d,EAAS+d,KACAH,GAAUA,EAAOC,UAC1B7d,EAASge,MAGPhe,EAAQ,CACV,IAAM1W,EAAQkS,EACZ,kBAAC,GAAD,CAAOhU,QAAS,kBAAMiU,GAAa,IAAQxY,MAAO,OAAQG,OAAQ,QAChE,kBAAC,GAAD,KACE,kBAACo6B,GAAD,CAAOpgB,IAAK4C,IACZ,kBAAC,GAAD,CAAatZ,QAAS,kBAAM+U,GAAa,KAAzC,YAGF,KAEJ,OACE,oCACE,kBAACtB,GAAD,CACErT,UAAW2W,GACX/W,QAAS,kBAAM+U,GAAa,KAE5B,0BAAMpV,wBAAyB,CAAEC,OApCjB,ijBAqChB,yBAAKQ,UAAWoT,IACbpa,EAAU,0BAGdwJ,GAIP,OAAO,ML3FHtQ,GAAOC,IAAOC,IAAV,wEAAGD,CAAH,yMAGCghB,IAGI,qBAAGgkB,cAAqC,WAAa,SAMzD3mC,EAAYD,OAOjB6mC,GAAUjlC,IAAOC,IAAV,2EAAGD,CAAH,4GAQPklC,GAAallC,YAAOilC,IAAV,8EAAGjlC,CAAH,qKAOLghB,IAOLmkB,GAA4BnlC,IAAOwB,KAAV,6FAAGxB,CAAH,mCAKzBolC,GAAcplC,YAAOilC,IAAV,+EAAGjlC,CAAH,oBAIXqlC,GAAgBrlC,IAAOC,IAAV,iFAAGD,CAAH,uDAMbslC,GAAiBtlC,YAAOqC,GAAV,kFAAGrC,CAAH,sDAMdulC,GAAYvlC,YAAOqC,GAAV,6EAAGrC,CAAH,mLrDpEe,UqD6EnBghB,IAKLwkB,GAAuBxlC,YAAOulC,IAAV,wFAAGvlC,CAAH,qCrDlFI,WqDuFxBylC,GAAqBzlC,IAAO4B,OAAV,sFAAG5B,CAAH,gUrDtGC,UAEO,UAQC,WqDqH3B0lC,GAAgC1lC,YAAOylC,IAAV,kGAAGzlC,CAAH,sErDxHP,qBqDgItB2lC,GAAmB3lC,IAAOC,IAAV,qFAAGD,CAAH,gFAOhB4lC,GAAqB5lC,IAAOC,IAAV,uFAAGD,CAAH,uIAOb3B,EAAYD,Q,SAkBXq+B,K,cAAAA,E,uBAAAA,Q,KAaZ,I,GMhLYoJ,GNwSGznB,OAAMC,MAxHD,SAAChQ,GACnB,IACE2jB,EAKE3jB,EALF2jB,UACA8T,EAIEz3B,EAJFy3B,qBACA1H,EAGE/vB,EAHF+vB,gBACA2H,EAEE13B,EAFF03B,cACAC,EACE33B,EADF23B,mBAGF,EAAwCz7B,oBAAkB,GAA1D,oBAAO07B,EAAP,KAAqBC,EAArB,KAEMr/B,EAAYsF,KAEZg6B,EACJnU,GAAaA,EAAUC,eACrB,kBAACkT,GAAD,KACE,kBAAC,GAAD,CAASjqB,YAAa8W,EAAUC,kBAEhC,KAEAmU,EAAepU,EACnB,kBAACqT,GAAD,KACE,8BACGc,EACAnU,EAAU/T,OAGb,KAEEooB,EAAoDD,EACtD,CACE59B,QAAS,OACT89B,eAAgB,iBAElB9+B,EAEE++B,EACJR,GAAiBA,EAAcz/B,OAC3By/B,EAAc/xB,KAAI,SAACynB,GACjB,IAAMvE,EACJ8O,IAAuBvJ,GAAY+J,UAC/B/K,EAAKgL,OACHf,GACAD,GACFhK,EAAKgL,OACHjB,GACAD,GACFtT,EAAiBwJ,EAAKxJ,eAC1B,kBAACkT,GAAD,KACE,kBAACQ,GAAD,KACE,kBAAC,GAAD,CAASzqB,YAAaugB,EAAKxJ,mBAG7B,KACJ,OACE,yBAAK9iB,IAAKssB,EAAKtY,OACb,kBAAC+T,EAAD,CAAQzpB,QAASguB,EAAKhuB,SACnBguB,EAAKtY,MACL8O,OAKT,KACAyU,EACJX,GAAiBA,EAAcz/B,OAC7B,kBAACs/B,GAAD,CAAoB/3B,UAAW2W,IAC5B+hB,GAED,KAEAI,EAAgBb,EACpB,kBAAC,GAA0BA,GACzB,KAEEc,EAAiBxI,EACrB,kBAAC,GAAD,CACEljB,YACG+qB,EAEG,KADF,kBAAC,GAAD,CAAwB7H,gBAAiBA,IAG7ChjB,MAAOpE,GAAa2D,KACpBU,gBAAiBtE,GAAgB+D,QAEjC,kBAACwqB,GAAD,CACE73B,QAAS,kBAAMy4B,GAAgB,SAACn3B,GAAD,OAAcA,MAC7ClB,UAAW2W,IAEX,0BAAMpX,wBAAyB,CAAEC,OA1P3B,4+BA2PLxG,EAAU,wBAGb,KAEEggC,EAAgBZ,EACpB,kBAAC,GAAD,CACE13B,QAAS,kBAAM23B,GAAgB,IAC/B9H,gBAAiBA,GAAoC,KAErD,KAEJ,OACE,oCACE,kBAAC,GAAD,CAAM4G,cAAgC,OAAjBoB,GACnB,kBAAChB,GAAD,CAAa93B,MAAO+4B,GACjBM,EACAC,GAEH,kBAAC1B,GAAD,KACE,kBAAC,GAAD,MACCwB,EACAN,IAGJS,MOtSD9mC,GAAOC,IAAOC,IAAV,kFAAGD,CAAH,qGAMC3B,EAAYD,OAMjB0oC,GAAkB9mC,IAAOC,IAAV,6FAAGD,CAAH,gXAwBV3B,EAAYD,OAMjBkC,GAAmBN,IAAOC,IAAV,8FAAGD,CAAH,uH5D5BQ,U4DkCnB3B,EAAYD,OAyBR2oC,GAnBe,SAAC,GAMxB,IALLz4B,EAKI,EALJA,SACA04B,EAII,EAJJA,YAKM74B,EAAU64B,EAAc5oB,IAAM6oB,SAAW3mC,GAC/C,OACE,kBAAC,GAAD,KACE,kBAACwmC,GAAD,CACEx5B,MAAO,CAAE45B,WAAYF,EAAc,kBAAex/B,IAElD,kBAAC2G,EAAD,KAAUG,MCnEZvO,GAAOC,IAAOC,IAAV,gFAAGD,CAAH,qGAMC3B,EAAYD,OAMjB0oC,GAAkB9mC,IAAOC,IAAV,2FAAGD,CAAH,gXAwBV3B,EAAYD,OAMjBkC,GAAmBN,IAAOC,IAAV,4FAAGD,CAAH,uH7D5BQ,U6DkCnB3B,EAAYD,OAKjB+oC,GAAmB9lC,YAAH,wGAMhB+lC,GAAWpnC,IAAOC,IAAV,oFAAGD,CAAH,2FAICmnC,IAGTE,GAAUrnC,IAAOC,IAAV,mFAAGD,CAAH,8FAIEmnC,IA8BAG,GA3BiB,SAAC,GAI1B,IAHLN,EAGI,EAHJA,YAIM74B,EAAU64B,EAAc5oB,IAAM6oB,SAAW3mC,GAC/C,OACE,kBAAC,GAAD,KACE,kBAAC,GAAD,CACEgN,MAAO,CAAE45B,WAAYF,EAAc,kBAAex/B,IAElD,kBAAC2G,EAAD,KACE,kBAACi5B,GAAD,CAAU95B,MAAO,CAAEtD,MAAO,SAC1B,kBAACo9B,GAAD,CAAU95B,MAAO,CAAEtD,MAAO,MAAOu9B,aAAc,UAC/C,kBAACF,GAAD,CAAS/5B,MAAO,CAAEtD,MAAO,SACzB,kBAACq9B,GAAD,CAAS/5B,MAAO,CAAEtD,MAAO,SACzB,kBAACq9B,GAAD,CAAS/5B,MAAO,CAAEtD,MAAO,SACzB,kBAACq9B,GAAD,CAAS/5B,MAAO,CAAEtD,MAAO,SACzB,kBAACq9B,GAAD,CAAS/5B,MAAO,CAAEtD,MAAO,SACzB,kBAACq9B,GAAD,CAAS/5B,MAAO,CAAEtD,MAAO,SACzB,kBAACq9B,GAAD,CAAS/5B,MAAO,CAAEtD,MAAO,a,oBCsEpBw9B,GArIE,SAAC,GAA8C,IAA5Cp0B,EAA2C,EAA3CA,KAAMhO,EAAqC,EAArCA,OAAQ0rB,EAA6B,EAA7BA,gBAC1BjqB,EAAYsF,KAClB,EAA0BuU,KAAlB/P,EAAR,EAAQA,QAASgQ,EAAjB,EAAiBA,KACX8mB,EAAY/vB,KACZgwB,EAAclX,GAA4B,CAAEpd,OAAMhO,WAClD8rB,EAAc5G,KAEpB,GACE3Z,GACA82B,EAAU92B,SACV+2B,EAAY/2B,QAEZ,OAAO,kBAAC,GAAD,MACF,GACLgQ,GACA8mB,EAAU/2B,MACVg3B,EAAYh3B,MACZg3B,EAAYh3B,KAAK7L,WAAWyB,OAC5B,CACA,IAAM6zB,EAAWxZ,EAAKpI,KAAOoI,EAAKpI,KAAO,GACnCovB,EAAiBvhC,GAAW,CAAC+zB,IAC3BviB,EAAc6vB,EAAU/2B,KAAxBkH,UACA/S,EAAe6iC,EAAYh3B,KAA3B7L,WACFsO,EAAUyE,EAAUgJ,MACxB,SAACb,GAAD,OACqB,OAAnBY,EAAKzI,WAAsB6H,EAAE7H,YAAcyI,EAAKzI,UAAUlR,cAG1DkX,EAAQ,EACRkR,EAAc,EACZwY,EAA8B,GACpC/iC,EAAW0lB,SAAQ,YAAyC,IAAtCR,EAAqC,EAArCA,QAAS0G,EAA4B,EAA5BA,WAAYC,EAAgB,EAAhBA,UACnClG,EAAW0G,EAAYxgB,KAAKqZ,GAC5BwJ,EAAY9C,GAA0B,EACtC+C,EAAY9C,GAAwB,EACpCmX,EACJ/W,IAAoBxa,GAAgBsd,UAAYL,EAAYC,EAC9D,GAAIhJ,GAA+B,OAAnBA,EAAS3U,OAAkB2U,EAAS3U,OAAS1E,GAAWmyB,OAAQ,CAC9EplB,EACE4S,IAAoBxa,GAAgBsd,UAChC1V,EAAQqV,EACRrV,EAAQsV,EACdpE,GAA4BoE,EAC5B,IAAQjb,EAA2BiS,EAA3BjS,KAAM4R,EAAqBK,EAArBL,iBACdyd,EAAWvuB,KAAK,CACdwuB,QACAtvB,KAAMA,GAAc,GACpBtT,OAAQklB,EAAiBnjB,iBAK/B,IAAM8gC,EAA2CC,KAC/CH,EACA,CAAC,SACD,CAAC,SACD,GACF,IAAKE,EACH,OAAO,kBAAC,GAAD,MAGT,IAAME,EAAiDD,KACrDH,EACA,CAAC,SACD,CAAC,SACD,GACF,IAAKI,EACH,OAAO,kBAAC,GAAD,MAGT,IAAM1uB,EAAQzS,EAAU,6BAA8B,CACpD,cAAe8gC,IAEXM,EAAQphC,EAAU,8BAA+B,CACrD0R,KAAM4hB,EACN,cAAewN,EACf,eAAgB,GAChBx0B,QAASA,EAAUA,EAAQkF,YAAc,GACzC,WAAY,OACZ1T,WAAYkD,GAAiB8Y,EAAKhc,WAAagc,EAAKhc,WAAa,GACjEgU,MAAO9Q,GAAiB8Y,EAAKhI,MAAQgI,EAAKhI,MAAQ,GAClD,mBAAoBpS,GAAc,CAAC,IACnC,qBAAsBA,GAAc,CAAC,IACrC,cAAe,GACf,oBAAqB,EACrB,aAAcsB,GAAiBunB,KAG3B8Y,EAAQrhC,EAAU,8BAA+B,CACrD0R,KAAM4hB,EACN,iBAAkB2N,EAAcvvB,KAChC,+BAAgC7Q,YAC5BogC,EAAcD,MAAQ3pB,EAAS,KAAKvW,QAAQ,IAEhD,mBAAoBmpB,EACpB,qCAAsCgX,EAAcvvB,KACpD,mDAAoD7Q,YAChDogC,EAAcD,MAAQ3pB,EAAS,KAAKvW,QAAQ,IAEhD,wBAAyBqgC,EAAoBzvB,KAC7C,sCAAuC7Q,YACnCsgC,EAAoBH,MAAQ3pB,EAAS,KAAKvW,QAAQ,IAEtD,4CACEqgC,EAAoBzvB,KACtB,0DAA2D7Q,YACvDsgC,EAAoBH,MAAQ3pB,EAAS,KAAKvW,QAAQ,MAIxD,OACE,kBAAC,GAAD,KACE,kBAACwgC,EAAA,EAAD,KACE,+BACG7uB,EAAQ,MAAQzS,EAAU,mCAE7B,0BACEuhC,SAAS,WACT1jB,QACEpL,EAAQ,MAAQzS,EAAU,qCAIhC,kBAAC5E,EAAD,KAAeqX,GACf,kBAACnX,EAAD,KAAmB8lC,GACnB,kBAAC9lC,EAAD,KAAmB+lC,IAIvB,OAAO,MCzHLG,GAAcroC,IAAOC,IAAV,mFAAGD,CAAH,uBA+PFsoC,GAvPa,SAACj6B,GAC3B,IAAQjJ,EAAWiJ,EAAXjJ,OACFmE,EAAUC,cACRyH,EAAkBC,KAAlBD,cACR6oB,KACA,MAAsCvvB,wBAA6B/C,GAAnE,oBAAOiX,EAAP,KAAoBH,EAApB,KACM2W,EAAmBjiB,uBACvB,kBAAMsL,OAAe9W,KACrB,CAAC8W,IAEGiqB,EAAkBzW,aAAYrT,GACpC,EAA0ClU,mBAExC,IAFF,oBAAOwmB,EAAP,KAAsByX,EAAtB,KAGA,EAA4Cj+B,mBAE1C,IAFF,oBAAOksB,EAAP,KAAuBgS,EAAvB,KAGMC,EAAc1O,KAElBD,EAKE2O,EALF3O,YACA2J,EAIEgF,EAJFhF,cACApF,EAGEoK,EAHFpK,iBACAgB,EAEEoJ,EAFFpJ,SACAb,EACEiK,EADFjK,YAEI3N,EAAkBwN,GAEpBznB,GACEmmB,EAAYC,KACZvG,EAAawG,KAEnBzyB,qBAAU,kBAAMwqB,IAAkB,CAAC8E,EAAa9E,IAEhD,IAaM0T,EAAel6B,iBAAOuuB,GAC5B2L,EAAa55B,QAAUiuB,EACvB,IAAM4L,EAAiBn6B,iBAAOi6B,GAC9BE,EAAe75B,QAAU25B,EACzB,IAAMG,EAAmBp6B,iBAAOwC,GAChC43B,EAAiB95B,QAAUkC,EAC3B,IA0CIyqB,EAuCAoN,EAjFErX,EAAcze,uBAAY,SAAC0e,EAAkBqX,GAEjD,IAAMC,EAAeL,EAAa55B,QAAQiF,KAAI,SAAC0b,GAAD,OAAOA,EAAEjvB,MACvD+nC,EAAiBQ,EAAa5/B,QAAO,SAAC3I,GAAD,OAAQA,IAAOixB,MAEpD,IAAMuX,EAAY/gC,KAAK6Y,IAAIgoB,EAAe,EAAGF,EAAiB95B,SAC9D,EAA2C65B,EAAe75B,QAA/Bm6B,GAA3B,EAAQnP,YAAR,iCACMlc,EAAQ8b,KAAYiJ,UAAZ,2BAA2BsG,GAA3B,IAAwCnP,YAAakP,KACnE1/B,EAAQ8P,KAAK9P,EAAQI,SAASC,SAAW,IAAMiU,KAC9C,CAACtU,IAeJ,EAA4CgB,mBAC1C,MADF,oBAAO4+B,EAAP,KAAuBC,EAAvB,KAKA,EAAgD7+B,mBAAoB,CAClE0T,UAAMzW,EACNyqB,oBAAgBzqB,IAFlB,oBAAO6hC,EAAP,KAAyBpY,EAAzB,KAKMqY,EAAa76B,iBAA8B,MAC3C86B,EAAqB7xB,KACrB7Q,EAAYsF,KAEZq9B,GACF/K,GAAe75B,KAA2BH,GAAgBuxB,SAC5DyI,IAAgBh6B,GAAgBuxB,QAGlC,GAAImT,IAAmBhoB,GAAaojB,OAAS+E,EAAWv6B,QAAS,CAC/D,IAAM06B,EAAYH,EAAWv6B,QAAQD,cACnC,6CAEF,GAAI26B,EAAW,CACb,IAAMC,EACJH,EAAmB74B,MACnB64B,EAAmB74B,KAAK4H,OAAOsI,MAAK,SAACC,GAAD,OAAOA,EAAEzb,SAAWA,KAC1Ds2B,EACE,kBAACiO,GAAD,CACEp7B,QA1Bc,kBAAM66B,EAAkB,OA2BtChkC,OAAQA,EACR+0B,SAAUuP,GAAcA,EAAWnxB,KAAOmxB,EAAWnxB,UAAO/Q,EAC5D4L,K1D/JiB,K0DgKjByd,WACEkJ,EAAcrW,SAASqW,EAAa,IAAMxjB,GAE5CigB,aAAckN,GAAgC5+B,GAC9Cs1B,gBACEoP,EACI/kC,GAAgBuxB,QAChBvxB,GAAgBI,WAEtBmsB,QAASsO,GAAsBn7B,GAAQc,OACvC6rB,gBAAiBA,EACjB2F,eAAgBA,EAChB1F,cAAeA,EACfmJ,iBAAkBuP,SAItB/N,EAAW,KACX0N,EAAkB,WAGpB1N,EAAW,KAKXoN,EADExJ,IAAan7B,GAAQ+tB,UACd,kBAAC0X,GAAD,MACAtK,IAAan7B,GAAQguB,KACrB,kBAAC0X,GAAD,MAELL,EAEA,kBAAC,GAAD,CACErQ,WAAYzC,EACZ2C,aAAa,EACbxB,eAjFc,SAAClI,GAAD,OACpB8G,EAAe3gB,SAAS6Z,GACpB8Y,EAAkBhS,EAAertB,QAAO,SAAC0gC,GAAD,OAASA,IAAQna,MACzD8Y,EAAkB,GAAD,oBAAKhS,GAAL,CAAqB9G,MA+EpCmI,gBA9Ee,SAACnI,GAAD,OACrB8G,EAAenwB,SAAWowB,EAAWpwB,OAAS,GAC7CmwB,EAAe7V,MAAK,SAACkpB,GAAD,OAASA,IAAQna,KAElC8Y,EAAkB,aACb/R,EAAW1iB,KAAI,SAAC0b,GAAD,OAAOA,EAAEjvB,MAAI2I,QAAO,SAAC0gC,GAAD,OAASA,IAAQna,OAFzD8Y,EAAkB,KA4EhBnP,iBAAkB7C,EAClB8C,gBAzEc,kBAAMkP,EAAkB,KA0EtCjP,UAAW3yB,EAAU,4BACrBuyB,WAAW,IAKb,kBAAC,GAAD,CACED,WAAY6D,EACZ3D,aAAa,EACbxB,eA5Ha,SAACnG,GAAD,OACnBX,EAAcjb,SAAS4b,GACnB8W,EAAiBzX,EAAc3nB,QAAO,SAAC0gC,GAAD,OAASA,IAAQpY,MACvD8W,EAAiB,GAAD,oBAAKzX,GAAL,CAAoBW,MA0HlCoG,gBAzHc,SAACpG,GAAD,OACpBX,EAAczqB,SAAW02B,EAAU12B,OAAS,GAC3CyqB,EAAcnQ,MAAK,SAACkpB,GAAD,OAASA,IAAQpY,KAEjC8W,EAAiB,aACZxL,EAAUhpB,KAAI,SAAC0b,GAAD,OAAOA,EAAEjvB,MAAI2I,QAAO,SAAC0gC,GAAD,OAASA,IAAQpY,OAFxD8W,EAAiB,KAuHflP,iBAAkBvI,EAClBwI,gBApHa,kBAAMiP,EAAiB,KAqHpChP,UAAW3yB,EAAU,2BACrBuyB,WAAW,IAMnB,IAAM2Q,EAAaP,EACjB,kBAACQ,GAAD,CACE5kC,OAAQA,EACRgO,K1D9NqB,K0D+NrBojB,aAAckN,GAAgC5+B,GAC9CksB,QAASsO,GAAsBn7B,GAAQc,OACvC6rB,gBAAiBA,EACjBrS,YAAaA,EACbwW,iBAAkBA,EAClBwB,eAAgBA,EAChBxF,oBAAqBA,IAGvB,kBAAC,GAAD,CACE7rB,OAAQA,EACRgO,K1D1OqB,K0D2OrByd,WAAYkJ,EAAcrW,SAASqW,EAAa,IAAMxjB,GACtDya,QAASsO,GAAsBn7B,GAAQc,OACvC6rB,gBAAiBA,EACjBrS,YAAaA,EACbwW,iBAAkBA,EAClBlE,cAAeA,EACfE,oBAAqBA,EACrBQ,YAAaA,IAIjB,OACE,oCACE,kBAACtwB,EAAD,KACE,kBAAC,GAAD,CACEiE,OAAQA,EACRgO,K1D3PiB,K0D4PjB0d,gBAAiBA,IAEnB,kBAACuX,GAAD,CAAarrB,IAAKssB,GAChB,kBAAC,GAAD,CACEn6B,IAAK,mBAAqB3B,SAASiR,GAAe8pB,GAClDvW,UACElB,IAAoBxa,GAAgBQ,UAChCuyB,OACA7hC,EAENs+B,qBAAsB,CACpBjJ,cAAe2M,EAAmB/S,EAAiB1F,EACnDF,WAAY2Y,EACR,KACAzP,EACErW,SAASqW,EAAa,IACtBxjB,GACNigB,aAAcgT,EACV9F,EACGhgB,SAASggB,EAAe,IAAI18B,WAC7BlC,GACF,KACJwZ,iBACAwe,KAAM0M,EAAmBjZ,GAAKyF,QAAUzF,GAAKoN,OAE/CS,gBAAiB,CACftN,iBAAiB,EACjBE,SAAS,EACToJ,iBAAiB,EACjB5D,eAAcgT,QAA0BhiC,EACxCqpB,YAAY2Y,QAAmBhiC,KAGlCuiC,GAEFjB,EACApN,GAGH,kBAAC,GAAD,CACEjT,2BAA4B,kBAAM2gB,EAAkBjoB,GAAaojB,YCzQ1D+D,GApBa,WAC1B,IAAMljC,EAASyH,KAEf,OAAe,OAAXzH,EAEA,kBAAC7E,EAAD,KACE,kBAACmqB,GAAD,KACE,kBAAC7K,GAAD,CAAa1F,gBAAiB,mCAOpC,kBAAC5Z,EAAD,KACE,kBAAC,GAAD,CAAiB6E,OAAQA,O,SLdnBygC,K,eAAAA,Q,KAuBL,IM6IKoE,GNhICC,GAAqB,SAAC1jC,GACjC,MAA+C0K,KAAjCyG,EAAd,EAAQjH,KAER,GAFA,EAAuBC,UAEJgH,EACjB,MAAO,CAAEhH,SAAS,EAAMC,WAAOpJ,EAAWkJ,UAAMlJ,GAGlD,IAAM2iC,EAAY3jC,EAAM4jC,YAAYpjC,WAC9BqjC,EAAoB1yB,EAAQjD,WAAWy1B,GAE7C,IAAKE,EACH,MAAO,CAAE15B,SAAS,EAAOC,WAAOpJ,EAAWkJ,UAAMlJ,GAGnD,IAAM8iC,EAAkBD,EAAkB7jC,EAAM4M,OAASi3B,EtD1DhC,MsD2DzB,IAAKC,EACH,MAAO,CAAE35B,SAAS,EAAOC,WAAOpJ,EAAWkJ,UAAMlJ,GAGnD,IAAM+iC,EAA0CD,EAAgBt2B,KAAI,SAAC8V,GAAD,MAAU,CAC5ErpB,GAAIqpB,EAAI5V,QACRs2B,WAAY1gB,EAAI5V,QAChBuc,WAAY3G,EAAI9J,IAChB0Q,UAAW5G,EAAI6G,WAGb8Z,EAA4C,GAGhD,GAC8B,kBAArBjkC,EAAMkkC,YACgB,kBAArBlkC,EAAMkkC,aACXzzB,GAAiBzQ,EAAMkkC,aACxBlkC,EAAMkkC,aAAe7E,GAAY8E,MACnC,CACA,IAAMC,EAAcpkC,EAAMkkC,WAAW1jC,WAC/B6jC,EAAsBlzB,EAAQjD,WAAWk2B,GAC/C,GAAIC,EAAqB,CACvB,IAAMC,EACJD,EAAoBrkC,EAAM4M,OAASy3B,EtDnFhB,MsDoFjBC,IACFL,EAA0BK,EAAkB92B,KAAI,SAAC8V,GAAD,MAAU,CACxDrpB,GAAIqpB,EAAI5V,QACRs2B,WAAY1gB,EAAI5V,QAChBuc,WAAY3G,EAAI9J,IAChB0Q,UAAW5G,EAAI6G,iBAMlB,CACH,IAAMoa,EAAepzB,EAAQjD,WAAR,YACrB,GAAIq2B,EAAc,CAChB,IAAMC,EAAmBD,EAAavkC,EAAM4M,OAAS23B,EtDlGhC,MsDmGjBC,IACFP,EAA0BO,EAAiBh3B,KAAI,SAAC8V,GAAD,MAAU,CACvDrpB,GAAIqpB,EAAI5V,QACRs2B,WAAY1gB,EAAI5V,QAChBuc,WAAY3G,EAAI9J,IAChB0Q,UAAW5G,EAAI6G,aAOvB,MAAO,CAAEhgB,SAAS,EAAOC,WAAOpJ,EAAWkJ,KADb,CAAE65B,wBAAuBE,6B,oBM5EnD1qC,GAAOC,IAAOC,IAAV,2EAAGD,CAAH,gRACOgB,GAqBXiqC,GAAKjrC,IAAOkL,GAAV,yEAAGlL,CAAH,qMAcF8L,GAAO9L,IAAO+iB,IAAV,2EAAG/iB,CAAH,iFAQJkrC,GAAOlrC,IAAOC,IAAV,2EAAGD,CAAH,yUA9CU,IjEbU,qBiEkFxBmrC,GAA0BnrC,IAAOC,IAAV,8FAAGD,CAAH,kOAmBvBorC,GAAiBprC,IAAO4B,OAAV,qFAAG5B,CAAH,gbAKHgB,EjE1Ga,qBiEiIxBqqC,GAAiBrrC,IAAO2P,GAAV,qFAAG3P,CAAH,gIAIHe,GAOXuqC,GAAYtrC,IAAOoC,EAAV,gFAAGpC,CAAH,+HAIEe,GAOe8kC,GAAY8E,O,SAEhCV,K,oBAAAA,E,qBAAAA,Q,KAWZ,I,iCC1KYpE,GDsTG0F,GA5IY,SAACl9B,GAC1B,IAAQ2V,EAAqC3V,EAArC2V,WAAYtT,EAAyBrC,EAAzBqC,KAAM86B,EAAmBn9B,EAAnBm9B,eACpB3kC,EAAYsF,KACZ/G,EAASyH,KACT4+B,EAAoBh9B,iBAAiC,MAC7Ci9B,EAAeh0B,KAArBhH,KACFnH,EAAUC,cAChB,EAAsCwwB,KAA9B2R,EAAR,EAAQA,UAAczC,EAAtB,8BACI0C,EAA6C/F,GAAY8E,MACzDgB,IAAc9F,GAAY8E,QAC5BiB,EAAiBD,GAEnB,MAAgCphC,mBAE9BqhC,GAFF,oBAAOC,EAAP,KAAiBC,EAAjB,KAIMxpB,EAAcopB,EAChBA,EAAWpzB,OAAOsI,MAAK,SAACC,GAAD,OAAOA,EAAEzb,SAAWA,UAC3CoC,EACE+Q,EAAO+J,EAAcA,EAAY/J,KAAO,GAoCxCwzB,EAAYJ,EACZK,OACUxkC,IAAdukC,EACI,kBAAM/nB,EAAW6hB,GAAY8E,QAC7B,kBAAM3mB,EAAW+nB,IAEjBzyB,EACJkyB,IAAmBvB,GAAegC,SAC9BplC,EAAU,6BACVA,EAAU,0BAA2B,CAAE0R,SAEvC2zB,EACJV,IAAmBvB,GAAegC,SAC9BplC,EAAU,mCACVA,EAAU,gCAEVslC,EACJX,IAAmBvB,GAAegC,SAChC,kBAACX,GAAD,4CAGE,KAEN,OACE,kBAACh7B,GAAD,CACE/B,QAASy9B,EACThiC,MAAO,OACPG,OAAQ,WAER,kBAAC,GAAD,KACE,kBAAC8gC,GAAD,CACE39B,MACEk+B,IAAmBvB,GAAemC,SAC9B,CAAE7E,aAAc,aAChB//B,EAENqG,UACE29B,IAAmBvB,GAAemC,cAC9B5kC,EA9NiB,0CAkOvB,kBAAC,GAAD,CAAM2c,IAAKkoB,OACV/yB,EAbH,KAeC6yB,EACD,kBAAC5qC,EAAD,KACE,kBAAC2pC,GAAD,KACE,6BACE,kBAACG,GAAD,KAAiBa,GACjB,kBAAC,KAAD,CACEx7B,KAAMA,EAAKtH,QAAO,qBAAG3I,KAAgB2E,KACrCuZ,cAAe9X,EAAU,yBACzBmY,wBAAyB,CAAC,KAC1BC,uBAAwBpY,EAAU,8BAClCqY,WAAW,EACXC,kBAAmB,KACnBmtB,YAAY,EACZ9P,WAAY,IACZzd,cAAmC,kBAAb8sB,EAAwBA,EAAW,KACzDjtB,SA9FK,SAAC+B,GAElB,GADAmrB,EAAYnrB,GACR8qB,GAAqBA,EAAkB18B,QAAS,CAClD,IAAMH,EAAO68B,EAAkB18B,QAC/BqO,YAAW,WACTxO,EAAKI,UACJ,KAyFO0P,cACEzU,OAAOG,YAAc,KAAOH,OAAOC,WAAa,IAElDkV,yBAA0BA,GACxBpI,GAAa2D,WAMvB,kBAACwwB,GAAD,KACE,kBAACC,GAAD,CACE39B,QAjGS,WACjB,GAAIo+B,GAAgC,kBAAbA,EAAuB,CAC5C,IAAMhuB,EAAQ8b,KAAYiJ,UAAZ,2BACTsG,GADS,IAEZyC,UAAWE,EAASprC,MAEhBoiC,EAAShlB,EACXtU,EAAQI,SAASC,SAAW,IAAMiU,EAClCtU,EAAQI,SAASC,SACrBL,EAAQ8P,KAAKwpB,GACb7e,EAAW6nB,EAASprC,GAAGuG,iBAClB,GAAwB,kBAAb6kC,EAAuB,CACvC,IAAMhuB,EAAQ8b,KAAYiJ,UAAZ,2BACTsG,GADS,IAEZyC,UAAWE,KAEPhJ,EAAShlB,EACXtU,EAAQI,SAASC,SAAW,IAAMiU,EAClCtU,EAAQI,SAASC,SACrBL,EAAQ8P,KAAKwpB,GACb7e,EAAW6hB,GAAY8E,SA8EjB3tB,IAAKyuB,EACLc,UAAWV,GAEVhlC,EAAU,2BE/SjBxI,GAAc,CAClBH,OAAQ,iCACRE,MAAM,kDAAD,OAAoDH,EAAuBG,MAA3E,QAGMouC,GAAYxsC,IAAOkC,GAAV,4sBnECU,UmECflB,EAeN3C,GAAYH,OAQZG,GAAYD,MAOZquC,EAAkBruC,OAKhBsuC,GAAgB1sC,IAAOC,IAAV,sDAIb0sC,GAAW3sC,IAAO5B,MAAV,gOnE/CO,UmEwDjBC,GAAYH,QAKV4N,GAAO9L,IAAO+iB,IAAV,6KAQN1kB,GAAYD,OAKVwuC,GAAY5sC,IAAO2P,GAAV,gRnEjFG,UmEyFdtR,GAAYH,OAIZuuC,EAAkBruC,OAKhByuC,GAAW7sC,IAAOC,IAAV,wHAGV5B,GAAYH,Q,oFC9EjB4uC,GAAa9sC,IAAOC,IAAV,gIAOV8sC,GAAW/sC,IAAOC,IAAV,wHAORmiB,GAAWpiB,IAAOC,IAAV,wHAOR+sC,GAAkBhtC,IAAOC,IAAV,+FAQfgtC,GAAYjtC,IAAOC,IAAV,8IAkKAitC,GA1JA,WACb,IAMIvoC,EACAgU,EAPJ,EAAuC+H,KAAtBysB,EAAjB,EAAQx8B,QAAsBgQ,EAA9B,EAA8BA,KAC9B,GACEA,GAAQA,EAAKvb,QAASub,EAAKvb,OHzCzB,CACJuL,SAAS,EACTC,WAAOpJ,EACPkJ,UAAMlJ,IGqCEmJ,EAAR,EAAQA,QAASC,EAAjB,EAAiBA,MAAOF,EAAxB,EAAwBA,KAGlB7J,EAAYsF,KAIdsW,EAA4C,KAC5CC,EAAqB,MACrBC,EAAsB,MACtByqB,EAAqD,KACrDt0B,EAAwB,MACxBC,EAA0B,MAC9B,GAAIpI,GAAWw8B,EACbxoC,EAAa,kBAACytB,GAAD,MACbzZ,EAAQ,kBAACyZ,GAAD,WACH,GAAIxhB,EACT+B,QAAQ/B,MAAMA,GACdjM,EAAa,2CACbgU,EAAQ,gDACH,GAAIjI,GAAQiQ,EAAM,CAAC,IAAD,IACjB3H,EAAW2H,EAAK3H,SAChB4J,EAAmBnB,GAAuBzI,GAE5C4J,IAAqBtI,GAAoBkH,MAC3CkB,EAAa7b,EAAU,sCACvB8b,EAAc9b,EAAU,sCACf+b,IAAqBtI,GAAoBiH,QAClDmB,EAAa7b,EAAU,wCACvB8b,EAAc9b,EAAU,wCACf+b,IAAqBtI,GAAoBgH,MAClDoB,EAAa7b,EAAU,qCACvB8b,EAAc9b,EAAU,qCAG1B4b,EACE,kBAAC,GAAD,KACE,kBAAC,GAAD,CACEnV,MAAO,CAAEwV,gBAAiB1B,GAAkByB,IAAID,OAKtDwqB,EACE,oCACE,yBAAKhgC,wBAAyB,CAAEC,OAAQsV,KACxC,kBAACqqB,GAAD,KACE,6DACA,kBAACC,GAAD,KACE,kBAACF,GAAD,CACEz/B,MAAO,CACLwV,gBAAiB1B,GAAkByB,IACjCvI,GAAoBkH,SAJ5B,gBAUA,kBAACyrB,GAAD,KACE,kBAACF,GAAD,CACEz/B,MAAO,CACLwV,gBAAiB1B,GAAkByB,IACjCvI,GAAoBiH,WAJ5B,kBAUA,kBAAC0rB,GAAD,KACE,kBAACF,GAAD,CACEz/B,MAAO,CACLwV,gBAAiB1B,GAAkByB,IAAIvI,GAAoBgH,QAHjE,iBAYN3c,EAAa,oCAAGkD,GAAiB8Y,EAAKhc,WAAagc,EAAKhc,WAAa,IACrEgU,EAAQ,wCAAI7R,GAAiB6Z,EAAKhI,MAAQzQ,KAAKqmB,MAAM5N,EAAKhI,OAAS,IACnEG,EAAgBvS,GAAc,WAC5Boa,EAAK7H,qBADuB,QACN,IACrBu0B,cACHt0B,EAAkBxS,GAAc,WAC9Boa,EAAK5H,uBADyB,QACN,IACvBs0B,mBAEH1oC,EAAa,2CACbgU,EAAQ,2CAGV,OACE,oCACE,6BACE,kBAAC6zB,GAAD,KACE,kBAAC,GAAD,CAAMroB,IAAKmpB,OACVzmC,EAAU,0BACX,kBAAC8lC,GAAD,K/DpK2B,K+DsKzB,kBAAC,GAAD,CAASzxB,YAAarU,EAAU,oCAGpC,kBAAC+lC,GAAD,KAAYjoC,IAEd,6BACE,kBAAC6nC,GAAD,KACE,kBAAC,GAAD,CAAMroB,IAAKopB,OACV1mC,EAAU,8BACX,kBAAC8lC,GAAD,K/D9K6B,K+DgL3B,kBAAC,GAAD,CACEzxB,YAAarU,EAAU,wCAI7B,kBAAC+lC,GAAD,KAAYj0B,IAEd,6BACE,kBAAC6zB,GAAD,KACE,kBAAC,GAAD,CAAMroB,IAAKqpB,OACV3mC,EAAU,+BAFb,IAGE,kBAAC8lC,GAAD,K/D1LwB,O+D4L1B,kBAACC,GAAD,KACE,kBAACC,GAAD,KACGhmC,EAAU,4BAA6B,CAAEwP,MAAOyC,KAEnD,kBAAC+zB,GAAD,KACGhmC,EAAU,4BAA6B,CAAEwP,MAAO0C,OAIvD,6BACE,kBAACyzB,GAAD,KACE,kBAAC,GAAD,CAAMroB,IAAKspB,OACV5mC,EAAU,8BACX,kBAAC8lC,GAAD,K/D5MiB,K+D8Mf,kBAAC,GAAD,CAASzxB,YAAakyB,MAG1B,kBAACR,GAAD,KACGnqB,EACAC,MCtMIgrB,GARa,WAC1B,MAAO,CACLC,cAAe,GACfC,mBAAoB,GACpBjC,UAAW,M,SHIH9F,K,cAAAA,E,+BAAAA,Q,KA4CL,I,8EIyGFgI,GAKOC,GJ9GCC,GAA2B,SAACtgB,GACvC,MAA+Cvc,KAAjCyG,EAAd,EAAQjH,KAAwBs9B,EAAhC,EAAuBr9B,QAEvB,GAAyB,OAArB8c,EAAUroB,QAAmB4oC,IAAer2B,EAC9C,MAAO,CAAEhH,SAAS,EAAMC,WAAOpJ,EAAWkJ,UAAMlJ,GAGlD,IAAMpC,EAASqoB,EAAUroB,OAAO4B,WAC1B0N,EAAaiD,EAAQjD,WAAWtP,GACtC,IAAKsP,EACH,MAAO,CAAE/D,SAAS,EAAOC,WAAOpJ,EAAWkJ,UAAMlJ,GAGnD,IAAMsN,EAAWJ,EAAW+Y,EAAUra,OAASsB,E7DtEtB,M6DuEzB,IAAKI,EACH,MAAO,CAAEnE,SAAS,EAAOC,WAAOpJ,EAAWkJ,UAAMlJ,GAInD,IAAM2uB,EAA0C,GAChDxe,EAAQ5D,YAAYwW,SAAQ,SAACtW,GAC3BkiB,EAAgBliB,EAAEC,SAAWD,EAAEmW,gBAGjC,IAAM6jB,EAAyB,GACzBC,EAAuB,GAE7Bp5B,EAASyV,SAAQ,SAACT,GAChBmkB,EAAU50B,KAAK,CACb0Q,QAASD,EAAI5V,QACbuc,WAAY3G,EAAI9J,IAChB0Q,UAAW5G,EAAI6G,SAEjBud,EAAS70B,KAAK,CACZ0Q,QAASD,EAAI5V,QACbgrB,IAAK,OAKT,IAAM9I,EAAoD,GAC1DthB,EAASyV,SAAQ,SAACT,GAChB,IAAMuM,EAAOF,EAAgBrM,EAAI5V,UAAY,KACxCkiB,EAAcC,KACjBD,EAAcC,GAAQ,CAAEnD,OAAQ,IAElCkD,EAAcC,GAAMnD,QAAUpJ,EAAI6G,UAGpC,IAAMwd,EAA6B,GAC7BC,EAAsB,GACtBC,EAAsB,GAa5B,OAXA15B,OAAOC,QAAQwhB,GAAe7L,SAAQ,YAAkB,IAAD,oBAAf8L,EAAe,KAAThhB,EAAS,KACrD84B,EAAY90B,KAAK,CACfsW,UAAW0G,EACXxgB,MAAO,EACP6a,UAAWrb,EAAI6d,SAEjBkb,EAAM/0B,KAAK,CAAEsW,UAAW0G,EAAM6I,IAAK,IACnCmP,EAAMh1B,KAAK,CAAEsW,UAAW0G,EAAM6I,IAAK,OAI9B,CAAEvuB,SAAS,EAAOC,WAAOpJ,EAAWkJ,KADb,CAAEy9B,cAAaF,YAAWC,WAAUE,QAAOC,WAuC5DC,GAnCI,SAACz4B,GAClB,IAAMzQ,EAASyH,KACPyxB,EAAqBtE,KAArBsE,iBACAqN,EAAc+B,KAAd/B,UAIJ4C,EADF13B,KAA2BP,GAAgBsd,UAAY,UAAY,SAEjE0K,IAAqBhoB,GAAgBsd,UACvC2a,EAAW,UACFjQ,IAAqBhoB,GAAgBQ,YAC9Cy3B,EAAW,UAGb,IAAMC,EAAYv3B,GAAiB00B,GAAcA,EAA0B,GAErE8C,OACUjnC,IAAdmkC,GAA4B9nB,MAAMH,SAASioB,EAAW,KAElD,GADA,CAACjoB,SAASioB,EAAW,KAG3B,EAAiCoC,GAAyB,CACxD3oC,OAAmB,OAAXA,EAAkBse,SAASte,EAAQ,IAAM,KACjDgO,K7DnJuB,K6DoJvByC,QACA24B,YACAC,iBACAF,aANM59B,EAAR,EAAQA,QAASC,EAAjB,EAAiBA,MAAOF,EAAxB,EAAwBA,KASxB,OAAkB,OAAXtL,EACH,CAAEuL,UAASC,QAAOF,QAClB,CAAEC,SAAS,EAAMC,WAAOpJ,EAAWkJ,UAAMlJ,I,0CKlIzCknC,GAAO1uC,IAAOC,IAAV,6FAEC5B,EAAYD,OAmIRuwC,GA1HA,SAAC,GAAuB,IAajCC,EACAC,EAdYzpC,EAAoB,EAApBA,OACVyB,EAAYsF,KAClB,EAAiC4hC,GAAyB,CACxD3oC,OAAmB,OAAXA,EAAkBse,SAASte,EAAQ,IAAM,KACjDgO,KlEzCuB,KkE0CvByC,MAAO1E,GAAWmyB,OAClBkL,UAAW53B,GAAUM,iBACrBu3B,eAAgB,GAChBF,SAAU,WANJ59B,EAAR,EAAQA,QAASC,EAAjB,EAAiBA,MAAOF,EAAxB,EAAwBA,KAQlBgd,EAAWkI,KACX/wB,EAAaglB,KAInB,GAAIlZ,GAAW+c,EAAS/c,SAAW9L,EAAW8L,QAC5Ci+B,EAAuB,kBAACxc,GAAD,MACvByc,EAAqB,kBAACzc,GAAD,WAChB,GAAIxhB,EACT+B,QAAQ/B,MAAMA,GACdg+B,EAAuB,KACvBC,EAAqB,UAChB,GAAInhB,EAAS9c,MAClB+B,QAAQ/B,MAAM8c,EAAS9c,OACvBg+B,EAAuB,KACvBC,EAAqB,UAChB,GAAIhqC,EAAW+L,MACpB+B,QAAQ/B,MAAM/L,EAAW+L,OACzBg+B,EAAuB,KACvBC,EAAqB,UAChB,GAAIn+B,GAAQgd,EAAShd,MAAQ7L,EAAW6L,KAAM,CACnD,IAAQ29B,EAAoB39B,EAApB29B,MAAOH,EAAax9B,EAAbw9B,SAETY,EAAyBZ,EAAS9kC,QAAO,SAAC2W,GAAO,IAAD,EAC9CyK,EAAQ,UAAG3lB,EAAW6L,YAAd,aAAG,EAAiB7L,WAAW+b,MAC3C,SAACmuB,GAAD,OAAQA,EAAGhlB,UAAYhK,EAAEgK,QAAU,MAErC,OAAOhK,EAAEmf,KAAOnf,EAAEmf,KAAO,GAAK1U,GAA8B,UAAlBA,EAASjS,QAE/Cy2B,EAAgBjH,KACpB+G,GAAkDZ,EAClD,CAAC,OACD,CAAC,SAEAe,MAAM,EAAGH,EAAyB,EAAI,GACtC96B,KAAI,SAAC+L,GAAO,IAAD,IACJyK,EAAQ,UAAG3lB,EAAW6L,YAAd,aAAG,EAAiB7L,WAAW+b,MAC3C,SAACmuB,GAAD,OAAQA,EAAGhlB,UAAYhK,EAAEgK,QAAU,MAErC,OACE,kBAAC8iB,GAAD,CAAU19B,IAAK4Q,EAAEgK,SAAjB,OAA2BS,QAA3B,IAA2BA,GAA3B,UAA2BA,EAAUjS,YAArC,aAA2B,EAAgB80B,kBAGjDuB,EAAuB,oCAAGI,GAE1B,IAAME,EAAuBb,EAAMjlC,QAAO,SAAC2W,GAAD,OAAOA,EAAEmf,KAAOnf,EAAEmf,KAAO,KAC7DiQ,EAAcpH,KAClBmH,GAA8Cb,EAC9C,CAAC,OACD,CAAC,SAEAY,MAAM,EAAGC,EAAuB,EAAI,GACpCl7B,KAAI,SAAC+L,GAAO,IAAD,IACJiW,EAAO,UAAGtI,EAAShd,YAAZ,aAAG,EAAegd,SAAS9M,MACtC,SAACmuB,GAAD,OAAQA,EAAGpf,YAAc5P,EAAE4P,UAAY,MAEzC,OACE,kBAACkd,GAAD,CAAU19B,IAAK4Q,EAAE4P,WAAjB,OAA6BqG,QAA7B,IAA6BA,GAA7B,UAA6BA,EAASzd,YAAtC,aAA6B,EAAe80B,kBAGlDwB,EAAqB,oCAAGM,QAExBP,EAAuB,KACvBC,EAAqB,KAGvB,OACE,oCACE,kBAACH,GAAD,KACE,kBAAClC,GAAD,KACE,kBAAC,GAAD,CAAMroB,IAAKirB,OACX,kBAAC1C,GAAD,KACG7lC,EAAU,4CADb,MAGA,kBAAC8lC,GAAD,KlEzHiB,KkE2Hf,kBAAC,GAAD,CACEzxB,YACE,yBACE9N,wBAAyB,CACvBC,OAAQxG,EACN,2DAQd,kBAAC+lC,GAAD,KAAYgC,IAEd,kBAACF,GAAD,KACE,kBAAClC,GAAD,KACE,kBAAC,GAAD,CAAMroB,IAAKkrB,OACX,kBAAC3C,GAAD,KACG7lC,EAAU,wCADb,MAGA,kBAAC8lC,GAAD,KlEhJiB,KkEkJf,kBAAC,GAAD,CACEzxB,YAAarU,EACX,oDAKR,kBAAC+lC,GAAD,KAAYiC,MChHLS,GArBU,WAEPziC,KAEhB,MAAO,CACL8D,SAAS,EACTC,WAAOpJ,EACPkJ,KAAM,CACJ4H,OAAQ,GACRi3B,wBAAyB,CACvBC,iBAAkB,EAClBC,iBAAkB,EAClBC,iBAAkB,EAClBC,iBAAkB,EAClBC,iBAAkB,EAClBC,iBAAkB,M,qBC8CXC,GArEG,WAChB,IAIIC,EAJElpC,EAAYsF,KAClB,EAAiCmjC,KAAzB3+B,EAAR,EAAQA,QAASC,EAAjB,EAAiBA,MAAOF,EAAxB,EAAwBA,KAClBs/B,EAAkBt4B,KAClB4K,EAAc5B,KAEpB,GAAI/P,GAAWq/B,EAAgBr/B,SAAW2R,EAAY3R,QACpDo/B,EAAmB,kBAAC3d,GAAD,WACd,GAAIxhB,EACT+B,QAAQ/B,MAAMA,GACdm/B,EAAmB,UACd,GAAIC,EAAgBp/B,MACzB+B,QAAQ/B,MAAMo/B,EAAgBp/B,OAC9Bm/B,EAAmB,UACd,GAAIr/B,GAAQs/B,EAAgBt/B,MAAQ4R,EAAY3B,KAAM,CAC3D,IAAMsvB,EAAS3tB,EAAY3B,KAAKhc,WAC5B2d,EAAY3B,KAAKhc,WAAa,EAC9B,EACEurC,EAAS5tB,EAAY3B,KAAKhc,WACE,EAA9B2d,EAAY3B,KAAKhc,WACjB,EACEwrC,EAAepI,KAAQr3B,EAAK4H,OAAQ,CAAC,YACxCtE,KAAI,SAAC+L,GAAO,IAAD,EACJY,EAAI,UAAGqvB,EAAgBt/B,YAAnB,aAAG,EAAsB4H,OAAOsI,MACxC,SAACmuB,GAAD,OAAQA,EAAG3pC,SAAW2a,EAAEqwB,aAE1B,OAAO,2BAAKrwB,GAAZ,IAAeY,YAEhBvX,QACC,SAAC2W,GAAD,eACEA,EAAEqwB,aAAF,UAAgB9tB,EAAY3B,YAA5B,aAAgB,EAAkBvb,UAAlC,UACA2a,EAAEY,YADF,aACA,EAAQhc,aACRob,EAAEY,KAAKhc,WAAasrC,GACpBlwB,EAAEY,KAAKhc,WAAaurC,KAEvBjB,MAAM,EAAG,GACTj7B,KAAI,SAAC+L,GAAO,IAAD,QACJ5M,EAAO,UAAG68B,EAAgBt/B,YAAnB,aAAG,EAAsBkH,UAAUgJ,MAC9C,SAACyvB,GAAD,aAAWA,EAAMn4B,aAAc,UAAA6H,EAAEY,YAAF,eAAQzI,WAAY,MAE/Co4B,EAAcn9B,EAAU,KAAOA,EAAQgF,KAAO,GACpD,OACE,kBAAC00B,GAAD,CAAU19B,IAAG,UAAE4Q,EAAEY,YAAJ,aAAE,EAAQvb,QAAvB,UACG2a,EAAEY,YADL,iBACG,EAAQpI,YADX,aACG,EAAc80B,cACdiD,EAAYjD,kBAIrB0C,EAAmB,oCAAGI,QAEtBJ,EAAmB,KAErB,OACE,6BACE,kBAACvD,GAAD,KACE,kBAAC,GAAD,CAAMroB,IAAKosB,OACX,6BAAM1pC,EAAU,qCAChB,kBAAC8lC,GAAD,KpErEmB,KoEuEjB,kBAAC,GAAD,CACEzxB,YAAarU,EAAU,gDAI7B,kBAAC+lC,GAAD,KAAYmD,KCxDHS,GAfG,WAChB,IAAMprC,EAASyH,KAEf,OAAKzH,EAKH,oCACE,kBAAC,GAAD,CAAQA,OAAQA,IAChB,kBAAC,GAAD,OANK,MCHLrF,GAAOC,IAAO5B,MAAV,+GA2CKqyC,GA/BQ,SAAC,GAAgC,EAA9BrrC,OAA+B,IAAvByP,EAAsB,EAAtBA,SAC1BhO,EAAYsF,KACVuE,EVMJ,CACJC,SAAS,EACTC,WAAOpJ,EACPkJ,UAAMlJ,GUTEkJ,KACFs/B,EAAkBt4B,KAEpBg5B,EAA6C,MAC7CC,EAAqB,MACzB,GAAIX,EAAgBt/B,KAAM,CACxB,IAAMmI,EAASm3B,EAAgBt/B,KAAKqH,QAAQ6I,MAC1C,SAACb,GAAD,OAAOA,EAAElL,WAAaA,EAAW,MAEnC87B,EAAa93B,GAAUA,EAAO83B,WAAa93B,EAAO83B,WAAa,GAC3DjgC,GAAQA,EAAKkgC,sBACfF,EAA4BhgC,EAAKkgC,oBAAoB/3B,OAAS,GAIlE,OACE,kBAAC,GAAD,KACE,iCAEGhS,EAAU,mCAAoC,CAC7C,gCAAiC6pC,EACjC,cAAeC,KAGnB,kCAAQ9pC,EAAU,yCCpClB9G,GAAOC,IAAOC,IAAV,mNAYJ4wC,GAAM7wC,IAAOC,IAAV,sJAKE5B,EAAYD,OAuBR0yC,GAlBC,WACd,IAAQnwB,EAASD,KAATC,KACFowB,EAAapwB,EACjB,kBAAC,GAAD,CAAgBvb,OAAQub,EAAKvb,OAAQyP,SAAU8L,EAAK9H,SAClD,KACJ,OACE,kBAAC,GAAD,KACE,kBAACg4B,GAAD,KACE,kBAAC,GAAD,OAEF,kBAACA,GAAD,KACE,kBAAC,GAAD,OAEF,kBAACA,GAAD,KAAME,KCrCNhxC,GAAOC,IAAOC,IAAV,wQAYC5B,EAAYD,OAMjB6jB,GAAQjiB,IAAOkL,GAAV,qKASL8lC,GAAgBhxC,IAAOkC,GAAV,mM7EtBS,U6EyBXlB,GAQXiwC,GAAUjxC,IAAOC,IAAV,yIAiDEixC,GAzCE,WACf,IAAMrqC,EAAYsF,KAClB,OACE,kBAAC,GAAD,KACE,kBAAC,GAAD,KAAQtF,EAAU,sCAClB,kBAACmqC,GAAD,KACGnqC,EAAU,0CAEb,kBAACoqC,GAAD,CACE7jC,wBAAyB,CACvBC,OAAQxG,EAAU,2CAGtB,kBAACmqC,GAAD,KACGnqC,EAAU,0CAEb,kBAACoqC,GAAD,CACE7jC,wBAAyB,CACvBC,OAAQxG,EAAU,2CAGtB,kBAACmqC,GAAD,KACGnqC,EAAU,uCAEb,kBAACoqC,GAAD,CACE7jC,wBAAyB,CACvBC,OAAQxG,EAAU,wCAGtB,kBAACmqC,GAAD,KACGnqC,EAAU,wCAEb,kBAACoqC,GAAD,CACE7jC,wBAAyB,CACvBC,OAAQxG,EAAU,2CC/EtBsqC,GAAcnxC,IAAOC,IAAV,2EAAGD,CAAH,kK9EWe,UAdP,W8EsCVoxC,GARC,SAACC,GACf,OACE,kBAACF,GAAD,gFC5BEpxC,GAAOC,IAAOC,IAAV,gEAAGD,CAAH,mE/EUsB,W+EkBjBsxC,GArBC,WACd,IAAM1kC,EAAgBC,KAOtB,OACE,kBAAC,GAAD,KACE,kBAAC,GAAD,CACE8D,SAAS,EACTC,WAAOpJ,EACPkJ,UAAMlJ,EACNoF,cAAeA,EACf2kC,UAZ0B,CAC9BC,OAAQ,CAAC,CAAC,EAAG,GAAI,CAAC,EAAG,IACrBC,QAAS,CAAEzpC,IAAK,EAAGC,OAAQ,EAAG2T,KAAM,EAAG81B,MAAO,QCN5C3xC,GAAOC,IAAOC,IAAV,mhBAiBC5B,EAAYD,OAUjBuzC,GAAe3xC,IAAOC,IAAV,kFAIZ2xC,GAAkB5xC,YAAO2xC,GAAP3xC,CAAH,4IASf6xC,GAAe7xC,YAAO2xC,GAAP3xC,CAAH,iDAIZ8xC,GAAoB9xC,YAAO2xC,GAAP3xC,CAAH,6EAoCR+xC,GA/BO,WAGpB,OAAe,OAFAllC,KAIX,kBAACtM,EAAD,KACE,kBAACmqB,GAAD,KACE,kBAAC7K,GAAD,CAAa1F,gBAAiB,mCAOpC,kBAAC5Z,EAAD,KACE,kBAAC,GAAD,KACE,kBAACqxC,GAAD,KACE,kBAAC,GAAD,OAEF,kBAACC,GAAD,KACE,kBAAC,GAAD,OAEF,kBAACC,GAAD,KACE,kBAAC,GAAD,QAGJ,kBAAC,GAAD,Q,SCzFOE,GAAqB,SAACjxB,EAAa5K,GAE9C,OADe4K,EAAI/Z,WAAWV,OAAS6P,EAAInP,WAAWV,OACtC,GCoRH2rC,GA5OI,SAAC5jC,GAClB,IASI+kB,EATI1iB,EAA0DrC,EAA1DqC,KAAM+N,EAAoDpQ,EAApDoQ,YAAasS,EAAuC1iB,EAAvC0iB,cAAeC,EAAwB3iB,EAAxB2iB,QAASH,EAAexiB,EAAfwiB,WAE7CK,EAAc5G,KACdiH,EAA2B/D,GAAwB,CACvD3X,MAAOgb,EACPzd,K7EhDuB,O6EkDnBvM,EAAYsF,KAOhBinB,EAHApC,IAAY7sB,GAAQ+tB,gBACc1qB,IAAlC+pB,EAAyB7gB,KAEZojB,eACVC,OAAO,CACNxC,EAAyB7gB,KAAKid,aAAaT,kBAC3CqE,EAAyB7gB,KAAKid,aAAaJ,qBAC3CgE,EAAyB7gB,KAAKid,aAAaR,oBAE5C1lB,MAAM5G,GAETmwB,IAAY7sB,GAAQguB,WACc3qB,IAAlC+pB,EAAyB7gB,KAEZojB,eACVC,OAAO,CACNxC,EAAyB7gB,KAAKid,aAAaP,cAC3CmE,EAAyB7gB,KAAKid,aAAaL,iBAC3CiE,EAAyB7gB,KAAKid,aAAaN,gBAE5C5lB,MAAM3G,GAEI,iBAAM,aAGrB,MAA4CyJ,oBAAkB,GAA9D,oBAAO2nC,EAAP,KAAuBC,EAAvB,KACMC,EAAa3jC,iBAA8B,MAEjD,GACGuiB,IAAY7sB,GAAQ+tB,WAAaX,EAAyB5gB,SAC1DqgB,IAAY7sB,GAAQguB,MAAQZ,EAAyB5gB,QAEtD,OAAO,kBAAC,GAAD,MAGT,IAAM0hC,EAAsB3hC,EAAKtH,QAAO,SAAC2W,GACvC,IAAMyK,EACU,OAAdzK,EAAEgK,QAAmBmH,EAAYxgB,KAAKqP,EAAEgK,cAAWviB,EACrD,SACEgjB,GACCuG,EAAcjb,SAAS0U,EAASL,iBAAiBnjB,eAE3C+Y,EAAEmf,KAAQnf,EAAEmf,IAAiB,MAKpC/oB,EAGE,GAFJjO,KAAKc,KAC6D,IAA/Dd,KAAKiO,IAAL,MAAAjO,KAAI,aAAQmqC,EAAoBr+B,KAAI,SAAC+L,GAAD,OAAOA,EAAEmf,SAAyB,IAEvEne,EAAM7Y,KAAK6Y,IAAL,MAAA7Y,KAAI,aAAQmqC,EAAoBr+B,KAAI,SAAC+L,GAAD,OAAOA,EAAEmf,SACnD/oB,EAAM,KACRA,EAAM,IAEJ4K,GAAO,IACTA,EAAM,IAER,IAAIuxB,EAAQlS,eAAWrM,OAAO,CAAChT,EAAK5K,IAAM1O,MAAM,CAAC,EAAG,MAAM8qC,OAE1DxxB,EAAMrZ,WAAW4qC,EAAM9R,OAAO,GAAG74B,QAAQ,KACzCwO,EAAMzO,WAAW4qC,EAAM9R,OAAO,KAAK74B,QAAQ,KAEnCX,WAAWV,OAASya,EAAI/Z,WAAWV,OAAS,EAClDya,EAAM,EAAI5K,EACDA,EAAInP,WAAWV,OAASya,EAAI/Z,WAAWV,OAAS,IACzD6P,EAAM,EAAI4K,GAGZuxB,EAAQlS,eAAWrM,OAAO,CAAChT,EAAK5K,IAAM1O,MAAM,CAAC,EAAG,MAAM8qC,OACtD,IAAMC,EAAqBR,GACzBtqC,WAAW4qC,EAAM9R,OAAO,GAAG74B,QAAQ,IACnCD,WAAW4qC,EAAM9R,OAAO,KAAK74B,QAAQ,KAGjC8qC,EAAoBrS,eAAWrM,OAAO,CAAC,EAAG5d,IAAM1O,MAAM,CAAC,EAAG,MAAM8qC,OAEhEG,EAAmBtS,eAAWrM,OAAO,CAAC,EAAGhT,IAAMtZ,MAAM,CAAC,EAAG,MAAM8qC,OAE/DI,EAA+B,GAC/BC,EAA8B,GACpCP,EAAoB9nB,SAAQ,SAACxK,GAC3B,IAEIrf,EAFE8pB,EACU,OAAdzK,EAAEgK,QAAmBmH,EAAYxgB,KAAKqP,EAAEgK,cAAWviB,EAErD,GACGwpB,IAAY7sB,GAAQ+tB,WAAalB,IAAY7sB,GAAQguB,OACtDZ,EAAyB7gB,KAepB,CACL,IAAMmiC,EAAaroB,EACfhqB,EAAeogB,MACb,SAAC8O,GAAD,OAAOA,EAAEjvB,KAAO+pB,EAASL,iBAAiBnjB,mBAE5CQ,EACJ9G,EAAQmyC,EAAaA,EAAWnyC,MAAQ,gBApBxC,CACA,IAAMwf,EACU,OAAdH,EAAEgK,QACEwH,EAAyB7gB,KAAK7L,WAAWkb,EAAEgK,cAC3CviB,EACN,GAAI0Y,EAAQ,CACV,IAAMyU,EACJ3D,IAAY7sB,GAAQ+tB,UAChBhS,EAAO8O,mBACP9O,EAAO+O,eACbvuB,EAAQ0yB,EAAWuB,QAEnBj0B,EAAQ,YAUZ,IAAI2V,EAAgB,EAChB0J,EAAEmf,KAAOnf,EAAEmf,IAAM,EACnB7oB,EAAQq8B,EAAiB3yB,EAAEmf,KAClBnf,EAAEmf,KAAOnf,EAAEmf,KAAO,IAC3B7oB,EAAQo8B,EAAkB1yB,EAAEmf,MAG9B,IAAM4T,EAAkB,CACtBryC,GAAkB,OAAdsf,EAAEgK,QAAmBhK,EAAEgK,QAAQ/iB,WAAa,GAChDsS,MAAOkR,GAAYA,EAASjS,KAAOiS,EAASjS,KAAO,GACnDlC,QACA3V,SAEEqf,EAAEmf,KAAOnf,EAAEmf,KAAO,EACpByT,EAAiBt5B,KAAKy5B,GAEtBF,EAAgBv5B,KAAKy5B,MAGzB,IAmEM5d,EAAsBgd,EAC1B,kBAAC,GAAD,CAAYriB,WAAY,kBAAMsiB,GAAkB,KAC7CtrC,EAAU,6CAEX,KAEJ,OACE,oCACE,kBAAC,KAAD,CACEksC,YAAaJ,EACbK,cAAeJ,EACfK,YA9Ec,SAAC58B,EAAe68B,GAClC,IAAMC,EACJD,IAAcE,KAAUC,KAAOZ,EAAoBC,EAC/CY,EAAc5rC,WAAWyrC,EAAW3S,OAAOnqB,GAAO1O,QAAQ,IAChE,GAAI2rC,GAAe,EACjB,OACE,oCACGA,EACD,kBAAChxC,EAAD,cAIJ,MAAwBwF,GAAkBwrC,GAAlCtrC,EAAR,EAAQA,IAAKC,EAAb,EAAaA,OACb,OACE,oCACE,6BAAMD,GADR,SACyB,6BAAMC,GAC7B,kBAAC1F,EAAD,eA+DFkc,YAAaA,EACb80B,WA1Da,SAACrkC,GAClB,IAAMN,EAAOwjC,EAAWrjC,QACxB,GAAIH,EACF,GAAIM,GAAKA,EAAE4jC,MAAO,CAChB,IAAQA,EAAuB5jC,EAAvB4jC,MAAOU,EAAgBtkC,EAAhBskC,YACThpB,EAAW6nB,EAAoBzxB,MACnC,SAACb,GAAD,OAAOA,EAAEgK,SAAWhK,EAAEgK,QAAQ/iB,aAAe8rC,EAAMryC,MAE/CkrB,EAAO,CACX,CAAC9kB,EAAU,wBAA0B,IAAKisC,EAAMryC,IAChD,CAACoG,EAAU,kBAAoB,I7EvNd,M6EuN+BG,YAChD,CACEH,EAAU,oBAAsB,IAChC2jB,GAAYA,EAAS0U,IAAM1U,EAAS0U,IAAIv3B,QAAQ,GAAK,UAGzD,IACGqpB,IAAY7sB,GAAQ+tB,WAAalB,IAAY7sB,GAAQguB,OACtDZ,EAAyB7gB,KACzB,CACA,IAAMwP,EAASqR,EAAyB7gB,KAAK7L,WAAWiuC,EAAMryC,IACxDk0B,EACJ3D,IAAY7sB,GAAQ+tB,UAChBhS,EAAO4O,eACP5O,EAAO6O,WACbpD,EAAKtS,KAAK,CACRxS,EAAU,4BAA6B,CAAEyd,KAAM0M,KAC9CA,IAAY7sB,GAAQguB,KAAO,IAAM,IAAMwC,EAAYhtB,QAAQ,KAGhEiH,EAAKgmB,UAAYnJ,GAAmB,CAClCnS,MAAOw5B,EAAMx5B,MACb5Y,MAAOe,YAAKqxC,EAAMpyC,MAAO,IACzBirB,OACAO,YAAa,CAAC,EAAG,KAEnBtd,EAAKtB,MAAMtF,IAAMwrC,EAAYC,EAAI,KACjC7kC,EAAKtB,MAAMsO,KAAO43B,EAAYzsC,EAAI,KAClC6H,EAAKtB,MAAM9E,QAAU,aAErBoG,EAAKtB,MAAM9E,QAAU,QAmBrBkrC,iBAAkB,kBAAMvB,GAAkB,IAC1CwB,cAAe,GACfnB,mBAAoBA,EACpBoB,mBAAoB,CAClBC,SAAUhtC,EAAU,yCACpBitC,WAAYjtC,EAAU,8CAG1B,kBAAC2kB,GAAD,CAAkBxO,IAAKo1B,IACtBld,ICeQ6e,GAtPE,SAAC1lC,GAChB,IAAQqC,EAA6DrC,EAA7DqC,KAAM8lB,EAAuDnoB,EAAvDmoB,aAAcxF,EAAyC3iB,EAAzC2iB,QAASyF,EAAgCpoB,EAAhCooB,eAAgBhY,EAAgBpQ,EAAhBoQ,YACrD,EAA4ClU,oBAAkB,GAA9D,oBAAO2nC,EAAP,KAAuBC,EAAvB,KACMC,EAAa3jC,iBAA8B,MAC3C5H,EAAYsF,KACZuqB,EAAaZ,KACbvE,EAA2B/D,GAAwB,CACvD3X,MAAO1E,GAAWytB,IAClBxrB,K9ElDuB,K8EmDvBojB,aAAc9S,SAAS8S,EAAc,MAGvC,GACGxF,IAAY7sB,GAAQ+tB,WAAaX,EAAyB5gB,SAC1DqgB,IAAY7sB,GAAQguB,MAAQZ,EAAyB5gB,QAEtD,OAAO,kBAAC,GAAD,MAGT,IAAMqjC,EAAqBtjC,EAAKtH,QAAO,SAAC2W,GACtC,IAAMiW,EACY,OAAhBjW,EAAE4P,UAAqB+G,EAAWhmB,KAAKqP,EAAE4P,gBAAanoB,EAClDquB,EACJG,GAAWA,EAAQH,mBAAqBG,EAAQH,mBAAqB,GACvE,SAAIG,GAAYS,EAAe3gB,SAAS+f,EAAmB7uB,eAClD+Y,EAAEmf,KAAQnf,EAAEmf,IAAiB,MAMpC/oB,EAGE,GAFJjO,KAAKc,KAC4D,IAA9Dd,KAAKiO,IAAL,MAAAjO,KAAI,aAAQ8rC,EAAmBhgC,KAAI,SAAC+L,GAAD,OAAOA,EAAEmf,SAAyB,IAEtEne,EAAM7Y,KAAK6Y,IAAL,MAAA7Y,KAAI,aAAQ8rC,EAAmBhgC,KAAI,SAAC+L,GAAD,OAAOA,EAAEmf,SAClD/oB,EAAM,KACRA,EAAM,IAEJ4K,GAAO,IACTA,EAAM,IAER,IAAIuxB,EAAQlS,eAAWrM,OAAO,CAAChT,EAAK5K,IAAM1O,MAAM,CAAC,EAAG,MAAM8qC,OAE1DxxB,EAAMrZ,WAAW4qC,EAAM9R,OAAO,GAAG74B,QAAQ,KACzCwO,EAAMzO,WAAW4qC,EAAM9R,OAAO,KAAK74B,QAAQ,KAEnCX,WAAWV,OAASya,EAAI/Z,WAAWV,OAAS,EAClDya,EAAM,EAAI5K,EACDA,EAAInP,WAAWV,OAASya,EAAI/Z,WAAWV,OAAS,IACzD6P,EAAM,EAAI4K,GAGZuxB,EAAQlS,eAAWrM,OAAO,CAAChT,EAAK5K,IAAM1O,MAAM,CAAC,EAAG,MAAM8qC,OACtD,IAKInf,EALEof,EAAqBR,GACzBtqC,WAAW4qC,EAAM9R,OAAO,GAAG74B,QAAQ,IACnCD,WAAW4qC,EAAM9R,OAAO,KAAK74B,QAAQ,KAQrCyrB,EAHApC,IAAY7sB,GAAQ+tB,gBACc1qB,IAAlC+pB,EAAyB7gB,KAEZojB,eACVC,OAAO,CACNxC,EAAyB7gB,KAAKkd,cAAcV,kBAC5CqE,EAAyB7gB,KAAKkd,cAAcL,qBAC5CgE,EAAyB7gB,KAAKkd,cAAcT,oBAE7C1lB,MAAM5G,GAETmwB,IAAY7sB,GAAQguB,WACc3qB,IAAlC+pB,EAAyB7gB,KAEZojB,eACVC,OAAO,CACNxC,EAAyB7gB,KAAKkd,cAAcR,cAC5CmE,EAAyB7gB,KAAKkd,cAAcN,iBAC5CiE,EAAyB7gB,KAAKkd,cAAcP,gBAE7C5lB,MAAM3G,GAEIs/B,eACVrM,OAAO,CAAChT,EAAK5K,IACb1O,MAAM7G,GACN2xC,OAGL,IAAME,EAAoBrS,eAAWrM,OAAO,CAAC,EAAG5d,IAAM1O,MAAM,CAAC,EAAG,MAAM8qC,OAEhEG,EAAmBtS,eAAWrM,OAAO,CAAC,EAAGhT,IAAMtZ,MAAM,CAAC,EAAG,MAAM8qC,OAE/DI,EAA+B,GAC/BC,EAA8B,GACpCoB,EAAmBzpB,SAAQ,SAACxK,GAC1B,IAGIrf,EAHEs1B,EACY,OAAhBjW,EAAE4P,UAAqB+G,EAAWhmB,KAAKqP,EAAE4P,gBAAanoB,EAClD8R,EAAQ0c,GAA4B,OAAjBA,EAAQzd,KAAgByd,EAAQzd,KAAO,GAE1Dye,EACY,OAAhBjX,EAAE4P,UACE4B,EAAyB7gB,KAAKgd,SAAS3N,EAAE4P,gBACzCnoB,EACN,GACEwpB,IAAY7sB,GAAQ+tB,gBACc1qB,IAAlC+pB,EAAyB7gB,KAGvBhQ,EADEs2B,EACM5D,EAAW4D,EAAqBhI,oBAEhC,YAEL,GACLgC,IAAY7sB,GAAQguB,WACc3qB,IAAlC+pB,EAAyB7gB,KAGvBhQ,EADEs2B,EACM5D,EAAW4D,EAAqB/H,gBAEhC,WAEL,CACL,IAAM4jB,EAAalyC,EAAgBigB,MACjC,SAAC8O,GAAD,OACEsG,GACAA,EAAQH,oBACRnG,EAAEjvB,KAAOu1B,EAAQH,mBAAmB7uB,cAExCtG,EAAQmyC,EAAaA,EAAWnyC,MAAQ,YAE1C,IAAI2V,EAAgB,EAChB0J,EAAEmf,KAAOnf,EAAEmf,IAAM,EACnB7oB,EAAQq8B,EAAiB3yB,EAAEmf,KAClBnf,EAAEmf,KAAOnf,EAAEmf,KAAO,IAC3B7oB,EAAQo8B,EAAkB1yB,EAAEmf,MAG9B,IAAM4T,EAAkB,CACtBryC,GAAoB,OAAhBsf,EAAE4P,UAAqB5P,EAAE4P,UAAU3oB,WAAa,GACpDsS,QACAjD,QACA3V,SAEEqf,EAAEmf,KAAOnf,EAAEmf,KAAO,EACpByT,EAAiBt5B,KAAKy5B,GAEtBF,EAAgBv5B,KAAKy5B,MAGzB,IAkEM5d,EAAsBgd,EAC1B,kBAAC,GAAD,CAAYriB,WAAY,kBAAMsiB,GAAkB,KAC7CtrC,EAAU,6CAEX,KAEJ,OACE,oCACE,kBAAC,KAAD,CACEksC,YAAaJ,EACbK,cAAeJ,EACfK,YA7Ec,SAAC58B,EAAe68B,GAClC,IAAMC,EACJD,IAAcE,KAAUC,KAAOZ,EAAoBC,EAC/CY,EAAc5rC,WAAWyrC,EAAW3S,OAAOnqB,GAAO1O,QAAQ,IAChE,GAAI2rC,GAAe,EACjB,OACE,oCACGA,EACD,kBAAChxC,EAAD,cAIJ,MAAwBwF,GAAkBwrC,GAAlCtrC,EAAR,EAAQA,IAAKC,EAAb,EAAaA,OACb,OACE,oCACE,6BAAMD,GADR,SACyB,6BAAMC,GAC7B,kBAAC1F,EAAD,eA8DFkc,YAAaA,EACb80B,WAzDa,SAACrkC,GAClB,IAAMN,EAAOwjC,EAAWrjC,QACxB,GAAIH,EACF,GAAIM,GAAKA,EAAE4jC,MAAO,CAChB,IAAQA,EAAuB5jC,EAAvB4jC,MAAOU,EAAgBtkC,EAAhBskC,YACTxd,EAAUge,EAAmBpzB,MACjC,SAACb,GAAD,OAAOA,EAAE4P,WAAa5P,EAAE4P,UAAU3oB,aAAe8rC,EAAMryC,MAEnDkrB,EAAO,CACX,CAAC9kB,EAAU,kBAAoB,I9E/Nd,M8E+N+BG,YAChD,CACEH,EAAU,oBAAsB,IAChCmvB,GAAWA,EAAQkJ,IAAMlJ,EAAQkJ,IAAIv3B,QAAQ,GAAK,UAGtD,IACGqpB,IAAY7sB,GAAQ+tB,WAAalB,IAAY7sB,GAAQguB,OACtDZ,EAAyB7gB,KACzB,CACA,IAAMwP,EAASqR,EAAyB7gB,KAAKgd,SAASolB,EAAMryC,IACtDk0B,EACJ3D,IAAY7sB,GAAQ+tB,UAChBhS,EAAO4O,eACP5O,EAAO6O,WACbpD,EAAKtS,KAAK,CACRxS,EAAU,4BAA6B,CAAEyd,KAAM0M,KAC9CA,IAAY7sB,GAAQguB,KAAO,IAAM,IAAMwC,EAAYhtB,QAAQ,KAGhEiH,EAAKgmB,UAAYnJ,GAAmB,CAClCnS,MAAOw5B,EAAMx5B,MACb5Y,MAAOe,YAAKqxC,EAAMpyC,MAAO,IACzBirB,OACAO,YAAa,CAAC,EAAG,KAEnBtd,EAAKtB,MAAMtF,IAAMwrC,EAAYC,EAAI,KACjC7kC,EAAKtB,MAAMsO,KAAO43B,EAAYzsC,EAAI,KAClC6H,EAAKtB,MAAM9E,QAAU,aAErBoG,EAAKtB,MAAM9E,QAAU,QAmBrBkrC,iBAAkB,kBAAMvB,GAAkB,IAC1CwB,cAAe,GACfnB,mBAAoBA,EACpBoB,mBAAoB,CAClBC,SAAUhtC,EAAU,kDACpBitC,WAAYjtC,EACV,uDAIN,kBAAC2kB,GAAD,CAAkBxO,IAAKo1B,IACtBld,Ib7QDn1B,GAAOC,IAAOC,IAAV,wEAKJg0C,GAAcj0C,IAAOC,IAAV,iGAMXi3B,GAASl3B,IAAO4B,OAAV,mPAEKb,EtELa,YsEexBk7B,GAAej8B,YAAOk3B,GAAPl3B,CAAH,uGtE/Bc,qBsEuC1Bk0C,GAAiBl0C,IAAOC,IAAV,o8BtE1BU,oBsEsDnB5B,EAAYD,MtEtDO,WsEwExB+1C,GAAuBn0C,IAAO4B,OAAV,iPAITb,EtE5Ea,WsEsFxB+K,GAAO9L,IAAO+iB,IAAV,iIAQJqxB,GAAyBp0C,IAAOwB,KAAV,mKtE3FE,YsEoGxB6yC,GAAoBr0C,IAAOC,IAAV,qDAGjBq0C,GAAWt0C,IAAOC,IAAV,4LAOGe,GAEXuzC,GAAcv0C,IAAOC,IAAV,yIAKAe,GAEXwzC,GAAMx0C,IAAOC,IAAV,yLAQH6a,GAAS9a,IAAOC,IAAV,4BAENw0C,GAAgB,WACpB,OACE,kBAACL,GAAD,KACE,kBAAC,GAAD,CAAMjwB,IAAKkoB,OADb,uB,SASCwB,K,YAAAA,E,eAAAA,Q,cAKOC,K,oBAAAA,E,qBAAAA,Q,KAYZ,I,YczKYjI,GdyRG6O,GAhHQ,SAACrmC,GACtB,IAAQsmC,EAAyDtmC,EAAzDsmC,eAAgBC,EAAyCvmC,EAAzCumC,UAAWC,EAA8BxmC,EAA9BwmC,WAAYC,EAAkBzmC,EAAlBymC,cACzCjuC,EAAYsF,KAEZ4oC,EACJpxB,aAAaC,QAvBf,gEAuB0DiqB,GAAcmH,KAGxE,EAAsDzqC,mBACpDwqC,GADF,oBAAOE,EAAP,KAA4BC,EAA5B,KAQMC,EAAyC,CAC7CryB,gBtE9L4B,UsE+L5ByV,YtE/K0B,YsEiLtB6c,EACJ,oCACE,6BAAMvuC,EAAU,wCAChB,kBAACwtC,GAAD,KACE,qDACA,kBAACC,GAAD,KACE,kBAACE,GAAD,6CACA,kBAAC15B,GAAD,sDAKFu6B,EACJ,oCACE,6BAAMxuC,EAAU,wCAChB,kBAACwtC,GAAD,KACE,qDACA,kBAACE,GAAD,gGAOAe,EAAkBX,EACtB,oCACE,kBAAC,GAAD,CAASz5B,YAAak6B,GACpB,kBAAC,GAAD,CACE9nC,MACEsnC,IAAc9G,GAAYyH,SAAWJ,OAAoB3tC,EAE3DiG,QACEqnC,EACI,kBAAMA,EAAchH,GAAYyH,gBAChC/tC,GAGN,kBAAC,GAAD,CAAS0T,YAAak6B,IACrBvuC,EAAU,iCAGf,kBAAC,GAAD,CAASqU,YAAam6B,GACpB,kBAAC,GAAD,CACE/nC,MACEsnC,IAAc9G,GAAY0H,SAAWL,OAAoB3tC,EAE3DiG,QACEqnC,EACI,kBAAMA,EAAchH,GAAY0H,gBAChChuC,GAGN,kBAAC,GAAD,CAAS0T,YAAam6B,IACrBxuC,EAAU,kCAKjB,kBAAC,GAAD,CAASqU,YAAak6B,GACpB,kBAAC,GAAD,KACE,kBAAC,GAAD,CAASl6B,YAAak6B,IACrBvuC,EAAU,iCAKX4uC,EAAYZ,EAAa,SAAM,KAC/Ba,EAAab,EAAa,SAAM,KAEhCc,IAAiBV,GACrB,kBAACf,GAAD,gDAC0C,kBAAC,GAAD,MAD1C,oCAGE,6BACA,kBAACC,GAAD,CAAsB1mC,QAnFK,WAC7BynC,GAAuB,GACvBvxB,aAAaM,QA/Bf,6DA+BsD4pB,GAAcmH,QAkF7DnuC,EAAU,2CAOjB,OACE,kBAAC,GAAD,KACG4uC,EACD,kBAACxB,GAAD,KAAcqB,GACbI,EACAC,IenRDC,GAASv0C,YAAH,0TA0BNtB,GAAOC,IAAO4B,OAAV,wRrFfoB,WqF0BXg0C,IAKb3zB,GAAQjiB,IAAO61C,OAAV,wKAUL/pC,GAAO9L,IAAO+iB,IAAV,iIAsDK+yB,GA1CS,SAACznC,GACvB,IAAMm9B,EAAiBn9B,EAAMm9B,eACzBn9B,EAAMm9B,eACNvB,GAAegC,SACbplC,EAAYsF,KAClB,EAAqCuhC,KAA7B/B,EAAR,EAAQA,UAAWgC,EAAnB,EAAmBA,cACnB,EAAkCpjC,wBAAgC/C,IAAdmkC,GAApD,oBAAOppB,EAAP,KAAkBC,EAAlB,KACQ9R,EAAS8I,KAAT9I,KAQFqlC,EAAiBxzB,EACrB,kBAAC,GAAD,CACEyB,WAPe,SAACgyB,QACGxuC,IAAjBwuC,GACFxzB,GAAa,IAMb9R,KAAMA,EACN86B,eAAgBA,IAEhB,KAEEvtB,EACJutB,IAAmBvB,GAAegC,SAC9BplC,EAAU,8BACVA,EAAU,+BAEhB,OACE,oCACE,kBAAC,GAAD,CAAM4G,QAtBiB,kBAAM+U,GAAa,KAuBxC,kBAAC,GAAD,KACE,kBAAC,GAAD,CAAM2B,IAAKkoB,OACVpuB,GAHL,IAKI0vB,EALJ,KAOCoI,IChFDh2C,GAAOC,IAAOC,IAAV,wEAAGD,CAAH,2LAUC3B,EAAYD,OAMV63C,GAAej2C,IAAOC,IAAV,gFAAGD,CAAH,sJAWZk2C,GAAiBl2C,IAAOC,IAAV,kFAAGD,CAAH,gZA0Bdm2C,GAAgBn2C,YAAOk2C,IAAV,iFAAGl2C,CAAH,2DAMbo2C,GAAgBp2C,IAAOC,IAAV,iFAAGD,CAAH,mKtFvFD,WsFsGZq2C,GAAgBr2C,YAAOo2C,IAAV,iFAAGp2C,CAAH,8HAabs2C,GAAiBt2C,YAAOo2C,IAAV,kFAAGp2C,CAAH,4HAadu2C,GAAgBv2C,YAAOo2C,IAAV,iFAAGp2C,CAAH,mEAQpBw2C,GAAUx2C,IAAOC,IAAV,2EAAGD,CAAH,wEAQPy2C,GAAez2C,IAAOC,IAAV,gFAAGD,CAAH,0GA8LH02C,GAvKK,SAACroC,GACnB,IACE0iB,EAQE1iB,EARF0iB,cACAzS,EAOEjQ,EAPFiQ,eACAG,EAMEpQ,EANFoQ,YACAk4B,EAKEtoC,EALFsoC,cACAngB,EAIEnoB,EAJFmoB,aACA3F,EAGExiB,EAHFwiB,WACAG,EAEE3iB,EAFF2iB,QACAyF,EACEpoB,EADFooB,eAEI5vB,EAAYsF,KACZ+kB,EAAc5G,KACdjgB,EAAmBC,KACzB,EAAiCgkC,GAAWzd,GAApClgB,EAAR,EAAQA,QAASC,EAAjB,EAAiBA,MAAOF,EAAxB,EAAwBA,KAClBnH,EAAUC,cACVpE,EAASyH,KAETskB,EAAU1iB,iBAA8B,MAC9C,EAAoClE,wBAElC/C,GAFF,oBAAO0G,EAAP,KAAmBojB,EAAnB,KAGA7mB,qBAAU,WACR,IAAMmE,EAAOuiB,EAAQpiB,QACrB,GAAIH,EAAM,CACR,MAA0BA,EAAK+iB,wBAAvB3nB,EAAR,EAAQA,MAAOG,EAAf,EAAeA,OACfmnB,EAAc,CAAEtnB,QAAOG,cAExB,CAACgnB,EAAS9mB,IAEb,IACIunB,EASAG,EAVEF,EAAWC,aAAYphB,GAW7B,GAREkhB,EADElhB,IAEOmhB,QAGGrqB,GAKZ0pB,EAAYvgB,UACXzC,GACAyC,QAAwBnJ,IAAbqqB,EAEZE,EAAS,kBAAC,GAAD,WACJ,QAAcvqB,IAAVoJ,EACTmhB,EACE,kBAACrH,GAAD,KACE,kBAAC7K,GAAD,OAGJlN,QAAQ/B,MAAMA,QACT,QAA0BpJ,IAAtB0pB,EAAYtgB,MACrBmhB,EACE,kBAACrH,GAAD,KACE,kBAAC7K,GAAD,OAGJlN,QAAQ/B,MAAMA,QACT,QAAkBpJ,IAAdoqB,EAAyB,CAClC,IAAMuc,EACJ3X,IAAiBhyB,GAAai/B,GAAK7R,EAAUwc,MAAQxc,EAAUyc,MAC3DuI,EAAehlB,EAAUsc,SACzB9Z,EAAiBzjB,EAAU,kBAAC,GAAD,MAAmB,KAC9CkmC,EAAMF,EACV,kBAAC,GAAD,CACExnC,IACE,mBACAjB,EAAW/D,OAAOnD,WAClBkH,EAAWlE,MAAMhD,WAEnB0J,KAAMy9B,EACN3X,aAAcA,EACdxF,QAASA,EACTyF,eAAgBA,EAChBhY,YAAaA,IAGf,kBAAC,GAAD,CACEtP,IACE,qBACAjB,EAAW/D,OAAOnD,WAClBkH,EAAWlE,MAAMhD,WAEnB0J,KAAMkmC,EACNn4B,YAAaA,EACbsS,cAAeA,EACfC,QAASA,EACTH,WAAYA,IAGhBkB,EACE,kBAAC0kB,GAAD,CAAcnpC,MAAO,CAAEnD,OAAQ+D,EAAW/D,SACxC,kBAAC,GAAD,KAAgB0sC,GACfziB,QAILrC,EAAS,KAaX,OACE,oCACE,kBAAC,GAAD,CACE+T,qBAAsB,CACpBjJ,cAAe8Z,EAAgBlgB,EAAiB1F,EAChDF,aACA2F,eACAlY,iBACAwe,KAAM6Z,EAAgBpmB,GAAKyF,QAAUzF,GAAKoN,OAE5CS,gBAAiB,CACftN,iBAAiB,EACjB0F,eAAcmgB,QAAuBnvC,EACrCqpB,YAAY8lB,QAAgBnvC,EAC5BwpB,SAAS,EACToJ,iBAAiB,KAGrB,kBAAC,GAAD,KACE,kBAAC6b,GAAD,KACE,kBAACG,GAAD,eAAkBvvC,EAAU,2BAC5B,kBAAC0vC,GAAD,KACG1vC,EAAU,2BADb,YAIF,kBAACqvC,GAAD,KACE,kBAACG,GAAD,CACEjpC,wBAAyB,CACvBC,OAAQxG,EAAU,gDAGtB,kBAACuvC,GAAD,KACE,kBAAC,GAAD,CACEzB,gBAAgB,EAChBC,UAAW9G,GAAYyH,SACvBV,YAAY,EACZC,cA9CU,SAACz+B,GACrB,GAAIA,IAAUy3B,GAAY0H,UAAuB,OAAXpwC,EAAiB,CACrD,IAAMD,EAAQD,GACZxC,GAAWK,2BACXqC,GAEFmE,EAAQ8P,KAAKlU,EAAQoE,EAAQI,SAASkwB,aA2ClC,kBAACyc,GAAD,CACElpC,wBAAyB,CACvBC,OAAQxG,EAAU,kDAIxB,kBAACsvC,GAAD,KACE,kBAAC,GAAD,CAAiB3K,eAAgBvB,GAAegC,YAElD,kBAACuK,GAAD,CAASx5B,IAAKmU,GAAUY,O,SFlUpB8T,K,cAAAA,E,+BAAAA,Q,KA8BZ,IGlBYiR,GCkGGtP,GArGE,SAACn5B,GAChB,IAAQsoC,EAA0BtoC,EAA1BsoC,cAAezmB,EAAW7hB,EAAX6hB,OACjBrpB,EAAYsF,KAClB,EAA0BuU,KAAlB/P,EAAR,EAAQA,QAASgQ,EAAjB,EAAiBA,KACjB,EAA0C+sB,KAAlC/B,EAAR,EAAQA,UAAWiC,EAAnB,EAAmBA,mBACbmJ,EACJ9/B,GAAiB00B,IAAcA,IAAc9F,GAAY8E,MACrDgB,EACAiC,EACN,GAAIj9B,EACF,OAAO,kBAAC,GAAD,MACF,GAAIgQ,EAAM,CACf,IAAMwZ,EAAWxZ,EAAKpI,KAAOoI,EAAKpI,KAAO,GACnCy+B,EAAqB5wC,GAAW,CAAC+zB,IACjC8c,EAAMpwC,EAAU,cAAe,CAAE,iBAAkBkwC,IACnDG,EAAMrwC,EAAU,cAAe,CAAE,iBAAkBkwC,IACnDI,EAAgBtwC,EAAU,oBAAqB,CACnD,iBAAkBkwC,IAEdK,EAAsBhxC,GAAW,CAAC+wC,IAClCE,EAA6BV,EAC/B,oBACA,aACEW,EAAoBX,EAAgB,WAAa,aACjDY,EAAkBZ,EAAgB,UAAY,WAC9Cr9B,EAAQzS,EAAU,gBAAiB,CACvC0R,KAAMy+B,IAEF/O,EAAQphC,EAAUqpB,EAAS,UAAW,CAC1CvP,KAAMwZ,EACN,iBAAkBA,EAClB,aAAcgd,EACd,wBAAyBC,EACzBH,IAAKA,EACLC,IAAKA,EACL,+BAAgCG,EAChC,sBAAuBC,EACvB,mBAAoBC,IAEhBrP,EAAQrhC,EAAUqpB,EAAS,UAAW,CAC1CvP,KAAMwZ,EACN,iBAAkBA,EAClB,aAAcgd,EACd,wBAAyBC,EACzBH,IAAKA,EACLC,IAAKA,EACL,+BAAgCG,EAChC,sBAAuBC,EACvB,mBAAoBC,IAEhBC,EAAQ3wC,EAAUqpB,EAAS,UAAW,CAC1CvP,KAAMwZ,EACN,iBAAkBA,EAClB,aAAcgd,EACd,wBAAyBC,EACzBH,IAAKA,EACLC,IAAKA,EACL,+BAAgCG,EAChC,sBAAuBC,EACvB,mBAAoBC,IAEhBE,EACO,8BAAXvnB,EACIrpB,EAAUqpB,EAAS,UAAW,CAC5BvP,KAAMwZ,EACN,iBAAkBA,EAClB,aAAcgd,EACd,wBAAyBC,EACzBH,IAAKA,EACLC,IAAKA,EACL,+BAAgCG,EAChC,sBAAuBC,EACvB,mBAAoBC,IAEtB,GAEN,OACE,kBAAC,GAAD,KACE,kBAACpP,EAAA,EAAD,KACE,+BACG7uB,EAAQ,MAAQzS,EAAU,mCAE7B,0BACEuhC,SAAS,WACT1jB,QACEpL,EAAQ,MAAQzS,EAAU,qCAIhC,kBAAC5E,EAAD,KAAeqX,GACf,kBAACnX,EAAD,KAAmB8lC,GACnB,kBAAC9lC,EAAD,KAAmB+lC,GACnB,kBAAC/lC,EAAD,KAAmBq1C,GACnB,kBAACr1C,EAAD,KAAmBs1C,IAIvB,OAAO,MC5GIC,GAJM,SAACrpC,GACpB,OAAO,kBAAC,IAAUA,ICyBdspC,GAAkB,SAACthC,GACvB,OAAO3O,WAAW2O,EAAM1O,QAAQ,IAAM,KAsLzByW,OAAMC,MAvKP,SAAChQ,GACb,IACEupC,EASEvpC,EATFupC,oBACAC,EAQExpC,EARFwpC,sBACAC,EAOEzpC,EAPFypC,aACAC,EAME1pC,EANF0pC,eACAC,EAKE3pC,EALF2pC,cACAC,EAIE5pC,EAJF4pC,gBACAx5B,EAGEpQ,EAHFoQ,YACAqS,EAEEziB,EAFFyiB,gBACA6lB,EACEtoC,EADFsoC,cAGIvE,EAAa3jC,iBAA8B,MAEnCi9B,EAAeh0B,KAArBhH,KACF7J,EAAYsF,KAElB,EAA4C5B,oBAAkB,GAA9D,oBAAO2nC,EAAP,KAAuBC,EAAvB,KAEMY,EAA0B,GAC1BC,EAA4B,GAClC4E,EAAoBrtB,SAAQ,SAACxK,GAC3B,IAAMm4B,EAAiBL,EAAsBj3B,MAAK,SAACu3B,GAAD,OAAQA,EAAG13C,KAAOsf,EAAEtf,MAKhE23C,EAJer4B,EAAE1J,MAAQyhC,GACRI,EACnBA,EAAe7hC,MAAQ0hC,EACvB,GAEAK,EAAa,GACfrF,EAAY15B,KAAZ,2BAAsB0G,GAAtB,IAAyB1J,MAAoB,IAAb+hC,QAGpCP,EAAsBttB,SAAQ,SAACxK,GAC7B,IAAMs4B,EAAeT,EAAoBh3B,MAAK,SAACu3B,GAAD,OAAQA,EAAG13C,KAAOsf,EAAEtf,MAG5D23C,EAFiBr4B,EAAE1J,MAAQ0hC,GACZM,EAAeA,EAAahiC,MAAQyhC,EAAe,GAEpEM,EAAa,GACfpF,EAAc35B,KAAd,2BAAwB0G,GAAxB,IAA2B1J,MAAoB,IAAb+hC,QAItC,IAMIE,EANEC,EAAmB7M,EACrBA,EAAWpzB,OAAOsI,MAAK,SAACC,GAAD,OAAO6C,SAAS7C,EAAEzb,OAAQ,MAAQ4yC,UACzDxwC,EACEgxC,EACJD,GAAoBA,EAAiBhgC,KAAOggC,EAAiBhgC,KAAO,GAGtE,GAAI0/B,IAAoBpS,GAAY8E,MAClC2N,EAAoBzxC,EAAU,0BACzB,GAAIoQ,GAAiBghC,GAC1BK,EAAoBzxC,EAAU,+BAAgC,CAC5Dyd,KAAM2zB,QAEH,CACL,IAAMQ,EAAqB/M,EACvBA,EAAWpzB,OAAOsI,MAChB,SAACC,GAAD,OAAO6C,SAAS7C,EAAEzb,OAAQ,MAAQ6yC,UAEpCzwC,EACJ8wC,EACEG,GAAsBA,EAAmBlgC,KACrCkgC,EAAmBlgC,KACnB,GAGR,IAkEM2c,EAAsBgd,EAC1B,kBAAC,GAAD,CAAYriB,WAAY,kBAAMsiB,GAAkB,KAC7CtrC,EAAU,6CAEX,KAEE+sC,EAAqB,CACzBC,SACIhtC,EADM8vC,EACI,iDACA,yCACd7C,WACIjtC,EADQ8vC,EACE,mDACA,4CAEhB,OACE,oCACE,kBAAC,KAAD,CACE5D,YAAaA,EACbC,cAAeA,EACfW,cAAe,GACfV,YAAa0E,GACb/D,mBAAoBA,EACpBL,WAxFa,SAACrkC,GAClB,IAAMN,EAAOwjC,EAAWrjC,QACxB,GAAIH,EACF,GAAIM,GAAKA,EAAE4jC,MAAO,CAChB,IAqBI4F,EAQAC,EA7BI7F,EAAuB5jC,EAAvB4jC,MAAOU,EAAgBtkC,EAAhBskC,YACT6E,EAAeT,EAAoBh3B,MAAK,SAACb,GAAD,OAAOA,EAAEtf,KAAOqyC,EAAMryC,MAC9Dy3C,EAAiBL,EAAsBj3B,MAC3C,SAACb,GAAD,OAAOA,EAAEtf,KAAOqyC,EAAMryC,MAElBm4C,EAAeP,EAChBA,EAAahiC,MAAQyhC,EAAgB,IACtC,EACEe,EAAiBX,EAClBA,EAAe7hC,MAAQ0hC,EAAkB,IAC1C,EACEe,EACa,IAAjBF,GAAsBA,GAAgB,IAClCA,EAAajxC,QAAQ,GAAK,IAC1B,SACAoxC,EACe,IAAnBF,GAAwBA,GAAkB,IACtCA,EAAelxC,QAAQ,GAAK,IAC5B,SACAqxC,EAAcJ,EAAeC,EAC7BI,EAAgBJ,EAAiBD,EAGrCF,EADEM,EAAc,EACG,GACVA,EAAc,IACJ,UAEA,IAAMA,EAAYrxC,QAAQ,GAAK,IAIlDgxC,EADEM,EAAgB,EACG,GACZA,EAAgB,IACJ,UAEA,IAAMA,EAActxC,QAAQ,GAAK,IAGxDiH,EAAKgmB,UAAYnJ,GAAmB,CAClCnS,MAAOw5B,EAAMx5B,MACb5Y,MAAOe,YAAKqxC,EAAMpyC,MAAO,IACzBirB,KAAM,CACJ,CAAC,GAAI2sB,EAAmBE,GACxB,CACE3xC,EAAU,wBAAyB,CAAEwP,MAAOya,IAC5CioB,EACAD,GAEF,CAAC,aAAcH,EAAoBD,IAErCxsB,YAAa,CAAC,EAAG,GACjBH,cAAe,CAAC,KAElBnd,EAAKtB,MAAMtF,IAAMwrC,EAAYC,EAAI,KACjC7kC,EAAKtB,MAAMsO,KAAO43B,EAAYzsC,EAAI,KAClC6H,EAAKtB,MAAM9E,QAAU,aAErBoG,EAAKtB,MAAM9E,QAAU,QA4BrBiW,YAAaA,EACbi1B,iBAAkB,kBAAMvB,GAAkB,IAC1C+G,OAAQC,KAAOC,OAEjB,kBAAC5tB,GAAD,CAAkBxO,IAAKo1B,IACtBld,MCnJDn1B,GAAOC,IAAOC,IAAV,sFAAGD,CAAH,gOAUC3B,EAAYD,MAKZC,EAAYD,OAMjBo4C,GAAUx2C,IAAOC,IAAV,yFAAGD,CAAH,wEAQPy2C,GAAez2C,IAAOC,IAAV,8FAAGD,CAAH,0HA0WHq5C,GA7UuB,SAAChrC,GACrC,IA4DI+kB,EA3DFgX,EAaE/7B,EAbF+7B,YACAM,EAYEr8B,EAZFq8B,WACAt3B,EAWE/E,EAXF+E,KACAyd,EAUExiB,EAVFwiB,WACAC,EASEziB,EATFyiB,gBACAC,EAQE1iB,EARF0iB,cACAtS,EAOEpQ,EAPFoQ,YACAH,EAMEjQ,EANFiQ,eACAynB,EAKE13B,EALF03B,cACAvP,EAIEnoB,EAJFmoB,aACAmgB,EAGEtoC,EAHFsoC,cACAlgB,EAEEpoB,EAFFooB,eACAzF,EACE3iB,EADF2iB,QAGI1O,EAAc5B,KACdwQ,EAAc5G,KACdoM,EAAaZ,KACbvE,EAA2B/D,GAAwB,CACvD3X,MAAOgb,EACPzd,KtF7IuB,KsF8IvBojB,aAAc9S,SAAS8S,EAAc,MAEjC8iB,EAAgB3C,EAClBplB,EAAyB7gB,KAAKgd,SAC9B6D,EAAyB7gB,KAAK7L,WAC5B00C,EAAsB5C,EACxBplB,EAAyB7gB,KAAKkd,cAC9B2D,EAAyB7gB,KAAKid,aAC5B6rB,EAAuB7C,EAAgBjgB,EAAaxF,EACpDuoB,EAAc9C,EAAgB,qBAAuB,mBACrDxiB,EAAWwiB,EAAgBh2C,EAAkBH,EAC7CqV,EAAQ8gC,EAAgBngB,EAAe3F,EACvC6oB,EAA6B/C,EAC/BlgB,EACA1F,EACE1mB,EAAmBC,KACnBzD,EAAYsF,KACZ5C,EAAUC,cAChB,EAAiC0gC,GAAmB,CAClDE,cACAM,aACAt3B,OACAqrB,YAAakY,EACTlyC,GAAgBuxB,QAChBvxB,GAAgBI,aANd8L,EAAR,EAAQA,QAASC,EAAjB,EAAiBA,MAAOF,EAAxB,EAAwBA,KAQlBygB,EAAU1iB,iBAA8B,MAC9C,EAAoClE,wBAElC/C,GAFF,oBAAO0G,EAAP,KAAmBojB,EAAnB,KAGA7mB,qBAAU,WACR,IAAMmE,EAAOuiB,EAAQpiB,QACrB,GAAIH,EAAM,CACR,MAA0BA,EAAK+iB,wBAAvB3nB,EAAR,EAAQA,MAAOG,EAAf,EAAeA,OACfmnB,EAAc,CAAEtnB,QAAOG,cAExB,CAACgnB,EAAS9mB,IAOX+oB,EAHApC,IAAY7sB,GAAQ+tB,gBACc1qB,IAAlC+pB,EAAyB7gB,KAEZojB,eACVC,OAAO,CACNwlB,EAAoBrsB,kBACpBqsB,EAAoBhsB,qBACpBgsB,EAAoBpsB,oBAErB1lB,MAAM5G,GAETmwB,IAAY7sB,GAAQguB,WACc3qB,IAAlC+pB,EAAyB7gB,KAEZojB,eACVC,OAAO,CACNwlB,EAAoBnsB,cACpBmsB,EAAoBjsB,iBACpBisB,EAAoBlsB,gBAErB5lB,MAAM3G,GAEI,iBAAM,aAGrB,IACI8wB,EASAG,EAVEF,EAAWC,aAAYphB,GAW7B,GAREkhB,EADElhB,IAEOmhB,QAGGrqB,GAKZgyC,EAAqB7oC,UACpBzC,GACAyC,QAAwBnJ,IAAbqqB,EAEZE,EAAS,kBAAC,GAAD,WACJ,QAAcvqB,IAAVoJ,EACTmhB,EACE,kBAACrH,GAAD,KACE,kBAAC7K,GAAD,OAGJlN,QAAQ/B,MAAMA,QACT,QAAmCpJ,IAA/BgyC,EAAqB5oC,MAC9BmhB,EACE,kBAACrH,GAAD,KACE,kBAAC7K,GAAD,OAGJlN,QAAQ/B,MAAMA,QACT,QAAkBpJ,IAAdoqB,EAAyB,CAClC,MAA2DA,EAAnD2Y,EAAR,EAAQA,sBAAuBE,EAA/B,EAA+BA,wBAC3BqN,EAAe,EACfC,EAAiB,EACfH,EAAuC,GAC7CrN,EAAsBhgB,SAAQ,YAA4C,IAAzCigB,EAAwC,EAAxCA,WAAY/Z,EAA4B,EAA5BA,WAAYC,EAAgB,EAAhBA,UACjDlG,EAAWgvB,EAAqB9oC,KAAK85B,GAC3C,GAAIhgB,GAAYA,EAAS3U,MAAQ,KAAOA,EAAQ,GAAI,CAClD,IACInV,EADI6X,EAASiS,EAATjS,KAER,GACGyY,IAAY7sB,GAAQ+tB,WAAalB,IAAY7sB,GAAQguB,OACtDZ,EAAyB7gB,KAapB,CACL,IAAMmiC,EAAaroB,EACf2J,EAASvT,MACP,SAAC8O,GAAD,OAAOA,EAAEjvB,KAAQ+pB,EAAiBivB,GAAazyC,mBAEjDQ,EACJ9G,EAAQmyC,EAAaA,EAAWnyC,MAAQ,gBAlBxC,CACA,IAAMwf,EACW,OAAfsqB,EAAsB8O,EAAc9O,EAAa,SAAMhjC,EACzD,GAAI0Y,EAAQ,CACV,IAAMyU,EACJ3D,IAAY7sB,GAAQ+tB,UAChBhS,EAAO8O,mBACP9O,EAAO+O,eACbvuB,EAAQ0yB,EAAWuB,QAEnBj0B,EAAQ,YAUZ,IAAMi5C,EAAanvB,EAAiBivB,GAC9BlmB,EAAY9C,GAA0B,EACtC+C,EAAY9C,GAAwB,EAC1ConB,EACEhnB,IAAoBxa,GAAgBsd,UAChCkkB,EAAevkB,EACfukB,EAAetkB,EAChBkmB,EAA2B5jC,SAAS6jC,EAAU3yC,aACjD4wC,EAAoBv+B,KAAK,CACvB5Y,GAAI+pC,EACJn0B,MACEya,IAAoBxa,GAAgBsd,UAChCL,EACAC,EACNla,MAAOf,GAAc,GACrBohC,UAAWA,EAAU3yC,WACrBtG,cAKR,IAAMm3C,GAAyC,GAkD/C,GAjDApN,EAAwBlgB,SAAQ,YAA4C,IAAzCigB,EAAwC,EAAxCA,WAAY/Z,EAA4B,EAA5BA,WAAYC,EAAgB,EAAhBA,UACnDlG,EAAWgvB,EAAqB9oC,KAAK85B,GAC3C,GAAIhgB,GAAYA,EAAS3U,MAAQ,KAAOA,EAAQ,GAAI,CAClD,IACInV,EADI6X,EAASiS,EAATjS,KAER,GACGyY,IAAY7sB,GAAQ+tB,WAAalB,IAAY7sB,GAAQguB,OACtDZ,EAAyB7gB,KAapB,CACL,IAAMmiC,EAAaroB,EACf2J,EAASvT,MACP,SAAC8O,GAAD,OAAOA,EAAEjvB,KAAQ+pB,EAAiBivB,GAAazyC,mBAEjDQ,EACJ9G,EAAQmyC,EAAaA,EAAWnyC,MAAQ,gBAlBxC,CACA,IAAMwf,EACW,OAAfsqB,EAAsB8O,EAAc9O,EAAa,SAAMhjC,EACzD,GAAI0Y,EAAQ,CACV,IAAMyU,EACJ3D,IAAY7sB,GAAQ+tB,UAChBhS,EAAO8O,mBACP9O,EAAO+O,eACbvuB,EAAQ0yB,EAAWuB,QAEnBj0B,EAAQ,YAUZ,IAAMi5C,EAAanvB,EAAiBivB,GAC9BlmB,EAAY9C,GAA0B,EACtC+C,EAAY9C,GAAwB,EAC1CqnB,EACEjnB,IAAoBxa,GAAgBsd,UAChCmkB,EAAiBxkB,EACjBwkB,EAAiBvkB,EAClBkmB,EAA2B5jC,SAAS6jC,EAAU3yC,aACjD6wC,GAAsBx+B,KAAK,CACzB5Y,GAAI+pC,EACJn0B,MACEya,IAAoBxa,GAAgBsd,UAChCL,EACAC,EACNla,MAAOf,GAAc,GACrBohC,UAAWA,EAAU3yC,WACrBtG,cAKHk3C,EAAoBtxC,QAAWuxC,GAAsBvxC,OAQnD,CACL,IAAM8tB,GAAiBzjB,EAAU,kBAAC,GAAD,MAAmB,KACpDohB,EACE,kBAAC,GAAD,KACE,kBAAC,GAAD,KACE,kBAAC,GAAD,CACE5iB,IAAKjB,EAAW/D,OAAOnD,WAAakH,EAAWlE,MAAMhD,WACrD4wC,oBAAqBA,EACrBC,sBAAuBA,GACvBC,aAAcA,EACdC,eAAgBA,EAChBC,cAAe5N,EACf6N,gBAAiBvN,EACjBjsB,YAAaA,EACbqS,gBAAiBA,EACjB6lB,cAAeA,KAGlBviB,SAzBLrC,EACE,kBAACrH,GAAD,KACE,kBAAC7K,GAAD,CACE1F,gBAAiB,8CA2BzB4X,EAAS,KAGX,IAOMoI,GACJ7X,GAAeA,EAAY3B,MAAQ2B,EAAY3B,KAAKpI,KAChD+J,EAAY3B,KAAKpI,KACjB,MAEAqhC,GAAW/yC,EAAU,uCAAwC,CACjE0R,KAAM,SACNshC,MAAOzzC,GAAW,CAAC+zB,OAEf2f,GAAYjzC,EAAU,uCAAwC,CAClE0R,KAAMnS,GAAW,CAAC+zB,KAClB0f,MAAO,WAGT,OACE,oCACE,kBAAC,GAAD,CACE/T,qBAAsB,CACpBjJ,cAAe8Z,EAAgBlgB,EAAiB1F,EAChDF,aACA2F,eACAlY,iBACAwe,KAAM6Z,EAAgBpmB,GAAKyF,QAAUzF,GAAKoN,OAE5CS,gBAAiB,CACftN,iBAAiB,EACjB0F,eAAcmgB,QAAuBnvC,EACrCqpB,YAAY8lB,QAAgBnvC,EAC5BwpB,SAAS,EACToJ,iBAAiB,GAEnB2L,cAAeA,IAEjB,kBAAC,GAAD,CAAM/oB,IAAKmU,GACT,kBAAC8kB,GAAD,KACE,kBAACG,GAAD,eACKvvC,EAAU,mCAEf,kBAAC0vC,GAAD,KACG1vC,EAAU,mCADb,YAIF,kBAACqvC,GAAD,KACE,kBAACG,GAAD,CACEjpC,wBAAyB,CAAEC,OAAQusC,IACnCtsC,MAAO,CAAEysC,WAAY,YAEvB,kBAAC3D,GAAD,KACE,kBAAC,GAAD,CACEzB,gBAAgB,EAChBC,UAAW9G,GAAY0H,SACvBX,YAAY,EACZC,cA3DU,SAACz+B,GACrB,GAAIA,IAAUy3B,GAAYyH,SAAU,CAClC,IAAMpwC,EAAQD,GAAiBxC,GAAWI,WAAYsnC,EAAc,IACpE7gC,EAAQ8P,KAAKlU,EAAQoE,EAAQI,SAASkwB,aA2DlC,kBAACyc,GAAD,CACElpC,wBAAyB,CAAEC,OAAQysC,IACnCxsC,MAAO,CAAEysC,WAAY,aAGzB,kBAAC5D,GAAD,KACE,kBAAC,GAAD,CAAiB3K,eAAgBvB,GAAemC,YAElD,kBAAC,GAAD,KAAUra,M,4BJxaN+kB,K,YAAAA,E,eAAAA,Q,KAKZ,I,GKOKjJ,GLsHUzvB,OAAMC,MA7HP,SAAChQ,GACb,IAAQqC,EACNrC,EADMqC,KAAMogB,EACZziB,EADYyiB,gBAAiB3mB,EAC7BkE,EAD6BlE,OAAQwG,EACrCtC,EADqCsC,QAASqpC,EAC9C3rC,EAD8C2rC,YAAaC,EAC3D5rC,EAD2D4rC,cAEvDpzC,EAAYsF,KACZimC,EAAa3jC,iBAA8B,MAE3CyrC,EAAa,SACjBpH,EACAj3B,GAEA,IAAMjN,EAAOwjC,EAAWrjC,QACxB,GAAIH,EAAM,CACR,IAmBI8pC,EAQAC,EA3BEwB,EAAezpC,EAAKtH,QAAO,SAAC2W,GAAD,OAAOA,EAAEhZ,IAAM+rC,EAAM/rC,KAChDsxC,EAAe8B,EAAav5B,MAChC,SAACb,GAAD,OAAOA,EAAEq6B,YAActD,GAAMuD,WAEzBnC,EAAiBiC,EAAav5B,MAClC,SAACb,GAAD,OAAOA,EAAEq6B,YAActD,GAAMwD,aAEzB1B,EAAeP,EAAeA,EAAa5E,EAAI,EAC/CoF,EAAiBX,EAAiBA,EAAezE,EAAI,EACrDqF,EACa,IAAjBF,GAAsBA,GAAgB,IAClCA,EAAajxC,QAAQ,GAAK,IAC1B,SACAoxC,EACe,IAAnBF,GAAwBA,GAAkB,IACtCA,EAAelxC,QAAQ,GAAK,IAC5B,SACAqxC,EAAcJ,EAAeC,EAC7BI,EAAgBJ,EAAiBD,EAGrCF,EADEM,EAAc,EACG,GACVA,EAAc,IACJ,UAEA,IAAMA,EAAYrxC,QAAQ,GAAK,IAIlDgxC,EADEM,EAAgB,EACG,GACZA,EAAgB,IACJ,UAEA,IAAMA,EAActxC,QAAQ,GAAK,IAExDiH,EAAKgmB,UAAYnJ,GAAmB,CAClCnS,MAAOw5B,EAAM/rC,EACbrG,MAAOe,YAAKqxC,EAAM9e,KAAO8e,EAAM9e,KAAO,OAAQ,IAC9CrI,KAAM,CACJ,CAAC,GAAIquB,EAAaC,GAClB,CACEpzC,EAAU,wBAAyB,CAAEwP,MAAOya,IAC5CgoB,EACAC,GAEF,CAAC,aAAcL,EAAkBC,IAEnCzsB,YAAa,CAAC,EAAG,GACjBH,cAAe,CAAC,GAChBM,eAAgBymB,EAAMrlC,QAAN,oHAER5G,EAAU,mCAFF,6BAIZW,IAENoH,EAAKtB,MAAMtF,IAAM6T,EAAO43B,EAAI,KAC5B7kC,EAAKtB,MAAMsO,KAAOC,EAAO9U,EAAI,KAC7B6H,EAAKtB,MAAM9E,QAAU,UAInB+xC,EAAgBvnC,uBAAY,WAChC,IAAMpE,EAAOwjC,EAAWrjC,QACpBH,IACFA,EAAKtB,MAAM9E,QAAU,UAEtB,CAAC4pC,IAEJ3nC,qBAAU,WACR8vC,MACC,CAAC7pC,EAAM6pC,IAEV,IAAMC,EAAuB,GAEvBC,EAAgB/pC,EAAKsD,KAAI,SAAC+L,GAE9B,OADAy6B,EAAWnhC,KAAK0G,EAAE0zB,GACX,2BACF1zB,GADL,IAEExC,YAAa28B,EACb78B,aAAck9B,OAIZG,EAAOvkC,aAAIqkC,GACXG,EAAW7oB,aAAY4oB,GAE7B,OACE,oCACE,kBAAC,KAAD,CACEj6C,GAAI,4BACJm6C,QAASC,KAAQC,gBACjBpqC,KAAM+pC,EACNM,WAAY,CACVn/B,KAAM/U,EAAU,gCAAiC,CAC/CwP,MAAOya,KAGX3mB,OAAQA,EACR6wC,WAAY,CAAEvH,EAAG,SAACzS,GAAD,OAAOt5B,WAAWs5B,EAAEr5B,QAAQ,IAAM,MACnDszC,YAAatqC,OAAUnJ,EAAY,IACnC0zC,WAAY,CAAEC,KAAM,EAAGT,QACvBU,YAAa,CACXC,kBAAmB,IACnBC,UAAWX,GAAsB,GACjCY,UAAW,GAEbC,WAAU,UAAKxB,EAAL,cAAsBC,EAAtB,0BAEZ,kBAACzuB,GAAD,CAAkBxO,IAAKo1B,QM/FvBryC,GAAOC,IAAOC,IAAV,iFAAGD,CAAH,oKASC3B,EAAYD,OAMjB83C,GAAiBl2C,IAAOC,IAAV,2FAAGD,CAAH,qOAkBdm2C,GAAgBn2C,YAAOk2C,IAAV,0FAAGl2C,CAAH,2DAMbo2C,GAAgBp2C,IAAOC,IAAV,0FAAGD,CAAH,mK7FvFM,W6FsGnBy7C,GAAkBz7C,IAAOC,IAAV,4FAAGD,CAAH,4BAKfy2C,GAAez2C,IAAOC,IAAV,yFAAGD,CAAH,2HAWZ07C,GAAiB17C,IAAO27C,GAAV,2FAAG37C,CAAH,mGAOT3B,EAAYD,OAOjBw9C,GAAa57C,IAAO67C,GAAV,uFAAG77C,CAAH,6HAFW,iCAQVgB,GAIX86C,GAAiB97C,IAAO4B,OAAV,2FAAG5B,CAAH,yVAZO,iCAkBVgB,GAsBX+6C,GAAyB/7C,IAAOC,IAAV,mGAAGD,CAAH,6DAMtBg8C,GAAah8C,IAAOC,IAAV,wFAAGD,CAAH,sCAKVi8C,GAAcj8C,IAAOC,IAAV,yFAAGD,CAAH,4CAMXk8C,GAAal8C,IAAOC,IAAV,wFAAGD,CAAH,iEA2VDm8C,GAxUkB,SAAC9tC,GAChC,IACE+7B,EAUE/7B,EAVF+7B,YACAM,EASEr8B,EATFq8B,WACAt3B,EAQE/E,EARF+E,KACA0d,EAOEziB,EAPFyiB,gBACArS,EAMEpQ,EANFoQ,YACAsS,EAKE1iB,EALF0iB,cACAzS,EAIEjQ,EAJFiQ,eACAynB,EAGE13B,EAHF03B,cACA4Q,EAEEtoC,EAFFsoC,cACAlgB,EACEpoB,EADFooB,eAGF,EAAiCyT,GAAmB,CAClDE,cACAM,aACAt3B,OACAqrB,YAAakY,EACTlyC,GAAgBuxB,QAChBvxB,GAAgBI,aANd8L,EAAR,EAAQA,QAASC,EAAjB,EAAiBA,MAAOF,EAAxB,EAAwBA,KAQlBnH,EAAUC,cACV0nB,EAAc5G,KACdoM,EAAaZ,KACb0jB,EAAuB7C,EAAgBjgB,EAAaxF,EACpDuoB,EAAc9C,EAAgB,qBAAuB,mBACrDyF,EAAUzF,EAAgB,YAAc,UACxCxiB,EAAWwiB,EAAgBh2C,EAAkBH,EAC7Ck5C,EAA6B/C,EAC/BlgB,EACA1F,EACE1mB,EAAmBC,KACnB6mB,EAAU1iB,iBAA8B,MAC9C,EAAoClE,wBAElC/C,GAFF,oBAAO0G,EAAP,KAAmBojB,EAAnB,KAGMzqB,EAAYsF,KACJu/B,EAAeh0B,KAArBhH,KAERjG,qBAAU,WACR6T,OAAe9W,KACd,CAACmvC,EAAer4B,IAEnB,IAMIg6B,EANEC,EAAmB7M,EACrBA,EAAWpzB,OAAOsI,MAAK,SAACC,GAAD,OAAO6C,SAAS7C,EAAEzb,OAAQ,MAAQglC,UACzD5iC,EACEgxC,EACJD,GAAoBA,EAAiBhgC,KAAOggC,EAAiBhgC,KAAO,GAGtE,GAAImyB,IAAe7E,GAAY8E,MAC7B2N,EAAoBzxC,EAAU,0BACzB,GAAIoQ,GAAiByzB,GAC1B4N,EAAoBzxC,EAAU,+BAAgC,CAC5Dyd,KAAMomB,QAEH,CACL,IAAM+N,EAAqB/M,EACvBA,EAAWpzB,OAAOsI,MAAK,SAACC,GAAD,OAAO6C,SAAS7C,EAAEzb,OAAQ,MAAQslC,UACzDljC,EACJ8wC,EACEG,GAAsBA,EAAmBlgC,KACrCkgC,EAAmBlgC,KACnB,GAGR9N,qBAAU,WACR,IAAMmE,EAAOuiB,EAAQpiB,QACrB,GAAIH,EAAM,CACR,MAA0BA,EAAK+iB,wBAAvB3nB,EAAR,EAAQA,MAAOG,EAAf,EAAeA,OACfmnB,EAAc,CAAEtnB,QAAOG,cAExB,CAACgnB,EAAS9mB,IAEb,IAKIunB,EASAG,EAdEsqB,EAAoB59B,EACtB+6B,EAAqB9oC,KAAK+N,QAC1BjX,EAEEqqB,EAAWC,aAAYphB,GAW7B,GAREkhB,EADElhB,IAEOmhB,QAGGrqB,GAKZgyC,EAAqB7oC,UACpBzC,GACAyC,QAAwBnJ,IAAbqqB,EAEZE,EAAS,kBAAC,GAAD,WACJ,QAAcvqB,IAAVoJ,EACTmhB,EACE,kBAACrH,GAAD,KACE,kBAAC7K,GAAD,OAGJlN,QAAQ/B,MAAMA,QACT,QAAmCpJ,IAA/BgyC,EAAqB5oC,MAC9BmhB,EACE,kBAACrH,GAAD,KACE,kBAAC7K,GAAD,OAGJlN,QAAQ/B,MAAMA,QACT,QAAkBpJ,IAAdoqB,EAAyB,CAClC,MAA2DA,EAAnD2Y,EAAR,EAAQA,sBAAuBE,EAA/B,EAA+BA,wBACzB6R,EACHD,GAAqBA,EAAkBxmC,QAAU1E,GAAWytB,KAC5D+X,GACC0F,GACAA,EAAkBxmC,MAAQ,KAAOrR,GAAaO,GAC5Cs3C,EAAkBryB,SAClBvL,EACAq5B,EAAevN,EAAsB9a,QACzC,SAACvR,EAAD,GAAmD,IAAzCssB,EAAwC,EAAxCA,WAAY/Z,EAA4B,EAA5BA,WAAYC,EAAgB,EAAhBA,UAC1BlG,EAAWgvB,EAAqB9oC,KAAK85B,GAC3C,GAAIhgB,GAAkC,OAAtBA,EAASR,SAAmB,CAC1C,IAAMuJ,EAAY9C,GAA0B,EACtC+C,EAAY9C,GAAwB,EAK1C,OAAOxS,GAHL4S,IAAoBxa,GAAgBsd,UAChCL,EACAC,GAGN,OAAOtV,IAGX,GAEI65B,EAAiBtN,EAAwBhb,QAC7C,SAACvR,EAAD,GAAmD,IAAzCssB,EAAwC,EAAxCA,WAAY/Z,EAA4B,EAA5BA,WAAYC,EAAgB,EAAhBA,UAC1BlG,EAAW0G,EAAYxgB,KAAK85B,GAClC,GAAIhgB,GAAkC,OAAtBA,EAASR,SAAmB,CAC1C,IAAMuJ,EAAY9C,GAA0B,EACtC+C,EAAY9C,GAAwB,EAK1C,OAAOxS,GAHL4S,IAAoBxa,GAAgBsd,UAChCL,EACAC,GAGN,OAAOtV,IAGX,GAEIq+B,EAAuC,GAC7C,uBAAIhS,GAAJ,aAA8BE,IAAyBlgB,SACrD,WAAwCqB,GAAO,IAA5C4e,EAA2C,EAA3CA,WAAY/Z,EAA+B,EAA/BA,WAAYC,EAAmB,EAAnBA,UACnBlG,EAAWgvB,EAAqB9oC,KAAK85B,GAC3C,GACEhgB,GACAA,EAASjS,MACTiS,EAASR,WAAasyB,IACrB5C,EAA2B5jC,SACzB0U,EAAiBivB,GAAazyC,YAEjC,CACA,IAOIgtB,EAPEomB,EACJxuB,EAAI2e,EAAsBjkC,OAASwwC,GAAMuD,QAAUvD,GAAMwD,UACrD/mB,EAAY9C,GAA0B,EACtC+C,EAAY9C,GAAwB,EACpCmiB,EAAa1e,EAASvT,MAC1B,SAAC8O,GAAD,OAAOA,EAAEjvB,KAAQ+pB,EAAiBivB,GAAazyC,cAI/CgtB,EADE6e,EAEAjnB,EAAI2e,EAAsBjkC,OACtBusC,EAAWnyC,MACXe,YAAKoxC,EAAWnyC,MAAO,SAEtB8G,EAET,IAAM6O,EACJya,IAAoBxa,GAAgBsd,UAChCL,EACAC,EACAtV,EACJ0N,EAAI2e,EAAsBjkC,OAASwxC,EAAeC,EACpDwE,EAAaljC,KAAK,CAChB+gC,YACArzC,EAAGyjB,EAASjS,KAAKlT,QAAQ,SAAU,OACnCouC,EAAIp9B,EAAQ6H,EAAS,IACrB8V,OACAvmB,SACIkpC,GAAiBnsB,EAAS3U,QAAU1E,GAAWytB,KAChD+X,GAAiBnsB,EAAS3U,MAAQ,KAAOrR,GAAaO,GAAK,GACxD,kBAAMuZ,EAAeksB,SACrBhjC,QAKd,IAAMg1C,EAAazU,KACjBwU,EACA,CAAC,YAAa,KACd,CAAC,MAAO,SAEJnoB,EAAiBzjB,EAAU,kBAAC,GAAD,MAAmB,KAEpDohB,EACE,kBAAC,GAAD,CAAczkB,MAAO,CAAEnD,OAAQ+D,EAAW/D,SACxC,kBAAC,GAAD,KACE,kBAAC,GAAD,CACEuG,KAAM8rC,EACN1rB,gBAAiBA,EACjB3mB,OAAQ+D,EAAW/D,OACnBwG,QAASA,EACTqpC,YAAaxB,EACbyB,cAAe3B,KAGlBlkB,QAILrC,EAAS,KAKX,IAFA,IAAM0qB,GAAiB,GACnB1tC,GAAUstC,OACK70C,IAAZuH,IAAuB,CAC5B0tC,GAAepjC,KAAKtK,IACpB,IAAM2tC,GAAkB3tC,GAAQib,SAChCjb,GAAU2tC,GACNlD,EAAqB9oC,KAAKgsC,SAC1Bl1C,EAEN,IAAMm1C,GAAcF,GAAeG,UAAU5oC,KAAI,SAACwW,EAAUoB,GAC1D,IAAMixB,EAAeryB,EAASjS,KAC1BiS,EAASjS,KAAKlT,QAAQ,QAAS,OAC/B,GACJ,OAAIumB,IAAM6wB,GAAen2C,OAAS,EACzB,kBAACs1C,GAAD,CAAYzsC,IAAKqb,EAAS/pB,IAAKo8C,GAGtC,kBAACjB,GAAD,CAAYzsC,IAAKqb,EAAS/pB,IACxB,kBAACq7C,GAAD,CACEruC,QAAS,kBAAM6Q,EAAgBkM,EAAiB4xB,MAEhD,8BAAOS,QAKTC,GAAenG,EACjB9vC,EAAU,sCAAuC,CAC/CmvB,QAAS,cAEXnvB,EAAU,0BACRk2C,GAAqBN,GAAen2C,OACxC,kBAACs1C,GAAD,KACE,kBAACE,GAAD,CAAgBruC,QAAS,kBAAM6Q,OAAe9W,KAC5C,8BAAOs1C,MAIX,kBAAClB,GAAD,KAAakB,IAUf,OACE,oCACE,kBAAC,GAAD,CACEhX,qBAAsB,CACpBjJ,cAAe8Z,EAAgBlgB,EAAiB1F,EAChDF,WAAY,KACZ2F,aAAc,KACdlY,iBACAwe,KAAM6Z,EAAgBpmB,GAAKyF,QAAUzF,GAAKoN,OAE5CS,gBAAiB,CACftN,iBAAiB,EACjBsJ,iBAAiB,EACjBvJ,aAAY8lB,QAAgBnvC,EAC5BgvB,cAAcmgB,QAAwBnvC,GAExCu+B,cAAeA,IAEjB,kBAAC,GAAD,KACE,kBAAC2V,GAAD,KACGqB,GACAJ,IAEH,kBAACZ,GAAD,KACE,kBAACC,GAAD,KACE,kBAACE,GAAD,KAAa1D,GACb,kBAACyD,GAAD,CAAa3uC,MAAO,CAAEwV,gBAAiB,WAEzC,kBAACk5B,GAAD,KACE,kBAACC,GAAD,CAAa3uC,MAAO,CAAEwV,gBAAiBrhB,YAAK,OAAQ,OACpD,kBAACy6C,GAAD,KAAa5D,KAIjB,kBAAC,GAAD,KACE,kBAAC,GAAD,KACE,kBAAC,GAAD,CACE3D,gBAAgB,EAChBC,UAAW9G,GAAY0H,SACvBX,YAAY,EACZC,cA/CU,SAACz+B,GACrB,GAAIA,IAAUy3B,GAAYyH,SAAU,CAClC,IAAMpwC,EAAQD,GAAiBxC,GAAWI,WAAYsnC,EAAc,IACpE7gC,EAAQ8P,KAAKlU,EAAQoE,EAAQI,SAASkwB,cAgDpC,kBAAC,GAAD,KACE,kBAAC,GAAD,CAAiB2R,eAAgBvB,GAAemC,YAElD,kBAACqP,GAAD,CAAiBz+B,IAAKmU,GAAUY,MCxXzBirB,GAzHe,SAAC3uC,GAC7B,IA4CIq8B,EA3CFN,EAOE/7B,EAPF+7B,YACA6S,EAME5uC,EANF4uC,cACAlsB,EAKE1iB,EALF0iB,cACAyF,EAIEnoB,EAJFmoB,aACAmgB,EAGEtoC,EAHFsoC,cACAlgB,EAEEpoB,EAFFooB,eACAzF,EACE3iB,EADF2iB,QAGF,EAA0CgJ,KAAlCD,EAAR,EAAQA,YAAauE,EAArB,EAAqBA,iBACrB,EAAsC/zB,wBAA6B/C,GAAnE,oBAAOiX,EAAP,KAAoBH,EAApB,KACM/U,EAAUC,cACV0zC,EAAuBxzC,YAC3BH,EAAQI,SAASC,SACjBlH,GAAWM,sCAEP+iC,EAAgB,CACpB,CACE5iB,MAAO,YACPsjB,SAAYyW,GAAyBA,EAAqBtY,SAC1Dn3B,QAAS,WACP6Q,OAAe9W,GACf+B,EAAQ8P,KACNnU,GAAiBxC,GAAWK,2BAA4BqnC,GACtD7gC,EAAQI,SAASkwB,UAIzB,CACE1W,MAAO,mBACPsjB,UAAWyW,IAAwBA,EAAqBtY,SACxDn3B,QAAS,WACP6Q,OAAe9W,GACf+B,EAAQ8P,KACNnU,GACExC,GAAWM,qCACXonC,GACE7gC,EAAQI,SAASkwB,WAe7B,OAPE6Q,EADEuS,IAAkBpX,GAAY8E,MACnB9E,GAAY8E,MAChB1zB,GAAiBgmC,GACbA,EAEAv5B,SAASu5B,EAAe,IAIrC,oCACE,kBAAC,IAAD,KACE,kBAAC,GAAD,CACEE,KAAMz6C,GAAWM,qCACjBo6C,OAAQ,kBACN,oCACE,kBAAC,GAAD,CACEzG,cAAenpC,QAAQmpC,GACvBzmB,OAAQ,8BAEV,kBAAC,GAAD,CACEka,YAAa1mB,SAAS0mB,EAAa,IACnCM,WAAYA,EACZt3B,KzFvGW,KyFwGXkL,eAAgBA,EAChBG,YAAaA,EAAciF,SAASjF,EAAa,IAAM,KACvDqS,gBACEwN,GAEIznB,GAENka,cAAeA,EACfgV,cAAeA,EACf4Q,cAAeA,EACflgB,eAAgBA,QAKxB,kBAAC,GAAD,CACE0mB,KAAMz6C,GAAWK,2BACjBq6C,OAAQ,kBACN,oCACE,kBAAC,GAAD,CACEzG,cAAenpC,QAAQmpC,GACvBzmB,OAAQ,sBAEV,kBAAC,GAAD,CACEka,YAAa1mB,SAAS0mB,EAAa,IACnCM,WAAYA,EACZt3B,KzFlIW,KyFmIXkL,eAAgBA,EAChBG,YAAaA,EACboS,WACEkJ,EAAcrW,SAASqW,EAAa,IAAMxjB,GAE5Cua,gBACEwN,GAEIznB,GAENka,cAAeA,EACfgV,cAAeA,EACfvP,aAAcA,EACdmgB,cAAeA,EACflgB,eAAgBA,EAChBzF,QAASA,WC0CVluB,GAvJI,WACjB,IAAMsC,EAASyH,KACfitB,KAEA,IAyDIgP,EAzDJ,EACE9O,KADM0J,EAAR,EAAQA,cAAe3J,EAAvB,EAAuBA,YAAauF,EAApC,EAAoCA,SAAUb,EAA9C,EAA8CA,YAEtCkN,EAAc+B,KAAd/B,UACF3O,EAAYC,KACZvG,EAAawG,KACbmgB,EAAwB9wC,YAC5B3I,GAAOZ,sCAET,EAA0CuH,mBAExC,IAFF,oBAAOwmB,EAAP,KAAsByX,EAAtB,KAGA,EAA4Cj+B,mBAE1C,IAFF,oBAAOksB,EAAP,KAAuBgS,EAAvB,KA6BA,EAAsCl+B,wBAA6B/C,GAAnE,oBAAOiX,EAAP,KAAoBH,EAApB,KACMzX,EAAYsF,KAEZwqC,GACFlY,GAAe75B,KAA2BH,GAAgBuxB,SAC5DyI,IAAgBh6B,GAAgBuxB,QAElC,GAAe,OAAX5wB,EACF,OACE,kBAAC7E,EAAD,KACE,kBAACmqB,GAAD,KACE,kBAAC7K,GAAD,CAAa1F,gBAAiB,mCAalC2uB,EANAxJ,IAAan7B,GAAQ+tB,WAAcmrB,EAE5B/d,IAAan7B,GAAQguB,MAASkrB,EAGnC1G,EAEA,kBAAC,GAAD,CACExd,WAAYzC,EACZ2C,aAAa,EACbxB,eAzCc,SAAClI,GAAD,OACpB8G,EAAe3gB,SAAS6Z,GACpB8Y,EAAkBhS,EAAertB,QAAO,SAAC0gC,GAAD,OAASA,IAAQna,MACzD8Y,EAAkB,GAAD,oBAAKhS,GAAL,CAAqB9G,MAuCpCmI,gBAtCe,SAACnI,GAAD,OACrB8G,EAAenwB,SAAWowB,EAAWpwB,OAAS,GAC7CmwB,EAAe7V,MAAK,SAACkpB,GAAD,OAASA,IAAQna,KAElC8Y,EAAkB,aACb/R,EAAW1iB,KAAI,SAAC0b,GAAD,OAAOA,EAAEjvB,MAAI2I,QAAO,SAAC0gC,GAAD,OAASA,IAAQna,OAFzD8Y,EAAkB,KAoChBnP,iBAAkB7C,EAClB8C,gBAjCc,kBAAMkP,EAAkB,KAkCtCjP,UAAW3yB,EAAU,4BACrBuyB,WAAW,IAKb,kBAAC,GAAD,CACED,WAAY6D,EACZ3D,aAAa,EACbxB,eAnEa,SAACnG,GAAD,OACnBX,EAAcjb,SAAS4b,GACnB8W,EAAiBzX,EAAc3nB,QAAO,SAAC0gC,GAAD,OAASA,IAAQpY,MACvD8W,EAAiB,GAAD,oBAAKzX,GAAL,CAAoBW,MAiElCoG,gBAhEc,SAACpG,GAAD,OACpBX,EAAczqB,SAAW02B,EAAU12B,OAAS,GAC3CyqB,EAAcnQ,MAAK,SAACkpB,GAAD,OAASA,IAAQpY,KAEjC8W,EAAiB,aACZxL,EAAUhpB,KAAI,SAAC0b,GAAD,OAAOA,EAAEjvB,MAAI2I,QAAO,SAAC0gC,GAAD,OAASA,IAAQpY,OAFxD8W,EAAiB,KA8DflP,iBAAkBvI,EAClBwI,gBA3Da,kBAAMiP,EAAiB,KA4DpChP,UAAW3yB,EAAU,2BACrBuyB,WAAW,IAzBR,kBAACyQ,GAAD,MAFA,kBAACD,GAAD,MAiCX,IAAMpT,EAAekN,GAAgC5+B,GAC/C+rB,EAAakJ,EACfrW,SAASqW,EAAa,IACtBxjB,GACEya,EAAUsO,GAAsBt6B,GAEtC,OACE,kBAACzE,EAAD,KACE,kBAACY,EAAD,KACE,kBAAC,IAAD,KACE,kBAAC,GAAD,CACEg8C,KAAMz6C,GAAWK,2BACjBq6C,OAAQ,kBACN,oCACE,kBAAC,GAAD,CACEhT,YAAahlC,EACb63C,cAAetR,EACf5a,cAAeA,EACfyF,aAAcA,EACdmgB,cAAeA,EACflgB,eAAgBA,EAChBzF,QAASA,QAKjB,kBAAC,GAAD,CACEmsB,KAAMz6C,GAAWI,WACjBs6C,OAAQ,kBACN,oCACE,kBAAC,GAAD,CACEzG,cAAenpC,QAAQmpC,GACvBzmB,OAAQ,sBAEV,kBAAC,GAAD,CACEymB,cAAenpC,QAAQmpC,GACvBl4B,YAAaA,EACbH,eAAgBA,EAChByS,cAAeA,EACf0F,eAAgBA,EAChBD,aAAcA,EACd3F,WAAYA,EACZG,QAASA,SAMlB8X,GAEH,kBAAC,GAAD,QCzKA/oC,GAAOC,IAAOC,IAAV,uEAAGD,CAAH,4IAaJs9C,GAAet9C,IAAOu9C,OAAV,+EAAGv9C,CAAH,0nBACDgB,EhGvBa,WgG+CxBw8C,GAAgBx9C,YAAOs9C,IAAV,gFAAGt9C,CAAH,uDAQby9C,GAAaz9C,YAAOs9C,IAAV,6EAAGt9C,CAAH,sDAQV09C,GAAe19C,YAAOs9C,IAAV,+EAAGt9C,CAAH,mIAWZ23B,GAAQ33B,IAAOwB,KAAV,wEAAGxB,CAAH,uIACMgB,GA8GF28C,GAnGI,WAAO,IAAD,EACvB,EAAmCzsC,KAArByG,EAAd,EAAQjH,KAAeC,EAAvB,EAAuBA,QACjBvL,EAASyH,KACTtD,EAAUC,cACVK,EAASmwB,KAEf,GAAIrpB,IAAYgH,EACd,OAAO,kBAAC,GAAD,MAGT,IAAMimC,EAAQjmC,EAAQkmC,SAASD,MACzBE,EAAcj0C,EAAOuJ,OAAP,UAAewqC,EAAMA,EAAMt3C,OAAS,UAApC,aAAe,EAAyBU,aAAc,OAGpE+2C,EAAYpmC,EAAQI,QACvB3O,QAAO,SAAC6L,GAAD,MAAwB,aAAjBA,EAAE+C,cAChBnP,MAAK,SAACP,EAAGC,GAAJ,OAAUD,EAAEiQ,KAAKylC,cAAcz1C,EAAEgQ,SACnC0lC,EAAStmC,EAAQI,QACpB3O,QAAO,SAAC6L,GAAD,MAAwB,UAAjBA,EAAE+C,cAChBnP,MAAK,SAACP,EAAGC,GAAJ,OAAUD,EAAEiQ,KAAKylC,cAAcz1C,EAAEgQ,SACnC2lC,EAASvmC,EAAQI,QACpB3O,QAAO,SAAC6L,GAAD,MAAwB,UAAjBA,EAAE+C,cAChBnP,MAAK,SAACP,EAAGC,GAAJ,OAAUD,EAAEiQ,KAAKylC,cAAcz1C,EAAEgQ,SA2BzC,OACE,kBAAC,GAAD,KACE,kBAAC,GAAD,gBACA,kBAACilC,GAAD,CAAennC,MAAM,KAAKkO,SAAU,cAClC,4BAAQlO,MAAM,MAAd,kBAGF,kBAAC,GAAD,aACA,kBAAConC,GAAD,CAAYpnC,MAAOynC,EAAav5B,SAff,SAACrV,GACpB,IAAMkE,EAAOlE,EAAEgR,OAAO7J,MACK6yB,GAAgBr/B,EAAnCuJ,KAAR,aAA2CvJ,EAA3C,WACMgU,EAAQ8b,KAAYiJ,UAAZ,2BAA2BsG,GAA3B,IAAwC91B,UACtD7J,EAAQ8P,KAAK9P,EAAQI,SAASC,UAAYiU,EAAQ,IAAMA,EAAQ,OAY3D+/B,EAAM5pC,KAAI,SAACy/B,GAAD,OACT,4BAAQtkC,IAAKskC,EAAGp9B,MAAOo9B,EAAEzsC,YACtBysC,OAKP,kBAAC,GAAD,eACA,kBAACiK,GAAD,CAAcrnC,MAAOjR,GAAU,GAAImf,SA1ChB,SAACrV,GACtB,IAAM2F,EAAW3F,EAAEgR,OAAO7J,MAC1B1B,OAAOC,QAAQlS,IAAY6nB,SAAQ,YAAoB,IAAD,oBAAXlU,GAAW,WAC9C5M,EAAQC,YACZH,EAAQI,SAASC,SACjByM,GAEE5M,GAASA,EAAMm7B,SAAWn7B,EAAM0zC,MAClC5zC,EAAQ8P,KACNnU,GACEuE,EAAM0zC,KACNtoC,GACEtL,EAAQI,SAASkwB,aA+BtBkkB,EAAUz3C,OAAS,GAClB,8BAAU6c,MAAM,YACb46B,EAAU/pC,KAAI,SAACiB,GAAD,OACb,4BAAQ9F,IAAK8F,EAAEJ,SAAUwB,MAAOpB,EAAEJ,UAC/BI,EAAEsD,UAKV2lC,EAAO53C,OAAS,GACf,8BAAU6c,MAAM,UACb+6B,EAAOlqC,KAAI,SAACiB,GAAD,OACV,4BAAQ9F,IAAK8F,EAAEJ,SAAUwB,MAAOpB,EAAEJ,UAC/BI,EAAEsD,UAKV0lC,EAAO33C,OAAS,GACf,8BAAU6c,MAAM,sBACb86B,EAAOjqC,KAAI,SAACiB,GAAD,OACV,4BAAQ9F,IAAK8F,EAAEJ,SAAUwB,MAAOpB,EAAEJ,UAC/BI,EAAEsD,aCvKbxY,GAAOC,YAAOI,GAAV,4EAAGJ,CAAH,yUjGKsB,UAkEF,EiGzDPogB,IAmBR+9B,GAXS,WACtB,OACE,kBAAC,GAAD,KACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAOhB,KAAMz6C,GAAWC,SAAUy7C,UAAWT,MAE/C,kBAAC,GAAD,QC7BA59C,GAAOC,IAAOC,IAAV,mEAAGD,CAAH,6IAOC3B,EAAYD,OAKjBigD,GAAwBr+C,IAAOC,IAAV,oFAAGD,CAAH,6DAMrBs+C,GAAet+C,IAAO4B,OAAV,2EAAG5B,CAAH,sMlGhBe,UkGoBhBgB,ElG9BQ,WkGwCnBu9C,GAAU,iIAEVC,GAAW,6ClG1CQ,UkG0CR,yDAOXC,GAAYz+C,YAAOqL,MAAV,wEAAGrL,CAAH,QACXw+C,IAGEE,GAAgB1+C,IAAOC,IAAV,4EAAGD,CAAH,sBACfw+C,IAIEl+B,GAAUtgB,IAAOC,IAAV,sEAAGD,CAAH,gIlG1DY,WkG0EnB2+C,GAAU3+C,YAAOsgB,IAAV,sEAAGtgB,CAAH,oCAKP4+C,GAAU5+C,YAAOsgB,IAAV,sEAAGtgB,CAAH,mCAMP6+C,GAAY7+C,IAAOwB,KAAV,wEAAGxB,CAAH,wJlGrFU,WkGuGnB8+C,GAAU9+C,YAAO6+C,IAAV,sEAAG7+C,CAAH,oCAqFEiM,GAzEI,SAAC,GAKN,IAJZ8yC,EAIW,EAJXA,aACAC,EAGW,EAHXA,WACA5yC,EAEW,EAFXA,eACAa,EACW,EADXA,UAEM1D,EAAUC,cAEhB,GAA4B,IAAxBu1C,EAAaz4C,OAEf,OADAqM,QAAQssC,KAAK,+DACN,KAGT,IAAMC,EAAYH,EAAaI,WAAU,SAACp/B,GAExC,QADcrW,YAAUH,EAAQI,SAASC,SAAUmW,EAAEwG,QAIvD,IAAmB,IAAf24B,EAIF,OAHAvsC,QAAQssC,KACN,gEAEK,KAEP,IAAMG,EAAYL,EAAaG,GAAW/7B,MACpCk8B,EACJH,EAAY,EACV,kBAACT,GAAD,CACEvxC,GAAI6xC,EAAaG,EAAY,GAAG34B,IAAMhd,EAAQI,SAASkwB,OACvDpsB,QAAS,kBAAMR,MAEf,kBAAC2xC,GAAD,CAASxxC,wBAAyB,CAAEC,OAAQkxC,OAG9C,kBAACG,GAAD,KACE,kBAACE,GAAD,CAASxxC,wBAAyB,CAAEC,OAAQkxC,OAG5Ce,EACJJ,EAAYH,EAAaz4C,OAAS,EAChC,kBAACm4C,GAAD,CACEvxC,GAAI6xC,EAAaG,EAAY,GAAG34B,IAAMhd,EAAQI,SAASkwB,OACvDpsB,QAAS,kBAAMR,MAEf,kBAAC0xC,GAAD,CAASvxC,wBAAyB,CAAEC,OAAQkxC,OAG9C,kBAACG,GAAD,KACE,kBAACC,GAAD,CAASvxC,wBAAyB,CAAEC,OAAQkxC,OAI5CgB,EAAcnzC,EAClB,kBAAC0yC,GAAD,CAAS1xC,wBAAyB,CAAEC,OAAQkxC,MAE5C,kBAACM,GAAD,CAAWzxC,wBAAyB,CAAEC,OAAQkxC,MAGhD,OACE,kBAAC,GAAD,KACGc,EACD,kBAAChB,GAAD,KACE,kBAACC,GAAD,CAAc7wC,QAASuxC,GACpBI,EACAG,IAGJD,IClKHrxC,GAAYjO,YAAOK,GAAV,wEAAGL,CAAH,sGAFkB,6BnGhBD,UmG2BrB3B,EAAYD,MAXU,8BAoB3BohD,GACK,IADLA,GAEI,IAGJz/C,GAAOC,IAAOC,IAAV,mEAAGD,CAAH,wiBACCw/C,GA8BAnhD,EAAYH,OACVshD,GAOFnhD,EAAYD,MnGhFS,WmGuG1BqhD,GAAgBz/C,IAAOC,IAAV,4EAAGD,CAAH,gLAHO,gDAMf3B,EAAYH,OALE,+CAUdG,EAAYD,OAWjBshD,GAAkB,4CAElBC,GAAU3/C,YAAOqL,MAAV,sEAAGrL,CAAH,0zBAEIgB,EnGhIQ,UAUQ,UmG2J3B0+C,GAIKrhD,EAAYH,OAIZG,EAAYD,MnG3KS,WmGgM1BwhD,GAAW5/C,IAAOC,IAAV,uEAAGD,CAAH,mTAEGgB,EnG7LW,UmG2MjB3C,EAAYD,OAMjByhD,GAAiB7/C,IAAO4B,OAAV,6EAAG5B,CAAH,uOAKHgB,EnG7NQ,UmGwOd3C,EAAYD,OAKjB0hD,GAAgB9/C,IAAOC,IAAV,4EAAGD,CAAH,2OAeR3B,EAAYH,OAIZG,EAAYD,OAKjB2hD,GAAgB//C,YAAOqL,MAAV,4EAAGrL,CAAH,6fnGrQM,UmGsRNgB,EnGtRM,UmG+RnB0+C,GnG/RmB,WmG0SnBM,GAAehgD,IAAOC,IAAV,2EAAGD,CAAH,+OnG1SO,UmGoTRgB,GAKXi/C,GAAcjgD,IAAOwB,KAAV,0EAAGxB,CAAH,+GASXib,GAAUjb,IAAOC,IAAV,uEAAGD,CAAH,oXnGnTiB,qBmGuhBfkgD,GA7KQ,SAAC,GAIH,IAHnBnB,EAGkB,EAHlBA,aACAoB,EAEkB,EAFlBA,UACAC,EACkB,EADlBA,aAEM72C,EAAUC,cACVK,EAASmwB,KACP3vB,EAAqBzD,qBAAWy5C,IAAhCh2C,iBAER,EAAgCE,mBAAsB,IAAtD,oBAAO+1C,EAAP,KAAiBC,EAAjB,KACA,EAA4Ch2C,oBAAkB,GAA9D,oBAAO6B,EAAP,KAAuBC,EAAvB,KACA,EAAgD9B,oBAAkB,GAAlE,oBAAOi2C,EAAP,KAAyBC,EAAzB,KAEMtvB,EAAU1iB,iBAA8B,MAExCiyC,EAAWjyC,iBAAgC,MAC3CkyC,EAAWlyC,iBAAgC,MAC3CmyC,EAAWnyC,iBAAgC,MAC3CoyC,EAAWpyC,iBAAgC,MAC3CqyC,EAAWryC,iBAAgC,MAEjDhE,qBAAU,WACR,GAAI01C,EACFI,EACExB,EAAa/qC,KAAI,SAAC+sC,GAAD,mBAAC,eAAYA,GAAb,IAAgB/4C,IAAK,EAAG4T,KAAM,EAAGolC,YAAa,YAE5D,CACL,IAAMC,EAAW,CAACP,EAAUC,EAAUC,EAAUC,EAAUC,GAKpDI,GAHJryC,SAASsyC,gBAAgBC,WAAavyC,SAASwyC,KAAKD,YAEpDjwB,GAAWA,EAAQpiB,QAAUoiB,EAAQpiB,QAAQuyC,UAAY,GAErDC,EAA4B,GAClCN,EAAS12B,SAAQ,SAACvN,EAAK4O,GACrB,KAAIA,GAAKmzB,EAAaz4C,QAAtB,CACA,IAAMsI,EAAOoO,EAAIjO,QACjB,GAAIH,EAAM,CACR,MAAsBA,EAAK+iB,wBAAnB3pB,EAAR,EAAQA,IAAK4T,EAAb,EAAaA,KACb2lC,EAAaloC,KAAb,2BACK0lC,EAAanzB,IADlB,IAEE5jB,IAAKA,EAAMk5C,EACXtlC,OACAolC,YAAah5C,UAInBu4C,EAAY,GAAD,OAAKgB,OAEjB,CACDpwB,EACAuvB,EACAC,EACAC,EACAC,EACAC,EACA/B,EACA10C,EACA81C,EACA/zC,IAGF,IAAMo1C,EAAiC,GAEjCC,EAAQnB,EAAStsC,KAAI,SAAC+L,EAAG6L,GAC7B,IACM/d,EADQnE,YAAUH,EAAQI,SAASC,SAAUm1C,EAAanzB,GAAGrF,KACzCm5B,QAAkBl4C,EACtCk6C,EAAO3hC,EAAE2hC,KAAO,kBAAC9B,GAAD,aAA4B,KAC9Cr5B,EAAMxG,EAAEwG,IACZ,GAAIxG,EAAE4hC,aAAc,CAClB,IAAMC,EAAiB,GACvB,IAAK,IAAMzyC,KAAOtF,EACXkW,EAAE4hC,aAAa7rC,SAAS3G,KAC3ByyC,EAAUzyC,GAAOtF,EAAOsF,IAG5B,IAAM0O,EAAQ8b,KAAYiJ,UAAUgf,GACpCr7B,EAAM1I,EAAQ0I,EAAM,IAAM1I,EAAQ0I,OAElCA,GAAYhd,EAAQI,SAASkwB,QAE3B9Z,EAAEmjB,aAAgB92B,GAAmB+zC,GACvCqB,EAASnoC,KACP,kBAAC,GAAD,CAAS/L,MAAO,CAAEtF,IAAK+X,EAAEihC,YAAaplC,KAAMmE,EAAEnE,OAC3CmE,EAAEmjB,cAIT,IAAM2e,EAAWz1C,IAAmB+zC,EAAYR,GAAUI,GAC1D,OACE,kBAAC8B,EAAD,CACE30C,GAAIqZ,EACJpX,IAAK4Q,EAAEoD,MAAQpD,EAAEwG,IACjBjZ,MAAO,CAAEtF,IAAK+X,EAAE/X,IAAK4T,KAAMmE,EAAEnE,MAC7B/N,UAAWA,EACXJ,QAAS,kBAAOq0C,EAAaz1C,GAAkB,GAAS,OAEvD0T,EAAEoD,MACFu+B,MAKDI,EACJz3C,EAAiBL,OAAS/L,EAAuBG,OACjDiM,EAAiBF,QAAUlM,EAAwBG,MACjD,kBAAC,GAAD,CACE2gD,aAAcA,EACd3yC,eAAgBA,EAChB4yC,WAAY,kBAAM3yC,GAAkB,SAAC0C,GAAD,OAAcA,MAClD9B,UAAW,kBAAMZ,GAAkB,MAEnC,KAEA01C,EAAiBvB,EACrB,kBAACX,GAAD,CAAgBpyC,QAAS,kBAAM2yC,GAAa,KACzC,IADH,aAGE,KAEE4B,EACJ51C,IAAmB+zC,EACjB,kBAAC,GAAD,CACEnjC,IAAKmU,EACL7jB,MAAO,CACL9E,QAAS4D,EAAiB,aAAU5E,GAEtCqG,UAteyB,8BAwexBk0C,EACD,kBAACtC,GAAD,KAAgBgC,GAChB,yBAAKQ,MAAM,6BAA6BC,QAAQ,iBAC9C,8BAAUzhD,GAvZM,iDAwZd,0BAAMsf,EAAE,yFAEV,8BAAUtf,GAzZK,gDA0Zb,0BAAMsf,EAAE,0FAEV,0BACEA,EAAE,uFACFxS,UAAU,8BAEZ,4BAAQyP,IAAK0jC,EAAUyB,GAAG,OAAOC,GAAG,OAAOntC,EA/JtC,OAgKL,4BAAQ+H,IAAK2jC,EAAUwB,GAAG,OAAOC,GAAG,OAAOntC,EAhKtC,OAiKL,4BAAQ+H,IAAK4jC,EAAUuB,GAAG,OAAOC,GAAG,QAAQntC,EAjKvC,OAkKJ8pC,EAAaz4C,OAAS,GAAK,4BAAQ0W,IAAK6jC,EAAUsB,GAAG,OAAOC,GAAG,QAAQntC,EAlKnE,OAmKJ8pC,EAAaz4C,OAAS,GAAK,4BAAQ0W,IAAK8jC,EAAUqB,GAAG,OAAOC,GAAG,MAAMntC,EAnKjE,SAuKT,kBAAC6qC,GAAD,KACE,kBAACE,GAAD,CAAcvyC,QAAS,kBAAM2yC,GAAa,KAA1C,SAEE,kBAACH,GAAD,KAAc,MAEfwB,GAIP,OACE,oCACE,kBAAC,GAAD,CACExkC,aAAc,kBAAMwjC,GAAoB,IACxCpjC,aAAc,kBAAMojC,GAAoB,KAEvCqB,EACAE,GAEFR,IC9hBDzhD,GAAOC,YAAOw4B,GAAV,sEAAGx4B,CAAH,0BA2BKqiD,GAnBG,SAACh0C,GACjB,IAAQC,EAA2BD,EAA3BC,SAAUywC,EAAiB1wC,EAAjB0wC,aAClB,EAAkCx0C,oBAAkB,GAApD,oBAAO41C,EAAP,KAAkBC,EAAlB,KACA,OACE,kBAAC,GAAD,KACE,kBAAC,GAAD,MACA,kBAAC,GAAD,MACA,kBAAC,GAAD,CACErB,aAAcA,EACdoB,UAAWA,EACXC,aAAcA,IAEhB,kBAAC9/C,EAAD,CAAkB6O,IAAK,uBAAyBgxC,GAC7C7xC,KRVH4oB,GAASl3B,IAAO4B,OAAV,iPAIKb,E5FHa,Y,S4FezB8sC,K,YAAAA,E,eAAAA,Q,KAKL,I,kBAsGeyU,GAtGF,WACX,IAAMz7C,EAAYsF,KACZo2C,EAAwB,SAAClsC,GAAD,OAC5BxP,EAAUwP,GAAOhR,QAAQ,OAAQ,OAC7BkE,EAAUC,cACVC,EAAQC,YACZH,EAAQI,SAASC,SACjBlH,GAAWC,UAEP6/C,EAAgB94C,YACpBH,EAAQI,SAASC,SACjBlH,GAAWE,cAEPwC,EAASyH,KACT41C,EAAa3wB,aAAY1sB,GAE/B,EACEmF,oBAAkB,GADpB,oBAAO0qC,EAAP,KAA4BC,EAA5B,KAOAzqC,qBAAU,WACR,IAAMi4C,EAAY/+B,aAAaC,QA9BjC,sDAgCIxe,GACAq9C,GACAr9C,IAAWq9C,KACX,OAACD,QAAD,IAACA,OAAD,EAACA,EAAe5d,UAChB8d,IAAc7U,GAAcmH,MAE5BE,GAAuB,KAExB,CAACsN,EAAep9C,EAAQq9C,IAE3Bh4C,qBAAU,WACJwqC,IAAmB,OAAIuN,QAAJ,IAAIA,OAAJ,EAAIA,EAAe5d,WACxCsQ,GAAuB,GACvBvxB,aAAaM,QA7CjB,qDA6CyD4pB,GAAcmH,SAEpE,CAACwN,EAAevN,IAEnBxqC,qBAAU,WAEJhB,GAASA,EAAMm7B,SAAWn7B,EAAMI,OAAN,QAC5BN,EAAQlE,QACNH,GAAiBxC,GAAWE,aAAc6G,EAAMI,OAAN,WAG7C,CAACN,EAASE,IAEb,IAAMs1C,EACO,OAAX35C,EACI,CACE,CACE+d,MAAOo/B,EACL,wCAEFh8B,IAAKrhB,GAAiBxC,GAAWE,aAAcwC,GAC/Cu8C,aAAc,GACdze,YAAa+R,EACX,oCACGpuC,EAAU,kCACX,6BACA,kBAAC,GAAD,CAAQ4G,QA/CS,WAC7BynC,GAAuB,GACvBvxB,aAAaM,QA1Bf,qDA0BuD4pB,GAAcmH,QA8CpDnuC,EAAU,gDAGbW,GAEN,CACE2b,MAAOo/B,EACL,wCAEFh8B,IAAKrhB,GAAiBxC,GAAWG,wBAAyBuC,GAC1Du8C,aAAc,IAEhB,CACEx+B,MAAOo/B,EACL,wCAEFh8B,IAAKrhB,GAAiBxC,GAAWI,WAAYsC,GAC7Cu8C,aAAc,KAGlB,GAEN,OACE,kBAAC,GAAD,CAAW5C,aAAcA,GACvB,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAO5B,KAAMz6C,GAAWE,aAAcw7C,UAAWuE,KACjD,kBAAC,IAAD,CACExF,KAAMz6C,GAAWG,wBACjBu7C,UAAW9V,KAEb,kBAAC,IAAD,CAAO6U,KAAMz6C,GAAWI,WAAYs7C,UAAWwE,Q,0CS/HjD7iD,GAAOC,IAAOC,IAAV,mEAAGD,CAAH,gDAMJiO,GAAYjO,IAAOC,IAAV,wEAAGD,CAAH,sDAOTmO,GAAUnO,IAAOC,IAAV,sEAAGD,CAAH,0PAFW,KAkBlB6iD,GAAc7iD,IAAOC,IAAV,0EAAGD,CAAH,4DAMX8iD,GAAgB9iD,IAAO+iB,IAAV,4EAAG/iB,CAAH,6CAMbg+B,GAAWh+B,IAAO+iD,GAAV,uEAAG/iD,CAAH,gHASRgjD,GAAmBhjD,IAAOoC,EAAV,+EAAGpC,CAAH,uEAOhBijD,GAAiBjjD,YAAO6iD,IAAV,6EAAG7iD,CAAH,iDAKdkjD,GAAsBljD,YAAO6iD,IAAV,kFAAG7iD,CAAH,8JAnDD,KAiElBmjD,GAAsBnjD,YAAO6iD,IAAV,kFAAG7iD,CAAH,8JAjED,KA+ElBojD,GAAsBpjD,YAAOijD,IAAV,mFAAGjjD,CAAH,+GA/ED,KA0FlBqjD,GAAoBrjD,YAAOijD,IAAV,iFAAGjjD,CAAH,iKA1FC,KAuGlBsjD,GAAkBtjD,IAAO5B,MAAV,+EAAG4B,CAAH,6GAIJe,GASXwiD,GAAavjD,IAAOsI,EAAV,0EAAGtI,CAAH,gKAcVwjD,GAAaxjD,IAAO+iB,IAAV,0EAAG/iB,CAAH,mCAKVyjD,GAAaviD,YAAH,qPAeVwiD,GAAqB1jD,YAAOqL,MAAV,kFAAGrL,CAAH,QACpByjD,IAEEE,GAAqB3jD,IAAOsI,EAAV,kFAAGtI,CAAH,QACpByjD,IAGEG,GAAmB5jD,IAAOC,IAAV,gFAAGD,CAAH,oNAoJP6jD,GAjIQ,WACrB,OACE,kBAAC,GAAD,KACE,kBAAC,GAAD,KACE,kBAAC,GAAD,KACE,kBAACT,GAAD,KACE,kBAAC,KAAD,CAAMl2C,GAAItJ,GAAOC,SACf,kBAACi/C,GAAD,CACE3+B,IAAK2/B,KACLC,IAAK,qBAGT,kBAAC,GAAD,qCACA,kBAACf,GAAD,gBACWxyC,mIAAYwzC,+BAGzB,kBAACd,GAAD,KACE,kBAACQ,GAAD,CAAoBx2C,GAAItJ,GAAOC,SAA/B,mBAGA,kBAAC6/C,GAAD,CAAoBx2C,GAAItJ,GAAON,WAA/B,SACA,kBAACogD,GAAD,CAAoBx2C,GAAItJ,GAAOE,aAA/B,WAGA,kBAAC4/C,GAAD,CAAoBx2C,GAAItJ,GAAOG,SAA/B,QAEF,kBAACo/C,GAAD,KACE,kBAACQ,GAAD,CACE1jC,KAAK,sCACLC,OAAO,SACPC,IAAI,uBAHN,uBAOA,kBAACwjC,GAAD,CACE1jC,KAAK,oDACLC,OAAO,SACPC,IAAI,uBAHN,eAOA,kBAACwjC,GAAD,CACE1jC,KAAK,2BACLC,OAAO,SACPC,IAAI,uBAHN,iBAQF,kBAACkjC,GAAD,KACE,kBAACC,GAAD,gCAC2B,IACzB,uBACErjC,KAAK,sCACLC,OAAO,SACPC,IAAI,uBAHN,cAMK,IARP,SASS,IACP,uBACEF,KAAK,qCACLC,OAAO,SACPC,IAAI,uBAHN,cAMK,IAhBP,0BAmBA,kBAACojC,GAAD,CACEtjC,KAAK,oDACLC,OAAO,SACPC,IAAI,uBAEJ,kBAACqjC,GAAD,CACEr/B,IAAK8/B,KACLF,IAAI,WAPR,qBAcN,kBAACH,GAAD,KACE,8CACiB,IACf,uBACE3jC,KAAK,qDACLC,OAAO,SACPC,IAAI,uBAHN,4EAFF,KAYA,yBAAK7S,MAAO,CAAE42C,UAAW,WAAzB,WACW,IACT,uBACEjkC,KAAK,wDACLC,OAAO,SACPC,IAAI,uBAHN,cAOC,OACD,uBACEF,KAAK,qCACLC,OAAO,SACPC,IAAI,uBAHN,sBAOC,MAjBH,YAkBY,IACV,uBACEF,KAAK,2BACLC,OAAO,SACPC,IAAI,uBAHN,eCvSGgkC,GAAS,oCAEhBpkD,GAAOC,YAAOw4B,GAAV,8EAAGx4B,CAAH,oBAIJokD,GAAkBpkD,YAAOM,GAAV,yFAAGN,CAAH,0lBtGlBI,UACK,UAQE,UADC,UAPH,UsGsEnB3B,EAAYD,OAKjBimD,GAAcrkD,YAAOM,GAAV,qFAAGN,CAAH,sEAwBFskD,GAZW,SAACj2C,GACzB,IAAQC,EAA0BD,EAA1BC,SACFH,EAD4BE,EAAhBk2C,YACYF,GAAcD,GAC5C,OACE,kBAAC,GAAD,CAAM3jD,GAAI0jD,IACR,kBAAC,GAAD,MACA,kBAACh2C,EAAD,KAAUG,GACV,kBAACk2C,GAAD,QCxFAC,GAAkBzkD,IAAOC,IAAV,2EAAGD,CAAH,kEAOf0kD,GAAW1kD,YAAOqL,MAAV,oEAAGrL,CAAH,mWvGCgB,UADE,UAPJ,WuG0HbmO,GA7EC,SAACE,GACf,IAAQs2C,EAAat2C,EAAbs2C,SACAt/C,EAAYmE,cAAZnE,QACR,EAAsCkF,oBAAkB,GAAxD,oBAAOq6C,EAAP,KAAoBC,EAApB,KAEAp6C,qBAAU,WACR,IAAMmE,EAAOC,SAASC,cAAc,IAAMq1C,IACpCW,EAAWn6C,MAAS,WACxB,GAAIiE,EAAM,CACR,IAAMm2C,EAAiB,aAAIJ,GAAU/H,UAAUh8B,MAAK,YAAc,IAC1DokC,EADyD,EAAVhoC,IACjCjO,QACpB,SAAIi2C,GAAWA,EAAQ1D,UAAY1yC,EAAKwyC,UAAY,QAMlD2D,GACF1/C,EAAQ0/C,EAAe5/C,UAG1B,IAIH,OAHIyJ,GACFA,EAAKhE,iBAAiB,SAAUk6C,GAE3B,WACDl2C,GACFA,EAAK/D,oBAAoB,SAAUi6C,MAGtC,CAACH,EAAUt/C,IAEdoF,qBAAU,WACR,GAAIm6C,EAAa,CACf,IAAMG,EAAiBJ,EAASxF,WAAU,qBAAG1Y,UAC7C,IAAwB,IAApBse,GAAyBJ,EAASI,GAAiB,CACrD,IAAMn2C,EAAO+1C,EAASI,GAAgB/nC,IAAIjO,QACpCk2C,EAAOp2C,SAASC,cAAc,IAAMq1C,IACnB,IAAnBY,GAAwBE,EAC1BA,EAAKC,SAAS,CAAEl9C,IAAK,EAAGm9C,SAAU,WACzBv2C,GACTA,EAAKw2C,eAAe,CAAED,SAAU,WAGpCN,GAAe,MAEhB,CAACF,EAAUC,IAEd,IAAMS,EAAsC,GACtCC,EAA6C,GAkBnD,OAjBAX,EAASp6B,SAAQ,YAA+C,IAA5CplB,EAA2C,EAA3CA,MAAOge,EAAoC,EAApCA,MAAOsjB,EAA6B,EAA7BA,OAAQzpB,EAAqB,EAArBA,IAAKkO,EAAgB,EAAhBA,UAC7Cm6B,EAAShsC,KACP,kBAACqrC,GAAD,CACEx3C,GAAI/H,EACJgK,IAAK,eAAiBhK,EACtB0I,UAAW44B,EAAS,cAAWj/B,EAC/BiG,QAAS,kBAAMo3C,GAAe,KAE7B1hC,IAGLmiC,EAAgBjsC,KACd,yBAAKlK,IAAK,iBAAmBhK,EAAO6X,IAAKA,GACvC,kBAACkO,EAAD,WAKJ,oCACE,6BAAMo6B,GACN,6BACE,kBAACb,GAAD,KAAkBY,MChHX9hD,GAZK,WAClB,IAAMsD,EAAYsF,KAClB,OACE,oCACE,4BAAKtF,EAAU,wBACf,yBACEuG,wBAAyB,CAAEC,OAAQxG,EAAU,2BCJ/CsH,GAAUnO,IAAOC,IAAV,yEAAGD,CAAH,kCzGDY,WyGmBVwD,GAZG,WAChB,IAAMqD,EAAYsF,KAClB,OACE,oCACE,4BAAKtF,EAAU,qBACf,kBAAC,GAAD,CACEuG,wBAAyB,CAAEC,OAAQxG,EAAU,wBCAtCpD,GAda,WAC1B,IAAMoD,EAAYsF,KAClB,OACE,oCACE,4BAAKtF,EAAU,iCACf,yBACEuG,wBAAyB,CACvBC,OAAQxG,EAAU,oCCKbnD,GAZO,WACpB,IAAMmD,EAAYsF,KAClB,OACE,oCACE,4BAAKtF,EAAU,yBACf,yBACEuG,wBAAyB,CAAEC,OAAQxG,EAAU,4BCQtClD,GAdQ,WACrB,IAAMkD,EAAYsF,KAClB,OACE,oCACE,4BAAKtF,EAAU,2BACf,yBACEuG,wBAAyB,CAAEC,OAAQxG,EAAU,4BAG/C,yBAAKyG,MAAO,CAAEnD,OAAQ,YC0Dbo7C,GAxDD,WACZ,IAAM1+C,EAAYsF,KACZw4C,EAAsB,CAC1B,CACExhC,MAAOtc,EAAU,uBACjB1B,MAAO9B,GAAYE,YACnBkjC,OAAQj5B,QAAQjB,YAAclJ,GAAYE,cAC1C2nB,UAAW3nB,GACXyZ,IAAKvO,iBAA8B,OAErC,CACE0U,MAAOtc,EAAU,oBACjB1B,MAAO9B,GAAYG,UACnBijC,OAAQj5B,QAAQjB,YAAclJ,GAAYG,YAC1C0nB,UAAW1nB,GACXwZ,IAAKvO,iBAA8B,OAErC,CACE0U,MAAOtc,EAAU,gCACjB1B,MAAO9B,GAAYI,oBACnBgjC,OAAQj5B,QAAQjB,YAAclJ,GAAYI,sBAC1CynB,UAAWznB,GACXuZ,IAAKvO,iBAA8B,OAErC,CACE0U,MAAOtc,EAAU,wBACjB1B,MAAO9B,GAAYK,cACnB+iC,OAAQj5B,QAAQjB,YAAclJ,GAAYK,gBAC1CwnB,UAAWxnB,GACXsZ,IAAKvO,iBAA8B,OAErC,CACE0U,MAAOtc,EAAU,0BACjB1B,MAAO9B,GAAYM,eACnB8iC,OAAQj5B,QAAQjB,YAAclJ,GAAYM,iBAC1CunB,UAAWvnB,GACXqZ,IAAKvO,iBAA8B,QAIvC,OACE,oCACE,kBAAC05B,EAAA,EAAD,KACE,+BACG,WAAathC,EAAU,mCAE1B,0BACEuhC,SAAS,WACT1jB,QAAS,WAAa7d,EAAU,qCAGpC,kBAAC,GAAD,CAAS89C,SAAUA,MCnCVa,GA1BC,WACd,IAAM3+C,EAAYsF,KAClB,OACE,6BACE,kBAACg8B,EAAA,EAAD,KACE,+BACGthC,EAAU,sBACT,MACAA,EAAU,mCAEd,0BACEuhC,SAAS,WACT1jB,QACE7d,EAAU,sBACV,MACAA,EAAU,qCAIhB,4BAAKA,EAAU,qBACf,uBAAGuG,wBAAyB,CAAEC,OAAQxG,EAAU,wBAChD,uBAAGuG,wBAAyB,CAAEC,OAAQxG,EAAU,0BCpBhD4+C,GAAYzlD,IAAO0lD,GAAV,0WAFY,QAkBrBC,GAAY3lD,YAAOylD,GAAPzlD,CAAH,gGAMT4lD,GAAa5lD,IAAO+uC,GAAV,iPAeV8W,GAAY7lD,IAAOoC,EAAV,6EAvCY,QA4CrB0J,GAAO9L,IAAOC,IAAV,kDAmDK6lD,GAzCM,SAACz3C,GACpB,IAAQ03C,EAAiC13C,EAAjC03C,KAAMC,EAA2B33C,EAA3B23C,WAAYC,EAAe53C,EAAf43C,WAE1B,EAAwC17C,mBAAiB,GAAzD,oBAAO27C,EAAP,KAAqBC,EAArB,KACA,EAA4C57C,mBAA0B,QAAtE,oBAAO67C,EAAP,KAAuBC,EAAvB,KACA,EAAwB97C,mBAAoB,KAA5C,oBAAO+7C,EAAP,KAAaC,EAAb,KACMC,EAAgB/3C,iBAA2B,MAEjDsN,2BAAgB,WACd,IAAMnN,EAAO43C,EAAcz3C,QACd,OAATH,IACFu3C,EAAgBv3C,EAAK63C,cACrBJ,EAAkB,MAEnB,CAACG,IAEJ,IAUME,GAAsB,IAAfT,EAAsBN,GAAYF,GAE/C,OACE,oCACE,kBAACiB,EAAD,CAAMj5C,QAde,WACA,IAAnB24C,GACFC,EAAkBH,GAClBK,EAAQ,OAERF,EAAkB,GAClBE,EAAQ,QASLR,EACD,kBAAC,GAAD,KAAOO,IAET,kBAACV,GAAD,CAAY5oC,IAAKwpC,EAAel5C,MAAO,CAAEnD,OAAQi8C,IAC/C,kBAACP,GAAD,CAAWz4C,wBAAyB,CAAEC,OAAQ24C,QCRvCW,GA1EH,WACV,IAAM9/C,EAAYsF,KA6CZy6C,EA3CoB,CACxB,CACEC,SAAUhgD,EAAU,iBACpBigD,OAAQjgD,EAAU,kBAEpB,CACEggD,SAAUhgD,EAAU,iBACpBigD,OAAQjgD,EAAU,kBAEpB,CACEggD,SAAUhgD,EAAU,iBACpBigD,OAAQjgD,EAAU,kBAEpB,CACEggD,SAAUhgD,EAAU,iBACpBigD,OAAQjgD,EAAU,kBAEpB,CACEggD,SAAUhgD,EAAU,iBACpBigD,OAAQjgD,EAAU,kBAEpB,CACEggD,SAAUhgD,EAAU,iBACpBigD,OAAQjgD,EAAU,kBAEpB,CACEggD,SAAUhgD,EAAU,iBACpBigD,OAAQjgD,EAAU,kBAEpB,CACEggD,SAAUhgD,EAAU,iBACpBigD,OAAQjgD,EAAU,kBAEpB,CACEggD,SAAUhgD,EAAU,iBACpBigD,OAAQjgD,EAAU,kBAEpB,CACEggD,SAAUhgD,EAAU,kBACpBigD,OAAQjgD,EAAU,oBAIAmN,KAAI,WAAuB+yC,GAAvB,IAAGF,EAAH,EAAGA,SAAUC,EAAb,EAAaA,OAAb,OACxB,kBAAC,GAAD,CAAM33C,IAAK43C,EAAOhB,KAAMc,EAAUb,WAAYc,OAGhD,OACE,6BACE,kBAAC3e,EAAA,EAAD,KACE,+BACGthC,EAAU,kBACT,MACAA,EAAU,mCAEd,0BACEuhC,SAAS,WACT1jB,QACE7d,EAAU,kBACV,MACAA,EAAU,qCAIhB,4BAAKA,EAAU,cACd+/C,EACD,yBAAKt5C,MAAO,CAAEi6B,aAAc,YC3DnB+a,GAZF,WACX,OACE,kBAAC,GAAD,KACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAOnF,KAAMv5C,GAAON,UAAW86C,UAAWmH,KAC1C,kBAAC,IAAD,CAAOpI,KAAMv5C,GAAOE,YAAas6C,UAAWoH,KAC5C,kBAAC,IAAD,CAAOrI,KAAMv5C,GAAOG,QAASq6C,UAAWuI,Q,OCyBjCK,OA1Bf,WACE,IAAM38C,EAAmBC,KAEnB28C,EADY96C,IACOtF,CAAU,2BACnC,OACE,oCACE,kBAACshC,EAAA,EAAD,KACE,+BAAQ8e,GACR,0BAAM7e,SAAS,WAAW1jB,QAASuiC,KAErC,kBAAC,EAAD,MACA,kBAAC,GAAW7wC,SAAZ,CAAqBC,MAAO,CAAEhM,qBAC5B,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAO68C,OAAK,EAAC/J,KAAMv5C,GAAOC,QAASu6C,UAAWv6C,KAC9C,kBAAC,IAAD,CAAOs5C,KAAMv5C,GAAOjB,SAAUy7C,UAAWkE,KACzC,kBAAC,IAAD,CAAOnF,KAAMv5C,GAAON,UAAW86C,UAAW+I,KAC1C,kBAAC,IAAD,CAAOhK,KAAMv5C,GAAOE,YAAas6C,UAAW+I,KAC5C,kBAAC,IAAD,CAAOhK,KAAMv5C,GAAOG,QAASq6C,UAAW+I,KACxC,kBAAC,IAAD,CAAO/I,UAAWv6C,MAEpB,kBAAC,GAAD,SCrBFujD,GAAc55C,QACW,cAA7BvD,OAAON,SAAS09C,UAEe,UAA7Bp9C,OAAON,SAAS09C,UAEhBp9C,OAAON,SAAS09C,SAAS59C,MACvB,2DA2CN,SAAS69C,GAAgBC,EAAeC,GACtCv/B,UAAUw/B,cACPC,SAASH,GACT/zC,MAAK,SAACm0C,GACLA,EAAaC,cAAgB,WAC3B,IAAMC,EAAmBF,EAAaG,WACd,MAApBD,IAGJA,EAAiBE,cAAgB,WACA,cAA3BF,EAAiBh9B,QACf5C,UAAUw/B,cAAcO,YAI1Br1C,QAAQs1C,IACN,iHAKET,GAAUA,EAAOU,UACnBV,EAAOU,SAASP,KAMlBh1C,QAAQs1C,IAAI,sCAGRT,GAAUA,EAAOW,WACnBX,EAAOW,UAAUR,WAO5BhyC,OAAM,SAAC/E,GACN+B,QAAQ/B,MAAM,4CAA6CA,MC1FjEmM,IAASqgC,OACP,kBAAC,GAAD,KACE,kBAAC,GAAWhnC,SAAZ,CAAqBC,MAAO+xC,IAC1B,kBAAC,KAAD,KACE,kBAAC,GAAD,SAINv5C,SAASw5C,eAAe,SDQnB,SAAkBb,GACvB,GAA6C,kBAAmBv/B,UAAW,CAGzE,GADkB,IAAIqgC,IAAI93C,mBAAwBvG,OAAON,SAASsW,MACpDsoC,SAAWt+C,OAAON,SAAS4+C,OAIvC,OAGFt+C,OAAOW,iBAAiB,QAAQ,WAC9B,IAAM28C,EAAK,UAAM/2C,mBAAN,sBAEP42C,KAgEV,SAAiCG,EAAeC,GAE9C11C,MAAMy1C,EAAO,CACXiB,QAAS,CAAE,iBAAkB,YAE5Bh1C,MAAK,SAAC4F,GAEL,IAAMqvC,EAAcrvC,EAASovC,QAAQ3lC,IAAI,gBAEnB,MAApBzJ,EAASlH,QACO,MAAfu2C,IAA8D,IAAvCA,EAAYC,QAAQ,cAG5CzgC,UAAUw/B,cAAckB,MAAMn1C,MAAK,SAACm0C,GAClCA,EAAaiB,aAAap1C,MAAK,WAC7BvJ,OAAON,SAASk/C,eAKpBvB,GAAgBC,EAAOC,MAG1B7xC,OAAM,WACLhD,QAAQs1C,IACN,oEAvFAa,CAAwBvB,EAAOC,GAI/Bv/B,UAAUw/B,cAAckB,MAAMn1C,MAAK,WACjCb,QAAQs1C,IACN,iHAMJX,GAAgBC,EAAOC,OC9B/BC,I,mBCzBA3pD,EAAOC,QAAU,IAA0B,mD","file":"static/js/main.6f0d328c.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/cities-logo.15ef040b.svg\";","module.exports = __webpack_public_path__ + \"static/media/treemap.21370ddc.png\";","module.exports = __webpack_public_path__ + \"static/media/industry_space.fe933ea1.png\";","module.exports = __webpack_public_path__ + \"static/media/swot.5175caea.png\";","module.exports = __webpack_public_path__ + \"static/media/population.510f7828.svg\";","module.exports = __webpack_public_path__ + \"static/media/ranking.b15df652.svg\";","module.exports = __webpack_public_path__ + \"static/media/gdppercapita.b6ad9a64.svg\";","module.exports = __webpack_public_path__ + \"static/media/datareliability.37b910ab.svg\";","module.exports = __webpack_public_path__ + \"static/media/topindustries.52bc3ab8.svg\";","module.exports = __webpack_public_path__ + \"static/media/topknowledgecluster.85228d9d.svg\";","module.exports = __webpack_public_path__ + \"static/media/topsimilarcities.1e1a8756.svg\";","module.exports = __webpack_public_path__ + \"static/media/cities-logo-dark.f92ed258.svg\";","module.exports = __webpack_public_path__ + \"static/media/github.35accb26.svg\";","import { CompositionType } from \"../types/graphQL/graphQLTypes\";\n\n// param must be specified in each route in order to enforce typechecking\nexport const cityIdParam = \"cityId\";\n\nexport const CityRoutes = {\n  CityBase: \"/city/:cityId\",\n  CityOverview: \"/city/:cityId/overview\",\n  CityEconomicComposition: \"/city/:cityId/economic-composition\",\n  CityGoodAt: \"/city/:cityId/good-at\",\n  CityGoodAtAbsolutePresence: \"/city/:cityId/good-at/absolute\",\n  CityGoodAtAbsolutePresenceComparison:\n    \"/city/:cityId/good-at/absolute/comparison\",\n  CityIndustrySpacePosition: \"/city/:cityId/industry-position\",\n  CityGrowthOpportunities: \"/city/:cityId/growth-opportunities\",\n  CityGrowthOpportunitiesTable: \"/city/:cityId/growth-opportunities/table\",\n  CitySimilarCities: \"/city/:cityId/similar-cities\",\n} as const;\n\nexport const AboutRoutes = {\n  AboutBase: \"/about\",\n  AboutWhatIs: \"/about/what-is-metroverse\",\n  AboutTeam: \"/about/team\",\n  AboutPilotUserGroup: \"/about/pilot-user-group\",\n  AboutResearch: \"/about/research\",\n  AboutGrowthLab: \"/about/growth-lab\",\n};\n\nexport const ContactRoutes = {\n  ContactBase: \"/contact\",\n};\n\nexport const FaqRoutes = {\n  FaqBase: \"/faq\",\n};\n\nexport const Routes = {\n  Landing: \"/\",\n  ...CityRoutes,\n  ...AboutRoutes,\n  ...ContactRoutes,\n  ...FaqRoutes,\n} as const;\n\nexport enum ClusterMode {\n  outline = \"outline\",\n  overlay = \"overlay\",\n  none = \"none\",\n}\n\nexport const defaultClusterMode: ClusterMode = ClusterMode.outline;\n\nexport enum NodeSizing {\n  uniform = \"uniform\",\n  rca = \"rca\",\n  globalCompanies = \"global_companies\",\n  globalEmployees = \"global_employees\",\n  cityCompanies = \"city_companies\",\n  cityEmployees = \"city_employees\",\n}\n\nexport const defaultNodeSizing: NodeSizing = NodeSizing.cityEmployees;\n\nexport enum ColorBy {\n  sector = \"sector\",\n  education = \"education\",\n  wage = \"wage\",\n}\n\nexport enum CityNodeSizing {\n  uniform = \"uniform\",\n  population = \"population\",\n  gdpPpp = \"gdpPpp\",\n}\n\nexport const defaultCityNodeSizing: CityNodeSizing = CityNodeSizing.population;\n\nexport enum CityColorBy {\n  proximity = \"proximity\",\n}\n\nexport enum ClusterLevel {\n  C1 = \"1\",\n  C2 = \"2\",\n  C3 = \"3\",\n}\n\nexport enum AggregationMode {\n  cluster = \"clusters\",\n  industries = \"industries\",\n}\n\nexport const defaultAggregationMode: AggregationMode =\n  AggregationMode.industries;\n\nexport const defaultClusterLevel: ClusterLevel = ClusterLevel.C3;\nexport const defaultColorBy: ColorBy = ColorBy.sector;\n\nexport interface GlobalQueryParams {\n  year: string | undefined;\n  country: string | undefined;\n  benchmark: string | undefined;\n  digit_level: string | undefined;\n  composition_type: CompositionType | undefined;\n  aggregation: AggregationMode | undefined;\n  cluster_overlay: ClusterMode | undefined;\n  node_sizing: NodeSizing | undefined;\n  color_by: ColorBy | undefined;\n  city_node_sizing: CityNodeSizing | undefined;\n  city_color_by: CityColorBy | undefined;\n  cluster_level: ClusterLevel | undefined;\n  rca_threshold: string | undefined;\n}\n","import styled from \"styled-components/macro\";\n\nexport const breakPointValues = {\n  width: {\n    medium: 1100,\n    mediumSmall: 900,\n    small: 800,\n  },\n  height: {\n    medium: 768,\n    mediumSmall: 550,\n    small: 500,\n  },\n};\n\nexport const breakPoints = {\n  medium: `screen and (max-width: ${breakPointValues.width.medium}px),\n           screen and (max-height: ${breakPointValues.height.medium}px)`,\n  mediumSmall: `screen and (max-width: ${breakPointValues.width.mediumSmall}px),\n           screen and (max-height: ${breakPointValues.height.mediumSmall}px)`,\n  small: `screen and (max-width: ${breakPointValues.width.small}px),\n          screen and (max-height: ${breakPointValues.height.small}px)`,\n};\n\nconst lines = {\n  rows: {\n    // Horizontal Grid Lines\n    pageTop: \"citiesAtlasGlobalGridPageTop\",\n    preHeaderTop: \"citiesAtlasGlobalGridPreHeaderTop\",\n    preHeaderBottom: \"citiesAtlasGlobalGridPreHeaderBottom\",\n    headerTop: \"citiesAtlasGlobalGridHeaderTop\",\n    headerBottom: \"citiesAtlasGlobalGridHeaderBottom\",\n    secondaryHeaderTop: \"citiesAtlasGlobalGridSecondaryHeaderTop\",\n    secondaryHeaderBottom: \"citiesAtlasGlobalGridSecondaryHeaderBottom\",\n    preContentTop: \"citiesAtlasGlobalGridPreContentTop\",\n    preContentBottom: \"citiesAtlasGlobalGridPreContentBottom\",\n    contentTop: \"citiesAtlasGlobalGridContentTop\",\n    contentBottom: \"citiesAtlasGlobalGridContentBottom\",\n    postContentTop: \"citiesAtlasGlobalGridPostContentTop\",\n    postContentBottom: \"citiesAtlasGlobalGridPostContentBottom\",\n    footerTop: \"citiesAtlasGlobalGridFooterTop\",\n    footerBottom: \"citiesAtlasGlobalGridFooterBottom\",\n    postFooterTop: \"citiesAtlasGlobalGridPostFooterTop\",\n    postFooterBottom: \"citiesAtlasGlobalGridPostFooterBottom\",\n    pageBottom: \"citiesAtlasGlobalGridPageBottom\",\n  },\n  columns: {\n    pageLeft: \"citiesAtlasGlobalGridPageLeft\",\n    navLeft: \"citiesAtlasGlobalGridNavLeft\",\n    navRight: \"citiesAtlasGlobalGridNavRight\",\n    contentLeft: \"citiesAtlasGlobalGridContentLeft\",\n    contentRight: \"citiesAtlasGlobalGridContentRight\",\n    pageRight: \"citiesAtlasGlobalGridPageRight\",\n  },\n};\n\nexport const Root = styled.div`\n  height: 100vh;\n  width: 100%;\n  overflow: hidden;\n  margin: 0;\n  padding: 0;\n  position: relative;\n  z-index: 10;\n  display: grid;\n  grid-template-rows:\n    [ ${lines.rows.pageTop} ${lines.rows.preHeaderTop}] auto\n    [ ${lines.rows.preHeaderBottom} ${lines.rows.headerTop}] auto\n    [ ${lines.rows.headerBottom} ${lines.rows.secondaryHeaderTop}] auto\n    [ ${lines.rows.secondaryHeaderBottom} ${lines.rows.preContentTop}] auto\n    [ ${lines.rows.preContentBottom} ${lines.rows.contentTop}] 1fr\n    [ ${lines.rows.contentBottom} ${lines.rows.postContentTop}] auto\n    [ ${lines.rows.postContentBottom} ${lines.rows.footerTop}] auto\n    [ ${lines.rows.footerBottom} ${lines.rows.postFooterTop}] auto\n    [ ${lines.rows.postFooterBottom} ${lines.rows.pageBottom}];\n\n  grid-template-columns:\n    [ ${lines.columns.pageLeft} ${lines.columns.navLeft}] auto\n    [ ${lines.columns.navRight} ${lines.columns.contentLeft}] 1fr\n    [ ${lines.columns.contentRight} ${lines.columns.pageRight}];\n\n  @media ${breakPoints.small} {\n    height: auto;\n    min-height: 100vh;\n    max-width: 100%;\n  }\n`;\n\n// Informational pages are the same as normal Root but without responsive adjustments\nexport const InformationalPageRoot = styled.div`\n  height: 100vh;\n  width: 100%;\n  overflow: hidden;\n  margin: 0;\n  padding: 0;\n  position: relative;\n  z-index: 10;\n  display: grid;\n  grid-template-rows:\n    [ ${lines.rows.pageTop} ${lines.rows.preHeaderTop}] auto\n    [ ${lines.rows.preHeaderBottom} ${lines.rows.headerTop}] auto\n    [ ${lines.rows.headerBottom} ${lines.rows.secondaryHeaderTop}] auto\n    [ ${lines.rows.secondaryHeaderBottom} ${lines.rows.preContentTop}] auto\n    [ ${lines.rows.preContentBottom} ${lines.rows.contentTop}] 1fr\n    [ ${lines.rows.contentBottom} ${lines.rows.postContentTop}] auto\n    [ ${lines.rows.postContentBottom} ${lines.rows.footerTop}] auto\n    [ ${lines.rows.footerBottom} ${lines.rows.postFooterTop}] auto\n    [ ${lines.rows.postFooterBottom} ${lines.rows.pageBottom}];\n\n  grid-template-columns:\n    [ ${lines.columns.pageLeft} ${lines.columns.navLeft}] auto\n    [ ${lines.columns.navRight} ${lines.columns.contentLeft}] 1fr\n    [ ${lines.columns.contentRight} ${lines.columns.pageRight}];\n`;\n\nexport const PrimaryHeaderContainer = styled.div`\n  grid-row: ${lines.rows.headerTop} / ${lines.rows.headerBottom};\n  grid-column: ${lines.columns.pageLeft} / ${lines.columns.pageRight};\n`;\nexport const SecondaryHeaderContainer = styled.div`\n  grid-row: ${lines.rows.secondaryHeaderTop} /\n    ${lines.rows.secondaryHeaderBottom};\n  grid-column: ${lines.columns.pageLeft} / ${lines.columns.pageRight};\n`;\nexport const NavigationContainer = styled.div`\n  grid-row: ${lines.rows.contentTop} / ${lines.rows.contentBottom};\n  grid-column: ${lines.columns.navLeft} / ${lines.columns.navRight};\n  display: flex;\n\n  @media ${breakPoints.small} {\n    grid-row: ${lines.rows.preContentTop} / ${lines.rows.preContentBottom};\n    grid-column: ${lines.columns.pageLeft} / ${lines.columns.pageRight};\n    display: block;\n  }\n`;\nexport const ContentContainer = styled.div`\n  grid-row: ${lines.rows.contentTop} / ${lines.rows.contentBottom};\n  grid-column: ${lines.columns.contentLeft} / ${lines.columns.contentRight};\n  background-color: #fff;\n`;\n\nexport const DefaultContentWrapper = styled.div`\n  pointer-events: all;\n  display: contents;\n`;\n\nexport const PageArrowsContainer = styled.div`\n  grid-row: ${lines.rows.postContentTop} / ${lines.rows.postContentBottom};\n  grid-column: ${lines.columns.pageLeft} / ${lines.columns.pageRight};\n`;\n","import styled, { keyframes, css } from \"styled-components/macro\";\nimport { breakPoints, breakPointValues } from \"./GlobalGrid\";\nimport { rgba } from \"polished\";\n\nexport const baseColor = \"#333333\"; // dark gray/black color for text\nexport const lightBaseColor = \"#7c7c7c\"; // light gray color for subtitles and contextual information\nexport const lightBorderColor = \"#dcdcdc\"; // really light gray color for subtle borders between elements\nexport const mapLabelColor = \"#04151b\"; // dark blue/black\n\nexport const hoverBackgroundColor = \"#f3f3f3\"; // really light gray color for use as a hover background color on cards\n\nexport const primaryColor = \"#f89570\"; // orange\nexport const primaryHoverColor = \"#ef8963\"; // slightly dark orange\nexport const primaryColorDark = \"#f56b39\"; // dark orange\nexport const primaryColorLight = \"#fdd4c7\"; // light orange\nexport const secondaryColor = \"#3b848d\"; // blue/teal\nexport const tertiaryColor = \"#cfbc3c\"; // yellow\n\nexport const backgroundMedium = \"#e6e7e8\"; // dark blue gray\nexport const backgroundDark = \"#2e353f\"; // dark blue gray\nexport const medGray = \"#4d565e\";\n\nexport const benchmarkColor = \" #32a58f\"; // greenish blue\n\nexport const linkColor = \"#6accc2\";\n\nexport const errorColor = \"#f43a16\"; // reddish color\n\nexport const primaryColorRange = [\n  primaryColor,\n  \"#f9a180\",\n  \"#faad90\",\n  \"#fbc5b1\",\n  \"#fcd1c1\",\n];\n\n// SOC Major Group color map (keyed by 2-digit SOC code)\nexport const sectorColorMap = [\n  { id: \"11\", color: \"#A973BE\" },  // Management\n  { id: \"13\", color: \"#F1866C\" },  // Business and Financial Operations\n  { id: \"15\", color: \"#488098\" },  // Computer and Mathematical\n  { id: \"17\", color: \"#6A6AAD\" },  // Architecture and Engineering\n  { id: \"19\", color: \"#77C898\" },  // Life, Physical, Social Science\n  { id: \"21\", color: \"#93CFD0\" },  // Community and Social Service\n  { id: \"23\", color: \"#D35162\" },  // Legal\n  { id: \"25\", color: \"#FFC135\" },  // Educational Instruction\n  { id: \"27\", color: \"#F28188\" },  // Arts, Design, Entertainment\n  { id: \"29\", color: \"#5B9BD5\" },  // Healthcare Practitioners\n  { id: \"31\", color: \"#70AD47\" },  // Healthcare Support\n  { id: \"33\", color: \"#BF8F00\" },  // Protective Service\n  { id: \"35\", color: \"#ED7D31\" },  // Food Preparation\n  { id: \"37\", color: \"#8DB4E2\" },  // Building and Grounds\n  { id: \"39\", color: \"#C5B0D5\" },  // Personal Care\n  { id: \"41\", color: \"#FF6B6B\" },  // Sales\n  { id: \"43\", color: \"#4ECDC4\" },  // Office and Administrative\n  { id: \"45\", color: \"#556B2F\" },  // Farming, Fishing, Forestry\n  { id: \"47\", color: \"#DAA520\" },  // Construction\n  { id: \"49\", color: \"#708090\" },  // Installation, Maintenance\n  { id: \"51\", color: \"#CD853F\" },  // Production\n  { id: \"53\", color: \"#9370DB\" },  // Transportation\n];\n\nexport const clusterColorMap = [\n  { id: \"1\", color: \"#999932\" }, // Basic Materials\n  { id: \"2\", color: \"#485999\" }, // Manufacturing\n  { id: \"3\", color: \"#37AF98\" }, // Food\n  { id: \"4\", color: \"#65CEE0\" }, // Durables\n  { id: \"5\", color: \"#873261\" }, // Logistics\n  { id: \"6\", color: \"#B76274\" }, // Services\n  { id: \"7\", color: \"#DDCC77\" }, // Finance\n];\n\nexport const intensityColorRange = [\"#c2e5fc\", \"#003e59\"];\n\nexport const educationColorRange = [\"#5aad60\", \"#eaebcc\", \"#986faa\"];\n\nexport const wageColorRange = [\"#4a7ab7\", \"#eaebcc\", \"#dc3d2d\"];\n\nexport const primaryFont = \"'Source Sans Pro', sans-serif\";\nexport const secondaryFont = \"'OfficeCodeProWeb', monospace\";\n\nexport const semiBoldFontBoldWeight = 600;\nexport const boldFontWeight = 700;\n\nexport const defaultPadding = 2; // in rems\n\nexport const noOutlineOnFocus = css`\n  &:focus:not(:focus-visible) {\n    outline: none;\n  }\n`;\n\nexport const ContentGrid = styled.div`\n  padding: 0 0.75rem 0.25rem;\n  box-sizing: border-box;\n  display: grid;\n  width: 100%;\n  min-height: 100%;\n  grid-template-rows: auto 1fr auto;\n  grid-template-columns: 1fr 21rem;\n  grid-column-gap: 2rem;\n\n  @media screen and (max-width: 1350px) {\n    grid-template-columns: 1fr 17.5rem;\n    grid-column-gap: 1rem;\n  }\n\n  @media screen and (max-width: ${breakPointValues.width.medium}px) {\n    grid-template-columns: 1fr 14.5rem;\n    grid-column-gap: 1rem;\n  }\n\n  @media screen and (max-width: ${breakPointValues.width.mediumSmall}px) {\n    grid-template-columns: 1fr 11rem;\n  }\n\n  @media ${breakPoints.small} {\n    grid-template-rows: auto auto 80vh auto;\n    grid-template-columns: 1fr;\n  }\n`;\n\nexport const ContentScrollGrid = styled.div`\n  box-sizing: border-box;\n  display: grid;\n  width: 100%;\n  min-height: 100%;\n  grid-template-columns: 21rem 1fr;\n  grid-column-gap: 2rem;\n\n  @media screen and (max-width: 1350px) {\n    grid-template-columns: 17.5rem 1fr;\n    grid-column-gap: 1rem;\n  }\n\n  @media ${breakPoints.small} {\n    grid-template-rows: auto auto;\n    grid-template-columns: 1fr;\n  }\n`;\n\nconst fadeIn = keyframes`\n  from {\n    opacity: 0;\n  }\n\n  to {\n    opacity: 1;\n  }\n`;\n\nexport const fadeInAnimation = css`\n  opacity: 0;\n  animation: ${fadeIn} 0.2s linear 1 forwards;\n`;\n\nexport const BasicLabel = styled.div`\n  text-transform: uppercase;\n  font-weight: 600;\n  font-size: 0.75rem;\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n`;\n\nexport const BasicLabelBackground = styled.span`\n  background-color: rgba(255, 255, 255, 0.7);\n  padding: 0.075rem 0.175rem;\n`;\n\nexport const SearchContainerDark = styled.div`\n  pointer-events: all;\n  width: 100%;\n  margin: 0 auto;\n\n  @media (min-width: 990px) {\n    width: 95%;\n  }\n\n  font-family: ${secondaryFont};\n\n  .react-panel-search-search-bar-input,\n  button {\n    font-family: ${secondaryFont};\n  }\n\n  .react-panel-search-search-bar-input {\n    text-transform: uppercase;\n    font-size: 0.85rem;\n    background-color: ${rgba(backgroundDark, 0.85)};\n    color: #fff;\n    border: solid 1px #fff;\n    padding-top: 1rem;\n    padding-bottom: 1rem;\n    padding-right: 3rem;\n    box-shadow: none;\n    outline: none;\n\n    &::placeholder {\n      color: #fff;\n    }\n\n    &:focus::placeholder {\n      color: rgba(0, 0, 0, 0);\n    }\n  }\n\n  .react-panel-search-search-bar-dropdown-arrow {\n    background-color: transparent;\n  }\n  .react-panel-search-current-tier-breadcrumb-outer,\n  .react-panel-search-next-button,\n  .react-panel-search-search-bar-dropdown-arrow {\n    svg polyline {\n      stroke: #fff;\n    }\n  }\n\n  .react-panel-search-search-bar-clear-button {\n    background-color: transparent;\n    color: #fff;\n  }\n\n  .react-panel-search-search-bar-search-icon {\n    svg path {\n      fill: #fff;\n    }\n  }\n\n  .react-panel-search-search-results {\n    background-color: ${rgba(backgroundDark, 0.85)};\n    border: solid 1px #fff;\n\n    ::-webkit-scrollbar-thumb {\n      background-color: rgba(255, 255, 255, 0.3);\n    }\n    ::-webkit-scrollbar-track {\n      background-color: rgba(255, 255, 255, 0.1);\n    }\n  }\n\n  .react-panel-search-current-tier-title,\n  .react-panel-search-current-tier-breadcrumb-outer {\n    color: #fff;\n    border-color: ${primaryColor};\n  }\n\n  .react-panel-search-current-tier-breadcrumb-outer:hover {\n    background-color: rgba(255, 255, 255, 0.35);\n  }\n\n  .react-panel-search-list-item {\n    background-color: transparent;\n    color: #fff;\n    &:hover {\n      background-color: rgba(255, 255, 255, 0.35);\n    }\n  }\n\n  .react-panel-search-highlighted-item {\n    background-color: rgba(255, 255, 255, 0.35);\n  }\n\n  .react-panel-search-search-results:hover {\n    .react-panel-search-highlighted-item:not(:hover) {\n      background-color: transparent;\n    }\n  }\n\n  .react-panel-search-list-item-container {\n    strong {\n      color: ${primaryColorDark};\n    }\n  }\n\n  .react-panel-search-list-no-results {\n    color: #fff;\n  }\n`;\n\nexport const SearchContainerLight = styled.div`\n  width: 100%;\n  font-family: ${secondaryFont};\n  letter-spacing: -0.3px;\n\n  .react-panel-search-search-bar-input,\n  button {\n    font-family: ${secondaryFont};\n    letter-spacing: -0.3px;\n  }\n\n  .react-panel-search-search-bar-input {\n    text-transform: uppercase;\n    font-weight: 400;\n    font-size: 0.85rem;\n    border: solid 1px ${lightBaseColor};\n    box-shadow: none;\n    outline: none;\n\n    &:focus::placeholder {\n      color: ${backgroundMedium};\n    }\n  }\n\n  .react-panel-search-current-tier-breadcrumb-outer,\n  .react-panel-search-next-button,\n  .react-panel-search-search-bar-dropdown-arrow {\n    svg polyline {\n      stroke: ${lightBaseColor};\n    }\n  }\n  .react-panel-search-search-bar-dropdown-arrow {\n    width: 1rem;\n  }\n\n  .react-panel-search-search-bar-search-icon {\n    svg path {\n      fill: ${lightBaseColor};\n    }\n  }\n\n  .react-panel-search-search-results {\n    border-left: solid 1px ${lightBaseColor};\n    border-right: solid 1px ${lightBaseColor};\n    border-bottom: solid 1px ${lightBaseColor};\n  }\n\n  .react-panel-search-list-item-container {\n    strong {\n      color: ${primaryColorDark};\n    }\n  }\n\n  .react-panel-search-current-tier-title,\n  .react-panel-search-current-tier-breadcrumb-outer {\n    border-color: ${primaryColor};\n  }\n`;\n\nexport const BlockButton = styled.button`\n  padding: 0.4rem;\n  font-size: 1rem;\n  cursor: pointer;\n  text-align: center;\n  margin-bottom: 0.75rem;\n  border: solid 1px ${backgroundDark};\n  color: ${backgroundDark};\n  background-color: #fff;\n  border-radius: 0;\n  transition: all 0.1s ease-in-out;\n\n  &:hover {\n    color: #fff;\n    background-color: ${backgroundDark};\n  }\n\n  @media ${breakPoints.medium} {\n    font-size: 0.75rem;\n  }\n`;\n\nexport const BlockButtonHighlighted = styled(BlockButton)`\n  background-color: ${backgroundDark};\n  color: #fff;\n\n  &:hover {\n    background-color: ${backgroundDark};\n  }\n`;\n\nexport const FullPageOverlay = styled.div`\n  position: fixed;\n  top: 0;\n  bottom: 0;\n  right: 0;\n  left: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: rgba(0, 0, 0, 0.5);\n  z-index: 500;\n`;\n\nexport const radioButtonCss = css<{ $checked: boolean }>`\n  display: flex;\n  align-items: center;\n  position: relative;\n\n  &:before {\n    content: \"\";\n    width: 12px;\n    height: 12px;\n    border-radius: 200px;\n    border: solid 1px #fff;\n    margin-right: 4px;\n    flex-shrink: 0;\n  }\n\n  &:after {\n    ${({ $checked }) => ($checked ? \"content: '';\" : \"\")}\n    width: 6px;\n    height: 6px;\n    border-radius: 200px;\n    background-color: #fff;\n    transform: translate(4px, 0);\n    position: absolute;\n    flex-shrink: 0;\n  }\n\n  &:hover {\n    background-color: #fff;\n    color: ${backgroundDark};\n\n    &:before {\n      border-color: ${backgroundDark};\n    }\n\n    &:after {\n      background-color: ${backgroundDark};\n    }\n  }\n`;\n\nexport const ContentTitle = styled.h2`\n  font-size: 1.25rem;\n  font-weight: 600;\n\n  @media ${breakPoints.medium} {\n    font-size: 1rem;\n  }\n\n  @media ${breakPoints.mediumSmall} {\n    font-size: 0.95rem;\n  }\n\n  @media ${breakPoints.small} {\n    font-size: 1.3rem;\n  }\n`;\n\nexport const ContentParagraph = styled.p`\n  font-size: 0.9rem;\n\n  @media ${breakPoints.medium} {\n    font-size: 0.75rem;\n  }\n\n  @media ${breakPoints.mediumSmall} {\n    font-size: 0.65rem;\n  }\n\n  @media ${breakPoints.small} {\n    font-size: 0.95rem;\n  }\n`;\n\nexport const ButtonBase = styled.button`\n  color: ${backgroundDark};\n  background-color: transparent;\n  text-transform: uppercase;\n  font-family: ${secondaryFont};\n  letter-spacing: -0.3px;\n  display: flex;\n  align-items: center;\n  font-size: 0.75rem;\n  font-size: clamp(0.75rem, 1.1vw, 0.9rem);\n  padding: 0.25rem;\n  padding: clamp(0.25rem, 0.4vw, 0.5rem);\n  flex-shrink: 0;\n\n  span {\n    width: 0.65rem;\n    width: clamp(0.65rem, 1.5vw, 0.85rem);\n    height: 0.65rem;\n    height: clamp(0.65rem, 1.5vw, 0.85rem);\n    display: inline-block;\n    line-height: 0;\n    margin-right: 0.25rem;\n\n    svg {\n      width: 100%;\n      height: 100%;\n      fill: ${backgroundDark};\n    }\n  }\n\n  &:hover {\n    background-color: ${backgroundDark};\n    color: #fff;\n\n    span svg {\n      fill: #fff;\n    }\n  }\n`;\n\nexport const Mult = styled.span`\n  position: relative;\n  bottom: -0.2em;\n`;\nexport const FractionMult = styled.span`\n  position: relative;\n  bottom: -0.5em;\n`;\n\nexport const PointerActiveContainer = styled.div`\n  pointer-events: all;\n`;\n","import { createGlobalStyle } from \"styled-components/macro\";\nimport {\n  baseColor,\n  lightBaseColor,\n  semiBoldFontBoldWeight,\n  primaryFont,\n  backgroundDark,\n} from \"./styleUtils\";\n\nconst GlobalStyles = createGlobalStyle`\n  @media(max-width: 600px) {\n    html {\n      font-size: 14px;\n    }\n  }\n  @media(max-width: 450px) {\n    html {\n      font-size: 12px;\n    }\n  }\n\n  body {\n    font-family: ${primaryFont};\n    color: ${baseColor};\n    margin: 0;\n    padding: 0;\n  }\n\n  h1 {\n    font-weight: ${semiBoldFontBoldWeight};\n    font-size: 1.7rem;\n  }\n\n  h2 {\n    font-weight: 400;\n    font-size: 1.4rem;\n    text-transform: uppercase;\n  }\n\n  h3 {\n    font-weight: ${semiBoldFontBoldWeight};\n    font-size: 1.1rem;\n    color: ${lightBaseColor};\n  }\n\n  p {\n    line-height: 1.5;\n    margin: 0 0 1rem;\n  }\n\n  button {\n    cursor: pointer;\n    border: none;\n    width: auto;\n    text-align: inherit;\n    overflow: visible;\n\n    /* Normalize 'line-height'. Cannot be changed from 'normal' in Firefox 4+. */\n    line-height: normal;\n\n    /* Corrects font smoothing for webkit */\n    -webkit-font-smoothing: inherit;\n    -moz-osx-font-smoothing: inherit;\n\n    /* Corrects inability to style clickable 'input' types in iOS */\n    -webkit-appearance: none;\n\n    /* Remove excess padding and border in Firefox 4+ */\n    &::-moz-focus-inner {\n        border: 0;\n        padding: 0;\n    }\n  }\n\n  ol {\n    padding-left: 1rem;\n\n    li {\n      margin-bottom: 0.6rem;\n      font-size: 0.9rem;\n    }\n  }\n\n  .rapid-tooltip-title {\n    padding: 0.5rem;\n  }\n\n  .rapid-tooltip-subsection-grid {\n    display: grid;\n    grid-gap: 0.5rem;\n    padding: 0.5rem;\n    align-items: center;\n  }\n\n  .rapid-tooltip-cell {\n    display: flex;\n  }\n\n  .rapid-tooltip-arrow-container {\n    width: 100%;\n    height: 0.5rem;\n    display: flex;\n    justify-content: center;\n    position: absolute;\n    transform: translate(0, 100%);\n  }\n\n  .rapid-tooltip-arrow {\n    width: 0.5rem;\n    height: 0.5rem;\n    position: relative;\n    display: flex;\n    justify-content: center;\n    left: -0.25rem;\n\n    &:before {\n      content: '';\n      position: absolute;\n      top: 0;\n      left: 0;\n      border-left: 9px solid transparent;\n      border-right: 9px solid transparent;\n      border-top: 9px solid #dfdfdf;\n    }\n\n    &:after {\n      content: '';\n      position: absolute;\n      top: 0;\n      left: 1px;\n      border-left: 8px solid transparent;\n      border-right: 8px solid transparent;\n      border-top: 8px solid #fff;\n    }\n  }\n\n  /********\n      MAPBOX CUSTOM STYLES\n  ********/\n  .mapboxgl-popup {\n    .mapboxgl-popup-content {\n      padding: 0;\n      border-radius: 4px;\n      overflow: hidden;\n      font-size: 0.7rem;\n      line-height: 1.4;\n      color: #333;\n    }\n  }\n\n  /*******\n    TYPEFORM CUSTOM STYLES\n  *******/\n  .typeform-popover {\n    &.open {\n      bottom: 1.5rem;\n      right: 0.5rem;\n    }\n    .typeform-popover-button {\n      width: auto;\n      height: 1.25rem;\n      bottom: 0;\n      right: 0.5rem;\n      border-radius: 0;\n      background-color: ${backgroundDark} !important;\n    }\n\n    .typeform-popover-button-icon {\n      svg {\n        display: none;\n      }\n\n      text-transform: uppercase;\n      font-family: ${primaryFont};\n      font-size: 0.9rem;\n      display: flex;\n      align-items: center;\n\n      &:before {\n        content: \"Help us improve Metroverse-Jobs\";\n        font-size: 0.75rem;\n        margin-right: 0.5rem;\n      }\n\n      .typeform-spinner {\n        top: auto;\n        left: auto;\n        width: 1rem;\n        height: 1rem;\n        position: relative;\n        margin: 0;\n      }\n\n    }\n\n    @media (min-width: 1385px) {\n      .typeform-popover-button {\n        height: 1.75rem;\n      }\n\n      .typeform-popover-button-icon {\n        &:before {\n          font-size: 0.875rem;\n        }\n      }\n    }\n\n    &:not(.open) {\n      .typeform-popover-button-icon:not([data-testid=\"spinner-icon\"]):after {\n        content: '';\n          border: solid white;\n          border-width: 0 2px 2px 0;\n          display: inline-block;\n          transform: rotate(-135deg) translate(-1px, -3px);\n          padding: 3px;\n      }\n    }\n  }\n`;\n\nexport default GlobalStyles;\n","import { CityRoutes, cityIdParam } from \"./routes\";\n\nexport type ValueOfCityRoutes = (typeof CityRoutes)[keyof typeof CityRoutes];\n\nexport const createRoute = {\n  city: (route: ValueOfCityRoutes, cityId: string) =>\n    route.replace(\":\" + cityIdParam, cityId),\n};\n","import { ReactLocalization } from \"fluent-react/compat\";\nimport { FluentBundle } from \"fluent/compat\";\nimport raw from \"raw.macro\";\nimport { createContext } from \"react\";\n\nexport const POSSESSIVE = ([word]: [string]): string => {\n  const lastCharacter = word[word.length - 1];\n  if (lastCharacter === \"s\") {\n    return word + \"'\";\n  } else {\n    return word + \"'s\";\n  }\n};\n\nexport const SENTENCE_CASE = ([phrase]: [string]): string => {\n  return phrase.charAt(0).toUpperCase() + phrase.substr(1);\n};\n\n// Taken from https://stackoverflow.com/a/13627586\nexport const ORDINAL_SUFFIX = ([input]: [number]): string => {\n  const j = input % 10,\n    k = input % 100;\n  if (j === 1 && k !== 11) {\n    return \"st\";\n  }\n  if (j === 2 && k !== 12) {\n    return \"nd\";\n  }\n  if (j === 3 && k !== 13) {\n    return \"rd\";\n  }\n  return \"th\";\n};\nexport const ORDINAL_NUMBER = ([input]: [number]): string => {\n  return input + ORDINAL_SUFFIX([input]);\n};\n\nconst getLocalizationInfo = (messages: string) => {\n  const bundle = new FluentBundle([\"en-US\"]);\n  bundle.addMessages(messages);\n  function* generateBundles(_locales: string[]) {\n    yield bundle;\n  }\n  const localization = new ReactLocalization(generateBundles([\"en-US\"]));\n  const localizationAndBundle = { localization, bundle };\n  const LocalizationAndBundleContext = createContext(localizationAndBundle);\n  return {\n    localizationAndBundle,\n    LocalizationAndBundleContext,\n  };\n};\n\nconst {\n  localizationAndBundle: appLocalizationAndBundle,\n  LocalizationAndBundleContext: AppLocalizationAndBundleContext,\n} = getLocalizationInfo(raw(\"./messages.ftl\"));\n\nexport { appLocalizationAndBundle, AppLocalizationAndBundleContext };\n","import { GetString } from \"fluent-react/compat\";\nimport { useContext } from \"react\";\nimport { AppLocalizationAndBundleContext } from \"../contextProviders/getFluentLocalizationContext\";\n\nexport const possessive = ([word]: [string]): string => {\n  const lastCharacter = word[word.length - 1];\n  if (lastCharacter === \"s\") {\n    return word + \"'\";\n  } else {\n    return word + \"'s\";\n  }\n};\n\nexport const plural = (word: string): string => {\n  const lastCharacter = word[word.length - 1];\n  if (lastCharacter === \"s\") {\n    return word + \"\";\n  } else {\n    return word + \"s\";\n  }\n};\n\n// Taken from https://stackoverflow.com/a/13627586\nconst ordinalSuffix = ([input]: [number]): string => {\n  const j = input % 10,\n    k = input % 100;\n  if (j === 1 && k !== 11) {\n    return \"st\";\n  }\n  if (j === 2 && k !== 12) {\n    return \"nd\";\n  }\n  if (j === 3 && k !== 13) {\n    return \"rd\";\n  }\n  return \"th\";\n};\n\nexport const ordinalNumber = ([input]: [number]) =>\n  input + ordinalSuffix([input]);\n\nexport default () => {\n  const { localization } = useContext(AppLocalizationAndBundleContext);\n  const getFluentString: GetString = (...args) =>\n    localization.getString(...args);\n  return getFluentString;\n};\n","export const defaultYear = 2024;\nexport const populationDisplayYear = 2020;\nexport const gdpPerCapitaDisplayYear = 2020;\nexport const rankingDisplayYear = 2020;\n\nexport function numberWithCommas(x: number | string) {\n  return x.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n}\n\nconst ranges = [\n  { divider: 1e18, suffix: \"E\" },\n  { divider: 1e15, suffix: \"P\" },\n  { divider: 1e12, suffix: \"T\" },\n  { divider: 1e9, suffix: \"B\" },\n  { divider: 1e6, suffix: \"M\" },\n  { divider: 1e3, suffix: \"k\" },\n];\n\nexport const formatNumber = (n: number, decimalPlaces?: number) => {\n  const fixedRange = decimalPlaces !== undefined ? decimalPlaces : 1;\n  for (const range of ranges) {\n    if (n >= range.divider) {\n      return parseFloat((n / range.divider).toFixed(fixedRange)) + range.suffix;\n    }\n  }\n  return decimalPlaces !== undefined ? n.toFixed(decimalPlaces) : n.toString();\n};\n\nconst rangesLong = [\n  { divider: 1e18, suffix: \"quintillion\" },\n  { divider: 1e15, suffix: \"quadrillion\" },\n  { divider: 1e12, suffix: \"trillion\" },\n  { divider: 1e9, suffix: \"billion\" },\n  { divider: 1e6, suffix: \"million\" },\n  { divider: 1e3, suffix: \"thousand\" },\n];\n\nexport const formatNumberLong = (n: number) => {\n  for (const range of rangesLong) {\n    if (n >= range.divider) {\n      return parseFloat((n / range.divider).toFixed(1)) + \" \" + range.suffix;\n    }\n  }\n  return n.toString();\n};\n\nfunction gcd(a: number, b: number): number {\n  return b ? gcd(b, a % b) : a;\n}\n\nexport const decimalToFraction = function (decimal: number) {\n  let top: number | string = decimal.toString().replace(/\\d+[.]/, \"\");\n  const bottom: number = Math.pow(10, top.length);\n  if (decimal > 1) {\n    top = +top + Math.floor(decimal) * bottom;\n  }\n  const x = gcd(top as number, bottom);\n  return {\n    top: (top as number) / x,\n    bottom: bottom / x,\n    display: (top as number) / x + \":\" + bottom / x,\n  };\n};\n\nexport function filterOutliers(arr: number[]) {\n  // Copy the values, rather than operating on references to existing values\n  const values = arr.concat();\n\n  // Then sort\n  values.sort(function (a, b) {\n    return a - b;\n  });\n\n  /* Then find a generous IQR. This is generous because if (values.length / 4)\n   * is not an int, then really you should average the two elements on either\n   * side to find q1.\n   */\n  const q1 = values[Math.floor(values.length / 4)];\n  // Likewise for q3.\n  const q3 = values[Math.ceil(values.length * (3 / 4))];\n  const iqr = q3 - q1;\n\n  // Then find min and max values\n  const maxValue = q3 + iqr * 1.5;\n  const minValue = q1 - iqr * 1.5;\n\n  // Then filter anything beyond or beneath these values.\n  const filteredValues = values.filter(function (x) {\n    return x <= maxValue && x >= minValue;\n  });\n\n  // Then return\n  return filteredValues;\n}\n\nexport const defaultCityPool = [\n  196, // Albuquerque\n  323, // Dallas\n  1346, // Belo Horizonte\n  14, // Los Angeles\n  1656, // Dublin\n  1214, // Novo Hamburgo\n  362, // Calgary\n  11498, // Singapore\n  6893, // Jaipur\n  12964, // Tokyo\n  2463, // Zurich\n  12578, // Wenzhou\n  2046, // Paris\n  11136, // Hanoi\n  6845, // Mumbai\n  6955, // Delhi\n  2559, // Milan\n  880, // Baltimore\n  875, // Toronto\n  2167, // Amsterdam\n];\n","import { useHistory, matchPath } from \"react-router-dom\";\nimport { CityRoutes, cityIdParam } from \"../routing/routes\";\nimport { defaultCityPool } from \"../Utils\";\nimport random from \"lodash-es/random\";\n\nlet prevCity: string | null = null;\n\nexport default () => {\n  const history = useHistory();\n  const match = matchPath<{ [cityIdParam]: string }>(\n    history.location.pathname,\n    CityRoutes.CityBase,\n  );\n  let cityId =\n    match && match.params[cityIdParam] ? match.params[cityIdParam] : prevCity;\n  // If no cityId, default to a random selection of predefined cities\n  if (!cityId || cityId === cityIdParam) {\n    cityId = defaultCityPool[random(defaultCityPool.length - 1)].toString();\n  }\n  prevCity = cityId;\n  return cityId;\n};\n","import { createContext, useState, useEffect } from \"react\";\nimport debounce from \"lodash/debounce\";\n\ninterface IAppContext {\n  windowDimensions: { width: number; height: number };\n}\n\nconst initialWindowDimension = {\n  width: window.innerWidth,\n  height: window.innerHeight,\n};\nexport default createContext<IAppContext>({\n  windowDimensions: initialWindowDimension,\n});\n\nexport const useWindowWidth = () => {\n  const [windowDimensions, setWindowDimensions] = useState<\n    IAppContext[\"windowDimensions\"]\n  >(initialWindowDimension);\n\n  useEffect(() => {\n    const updateWindowDimensions = debounce(() => {\n      setWindowDimensions({\n        width: window.innerWidth,\n        height: window.innerHeight,\n      });\n    }, 500);\n    window.addEventListener(\"resize\", updateWindowDimensions);\n    return () => {\n      window.removeEventListener(\"resize\", updateWindowDimensions);\n    };\n  }, []);\n\n  return windowDimensions;\n};\n","import React, { useState } from \"react\";\nimport { PrimaryHeaderContainer } from \"../../../styling/GlobalGrid\";\nimport styled from \"styled-components/macro\";\nimport {\n  secondaryFont,\n  primaryColor,\n  backgroundDark,\n  defaultPadding,\n} from \"../../../styling/styleUtils\";\nimport raw from \"raw.macro\";\nimport { Link, useRouteMatch } from \"react-router-dom\";\nimport { Routes } from \"../../../routing/routes\";\nimport { createRoute } from \"../../../routing/Utils\";\nimport useFluent from \"../../../hooks/useFluent\";\nimport useCurrentCityId from \"../../../hooks/useCurrentCityId\";\nimport { useWindowWidth } from \"../../../contextProviders/appContext\";\n\nexport const citiesLogoSVG = raw(\"../../../assets/icons/cities-logo.svg\");\nexport const cityIconSVG = raw(\"../../../assets/icons/city-icon.svg\");\n\nconst Root = styled(PrimaryHeaderContainer)`\n  font-family: ${secondaryFont};\n  letter-spacing: -0.3px;\n  background-color: ${backgroundDark};\n  text-transform: uppercase;\n  display: flex;\n  justify-content: space-between;\n  border-bottom: solid 3px ${primaryColor};\n  padding-top: 0.5rem;\n  box-sizing: border-box;\n  pointer-events: auto;\n\n  @media (max-width: 800px) {\n    min-height: 4rem;\n    padding-right: 1rem;\n  }\n`;\n\nconst NavSection = styled.div`\n  display: flex;\n  align-items: flex-end;\n  flex-shrink: 1;\n  margin: 0 0.4rem;\n`;\n\nconst Logo = styled.h1`\n  margin: 0 4rem 0 1rem;\n  width: 10rem;\n  height: 1.5rem;\n\n  svg {\n    width: 100%;\n    height: 100%;\n\n    path {\n      fill: #fff;\n    }\n  }\n\n  @media (max-width: 850px) {\n    width: 7.5rem;\n    margin: 0 1.75rem 0 1rem;\n  }\n\n  @media (max-width: 800px) {\n    width: 10rem;\n    height: 1.5rem;\n    margin: 0.75rem 1rem 0 1rem;\n  }\n`;\n\nconst MobileLogo = styled.h1`\n  margin: 1rem 1rem 2rem;\n  width: 10rem;\n  height: 1.5rem;\n\n  svg {\n    width: 100%;\n    height: 100%;\n\n    path {\n      fill: #fff;\n    }\n  }\n`;\n\nconst StyledLink = styled(Link)`\n  text-decoration: none;\n`;\n\nconst H2 = styled.h2<{ $active: boolean }>`\n  font-weight: 300;\n  padding: 0 ${defaultPadding / 2}rem 1.05rem;\n  display: flex;\n  align-items: flex-end;\n  margin: 0;\n  font-size: 0.8rem;\n  font-size: clamp(0.8rem, 1.75vw, 1.15rem);\n  color: #fff;\n  line-height: 1;\n  position: relative;\n\n  &:after {\n    content: \"\";\n    position: absolute;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    width: 100%;\n    height: ${({ $active }) => ($active ? \"0.4rem\" : 0)};\n    background-color: ${primaryColor};\n    transition: height 0.075s ease-in-out;\n  }\n\n  &:hover {\n    &:after {\n      height: 0.4rem;\n    }\n  }\n\n  @media (max-width: 950px) {\n    font-size: 0.85rem;\n  }\n\n  @media (max-width: 800px) {\n    padding: 0 0.5rem 1.05rem;\n  }\n`;\n\nconst MobileH2 = styled(H2)`\n  margin: 1rem;\n  border-bottom: solid 1px ${primaryColor};\n`;\n\nexport const BetaLabel = styled.span`\n  text-transform: uppercase;\n  font-family: \"Source Sans Pro\", sans-serif;\n  font-size: 12px;\n  color: #f89571;\n  padding-left: 4px;\n  padding-bottom: 2px;\n  display: inline-block;\n  vertical-align: middle;\n`;\n\nconst NavIcon = styled.div`\n  width: 0.95rem;\n  width: clamp(0.95rem, 1.9vw, 1.45rem);\n  height: 0.95rem;\n  height: clamp(0.95rem, 1.9vw, 1.45rem);\n  margin-right: 0.45rem;\n  line-height: 0;\n\n  @media (max-width: 950px) {\n    width: 1.1rem;\n    height: 1.1rem;\n    margin-right: 0.2rem;\n  }\n\n  svg {\n    width: 100%;\n    height: 100%;\n\n    path,\n    rect {\n      fill: #fff;\n    }\n  }\n\n  @media (max-width: 800px) {\n    display: none;\n  }\n`;\n\nconst MobileNavIcon = styled(NavIcon)`\n  @media (max-width: 800px) {\n    display: block;\n  }\n`;\n\nconst MobileMenuButton = styled.button`\n  background-color: transparent;\n  border: none;\n  text-transform: uppercase;\n  width: 3rem;\n  height: 4rem;\n  position: absolute;\n  top: 0;\n  right: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n  font-size: 0.8rem;\n  color: #fff;\n  font-family: ${secondaryFont};\n\n  &:hover {\n    cursor: pointer;\n  }\n`;\n\nconst Icon = styled.span`\n  display: flex;\n  width: 20px;\n  height: 16px;\n  margin-bottom: 0.25rem;\n  flex-direction: column;\n  justify-content: space-between;\n`;\nconst Bar = styled.span`\n  display: inline-block;\n  width: 100%;\n  height: 0;\n  border-top: 2px solid #fff;\n  transition: all 0.2s ease;\n`;\nconst CenterBar = styled(Bar)`\n  position: relative;\n\n  &:before {\n    content: \"\";\n    display: inline-block;\n    width: 100%;\n    height: 0;\n    border-top: 2px solid #fff;\n    position: absolute;\n    transform-origin: center;\n    top: -2px;\n    left: 0;\n    transition: all 0.2s ease;\n  }\n\n  &.close__menu {\n    transform: rotate(45deg);\n\n    &:before {\n      transform: rotate(90deg);\n    }\n  }\n`;\n\nconst MobileMenu = styled.div`\n  position: fixed;\n  width: 100vw;\n  height: 100vh;\n  top: 0;\n  left: 0;\n  background-color: ${backgroundDark};\n  z-index: 1000;\n  transition: all 0.2s ease;\n`;\n\nconst Header = () => {\n  const getString = useFluent();\n  const [mobileMenuOpen, setMobileMenuOpen] = useState<boolean>(false);\n  const { width } = useWindowWidth();\n  const matchCity = useRouteMatch(Routes.CityBase);\n  const matchSimilarCities = useRouteMatch(Routes.CitySimilarCities);\n  const matchAbout = useRouteMatch(Routes.AboutBase);\n  const matchContact = useRouteMatch(Routes.ContactBase);\n  const matchFaq = useRouteMatch(Routes.FaqBase);\n  const currentCityId = useCurrentCityId();\n  const similarCitiesRoute = currentCityId\n    ? createRoute.city(Routes.CitySimilarCities, currentCityId)\n    : Routes.CitySimilarCities;\n  const profileCitiesOverviewRoute = currentCityId\n    ? createRoute.city(Routes.CityBase, currentCityId)\n    : Routes.CityBase;\n  if (width <= 800) {\n    const menuButtonText =\n      mobileMenuOpen === false\n        ? getString(\"global-ui-more\")\n        : getString(\"global-ui-close\");\n    const closeMenu = () => setMobileMenuOpen(false);\n    return (\n      <Root>\n        <StyledLink to={Routes.Landing}>\n          <Logo\n            aria-label={getString(\"global-app-name\")}\n            dangerouslySetInnerHTML={{ __html: citiesLogoSVG }}\n          />\n        </StyledLink>\n        <NavSection>\n          <MobileMenu\n            style={{\n              transform: mobileMenuOpen\n                ? \"translate(0, 0)\"\n                : \"translate(100%, 0)\",\n            }}\n          >\n            <StyledLink to={Routes.Landing}>\n              <MobileLogo\n                aria-label={getString(\"global-app-name\")}\n                dangerouslySetInnerHTML={{ __html: citiesLogoSVG }}\n              />\n            </StyledLink>\n            <StyledLink to={profileCitiesOverviewRoute}>\n              <MobileH2 $active={Boolean(matchCity && !matchSimilarCities)}>\n                <MobileNavIcon\n                  dangerouslySetInnerHTML={{ __html: cityIconSVG }}\n                />\n                {getString(\"navigation-city-profiles\")}\n              </MobileH2>\n            </StyledLink>\n            <StyledLink onClick={closeMenu} to={similarCitiesRoute}>\n              <MobileH2 $active={Boolean(matchSimilarCities)}>\n                {getString(\"navigation-city-similarity\")}\n              </MobileH2>\n            </StyledLink>\n            <StyledLink onClick={closeMenu} to={Routes.AboutWhatIs}>\n              <MobileH2 $active={Boolean(matchAbout)}>\n                {getString(\"navigation-about\")}\n              </MobileH2>\n            </StyledLink>\n            <StyledLink onClick={closeMenu} to={Routes.FaqBase}>\n              <MobileH2 $active={Boolean(matchFaq)}>\n                {getString(\"navigation-faq\")}\n              </MobileH2>\n            </StyledLink>\n            <StyledLink onClick={closeMenu} to={Routes.ContactBase}>\n              <MobileH2 $active={Boolean(matchContact)}>\n                {getString(\"navigation-contact\")}\n              </MobileH2>\n            </StyledLink>\n          </MobileMenu>\n          <MobileMenuButton\n            onClick={() => setMobileMenuOpen(!mobileMenuOpen)}\n            style={{\n              zIndex: mobileMenuOpen ? 2000 : undefined,\n              position: mobileMenuOpen ? \"fixed\" : undefined,\n            }}\n          >\n            <Icon>\n              <Bar style={{ opacity: mobileMenuOpen ? 0 : undefined }} />\n              <CenterBar\n                className={mobileMenuOpen ? \"close__menu\" : undefined}\n              />\n              <Bar style={{ opacity: mobileMenuOpen ? 0 : undefined }} />\n            </Icon>\n            {menuButtonText}\n          </MobileMenuButton>\n        </NavSection>\n      </Root>\n    );\n  } else {\n    return (\n      <Root>\n        <StyledLink to={Routes.Landing}>\n          <Logo\n            aria-label={getString(\"global-app-name\")}\n            dangerouslySetInnerHTML={{ __html: citiesLogoSVG }}\n          />\n        </StyledLink>\n        <NavSection>\n          <StyledLink to={profileCitiesOverviewRoute}>\n            <H2 $active={Boolean(matchCity && !matchSimilarCities)}>\n              <NavIcon dangerouslySetInnerHTML={{ __html: cityIconSVG }} />\n              {getString(\"navigation-city-profiles\")}\n            </H2>\n          </StyledLink>\n          <StyledLink to={similarCitiesRoute}>\n            <H2 $active={Boolean(matchSimilarCities)}>\n              {getString(\"navigation-city-similarity\")}\n              <BetaLabel>Beta</BetaLabel>\n            </H2>\n          </StyledLink>\n          <StyledLink to={Routes.AboutWhatIs}>\n            <H2 $active={Boolean(matchAbout)}>\n              {getString(\"navigation-about\")}\n            </H2>\n          </StyledLink>\n          <StyledLink to={Routes.FaqBase}>\n            <H2 $active={Boolean(matchFaq)}>{getString(\"navigation-faq\")}</H2>\n          </StyledLink>\n          <StyledLink to={Routes.ContactBase}>\n            <H2 $active={Boolean(matchContact)}>\n              {getString(\"navigation-contact\")}\n            </H2>\n          </StyledLink>\n        </NavSection>\n      </Root>\n    );\n  }\n};\n\nexport default Header;\n","import React, { useEffect, useRef, useState } from \"react\";\nimport { createPortal } from \"react-dom\";\nimport styled from \"styled-components/macro\";\n\nexport const overlayPortalContainerId = \"overlayPortalContainerId\";\n\nconst overlayPortalZIndex = 3000;\n\nexport const OverlayPortal = () => (\n  <div\n    id={overlayPortalContainerId}\n    style={{\n      position: \"relative\",\n      zIndex: overlayPortalZIndex,\n    }}\n    tabIndex={-1}\n  />\n);\n\nexport const mobileWidth = 600; // in px\n\nconst Root = styled.div`\n  position: fixed;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  width: 100vw;\n  height: 100vh;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n`;\n\nconst Overlay = styled.div`\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.3);\n`;\n\ninterface Dimensions {\n  width: string;\n  height: string;\n}\n\nconst Container = styled.div<{ dimensions: Dimensions }>`\n  position: relative;\n  max-height: 90%;\n  max-width: ${({ dimensions: { width } }) => width};\n  height: ${({ dimensions: { height } }) => height};\n\n  @media screen and (max-width: ${mobileWidth}px),\n    screen and (max-height: 800px) {\n    max-height: calc(100vh - 4rem);\n    max-width: calc(100vw - 4rem);\n    margin: auto;\n    overflow: auto;\n  }\n`;\n\nconst Content = styled.div`\n  overflow: auto;\n\n  ::-webkit-scrollbar {\n    -webkit-appearance: none;\n    width: 7px;\n  }\n  ::-webkit-scrollbar-thumb {\n    border-radius: 4px;\n    background-color: rgba(0, 0, 0, 0.3);\n  }\n  ::-webkit-scrollbar-track {\n    background-color: rgba(0, 0, 0, 0.1);\n  }\n\n  @media screen and (max-width: ${mobileWidth}px),\n    screen and (max-height: 800px) {\n    overflow: visible;\n  }\n`;\n\nexport interface Props {\n  children: React.ReactNode;\n  onClose: (() => void) | undefined;\n  width: string;\n  height: string;\n}\n\nconst Modal = (props: Props) => {\n  const { children, onClose, width, height } = props;\n\n  const overlayPortalContainerNodeRef = useRef<HTMLElement | null>(null);\n\n  const [isModalRendered, setIsModalRendered] = useState<boolean>(false);\n\n  useEffect(() => {\n    const node = document.querySelector<HTMLElement>(\n      `#${overlayPortalContainerId}`,\n    );\n    if (node !== null) {\n      overlayPortalContainerNodeRef.current = node;\n      overlayPortalContainerNodeRef.current.focus();\n      setIsModalRendered(true);\n    }\n  }, []);\n\n  useEffect(() => {\n    const closeOnEsc = (e: KeyboardEvent) =>\n      e.key === \"Escape\" && onClose ? onClose() : null;\n    document.addEventListener(\"keydown\", closeOnEsc);\n    return () => document.removeEventListener(\"keydown\", closeOnEsc);\n  }, [onClose]);\n\n  let modal: React.ReactElement<any> | null;\n  if (\n    isModalRendered === true &&\n    overlayPortalContainerNodeRef.current !== null\n  ) {\n    modal = createPortal(\n      <Root>\n        <Overlay onClick={onClose} />\n        <Container dimensions={{ width, height }}>\n          <Content>{children}</Content>\n        </Container>\n      </Root>,\n      overlayPortalContainerNodeRef.current,\n    );\n  } else {\n    modal = null;\n  }\n\n  return modal;\n};\n\nexport default Modal;\n","import React from \"react\";\nimport Modal, { Props } from \"./\";\nimport styled, { keyframes } from \"styled-components/macro\";\nimport { backgroundDark, secondaryFont } from \"../../styling/styleUtils\";\nimport useFluent from \"../../hooks/useFluent\";\n\nconst growIn = keyframes`\n  0% {\n    transform: scale(0.4);\n  }\n\n  100% {\n    transform: scale(1);\n  }\n`;\n\nconst Root = styled.div`\n  background-color: ${backgroundDark};\n  position: relative;\n  animation: ${growIn} 0.1s normal forwards ease-in-out;\n  animation-iteration-count: 1;\n  color: #fff;\n  height: 100%;\n  box-sizing: border-box;\n\n  @media screen and (max-height: 800px) {\n    overflow: visible;\n  }\n`;\n\nconst CloseButton = styled.button`\n  background-color: transparent;\n  border-none;\n  padding: 0.5rem;\n  color: #fff;\n  text-transform: uppercase;\n  font-size: 1.25rem;\n  font-family: ${secondaryFont};\n  position: absolute;\n  right: 0;\n  top: 0;\n`;\n\nexport default (props: Props) => {\n  const { children, ...rest } = props;\n  const getString = useFluent();\n  const closeButton = props.onClose ? (\n    <CloseButton onClick={props.onClose}>\n       {getString(\"global-ui-close\")}\n    </CloseButton>\n  ) : null;\n  return (\n    <Modal {...rest}>\n      <Root>\n        {children}\n        {closeButton}\n      </Root>\n    </Modal>\n  );\n};\n","import React, { useState } from \"react\";\nimport styled from \"styled-components/macro\";\nimport {\n  primaryFont,\n  secondaryFont,\n  primaryColor,\n} from \"../../styling/styleUtils\";\nimport raw from \"raw.macro\";\nimport { citiesLogoSVG, cityIconSVG } from \"../../components/navigation/header\";\nimport useFluent from \"../../hooks/useFluent\";\nimport BasicModal from \"../../components/standardModal/BasicModal\";\n\nconst mapPanSVG = raw(\"../../assets/icons/map-pan.svg\");\n\nconst Root = styled.div`\n  font-family: ${secondaryFont};\n  pointer-events: none;\n  color: #fff;\n  text-transform: uppercase;\n`;\n\nconst Logo = styled.h1`\n  position: fixed;\n  z-index: 300;\n  top: 0;\n  right: 0;\n  margin: 1rem 2rem;\n  width: 12rem;\n  height: 2.5rem;\n\n  svg {\n    width: 100%;\n    height: 100%;\n\n    path {\n      fill: #fff;\n    }\n  }\n`;\n\nconst H2 = styled.h2`\n  font-weight: 400;\n  margin: 1rem 0;\n  padding: 0 0 0.35rem 0;\n  border-bottom: solid 0.3rem ${primaryColor};\n  display: flex;\n  align-items: flex-end;\n  pointer-events: all;\n\n  @media (max-width: 850px) {\n    font-size: 1.2rem;\n  }\n`;\n\nconst CityIcon = styled.div`\n  width: 2.5rem;\n  height: 2.5rem;\n  margin-right: 0.45rem;\n\n  @media (max-width: 850px) {\n    width: 1.75rem;\n    height: 1.75rem;\n  }\n\n  svg {\n    width: 100%;\n    height: 100%;\n\n    path,\n    rect {\n      fill: #fff;\n    }\n  }\n`;\n\nconst Description = styled.h3`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  text-align: center;\n  margin: 4rem 0;\n  color: #fff;\n  font-weight: 400;\n  font-size: 1.2rem;\n\n  @media (max-width: 850px) {\n    font-size: 0.95rem;\n    margin: 1.85rem 0;\n  }\n`;\n\nconst Or = styled.span`\n  display: flex;\n  flex-direction: column;\n  height: 5rem;\n  align-items: center;\n  margin: 0 1.5rem;\n\n  &:before,\n  &:after {\n    content: \"\";\n    display: block;\n    flex-grow: 1;\n    border-left: solid 2px #fff;\n  }\n`;\n\nconst UseMapText = styled.span`\n  display: flex;\n  align-items: center;\n`;\n\nconst MapPanIcon = styled.span`\n  display: inline-block;\n  width: 2.4rem;\n  height: 2.4rem;\n  margin-right: 0.85rem;\n\n  @media (max-width: 850px) {\n    width: 1.75rem;\n    height: 1.75rem;\n  }\n\n  svg {\n    width: 100%;\n    height: 100%;\n\n    path {\n      fill: #fff;\n    }\n  }\n`;\n\nconst WhatIsACityLinkContainer = styled.div`\n  margin: 0 auto 1.1rem;\n  display: block;\n  width: 100%;\n\n  @media (min-width: 990px) {\n    width: 85%;\n  }\n`;\n\nconst WhatIsACityLink = styled.button`\n  pointer-events: all;\n  background-color: transparent;\n  border: none;\n  color: #fff;\n  font-family: ${primaryFont};\n  font-size: 0.85rem;\n  padding: 0.5rem;\n  border: solid 1px #fff;\n  background-color: rgba(0, 0, 0, 0.85);\n  text-transform: uppercase;\n\n  &:hover {\n    background-color: #fff;\n    color: #08111e;\n  }\n`;\n\nexport const ModalContent = styled.div`\n  background-color: #08111e;\n  padding: 3rem 1.75rem 1.75rem;\n\n  strong {\n    color: ${primaryColor};\n    font-weight: 400;\n  }\n\n  a {\n    color: #fff;\n  }\n`;\n\nconst Heading = () => {\n  const getString = useFluent();\n  const [cityModalOpen, setCityModalOpen] = useState<boolean>(false);\n  const openModal = () => setCityModalOpen(true);\n  const closeModal = () => setCityModalOpen(false);\n  const modal = cityModalOpen ? (\n    <BasicModal width={\"400px\"} height={\"auto\"} onClose={closeModal}>\n      <ModalContent>\n        <p\n          dangerouslySetInnerHTML={{\n            __html: getString(\"landing-page-text-what-is-city-para-1\"),\n          }}\n        />\n        <p\n          dangerouslySetInnerHTML={{\n            __html: getString(\"landing-page-text-what-is-city-para-2\"),\n          }}\n        />\n      </ModalContent>\n    </BasicModal>\n  ) : null;\n  return (\n    <Root>\n      <Logo\n        dangerouslySetInnerHTML={{ __html: citiesLogoSVG }}\n        aria-label={getString(\"global-app-name\")}\n      />\n      <H2>\n        <CityIcon dangerouslySetInnerHTML={{ __html: cityIconSVG }} />\n        {getString(\"navigation-pick-a-city\")}\n      </H2>\n      <Description>\n        <span>{getString(\"global-ui-type-a-city-name\")}</span>\n        <Or>{getString(\"landing-page-text-or\")}</Or>\n        <UseMapText>\n          <MapPanIcon dangerouslySetInnerHTML={{ __html: mapPanSVG }} />\n          {getString(\"landing-page-text-use-the-map\")}\n        </UseMapText>\n      </Description>\n      <WhatIsACityLinkContainer>\n        <WhatIsACityLink onClick={openModal}>\n          {getString(\"landing-page-text-what-is-city-link\")}\n        </WhatIsACityLink>\n      </WhatIsACityLinkContainer>\n      {modal}\n    </Root>\n  );\n};\n\nexport default Heading;\n","import React, {\n  createContext,\n  useCallback,\n  useContext,\n  useEffect,\n  useRef,\n  useState,\n} from 'react';\nimport { BLSData, BLSMetaCatalog } from './types';\n\ninterface DataState {\n  data: BLSData | null;\n  loading: boolean;\n  error: Error | null;\n  /** Which levels have been loaded (e.g. [1, 2] initially, then [1,2,3] after loading level 3) */\n  loadedLevels: number[];\n  /** Trigger loading of a specific SOC level (3, 4, or 5). No-op if already loaded. */\n  loadLevel: (level: number) => void;\n  /** True when a level extension file is currently being fetched */\n  levelLoading: boolean;\n  /** The meta catalog (available datasets, countries, years) */\n  meta: BLSMetaCatalog | null;\n  /** Highest digit level available in the data (e.g. 4 for BLS SOC, 6 for NAICS) */\n  maxDigitLevel: number;\n}\n\nconst BASE_URL = process.env.PUBLIC_URL + '/data';\n\nconst StaticDataContext = createContext<DataState>({\n  data: null,\n  loading: true,\n  error: null,\n  loadedLevels: [],\n  loadLevel: () => {},\n  levelLoading: false,\n  meta: null,\n  maxDigitLevel: 6,\n});\n\nexport const useStaticData = () => useContext(StaticDataContext);\n\n/**\n * Merge a level extension file into the existing BLSData.\n * Extension files contain only occupations at a single level,\n * so we add them additively to what's already loaded.\n */\nfunction mergeExtension(base: BLSData, ext: BLSData): BLSData {\n  // Merge occupations (add new ones)\n  const existingCodes = new Set(base.occupations.map((o) => o.socCode));\n  const newOccupations = ext.occupations.filter(\n    (o) => !existingCodes.has(o.socCode),\n  );\n\n  // Merge majorGroups (add any new ones)\n  const existingGroups = new Set(base.majorGroups.map((g) => g.groupId));\n  const newGroups = ext.majorGroups.filter(\n    (g) => !existingGroups.has(g.groupId),\n  );\n\n  // Merge regionData\n  const mergedRegionData = { ...base.regionData };\n  for (const [regionId, yearData] of Object.entries(ext.regionData)) {\n    if (!mergedRegionData[regionId]) {\n      mergedRegionData[regionId] = {};\n    }\n    for (const [year, records] of Object.entries(yearData)) {\n      if (!mergedRegionData[regionId][year]) {\n        mergedRegionData[regionId][year] = [];\n      }\n      // Append new occupation records (avoid duplicates by socCode)\n      const existingSocs = new Set(\n        mergedRegionData[regionId][year].map((r) => r.socCode),\n      );\n      const newRecords = records.filter((r) => !existingSocs.has(r.socCode));\n      mergedRegionData[regionId][year] = [\n        ...mergedRegionData[regionId][year],\n        ...newRecords,\n      ];\n    }\n  }\n\n  // Merge aggregates\n  const mergedAggregates = { ...base.aggregates };\n  for (const [year, agg] of Object.entries(ext.aggregates)) {\n    if (!mergedAggregates[year]) {\n      mergedAggregates[year] = agg;\n    } else {\n      mergedAggregates[year] = {\n        byOccupation: {\n          ...mergedAggregates[year].byOccupation,\n          ...agg.byOccupation,\n        },\n        minMaxStats: mergedAggregates[year].minMaxStats,\n      };\n    }\n  }\n\n  return {\n    ...base,\n    occupations: [...base.occupations, ...newOccupations],\n    majorGroups: [...base.majorGroups, ...newGroups],\n    regionData: mergedRegionData,\n    aggregates: mergedAggregates,\n  };\n}\n\nexport const StaticDataProvider: React.FC = ({ children }) => {\n  const [data, setData] = useState<BLSData | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<Error | null>(null);\n  const [loadedLevels, setLoadedLevels] = useState<number[]>([]);\n  const [levelLoading, setLevelLoading] = useState(false);\n  const [meta, setMeta] = useState<BLSMetaCatalog | null>(null);\n\n  // Track which levels are currently being fetched to avoid duplicate requests\n  const levelFetchingRef = useRef<Set<number>>(new Set());\n\n  // Initial load: fetch meta catalog, then fetch main data file\n  useEffect(() => {\n    let cancelled = false;\n\n    async function load() {\n      try {\n        // Step 1: Fetch meta catalog\n        const metaRes = await fetch(`${BASE_URL}/bls-data.json`);\n        if (!metaRes.ok) throw new Error(`HTTP ${metaRes.status} fetching meta`);\n        const metaData: BLSMetaCatalog = await metaRes.json();\n\n        if (cancelled) return;\n        setMeta(metaData);\n\n        // Step 2: Pick the first dataset (default country/year)\n        if (metaData.datasets.length === 0) {\n          throw new Error('No datasets found in meta catalog');\n        }\n        const dataset = metaData.datasets[0];\n\n        // Step 3: Fetch main data file (levels 1+2)\n        const mainRes = await fetch(`${BASE_URL}/${dataset.file}`);\n        if (!mainRes.ok) throw new Error(`HTTP ${mainRes.status} fetching ${dataset.file}`);\n        const mainData: BLSData = await mainRes.json();\n\n        if (cancelled) return;\n        setData(mainData);\n        setLoadedLevels(dataset.levels);\n        setLoading(false);\n      } catch (err) {\n        if (cancelled) return;\n        console.error('Failed to load BLS data:', err);\n        setError(err instanceof Error ? err : new Error(String(err)));\n        setLoading(false);\n      }\n    }\n\n    load();\n    return () => { cancelled = true; };\n  }, []);\n\n  // Track which level keys (e.g. \"3\", \"4\", \"4-metro\") have been loaded\n  const loadedKeysRef = useRef<Set<string>>(new Set());\n\n  const fetchAndMerge = useCallback(\n    (levelKey: string) => {\n      if (\n        loadedKeysRef.current.has(levelKey) ||\n        levelFetchingRef.current.has(levelKey as any) ||\n        !meta ||\n        !data\n      ) {\n        return;\n      }\n\n      const dataset = meta.datasets[0];\n      if (!dataset) return;\n      const key = `${dataset.country}-${dataset.year}`;\n      const levelFiles = meta.levelFiles[key];\n      if (!levelFiles || !levelFiles[levelKey]) {\n        return; // silently skip  not all splits exist\n      }\n\n      const filename = levelFiles[levelKey];\n      levelFetchingRef.current.add(levelKey as any);\n      setLevelLoading(true);\n\n      fetch(`${BASE_URL}/${filename}`)\n        .then((res) => {\n          if (!res.ok) throw new Error(`HTTP ${res.status} fetching ${filename}`);\n          return res.json();\n        })\n        .then((extData: BLSData) => {\n          setData((prev) => (prev ? mergeExtension(prev, extData) : prev));\n          loadedKeysRef.current.add(levelKey);\n          levelFetchingRef.current.delete(levelKey as any);\n          setLevelLoading(levelFetchingRef.current.size > 0);\n        })\n        .catch((err) => {\n          console.error(`Failed to load ${levelKey}:`, err);\n          levelFetchingRef.current.delete(levelKey as any);\n          setLevelLoading(levelFetchingRef.current.size > 0);\n        });\n    },\n    [meta, data],\n  );\n\n  const loadLevel = useCallback(\n    (level: number) => {\n      if (loadedLevels.includes(level)) return;\n\n      // Load the main level file\n      fetchAndMerge(String(level));\n\n      // Also load the metro split if it exists (levels 3 and 4 are split)\n      fetchAndMerge(`${level}-metro`);\n\n      // Mark level as loaded (the actual merge happens async)\n      setLoadedLevels((prev) => {\n        if (prev.includes(level)) return prev;\n        return [...prev, level].sort();\n      });\n    },\n    [loadedLevels, fetchAndMerge],\n  );\n\n  // Compute highest available digit level from meta catalog\n  let maxDigitLevel = 6; // default fallback (original NAICS)\n  if (meta && meta.datasets.length > 0) {\n    const dataset = meta.datasets[0];\n    const key = `${dataset.country}-${dataset.year}`;\n    const levelFiles = meta.levelFiles[key] || {};\n    // Max of: base dataset levels + any numeric level file keys\n    const allLevels = [\n      ...dataset.levels,\n      ...Object.keys(levelFiles).filter(k => /^\\d+$/.test(k)).map(Number),\n    ];\n    maxDigitLevel = allLevels.length > 0 ? Math.max(...allLevels) : 6;\n  }\n\n  return (\n    <StaticDataContext.Provider\n      value={{ data, loading, error, loadedLevels, loadLevel, levelLoading, meta, maxDigitLevel }}\n    >\n      {children}\n    </StaticDataContext.Provider>\n  );\n};\n","export enum DigitLevel {\n  Sector = 1,\n  Two = 2,\n  Three = 3,\n  Four = 4,\n  Five = 5,\n  Six = 6,\n}\nexport enum ClusterLevel {\n  C1 = 1,\n  C2 = 2,\n  C3 = 3,\n}\n\nexport const defaultDigitLevel: DigitLevel = DigitLevel.Two;\n\nexport enum CompositionType {\n  Companies = \"income\",\n  Employees = \"employees\",\n}\n\nexport const defaultCompositionType: CompositionType =\n  CompositionType.Employees;\n\nexport interface ClassificationNaicsIndustry {\n  naicsId: string;\n  code: string;\n  name: string | null;\n  level: DigitLevel | null;\n  parentId: number | null;\n  parentCode: string | null;\n  codeHierarchy: string | null;\n  naicsIdHierarchy: string | null;\n  naicsIdTopParent: number;\n  tradable: boolean;\n  id: string;\n}\n\nexport enum IncomeClassType {\n  HIC = \"HIC\",\n  UMIC = \"UMIC\",\n  LMIC = \"LMIC\",\n  LIC = \"LIC\",\n  OTHER = \"OTHER\",\n}\n\nexport enum DevGroupType {\n  MDR = \"MDR\",\n  LDC = \"LDC\",\n  LDCL = \"LDCL\",\n}\n\nexport type GeoJSONString = string;\n\nexport enum DataFlagType {\n  GREEN = \"GREEN\",\n  ORANGE = \"ORANGE\",\n  YELLOW = \"YELLOW\",\n  RED = \"RED\",\n}\n\nexport interface ClassificationCity {\n  cityId: string;\n  name: string | null;\n  included: boolean | null;\n  regionId: number | null;\n  countryId: number | null;\n  nameList: string[] | null;\n  centroidLat: number | null;\n  centroidLon: number | null;\n  area: number | null;\n  crossBorder: boolean | null;\n  numCountries: number | null;\n  countryList: string | null;\n  avgElevation: number | null;\n  climateClass: string | null;\n  avgPrecip14: number | null;\n  avgTemp14: number | null;\n  builtArea15: number | null;\n  population15: number | null;\n  populationLatest: number | null;\n  builtAreaPc15: number | null;\n  gdpPpp15: number | null;\n  gdppc: number | null;\n  incomeClass: IncomeClassType | null;\n  devGroup: DevGroupType | null;\n  travelTimeToCapital: number | null;\n  avgGreenness14: number | null;\n  concentrationPm2514: number | null;\n  potentialFloodArea: number | null;\n  potentialFloodBuiltArea15: number | null;\n  potentialFloodPop15: number | null;\n  potentialStormSurgeArea: number | null;\n  potentialStormSurgeBuiltArea15: number | null;\n  potentialStormSurgePop15: number | null;\n  earthquakeMmiClass: number | null;\n  heatwaveMaxIndex: number | null;\n  landUseEfficiency15: number | null;\n  popGreenArea15: number | null;\n  openSpace15: number | null;\n  regionGdppcRank: number | null;\n  regionPopRank: number | null;\n  geometry: GeoJSONString | null;\n  dataFlag: DataFlagType;\n  id: string;\n}\n\nexport interface ClassificationCountry {\n  countryId: string;\n  code: string | null;\n  nameEn: string | null;\n  nameShortEn: string | null;\n  regionId: number;\n  id: string;\n}\n\nexport interface ClassificationRegion {\n  regionId: string;\n  regionName: string;\n  subregionId: string;\n  subregionName: string;\n  regionCity: {\n    edges: {\n      node: ClassificationCity[];\n    };\n  };\n  subregionCity: {\n    edges: {\n      node: ClassificationCity[];\n    };\n  };\n  id: string;\n}\n\nexport interface CityIndustryYear {\n  cityId: string;\n  naicsId: string;\n  year: string;\n  numEmploy: number | null;\n  numCompany: number | null;\n  level: DigitLevel | null;\n  rcaNumEmploy: number | null;\n  rcaNumCompany: number | null;\n  densityEmploy: number | null;\n  densityCompany: number | null;\n  id: string;\n}\n\nexport interface GlobalIndustryYear {\n  naicsId: number;\n  naicsIdTopParent: number;\n  year: number;\n  level: number;\n  sumNumCompany: number;\n  sumNumEmploy: number;\n  avgNumCompany: number;\n  avgNumEmploy: number;\n}\n\nexport interface CityClusterYear {\n  cityId: string;\n  clusterId: string;\n  level: number | null;\n  year: string;\n  numEmploy: number | null;\n  numCompany: number | null;\n  rcaNumEmploy: number | null;\n  rcaNumCompany: number | null;\n  id: string;\n}\n\nexport interface ClassificationNaicsCluster {\n  clusterId: string;\n  parentId: number | null;\n  clusterIdTopParent: number | null;\n  level: number | null;\n  name: string | null;\n  shortName: string | null;\n  tradable: boolean;\n  id: string;\n}\n\nexport interface GlobalIndustryAgg {\n  naicsId: number;\n  naicsIdTopParent: number;\n  year: number;\n  level: number;\n  sumNumCompany: number;\n  sumNumEmploy: number;\n  avgNumCompany: number;\n  avgNumEmploy: number;\n}\n\nexport interface CityPartner {\n  cityId: string;\n  partnerId: string;\n  proximity: number | null;\n  eucdist: number | null;\n  id: string;\n}\n\nexport interface NaicsIndustry {\n  naicsId: string;\n  yearsEducation: number;\n  hourlyWage: number;\n  jobs: number;\n  valueAdded: number;\n  acidRain: number;\n  freshwaterEcotoxicity: number;\n  eutrophication: number;\n  climateChange: number;\n  healthCancer: number;\n  healthNoncancer: number;\n  healthRespiratoryEffects: number;\n  healthCancerNoncancer: number;\n  ozoneDepletion: number;\n  smog: number;\n  hazardousAirPollutantRelease: number;\n  metalRelease: number;\n  pesticideRelease: number;\n  energyUse: number;\n  landUse: number;\n  mineralMetalUse: number;\n  nonrenewableEnergyUse: number;\n  renewableEnergyUse: number;\n  waterUse: number;\n  id: string;\n  level: DigitLevel | null;\n}\n\nexport interface ClusterIndustry {\n  clusterId: string;\n  level: ClusterLevel;\n  yearsEducation: number;\n  hourlyWage: number;\n  id: string;\n}\n\nexport enum PeerGroup {\n  GlobalPopulation = \"global_pop\",\n  GlobalIncome = \"global_income\",\n  GlobalEuclideanDistance = \"global_eucdist\",\n  RegionalPopulation = \"regional_pop\",\n  RegionalIncome = \"regional_income\",\n  RegionalEuclideanDistance = \"regional_eucdist\",\n  Region = \"region\",\n}\n\nexport const isValidPeerGroup = (value: any) =>\n  value === PeerGroup.GlobalPopulation ||\n  value === PeerGroup.GlobalIncome ||\n  value === PeerGroup.GlobalEuclideanDistance ||\n  value === PeerGroup.RegionalPopulation ||\n  value === PeerGroup.RegionalIncome ||\n  value === PeerGroup.RegionalEuclideanDistance ||\n  value === PeerGroup.Region;\n\nexport interface NaicsRcaCalculation {\n  cityId: number | null;\n  naicsId: number | null;\n  level: number | null;\n  year: number | null;\n  rca: number | null;\n  rcaLb: number | null;\n  rcaUb: number | null;\n  comparableIndustry: boolean;\n}\n\nexport interface ClusterRcaCalculation {\n  cityId: number | null;\n  clusterId: number | null;\n  level: number | null;\n  year: number | null;\n  rca: number | null;\n  rcaLb: number | null;\n  rcaUb: number | null;\n  comparableIndustry: boolean;\n}\n\nexport interface NaicsPeerEconStruct {\n  naicsId: number;\n  level: DigitLevel;\n  year: number;\n  totalEmployCount: number;\n  avgEmployCount: number;\n  avgEmployShare: number;\n  totalCompanyCount: number;\n  avgCompanyCount: number;\n  avgCompanyShare: number;\n}\n\nexport interface ClusterPeerEconStruct {\n  clusterId: number;\n  level: ClusterLevel;\n  year: number;\n  totalEmployCount: number;\n  avgEmployCount: number;\n  avgEmployShare: number;\n  totalCompanyCount: number;\n  avgCompanyCount: number;\n  avgCompanyShare: number;\n}\n\nexport interface NaicsDensityRescale {\n  cityId: number;\n  naicsId: number;\n  level: DigitLevel | null;\n  year: number | null;\n  densityEmploy: number | null;\n  densityCompany: number | null;\n}\nexport interface ClusterDensityRescale {\n  cityId: number;\n  clusterId: number;\n  level: ClusterLevel | null;\n  year: number | null;\n  densityEmploy: number | null;\n  densityCompany: number | null;\n}\nexport interface CityPeerGroupCounts {\n  cityId: number;\n  globalPop: number;\n  regionalPop: number;\n  globalIncome: number;\n  regionalIncome: number;\n  globalProximity: number;\n  regionalProximity: number;\n  globalEucdist: number;\n  regionalEucdist: number;\n  region: number;\n  subregion: number;\n}\n\nexport interface CityPartnerEucDistScale {\n  minGlobalEucdist: number;\n  p20GlobalEucdist: number;\n  p40GlobalEucdist: number;\n  p60GlobalEucdist: number;\n  p80GlobalEucdist: number;\n  maxGlobalEucdist: number;\n}\n","import React, { useLayoutEffect, useRef, useState } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport styled from \"styled-components\";\nimport { lightBorderColor, backgroundDark } from \"../../styling/styleUtils\";\nimport { overlayPortalContainerId } from \"../standardModal\";\nimport raw from \"raw.macro\";\n\nconst infoCircleSVG = raw(\"../../assets/icons/info-circle.svg\");\n\nexport enum TooltipPosition {\n  Automatic = \"automatic\",\n  Bottom = \"bottom\",\n}\n\nexport enum TooltipTheme {\n  Light = \"light\",\n  Dark = \"dark\",\n}\n\nconst farEndOfScreenToggleClass = \"tooltip-at-right-end-of-screen\";\nexport const arrowContainerClassName = \"tooltip-arrow-container-class\";\nconst flipArrowClassName = \"tooltip-arrow-flip-side-class\";\n\n//#region Styling\nconst Root = styled.span`\n  cursor: help;\n  width: 0.7rem;\n  height: 0.7rem;\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 10000px;\n  margin: 0 0.4rem;\n`;\n\nconst MoreInformationI = styled.span`\n  display: inline-block;\n  width: 0.7rem;\n  height: 0.7rem;\n  line-height: 0;\n\n  svg {\n    width: 100%;\n    height: 100%;\n\n    circle {\n      fill: ${backgroundDark};\n    }\n\n    path {\n      fill: #fff;\n    }\n  }\n`;\n\nconst TooltipBase = styled.div<{\n  $theme: TooltipTheme | undefined;\n  $overrideStyles: boolean | undefined;\n}>`\n  position: fixed;\n  z-index: 3000;\n  max-width: 16rem;\n  font-size: 0.7rem;\n  line-height: 1.4;\n  text-transform: none;\n  ${({ $overrideStyles }) =>\n    $overrideStyles ? \"padding-bottom: 0.5rem;\" : \"padding: 0.5rem;\"}\n  opacity: 0;\n  transition: opacity 0.15s ease;\n  color: ${backgroundDark};\n  background-color: ${({ $theme }) =>\n    $theme === TooltipTheme.Dark ? backgroundDark : \"#fff\"};\n  color: ${({ $theme }) =>\n    $theme === TooltipTheme.Dark ? \"#fff\" : backgroundDark};\n  border: 1px solid\n    ${({ $theme }) =>\n      $theme === TooltipTheme.Dark ? backgroundDark : lightBorderColor};\n  border-radius: 4px;\n  box-shadow: 0px 0px 5px 0px rgba(0, 0, 0, 0.15);\n  pointer-events: none;\n\n  &.${farEndOfScreenToggleClass} .${arrowContainerClassName} {\n    justify-content: flex-end;\n    padding-right: 0.7rem;\n    box-sizing: border-box;\n  }\n\n  &.${flipArrowClassName} .${arrowContainerClassName} {\n    transform: translate(0, -100%);\n    top: 0;\n\n    div {\n      &:before {\n        top: -1px;\n        transform: rotate(180deg);\n      }\n\n      &:after {\n        transform: rotate(180deg);\n      }\n    }\n  }\n`;\n\nconst ArrowContainer = styled.div<{ $position: TooltipPosition | undefined }>`\n  width: 100%;\n  height: 0.5rem;\n  display: flex;\n  justify-content: center;\n  position: absolute;\n  transform: ${({ $position }) =>\n    $position === TooltipPosition.Bottom\n      ? \"translate(0, -100%)\"\n      : \"translate(0, 100%)\"};\n  ${({ $position }) => ($position === TooltipPosition.Bottom ? \"top: 0;\" : \"\")}\n`;\n\nconst Arrow = styled.div<{\n  $theme: TooltipTheme | undefined;\n  $position: TooltipPosition | undefined;\n}>`\n  width: 0.5rem;\n  height: 0.5rem;\n  position: relative;\n  z-index: -1;\n  display: flex;\n  justify-content: center;\n  transform: translate(-150%, 0);\n\n  &:before {\n    content: \"\";\n    position: absolute;\n    top: ${({ $position }) =>\n      $position === TooltipPosition.Bottom ? \"-1px\" : \"0\"};\n    left: 0;\n    border-left: 9px solid transparent;\n    border-right: 9px solid transparent;\n    border-top: 9px solid\n      ${({ $theme }) =>\n        $theme === TooltipTheme.Dark ? backgroundDark : lightBorderColor};\n    ${({ $position }) =>\n      $position === TooltipPosition.Bottom ? \"transform: rotate(180deg);\" : \"\"}\n  }\n\n  &:after {\n    content: \"\";\n    position: absolute;\n    top: 0;\n    left: 1px;\n    border-left: 8px solid transparent;\n    border-right: 8px solid transparent;\n    border-top: 8px solid\n      ${({ $theme }) =>\n        $theme === TooltipTheme.Dark ? backgroundDark : \"#fff\"};\n    ${({ $position }) =>\n      $position === TooltipPosition.Bottom ? \"transform: rotate(180deg);\" : \"\"}\n  }\n`;\n\nconst GenericSpan = styled.span`\n  cursor: help;\n`;\n//#endregion\nlet timeout: number;\n\ninterface Props {\n  explanation: React.ReactNode | null;\n  children?: React.ReactNode;\n  cursor?: string;\n  theme?: TooltipTheme;\n  tooltipPosition?: TooltipPosition;\n  overrideStyles?: boolean;\n  delay?: number;\n}\n\nconst Tooltip = (props: Props) => {\n  const {\n    explanation,\n    children,\n    cursor,\n    theme,\n    tooltipPosition,\n    overrideStyles,\n    delay,\n  } = props;\n  const rootEl = useRef<HTMLDivElement | null>(null);\n  const tooltipEl = useRef<HTMLDivElement | null>(null);\n  const overlayPortalContainerNodeRef = useRef<HTMLElement | null>(null);\n\n  const [isTooltipShown, setIsTooltipShown] = useState<boolean>(false);\n  const [coords, setCoords] = useState<{ top: number; left: number }>({\n    top: 0,\n    left: 0,\n  });\n\n  useLayoutEffect(() => {\n    const node = document.querySelector<HTMLElement>(\n      `#${overlayPortalContainerId}`,\n    );\n    overlayPortalContainerNodeRef.current = node;\n    const tooltipElm = tooltipEl.current;\n    const rootElm = rootEl.current;\n    if (tooltipElm !== null && rootElm !== null) {\n      const { top, left } = coords;\n      const tooltipSpacing = 15;\n      const tooltipHeight = tooltipElm.offsetHeight;\n      const tooltipWidth = tooltipElm.offsetWidth;\n      let tooltipTopValue = top - tooltipSpacing - tooltipHeight;\n      let tooltipLeftValue = left - tooltipWidth / 2;\n      if (tooltipTopValue < 0 || tooltipPosition === TooltipPosition.Bottom) {\n        // tooltip will be above the window\n        tooltipTopValue = top + tooltipSpacing * 2;\n        tooltipElm.classList.add(flipArrowClassName);\n      } else {\n        tooltipElm.classList.remove(flipArrowClassName);\n      }\n      if (tooltipLeftValue < tooltipSpacing) {\n        tooltipLeftValue = tooltipSpacing;\n      }\n      if (\n        tooltipLeftValue + (tooltipWidth + tooltipSpacing) >\n        window.innerWidth\n      ) {\n        // tooltip will exceed the windows width\n        tooltipLeftValue = window.innerWidth - tooltipWidth - tooltipSpacing;\n      }\n      if (window.innerWidth - left < tooltipSpacing * 3) {\n        // tooltip is at the far end of the screen\n        tooltipElm.classList.add(farEndOfScreenToggleClass);\n      } else {\n        tooltipElm.classList.remove(farEndOfScreenToggleClass);\n      }\n      tooltipElm.style.cssText = `\n        left: ${tooltipLeftValue}px;\n        top: ${tooltipTopValue}px;\n        opacity: 1;\n      `;\n    }\n  }, [isTooltipShown, coords, tooltipPosition]);\n  const overlayPortalContainerNode = overlayPortalContainerNodeRef.current;\n\n  const arrow = overrideStyles ? null : (\n    <ArrowContainer\n      $position={tooltipPosition}\n      className={arrowContainerClassName}\n    >\n      <Arrow $theme={theme} $position={tooltipPosition} />\n    </ArrowContainer>\n  );\n\n  let tooltip: React.ReactPortal | null;\n  if (\n    isTooltipShown !== false &&\n    overlayPortalContainerNode !== null &&\n    explanation\n  ) {\n    tooltip = ReactDOM.createPortal(\n      <TooltipBase\n        ref={tooltipEl}\n        $theme={theme}\n        $overrideStyles={overrideStyles}\n      >\n        {explanation}\n        {arrow}\n      </TooltipBase>,\n      overlayPortalContainerNode,\n    );\n  } else {\n    tooltip = null;\n  }\n\n  const onMouseEnter = (e: React.MouseEvent<HTMLSpanElement>) => {\n    setCoords({ top: e.clientY, left: e.clientX });\n    if (delay) {\n      timeout = setTimeout(() => setIsTooltipShown(true), delay) as any;\n    } else {\n      setIsTooltipShown(true);\n    }\n  };\n  const onMouseLeave = (e: React.MouseEvent<HTMLSpanElement>) => {\n    setCoords({ top: e.clientY, left: e.clientX });\n    clearTimeout(timeout);\n    setIsTooltipShown(false);\n  };\n  const onMouseMove = (e: React.MouseEvent<HTMLSpanElement>) => {\n    setCoords({ top: e.clientY, left: e.clientX });\n  };\n\n  if (children !== undefined) {\n    return (\n      <GenericSpan\n        onMouseEnter={onMouseEnter}\n        onMouseMove={onMouseMove}\n        onMouseLeave={onMouseLeave}\n        ref={rootEl}\n        style={{ cursor }}\n      >\n        {children}\n        {tooltip}\n      </GenericSpan>\n    );\n  } else {\n    return (\n      <Root\n        onMouseEnter={onMouseEnter}\n        onMouseMove={onMouseMove}\n        onMouseLeave={onMouseLeave}\n        style={{ cursor }}\n        ref={rootEl}\n      >\n        <MoreInformationI dangerouslySetInnerHTML={{ __html: infoCircleSVG }} />\n        {tooltip}\n      </Root>\n    );\n  }\n};\n\nexport default Tooltip;\n","import { useStaticData } from '../dataProvider';\nimport { Datum as SearchDatum } from 'react-panel-search';\nimport { DataFlagType } from '../types/graphQL/graphQLTypes';\n\n/**\n * Adapter hook: replaces Apollo GraphQL query with static BLS data.\n * Returns regions as \"cities\" and regionTypes as \"countries\" to match\n * the original Metroverse data shape.\n */\n\ninterface CityDatum {\n  cityId: string;  // regionId\n  name: string;\n  countryId: string;  // regionType slug\n  id: string;  // regionId\n  nameList: string[] | null;\n  centroidLat: number | null;\n  centroidLon: number | null;\n  population: number | null;\n  gdppc: number | null;\n  incomeClass: null;\n  region: null;\n  regionPopRank: null;\n  regionGdppcRank: null;\n  dataFlag: DataFlagType;\n}\n\ninterface CountryDatum {\n  countryId: string;  // regionType slug\n  code: string;\n  nameShortEn: string;  // regionType display name\n  id: string;\n}\n\ninterface RegionDatum {\n  regionId: string;\n  regionName: string;\n}\n\ninterface SuccessResponse {\n  countries: CountryDatum[];\n  cities: CityDatum[];\n  regions: RegionDatum[];\n}\n\nconst regionTypeLabels: Record<string, string> = {\n  'National': 'National',\n  'State': 'States',\n  'Metro': 'Metropolitan Areas',\n};\n\nconst useGlobalLocationData = () => {\n  const { data: blsData, loading, error } = useStaticData();\n\n  if (!blsData) {\n    return { loading, error, data: undefined };\n  }\n\n  // Map regionTypes to \"countries\"\n  const regionTypes = Array.from(new Set(blsData.regions.map((r) => r.regionType)));\n  const countries: CountryDatum[] = regionTypes.map((rt) => ({\n    countryId: rt,\n    code: rt.toLowerCase(),\n    nameShortEn: regionTypeLabels[rt] || rt,\n    id: rt,\n  }));\n\n  // Map regions to \"cities\"\n  const cities: CityDatum[] = blsData.regions.map((r) => ({\n    cityId: r.regionId,\n    name: r.name,\n    countryId: r.regionType,\n    id: r.regionId,\n    nameList: null,\n    centroidLat: null,\n    centroidLon: null,\n    population: null,\n    gdppc: null,\n    incomeClass: null,\n    region: null,\n    regionPopRank: null,\n    regionGdppcRank: null,\n    dataFlag: DataFlagType.GREEN,\n  }));\n\n  // No sub-regions in BLS\n  const regions: RegionDatum[] = [];\n\n  const data: SuccessResponse = { countries, cities, regions };\n  return { loading: false, error: undefined, data };\n};\n\nconst getCountryStringId = (id: number | string | null) => `country-${id}`;\n\nexport const locationDataToHierarchicalTreeData = (\n  data: SuccessResponse | undefined,\n) => {\n  const response: SearchDatum[] = [];\n  if (data !== undefined) {\n    const { cities, countries } = data;\n    response.push(\n      ...countries.map(({ nameShortEn, countryId }) => ({\n        id: getCountryStringId(countryId),\n        title: nameShortEn !== null ? nameShortEn : 'Unknown',\n        parent_id: null,\n        level: '0',\n      })),\n      ...cities.map(({ cityId: id, name, countryId }) => {\n        return {\n          id,\n          title: name !== null ? name : 'Unknown Region ' + id,\n          parent_id: getCountryStringId(countryId),\n          level: '1',\n        };\n      }),\n    );\n  }\n  return response;\n};\n\nexport const getPopulationScale = () => {\n  // Stub - no population data for BLS regions\n  return () => 5;\n};\n\nexport const getGdpPppScale = () => {\n  // Stub - no GDP PPP data for BLS regions\n  return () => 5;\n};\n\nexport const useGlobalLocationHierarchicalTreeData = () => {\n  const { loading, error, data: responseData } = useGlobalLocationData();\n  const data = locationDataToHierarchicalTreeData(responseData);\n  return { loading, error, data };\n};\n\nexport default useGlobalLocationData;\n","import React from \"react\";\nimport styled, { keyframes } from \"styled-components/macro\";\n\nconst baseSize = 30; // in px\n\nconst Ring = styled.div<{ size: number | undefined }>`\n  display: inline-block;\n  position: relative;\n  width: ${({ size }) => (size ? size : baseSize)}px;\n  height: ${({ size }) => (size ? size : baseSize)}px;\n  margin-right: 0.6rem;\n`;\nconst animation = keyframes`\n  to {\n    transform: rotate(360deg);\n  }\n`;\n\nconst ChildBase = styled.div<{\n  themeColor: string | undefined;\n  size: number | undefined;\n}>`\n  box-sizing: border-box;\n  display: block;\n  position: absolute;\n  width: ${({ size }) => (size ? size * 0.8 : baseSize * 0.8)}px;\n  height: ${({ size }) => (size ? size * 0.8 : baseSize * 0.8)}px;\n  margin: ${({ size }) => (size ? size * 0.1 : baseSize * 0.1)}px;\n  border: ${({ size }) => (size ? size * 0.1 : baseSize * 0.1)}px solid\n    ${({ themeColor }) => (themeColor ? themeColor : \"#bebebe\")};\n  border-radius: 50%;\n  animation: ${animation} 1.2s cubic-bezier(0.5, 0, 0.5, 1) infinite;\n  border-color: ${({ themeColor }) => (themeColor ? themeColor : \"#bebebe\")}\n    transparent transparent transparent;\n`;\n\nconst FirstChild = styled(ChildBase)`\n  animation-delay: -0.45s;\n`;\nconst SecondChild = styled(ChildBase)`\n  animation-delay: -0.3s;\n`;\nconst ThirdChild = styled(ChildBase)`\n  animation-delay: -0.15s;\n`;\n\ninterface Props {\n  color?: string;\n  size?: number; // in px\n}\n\nconst SimpleLoader = (props: Props) => {\n  const { color, size } = props;\n  return (\n    <Ring size={size}>\n      <FirstChild themeColor={color} size={size}></FirstChild>\n      <SecondChild themeColor={color} size={size}></SecondChild>\n      <ThirdChild themeColor={color} size={size}></ThirdChild>\n      <ChildBase themeColor={color} size={size}></ChildBase>\n    </Ring>\n  );\n};\n\nexport default SimpleLoader;\n","import React from \"react\";\nimport useFluent from \"../../hooks/useFluent\";\nimport styled from \"styled-components/macro\";\n\nconst Root = styled.div`\n  font-style: italic;\n  opacity: 0.75;\n  font-size: 0.8rem;\n  padding: 0.5rem;\n`;\n\nexport default ({\n  fluentMessageId,\n  color,\n}: {\n  fluentMessageId?: string;\n  color?: string;\n}) => {\n  const getString = useFluent();\n  const message = fluentMessageId\n    ? getString(fluentMessageId)\n    : getString(\"global-ui-basic-data-error\");\n  return <Root style={{ color }}>{message}</Root>;\n};\n","import { backgroundDark, ButtonBase } from \"../../styling/styleUtils\";\nimport styled from \"styled-components/macro\";\nimport { breakPointValues } from \"../../styling/GlobalGrid\";\nimport { DataFlagType } from \"../../types/graphQL/graphQLTypes\";\n\nexport const collapsedSizeMediaQueryValues = {\n  min: breakPointValues.width.small + 1,\n  max: 1280,\n};\n\nexport const collapsedSizeMediaQuery = `\n  screen and\n  (min-width: ${collapsedSizeMediaQueryValues.min}px) and\n  (max-width: ${collapsedSizeMediaQueryValues.max}px)\n`;\n\nexport const textClassName = \"expanding-button-responsive-text\";\n\nexport const ExpandingButton = styled(ButtonBase)`\n  margin-right: 0.25rem;\n  position: relative;\n  font-size: 0.85rem;\n\n  @media ${collapsedSizeMediaQuery} {\n    background-color: ${backgroundDark};\n    border-radius: 4000px;\n    position: absolute;\n    left: 0;\n    border: solid 2px transparent;\n    display: flex;\n    justify-content: center;\n    outline: none;\n    font-size: 0.7rem;\n    padding: 0;\n\n    span {\n      margin: 0;\n      width: 1.3rem;\n      height: 1.3rem;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n\n      svg {\n        padding: 0;\n        width: 0.75rem;\n        height: 0.75rem;\n        fill: #fff;\n      }\n    }\n\n    .${textClassName} {\n      white-space: nowrap;\n      opacity: 0;\n      width: 0;\n      /* max-width needed for safari */\n      max-width: 0;\n      transition: all 0.15s ease-in-out;\n      color: #fff;\n      border-top-right-radius: 4000px;\n      border-bottom-right-radius: 4000px;\n      background-color: ${backgroundDark};\n      display: flex;\n      align-items: center;\n      padding-left: 0;\n      pointer-events: none;\n      overflow: hidden;\n    }\n\n    &:hover {\n      box-shadow: 0px 0px 0px 1px #fff;\n      z-index: 100;\n\n      .${textClassName} {\n        opacity: 1;\n        width: 118px;\n        /* max-width needed for safari */\n        max-width: 118px;\n        padding-left: 0.15rem;\n      }\n    }\n  }\n`;\n\n/* Utilities for new data quality indicators:\n\nIn the database, data quality levels are defined as\nGREEN, YELLOW, ORANGE, and RED.\n\nIn the new data quality indicators, the following\nchanges are implemented:\n\n  GREEN and YELLOW -> \"high quality\"\n  ORANGE -> \"medium quality\"\n  RED -> \"low quality\"\n\n*/\nexport enum NewDataQualityLevel {\n  HIGH = \"high-quality\",\n  MEDIUM = \"medium-quality\",\n  LOW = \"low-quality\",\n}\n\nexport const dataQualityColors: any = new Map([\n  [NewDataQualityLevel.LOW, \"#b12417\"],\n  [NewDataQualityLevel.MEDIUM, \"#f3b23d\"],\n  [NewDataQualityLevel.HIGH, \"#4eaba7\"],\n]);\n\nexport const getNewDataQualityLevel = (\n  dataFlag: DataFlagType,\n): NewDataQualityLevel => {\n  let assignedNewDataQualityLevel: any;\n  if (dataFlag === DataFlagType.GREEN) {\n    assignedNewDataQualityLevel = NewDataQualityLevel.HIGH;\n  } else if (\n    dataFlag === DataFlagType.YELLOW ||\n    dataFlag === DataFlagType.ORANGE\n  ) {\n    assignedNewDataQualityLevel = NewDataQualityLevel.MEDIUM;\n  } else if (dataFlag === DataFlagType.RED) {\n    assignedNewDataQualityLevel = NewDataQualityLevel.LOW;\n  }\n\n  return assignedNewDataQualityLevel;\n};\n","import React from \"react\";\nimport styled from \"styled-components/macro\";\nimport Tooltip, { TooltipTheme } from \"../../components/general/Tooltip\";\nimport { secondaryFont, baseColor } from \"../styleUtils\";\nimport useFluent from \"../../hooks/useFluent\";\n\nconst RootDark = styled.small`\n  color: rgba(255, 255, 255, 0.5);\n  width: 100%;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: block;\n\n  .panel-search-matched-keyword {\n    color: #fff;\n  }\n`;\n\nconst RootLight = styled.small`\n  color: rgba(0, 0, 0, 0.5);\n  width: 100%;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: block;\n\n  .panel-search-matched-keyword {\n    color: ${baseColor};\n  }\n`;\n\nconst KeywordText = styled.div`\n  font-family: ${secondaryFont};\n`;\n\nconst KeywordElement = ({\n  keywords,\n  theme,\n  query,\n}: {\n  keywords: string;\n  theme: TooltipTheme;\n  query: string;\n}) => {\n  const safeQuery = new RegExp(query.replace(/[^\\w\\s]/gi, \"\").trim(), \"gi\");\n  const getString = useFluent();\n  const text = getString(\"global-ui-includes-keywords\", { keywords });\n  const __html = getString(\"global-ui-includes-keywords\", { keywords }).replace(\n    safeQuery,\n    (match: string) =>\n      `<strong class='panel-search-matched-keyword'>${match}</strong>`,\n  );\n  const Root = theme === TooltipTheme.Dark ? RootDark : RootLight;\n  return (\n    <Tooltip\n      explanation={<KeywordText>{text}</KeywordText>}\n      delay={500}\n      theme={theme}\n    >\n      <Root dangerouslySetInnerHTML={{ __html }} />\n    </Tooltip>\n  );\n};\n\nexport default (theme: TooltipTheme) =>\n  (match: string[], rest: string[], query: string) => {\n    const total = match.length + rest.length;\n    if (\n      !(match.length === total && rest.length === 0) &&\n      !(rest.length === total && match.length === 0)\n    ) {\n      const keywords = [...match, ...rest].join(\", \");\n      return <KeywordElement keywords={keywords} theme={theme} query={query} />;\n    } else {\n      return null;\n    }\n  };\n","import React from \"react\";\nimport { ExtendedSearchDatum } from \"./Utils\";\nimport PanelSearch from \"react-panel-search\";\nimport useFluent from \"../../hooks/useFluent\";\nimport matchingKeywordFormatter from \"../../styling/utils/panelSearchKeywordFormatter\";\nimport { TooltipTheme } from \"../../components/general/Tooltip\";\n\ninterface Props {\n  data: ExtendedSearchDatum[];\n  setHighlighted: (val: ExtendedSearchDatum) => void;\n  onPanelHover: (val: ExtendedSearchDatum | null) => void;\n  onTraverseLevel: (\n    val: ExtendedSearchDatum,\n    direction: \"asc\" | \"desc\",\n  ) => void;\n  highlighted: ExtendedSearchDatum | null;\n  focusOnRender: boolean;\n}\n\nconst SearchBar = (props: Props) => {\n  const {\n    data,\n    setHighlighted,\n    onPanelHover,\n    onTraverseLevel,\n    highlighted,\n    focusOnRender,\n  } = props;\n  const getString = useFluent();\n  return (\n    <PanelSearch\n      data={data}\n      topLevelTitle={getString(\"global-text-countries\")}\n      onSelect={(val) => setHighlighted(val as ExtendedSearchDatum)}\n      onHover={onPanelHover}\n      onTraverseLevel={onTraverseLevel}\n      selectedValue={highlighted}\n      disallowSelectionLevels={[\"0\"]}\n      defaultPlaceholderText={getString(\"global-ui-type-a-city-name\")}\n      showCount={true}\n      resultsIdentation={1.75}\n      focusOnRender={focusOnRender}\n      matchingKeywordFormatter={matchingKeywordFormatter(TooltipTheme.Dark)}\n    />\n  );\n};\n\nexport default React.memo(SearchBar);\n","import React, { useCallback } from \"react\";\nimport styled from \"styled-components/macro\";\nimport {\n  secondaryFont,\n  primaryColor,\n  secondaryColor,\n} from \"../../styling/styleUtils\";\nimport Heading from \"./Heading\";\nimport { ExtendedSearchDatum } from \"./Utils\";\nimport { useHistory } from \"react-router-dom\";\nimport { Routes } from \"../../routing/routes\";\nimport useGlobalLocationData, {\n  locationDataToHierarchicalTreeData,\n} from \"../../hooks/useGlobalLocationData\";\nimport SimpleLoader from \"../../components/transitionStateComponents/SimpleLoader\";\nimport SimpleError from \"../../components/transitionStateComponents/SimpleError\";\nimport SearchBar from \"./SearchBar\";\nimport useFluent from \"../../hooks/useFluent\";\n\nconst Root = styled.div`\n  width: 100vw;\n  height: 100vh;\n  position: relative;\n  background-color: #08111e;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n`;\n\nconst CenterPanel = styled.div`\n  width: 90%;\n  max-width: 600px;\n  padding: 2rem;\n`;\n\nconst SearchContainer = styled.div`\n  width: 100%;\n  margin: 1.5rem auto 0;\n  font-family: ${secondaryFont};\n\n  .react-panel-search-search-bar-input,\n  button {\n    font-family: ${secondaryFont};\n  }\n\n  .react-panel-search-search-bar-input {\n    text-transform: uppercase;\n    font-size: 0.85rem;\n    background-color: rgba(0, 0, 0, 0.85);\n    color: #fff;\n    border: solid 1px #fff;\n    padding-top: 1rem;\n    padding-bottom: 1rem;\n    padding-right: 3rem;\n    box-shadow: none;\n    outline: none;\n\n    &::placeholder {\n      color: #fff;\n    }\n    &:focus::placeholder {\n      color: rgba(0, 0, 0, 0);\n    }\n  }\n\n  .react-panel-search-search-bar-dropdown-arrow {\n    background-color: transparent;\n  }\n  .react-panel-search-current-tier-breadcrumb-outer,\n  .react-panel-search-next-button,\n  .react-panel-search-search-bar-dropdown-arrow {\n    svg polyline {\n      stroke: #fff;\n    }\n  }\n\n  .react-panel-search-search-bar-clear-button {\n    background-color: transparent;\n    color: #fff;\n  }\n\n  .react-panel-search-search-bar-search-icon {\n    svg path {\n      fill: #fff;\n    }\n  }\n\n  .react-panel-search-search-results {\n    background-color: rgba(0, 0, 0, 0.85);\n    border: solid 1px #fff;\n\n    ::-webkit-scrollbar-thumb {\n      background-color: rgba(255, 255, 255, 0.3);\n    }\n    ::-webkit-scrollbar-track {\n      background-color: rgba(255, 255, 255, 0.1);\n    }\n  }\n\n  .react-panel-search-current-tier-title,\n  .react-panel-search-current-tier-breadcrumb-outer {\n    color: #fff;\n    border-color: ${primaryColor};\n  }\n\n  .react-panel-search-current-tier-breadcrumb-outer:hover {\n    background-color: rgba(255, 255, 255, 0.35);\n  }\n\n  .react-panel-search-list-item {\n    background-color: transparent;\n    color: #fff;\n    &:hover {\n      background-color: rgba(255, 255, 255, 0.35);\n    }\n  }\n\n  .react-panel-search-highlighted-item {\n    background-color: rgba(255, 255, 255, 0.35);\n  }\n\n  .react-panel-search-search-results:hover {\n    .react-panel-search-highlighted-item:not(:hover) {\n      background-color: transparent;\n    }\n  }\n\n  .react-panel-search-list-item-container {\n    strong {\n      color: ${primaryColor};\n    }\n  }\n\n  .react-panel-search-list-item-container.react-panel-search-list-no-results {\n    color: #fff;\n  }\n`;\n\nconst LoadingContainer = styled.div`\n  font-size: 1rem;\n  line-height: 0;\n  display: flex;\n  align-items: center;\n  height: 3.1875rem;\n  text-transform: uppercase;\n  font-size: 0.85rem;\n  background-color: rgba(0, 0, 0, 0.35);\n  color: rgba(255, 255, 255, 0.75);\n  border: solid 1px #fff;\n  padding-left: 0.5rem;\n`;\n\nconst QuickLinks = styled.div`\n  display: flex;\n  gap: 0.75rem;\n  flex-wrap: wrap;\n  margin-top: 1.5rem;\n  justify-content: center;\n`;\n\nconst QuickLink = styled.button`\n  background-color: transparent;\n  border: 1px solid ${secondaryColor};\n  color: #fff;\n  padding: 0.5rem 1rem;\n  cursor: pointer;\n  font-family: ${secondaryFont};\n  font-size: 0.8rem;\n  text-transform: uppercase;\n  transition: background-color 0.2s;\n\n  &:hover {\n    background-color: ${secondaryColor};\n  }\n`;\n\nconst Attribution = styled.div`\n  position: fixed;\n  bottom: 1rem;\n  left: 0;\n  right: 0;\n  text-align: center;\n  color: rgba(255, 255, 255, 0.4);\n  font-size: 0.7rem;\n  font-family: ${secondaryFont};\n\n  a {\n    color: rgba(255, 255, 255, 0.6);\n    text-decoration: none;\n    &:hover {\n      color: #fff;\n    }\n  }\n`;\n\nconst Landing = () => {\n  const { loading, error, data } = useGlobalLocationData();\n  const history = useHistory();\n  const getString = useFluent();\n\n  const navigateToRegion = useCallback(\n    (regionId: string) => {\n      const route = Routes.CityOverview.replace(\":cityId\", regionId);\n      history.push(route);\n    },\n    [history],\n  );\n\n  const onSelect = useCallback(\n    (val: ExtendedSearchDatum) => {\n      if (val.level !== \"0\") {\n        navigateToRegion(val.id as string);\n      }\n    },\n    [navigateToRegion],\n  );\n\n  let searchBar: React.ReactElement<any>;\n  if (loading === true) {\n    searchBar = (\n      <LoadingContainer>\n        <SimpleLoader />\n        {getString(\"global-ui-loading-cities\")}...\n      </LoadingContainer>\n    );\n  } else if (error !== undefined) {\n    console.error(error);\n    searchBar = (\n      <LoadingContainer>\n        <SimpleError color={\"white\"} />\n      </LoadingContainer>\n    );\n  } else if (data !== undefined) {\n    const searchData = locationDataToHierarchicalTreeData(data).map((d) => ({\n      ...d,\n      population: 0,\n      gdp: 0,\n    }));\n    searchBar = (\n      <SearchBar\n        data={searchData}\n        setHighlighted={onSelect}\n        onPanelHover={() => {}}\n        onTraverseLevel={() => {}}\n        highlighted={null}\n        focusOnRender={true}\n      />\n    );\n  } else {\n    searchBar = <></>;\n  }\n\n  return (\n    <Root>\n      <CenterPanel>\n        <Heading />\n        <SearchContainer>{searchBar}</SearchContainer>\n        <QuickLinks>\n          <QuickLink onClick={() => navigateToRegion(\"national-united-states\")}>\n            United States (National)\n          </QuickLink>\n          <QuickLink onClick={() => navigateToRegion(\"state-california\")}>\n            California\n          </QuickLink>\n          <QuickLink onClick={() => navigateToRegion(\"state-new-york\")}>\n            New York\n          </QuickLink>\n          <QuickLink onClick={() => navigateToRegion(\"state-texas\")}>\n            Texas\n          </QuickLink>\n        </QuickLinks>\n      </CenterPanel>\n      <Attribution>\n        Based on{\" \"}\n        <a\n          href=\"https://metroverse.cid.harvard.edu/\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          Metroverse\n        </a>{\" \"}\n        by Harvard Growth Lab. Licensed under CC BY-NC-SA 4.0.\n        Data from{\" \"}\n        <a\n          href=\"https://www.bls.gov/oes/\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          BLS OES\n        </a>{\" \"}\n        +{\" \"}\n        <a\n          href=\"https://www.onetonline.org/\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          O*NET\n        </a>\n        .\n      </Attribution>\n    </Root>\n  );\n};\n\nexport default Landing;\n","import { secondaryFont, baseColor } from \"../../styling/styleUtils\";\nimport styled from \"styled-components/macro\";\nimport { breakPointValues } from \"../../styling/GlobalGrid\";\n\nconst smallBreakpoint = 550; // in px\nexport const mediumSmallBreakpoint = 1050; // in px\nexport const columnsToRowsBreakpoint = breakPointValues.width.small; // in px\n\nexport const UtilityBarButtonBase = styled.button`\n  border: none;\n  margin: 0 0.25rem;\n  padding: 0 0.35rem;\n  color: ${baseColor};\n  background-color: transparent;\n  font-size: 0.55rem;\n  font-size: clamp(0.5rem, 1vw, 0.65rem);\n  font-family: ${secondaryFont};\n  text-transform: uppercase;\n  display: flex;\n  align-items: center;\n  outline: 0 solid rgba(255, 255, 255, 0);\n  transition: outline 0.1s ease;\n  flex-shrink: 1;\n\n  &:hover,\n  &:focus {\n    background-color: #fff;\n    outline: 0.25rem solid #fff;\n    color: ${baseColor};\n  }\n\n  @media (max-width: ${mediumSmallBreakpoint}px) {\n    flex-direction: column;\n  }\n\n  @media (max-width: ${columnsToRowsBreakpoint}px) {\n    flex-direction: row;\n  }\n\n  @media (max-width: ${smallBreakpoint}px) {\n    flex-direction: column;\n  }\n`;\n\nexport const SvgBase = styled.span`\n  display: inline-block;\n  width: 1rem;\n  height: 1rem;\n  margin-right: 0.3rem;\n\n  svg {\n    width: 100%;\n    height: 100%;\n\n    path {\n      fill: ${baseColor};\n    }\n  }\n\n  @media (max-width: ${mediumSmallBreakpoint}px) {\n    margin-right: 0;\n    margin-bottom: 0.2rem;\n  }\n\n  @media (max-width: ${columnsToRowsBreakpoint}px) {\n    margin-right: 0.3rem;\n    margin-bottom: 0;\n  }\n\n  @media (max-width: ${smallBreakpoint}px) {\n    margin-right: 0;\n    margin-bottom: 0.2rem;\n  }\n`;\n\nexport const Text = styled.span`\n  width: min-content;\n\n  @media (max-width: 1100px) {\n    max-width: 55px;\n  }\n\n  @media (max-width: ${mediumSmallBreakpoint}px) and (min-width: ${columnsToRowsBreakpoint +\n    1}px) {\n    display: none;\n  }\n\n  @media (max-width: ${columnsToRowsBreakpoint}px) {\n    text-align: center;\n  }\n`;\n\nexport const LargeSvg = styled(SvgBase)`\n  width: 1.4rem;\n  height: 1.4rem;\n\n  @media (max-width: ${mediumSmallBreakpoint}px) {\n    width: 1rem;\n    height: 1rem;\n  }\n`;\n\nexport const TooltipContent = styled.div`\n  font-family: ${secondaryFont};\n  letter-spacing: -0.3px;\n  text-transform: uppercase;\n  font-size: 0.6rem;\n`;\n","import useCurrentCityId from \"./useCurrentCityId\";\nimport useGlobalLocationData from \"./useGlobalLocationData\";\n\nconst useCurrentCity = () => {\n  const cityId = useCurrentCityId();\n  const { loading, data } = useGlobalLocationData();\n\n  const city =\n    cityId && data ? data.cities.find((c) => c.cityId === cityId) : undefined;\n\n  return { loading, city };\n};\n\nexport default useCurrentCity;\n","import React, { useEffect, useRef, useState } from \"react\";\nimport { createPortal } from \"react-dom\";\nimport styled from \"styled-components/macro\";\nimport raw from \"raw.macro\";\nimport useFluent from \"../../../hooks/useFluent\";\nimport { useWindowWidth } from \"../../../contextProviders/appContext\";\nimport DataDisclaimer from \"../../general/dataDisclaimer\";\nimport {\n  UtilityBarButtonBase,\n  columnsToRowsBreakpoint,\n  mediumSmallBreakpoint,\n  SvgBase,\n  Text,\n  TooltipContent,\n  LargeSvg,\n} from \"../Utils\";\nimport screenfull from \"screenfull\";\nimport Tooltip, { TooltipPosition } from \"../../general/Tooltip\";\nimport Guide from \"./guide\";\nimport Share from \"./share\";\n\nconst expandIconSvg = raw(\"../../../assets/icons/expand.svg\");\nconst collapseIconSvg = raw(\"../../../assets/icons/collapse.svg\");\nconst downloadImageIconSvg = raw(\"../../../assets/icons/image-download.svg\");\nconst downloadDataIconSvg = raw(\"../../../assets/icons/download.svg\");\n\nconst UtilityBarRoot = styled.div`\n  display: flex;\n  align-items: center;\n\n  @media (max-width: ${columnsToRowsBreakpoint}px) {\n    justify-content: space-around;\n  }\n`;\n\nconst secondaryHeaderUtilityBarId = \"secondaryHeaderUtilityBarId\";\n\nexport const UtilityBarPortal = () => (\n  <UtilityBarRoot id={secondaryHeaderUtilityBarId} />\n);\n\nexport enum DownloadType {\n  Image = \"image\",\n  Data = \"data\",\n}\n\ninterface Props {\n  onDownloadImageButtonClick?: () => void;\n  onDownloadDataButtonClick?: () => void;\n  returnInline?: boolean;\n  hideGuide?: boolean;\n}\n\nconst UtilityBar = (props: Props) => {\n  const {\n    onDownloadImageButtonClick,\n    onDownloadDataButtonClick,\n    returnInline,\n    hideGuide,\n  } = props;\n  const getString = useFluent();\n\n  const secondaryHeaderUtilityBarContainerNodeRef = useRef<HTMLElement | null>(\n    null,\n  );\n\n  const [isUtilityBarRendered, setIsUtilityBarRendered] =\n    useState<boolean>(false);\n  const [isFullscreen, setIsFullscreen] = useState<boolean>(\n    screenfull.isEnabled && screenfull.isFullscreen,\n  );\n\n  const windowDimensions = useWindowWidth();\n\n  useEffect(() => {\n    const node = document.querySelector<HTMLElement>(\n      `#${secondaryHeaderUtilityBarId}`,\n    );\n    if (node !== null) {\n      secondaryHeaderUtilityBarContainerNodeRef.current = node;\n      setIsUtilityBarRendered(true);\n    }\n  }, []);\n\n  const downloadDataButton = onDownloadDataButtonClick ? (\n    <Tooltip\n      explanation={\n        windowDimensions.width < mediumSmallBreakpoint &&\n        windowDimensions.width > columnsToRowsBreakpoint ? (\n          <TooltipContent>\n            {getString(\"global-ui-download-data\")}\n          </TooltipContent>\n        ) : null\n      }\n      cursor=\"pointer\"\n      tooltipPosition={TooltipPosition.Bottom}\n    >\n      <UtilityBarButtonBase onClick={onDownloadDataButtonClick}>\n        <SvgBase dangerouslySetInnerHTML={{ __html: downloadDataIconSvg }} />\n        <Text>{getString(\"global-ui-download-data\")}</Text>\n      </UtilityBarButtonBase>\n    </Tooltip>\n  ) : null;\n\n  const downloadImageButton = onDownloadImageButtonClick ? (\n    <Tooltip\n      explanation={\n        windowDimensions.width < mediumSmallBreakpoint &&\n        windowDimensions.width > columnsToRowsBreakpoint ? (\n          <TooltipContent>\n            {getString(\"global-ui-download-image\")}\n          </TooltipContent>\n        ) : null\n      }\n      cursor=\"pointer\"\n      tooltipPosition={TooltipPosition.Bottom}\n    >\n      <UtilityBarButtonBase onClick={onDownloadImageButtonClick}>\n        <LargeSvg dangerouslySetInnerHTML={{ __html: downloadImageIconSvg }} />\n        <Text>{getString(\"global-ui-download-image\")}</Text>\n      </UtilityBarButtonBase>\n    </Tooltip>\n  ) : null;\n\n  const onFullScreenClick = () => {\n    const onFullscreenClose = () => setIsFullscreen(false);\n    if (screenfull.isEnabled) {\n      if (!screenfull.isFullscreen) {\n        screenfull.request().then(() => {\n          setTimeout(() => {\n            setIsFullscreen(true);\n            if (screenfull.isEnabled) {\n              screenfull.on(\"change\", onFullscreenClose);\n            }\n          }, 200);\n        });\n      } else {\n        screenfull.exit();\n        screenfull.off(\"change\", onFullscreenClose);\n        setIsFullscreen(false);\n      }\n    }\n  };\n\n  const expandButton = screenfull.isEnabled ? (\n    <Tooltip\n      explanation={\n        windowDimensions.width < mediumSmallBreakpoint &&\n        windowDimensions.width > columnsToRowsBreakpoint ? (\n          <TooltipContent>\n            {!isFullscreen\n              ? getString(\"global-ui-expand\")\n              : getString(\"global-ui-exit\")}\n          </TooltipContent>\n        ) : null\n      }\n      cursor=\"pointer\"\n      tooltipPosition={TooltipPosition.Bottom}\n    >\n      <UtilityBarButtonBase onClick={onFullScreenClick}>\n        <SvgBase\n          dangerouslySetInnerHTML={{\n            __html: !isFullscreen ? expandIconSvg : collapseIconSvg,\n          }}\n        />\n        <Text>\n          {!isFullscreen\n            ? getString(\"global-ui-expand\")\n            : getString(\"global-ui-exit\")}\n        </Text>\n      </UtilityBarButtonBase>\n    </Tooltip>\n  ) : null;\n\n  const guide = hideGuide ? null : <Guide />;\n\n  const content = (\n    <>\n      <Share />\n      {expandButton}\n      {guide}\n      {downloadImageButton}\n      {downloadDataButton}\n      <DataDisclaimer />\n    </>\n  );\n  let output: React.ReactElement<any> | null;\n  if (\n    isUtilityBarRendered === true &&\n    secondaryHeaderUtilityBarContainerNodeRef.current !== null\n  ) {\n    output = createPortal(\n      content,\n      secondaryHeaderUtilityBarContainerNodeRef.current,\n    );\n  } else if (returnInline) {\n    output = content;\n  } else {\n    output = null;\n  }\n\n  return output;\n};\n\nexport default UtilityBar;\n","import React, { useState } from \"react\";\nimport styled, { keyframes } from \"styled-components/macro\";\nimport {\n  UtilityBarButtonBase,\n  mediumSmallBreakpoint,\n  columnsToRowsBreakpoint,\n  SvgBase,\n  Text,\n  TooltipContent,\n} from \"../../navigation/Utils\";\nimport raw from \"raw.macro\";\nimport {\n  baseColor,\n  secondaryFont,\n  primaryColor,\n  primaryHoverColor,\n} from \"../../../styling/styleUtils\";\nimport useFluent from \"../../../hooks/useFluent\";\nimport useCurrentCity from \"../../../hooks/useCurrentCity\";\nimport Modal from \"../../standardModal\";\nimport { Link } from \"react-router-dom\";\nimport { Routes } from \"../../../routing/routes\";\nimport Tooltip, { TooltipPosition } from \"../../general/Tooltip\";\nimport { useWindowWidth } from \"../../../contextProviders/appContext\";\nimport {\n  dataQualityColors,\n  getNewDataQualityLevel,\n  NewDataQualityLevel,\n} from \"../Utils\";\n\nconst dataIconSvg = raw(\"../../../assets/icons/disclaimer.svg\");\n\nconst DisclaimerSvg = styled(SvgBase)<{ $flagColor: string }>`\n  width: 1.2rem;\n  height: 1.2rem;\n\n  svg {\n    .cls-1 {\n      fill: none;\n      stroke: ${({ $flagColor }) => $flagColor};\n    }\n    .cls-2 {\n      fill: ${({ $flagColor }) => $flagColor};\n    }\n    circle {\n      fill: ${({ $flagColor }) => $flagColor};\n    }\n  }\n\n  @media (max-width: ${mediumSmallBreakpoint}px) {\n    width: 1rem;\n    height: 1rem;\n  }\n`;\n\nconst DisclaimerSvgLarge = styled(DisclaimerSvg)`\n  width: 2rem;\n  height: 2rem;\n  margin-right: 0.875rem;\n\n  @media (max-width: ${mediumSmallBreakpoint}px) {\n    width: 1.875rem;\n    height: 1.875rem;\n  }\n`;\n\nconst growIn = keyframes`\n  0% {\n    transform: scale(0.4);\n  }\n\n  100% {\n    transform: scale(1);\n  }\n`;\n\nconst Root = styled.div`\n  background-color: #fff;\n  position: relative;\n  animation: ${growIn} 0.1s normal forwards ease-in-out;\n  animation-iteration-count: 1;\n  color: ${baseColor};\n  height: 100%;\n  padding: 1rem 3rem 2rem;\n  width: 600px;\n  max-width: 100%;\n  box-sizing: border-box;\n\n  @media screen and (max-height: 800px) {\n    overflow: visible;\n    padding: 1rem;\n  }\n`;\n\nconst Title = styled.h1`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  text-align: center;\n  text-transform: uppercase;\n  font-weight: 400;\n  border-bottom: solid 1px ${baseColor};\n  padding-bottom: 0.875rem;\n`;\n\nconst Para = styled.p`\n  font-size: 0.875rem;\n  margin: 1rem 0;\n\n  a {\n    color: ${primaryColor};\n\n    &:hover {\n      color: ${primaryHoverColor};\n    }\n  }\n`;\n\nconst CloseButton = styled.button`\n  background-color: transparent;\n  border-none;\n  padding: 0 0.5rem;\n  color: ${baseColor};\n  text-transform: uppercase;\n  font-size: 1.5rem;\n  font-family: ${secondaryFont};\n  position: absolute;\n  right: 0;\n  top: 0;\n`;\n\nconst EnlargedTextLabel = styled(Text)`\n  width: max-content;\n`;\n\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nconst DataLegend = styled.div`\n  margin-right: 0.2rem;\n  display: inline-flex;\n  flex-direction: row-reverse;\n  align-items: center;\n`;\n\nconst LargeDot = styled.div`\n  width: 0.9rem;\n  height: 0.9rem;\n  border-radius: 1000px;\n  margin-right: 0.275rem;\n`;\n\nconst DataDisclaimer = () => {\n  const getString = useFluent();\n  const currentCity = useCurrentCity();\n  const [modalOpen, setModalOpen] = useState<boolean>(false);\n  const windowDimensions = useWindowWidth();\n\n  let flagColor: string = baseColor;\n  let alertTitle: string = \"\";\n  let description: string = \"\";\n  if (currentCity && currentCity.city) {\n    const { dataFlag } = currentCity.city;\n    const dataQualityLevel = getNewDataQualityLevel(dataFlag);\n    flagColor = dataQualityColors.get(dataQualityLevel);\n\n    if (dataQualityLevel === NewDataQualityLevel.HIGH) {\n      alertTitle = getString(\"data-disclaimer-high-quality-topbar-title\");\n      description = getString(\"data-disclaimer-high-quality-desc\");\n    } else if (dataQualityLevel === NewDataQualityLevel.MEDIUM) {\n      alertTitle = getString(\"data-disclaimer-medium-quality-topbar-title\");\n      description = getString(\"data-disclaimer-medium-quality-desc\");\n    } else if (dataQualityLevel === NewDataQualityLevel.LOW) {\n      alertTitle = getString(\"data-disclaimer-low-quality-topbar-title\");\n      description = getString(\"data-disclaimer-low-quality-desc\");\n    }\n  }\n\n  const modal = modalOpen ? (\n    <Modal onClose={() => setModalOpen(false)} width={\"600px\"} height={\"600px\"}>\n      <Root>\n        <Title>\n          <DisclaimerSvgLarge\n            dangerouslySetInnerHTML={{ __html: dataIconSvg }}\n            $flagColor={flagColor}\n          />\n          {getString(\"global-ui-data-disclaimer\")} - {alertTitle}\n        </Title>\n        <Para dangerouslySetInnerHTML={{ __html: description }} />\n        <Para>\n          {getString(\"data-disclaimer-data-page-lead-up\")}\n          &nbsp;\n          <Link to={Routes.FaqBase}>\n            {getString(\"data-disclaimer-data-page-link-text\")}\n          </Link>\n        </Para>\n        <Para\n          dangerouslySetInnerHTML={{\n            __html: getString(\"data-disclaimer-contact\"),\n          }}\n        />\n        <CloseButton onClick={() => setModalOpen(false)}></CloseButton>\n      </Root>\n    </Modal>\n  ) : null;\n\n  return (\n    <>\n      <Tooltip\n        explanation={\n          windowDimensions.width < mediumSmallBreakpoint &&\n          windowDimensions.width > columnsToRowsBreakpoint ? (\n            <TooltipContent>\n              {getString(\"global-ui-data-disclaimer\")}\n            </TooltipContent>\n          ) : null\n        }\n        cursor=\"pointer\"\n        tooltipPosition={TooltipPosition.Bottom}\n      >\n        <UtilityBarButtonBase onClick={() => setModalOpen(true)}>\n          <LargeDot style={{ backgroundColor: flagColor }} />\n          <EnlargedTextLabel>{alertTitle}</EnlargedTextLabel>\n        </UtilityBarButtonBase>\n      </Tooltip>\n      {modal}\n    </>\n  );\n};\n\nexport default DataDisclaimer;\n","import React, { useState } from \"react\";\nimport Modal from \"../../../standardModal\";\nimport styled, { keyframes } from \"styled-components/macro\";\nimport {\n  backgroundDark,\n  primaryColor,\n  primaryHoverColor,\n} from \"../../../../styling/styleUtils\";\nimport CityverseLogoURL from \"../../../../assets/icons/cities-logo.svg\";\n\nconst growIn = keyframes`\n  0% {\n    transform: scale(0.4);\n  }\n\n  100% {\n    transform: scale(1);\n  }\n`;\n\nconst Root = styled.div`\n  background-color: ${backgroundDark};\n  position: relative;\n  animation: ${growIn} 0.1s normal forwards ease-in-out;\n  animation-iteration-count: 1;\n  color: #fff;\n  height: 100%;\n  padding: 2rem;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  text-align: center;\n  width: 500px;\n\n  @media screen and (max-width: 700px) {\n    width: auto;\n  }\n\n  @media screen and (max-height: 800px) {\n    overflow: visible;\n  }\n`;\n\nconst Logo = styled.img`\n  width: 14rem;\n`;\n\nconst Text = styled.div`\n  margin: 2rem 0;\n  text-transform: uppercase;\n  font-size: 1.25rem;\n`;\n\nconst StartGuideButton = styled.button`\n  background-color: ${primaryHoverColor};\n  color: #fff;\n  text-transform: uppercase;\n  border: none;\n  padding: 1.3rem 1.5rem;\n  letter-spacing: 1px;\n  margin-bottom: 0.75rem;\n  font-weight: 600;\n\n  &:hover {\n    background-color: ${primaryColor};\n  }\n`;\n\nconst DismissButton = styled.button`\n  border: none;\n  padding: 0.7rem;\n  text-transform: uppercase;\n  letter-spacing: 1px;\n  margin-bottom: 2rem;\n  background-color: #676c75;\n  color: #fff;\n`;\n\nconst CheckboxLabel = styled.label`\n  font-size: 0.9rem;\n  color: #fff;\n  display: flex;\n  align-items: center;\n`;\n\nconst Checkbox = styled.input`\n  margin-right: 5px;\n`;\n\nconst modalVersion = \"0_1\";\nconst localStorageKey = \"localStorageFirstTimeGuideModalKey\" + modalVersion;\nlet dismissedSinceSession = false;\n\ninterface Props {\n  startGuide: () => void;\n}\n\nconst FirstTimeModal = ({ startGuide }: Props) => {\n  const initialCheckedValue = parseInt(\n    localStorage.getItem(localStorageKey) as any,\n    10,\n  );\n  const [modalOpen, setModalOpen] = useState<boolean>(\n    isNaN(initialCheckedValue) || initialCheckedValue < 5,\n  );\n  const [checked, setChecked] = useState<boolean>(false);\n  const closeModal = () => {\n    setModalOpen(false);\n    dismissedSinceSession = true;\n    if (checked) {\n      localStorage.setItem(localStorageKey, \"5\");\n    } else {\n      const newCheckedCount = isNaN(initialCheckedValue)\n        ? 0\n        : initialCheckedValue + 1;\n      localStorage.setItem(localStorageKey, newCheckedCount.toString());\n    }\n  };\n\n  const onStart = () => {\n    setModalOpen(false);\n    dismissedSinceSession = true;\n    localStorage.setItem(localStorageKey, \"5\");\n    startGuide();\n  };\n\n  if (modalOpen && !dismissedSinceSession) {\n    return (\n      <Modal onClose={closeModal} width={\"800px\"} height={\"400px\"}>\n        <Root>\n          <Logo src={CityverseLogoURL} />\n          <Text>Learn the Metroverse basics</Text>\n          <StartGuideButton onClick={onStart}>\n            Follow our step-by-step guide\n          </StartGuideButton>\n          <DismissButton onClick={closeModal}>Not Now</DismissButton>\n          <CheckboxLabel htmlFor=\"dont-show-tutorial-on-start-again\">\n            <Checkbox\n              type=\"checkbox\"\n              id=\"dont-show-tutorial-on-start-again\"\n              checked={checked}\n              onChange={(e) => setChecked(e.target.checked)}\n            />\n            Don't show it again\n          </CheckboxLabel>\n        </Root>\n      </Modal>\n    );\n  }\n  return null;\n};\n\nexport default FirstTimeModal;\n","import React from \"react\";\nimport Joyride, { CallBackProps, Step } from \"react-joyride\";\nimport styled from \"styled-components\";\nimport { primaryColor } from \"../../../../styling/styleUtils\";\nimport FirstTimeModal from \"./FirstTimeModal\";\n\nconst Text = styled.div`\n  text-align: left;\n`;\nexport const joyrideClassNames = {\n  vizOptions: \"joyride-element-viz-options\",\n  searchInGraph: \"joyride-element-search-in-graph\",\n  searchCountryInGraph: \"joyride-element-search-country-in-graph\",\n  howToRead: \"joyride-element-how-to-read\",\n  filterOptions: \"joyride-element-filter-viz-options\",\n  vizToggle: \"joyride-element-viz-toggle\",\n  benchmarkSelection: \"joyride-element-benchmark-selection\",\n  compareEconComp: \"joyride-element-compare-econ-comp\",\n  colorLegend: \"joyride-element-color-legend\",\n  colorLegendNoFilter: \"joyride-element-color-legend-no-filter\",\n  guideButton: \"joyride-element-guide-button\",\n};\n\nconst steps: Step[] = [\n  {\n    target: \".\" + joyrideClassNames.vizOptions,\n    // tslint:disable-next-line:max-line-length\n    content: (\n      <Text>\n        With the default visualization generated on the screen, use the Viz\n        Option controls to further customize your data visualization.\n      </Text>\n    ),\n    disableBeacon: true,\n    placement: \"left-start\",\n  },\n  {\n    target: \".\" + joyrideClassNames.searchInGraph,\n    // tslint:disable-next-line:max-line-length\n    content: (\n      <Text>\n        Search for a specific industry or knowledge cluster within the\n        visualization by typing its name here.\n      </Text>\n    ),\n    disableBeacon: true,\n    placement: \"left-start\",\n  },\n  {\n    target: \".\" + joyrideClassNames.searchCountryInGraph,\n    // tslint:disable-next-line:max-line-length\n    content: (\n      <Text>\n        Search for a specific city within the visualization by typing its name\n        here.\n      </Text>\n    ),\n    disableBeacon: true,\n    placement: \"left-start\",\n  },\n  {\n    target: \".\" + joyrideClassNames.vizToggle,\n    // tslint:disable-next-line:max-line-length\n    content: (\n      <Text>Click here to toggle between 2 types of visualizations.</Text>\n    ),\n    disableBeacon: true,\n    placement: \"left-start\",\n  },\n  {\n    target: \".\" + joyrideClassNames.howToRead,\n    // tslint:disable-next-line:max-line-length\n    content: (\n      <Text>\n        To learn how to interpret a given visualization, click here for a short\n        tutorial.\n      </Text>\n    ),\n    disableBeacon: true,\n    placement: \"left-start\",\n  },\n  {\n    target: \".\" + joyrideClassNames.filterOptions,\n    // tslint:disable-next-line:max-line-length\n    content: (\n      <Text>\n        Click here to customize the data visualization based on various\n        filtering options.\n      </Text>\n    ),\n    disableBeacon: true,\n    placement: \"left-start\",\n  },\n  {\n    target: \".\" + joyrideClassNames.compareEconComp,\n    // tslint:disable-next-line:max-line-length\n    content: (\n      <Text>\n        Click here to compare the economic composition of your selected city to\n        that of another individual city or peer group.\n      </Text>\n    ),\n    disableBeacon: true,\n    placement: \"left-start\",\n  },\n  {\n    target: \".\" + joyrideClassNames.benchmarkSelection,\n    // tslint:disable-next-line:max-line-length\n    content: (\n      <Text>\n        Dont forget to select a benchmark to determine the relative presence of\n        an industry or knowledge cluster in a selected city. Click here to\n        re-generate the visualization using a different benchmark.\n      </Text>\n    ),\n    disableBeacon: true,\n    placement: \"left-start\",\n  },\n  {\n    target: \".\" + joyrideClassNames.colorLegend,\n    // tslint:disable-next-line:max-line-length\n    content: (\n      <Text>\n        A color legend can be found below the visualization. Hover on each\n        category to filter.\n      </Text>\n    ),\n    disableBeacon: true,\n    placement: \"left-start\",\n  },\n  {\n    target: \".\" + joyrideClassNames.colorLegendNoFilter,\n    // tslint:disable-next-line:max-line-length\n    content: <Text>A color legend can be found below the visualization.</Text>,\n    disableBeacon: true,\n    placement: \"left-start\",\n  },\n  {\n    target: \".\" + joyrideClassNames.guideButton,\n    // tslint:disable-next-line:max-line-length\n    content: (\n      <Text>You can find this tutorial here if you need to see it again.</Text>\n    ),\n    disableBeacon: true,\n    placement: \"bottom-start\",\n  },\n];\n\ninterface Props {\n  run: boolean;\n  onClose: () => void;\n  startGuide: () => void;\n}\n\nconst CitiesGuide = (props: Props) => {\n  const { run, onClose, startGuide } = props;\n  const onChange = (input: CallBackProps) => {\n    const { action } = input;\n    if (action === \"reset\" || action === \"close\") {\n      onClose();\n    }\n  };\n\n  const filteredSteps = steps.filter(({ target }) => {\n    const element = document.querySelector<HTMLElement>(target as string);\n    return element !== null && element.offsetParent !== null;\n  });\n\n  return (\n    <>\n      <Joyride\n        steps={filteredSteps}\n        run={run}\n        continuous={true}\n        showProgress={true}\n        spotlightClicks={true}\n        locale={{\n          back: \"Back\",\n          close: \"Close\",\n          last: \"Finish\",\n          next: \"Next\",\n          skip: \"Skip\",\n        }}\n        styles={{\n          options: {\n            primaryColor,\n            zIndex: 1000,\n          },\n        }}\n        callback={onChange}\n        floaterProps={{ disableAnimation: true }}\n      />\n      <FirstTimeModal startGuide={startGuide} />\n    </>\n  );\n};\n\nexport default CitiesGuide;\n","import React, { useState } from \"react\";\nimport Tooltip, { TooltipPosition } from \"../../../general/Tooltip\";\nimport raw from \"raw.macro\";\nimport { useWindowWidth } from \"../../../../contextProviders/appContext\";\nimport {\n  UtilityBarButtonBase,\n  columnsToRowsBreakpoint,\n  mediumSmallBreakpoint,\n  Text,\n  TooltipContent,\n  LargeSvg,\n} from \"../../Utils\";\nimport useFluent from \"../../../../hooks/useFluent\";\nimport CitiesGuide, { joyrideClassNames } from \"./CitiesGuide\";\n\nconst guideIconSvg = raw(\"../../../../assets/icons/guide.svg\");\n\nconst Guide = () => {\n  const windowDimensions = useWindowWidth();\n  const getString = useFluent();\n  const [runTutorial, setRunTutorial] = useState<boolean>(false);\n  return (\n    <>\n      <Tooltip\n        explanation={\n          windowDimensions.width < mediumSmallBreakpoint &&\n          windowDimensions.width > columnsToRowsBreakpoint ? (\n            <TooltipContent>{getString(\"global-ui-guide\")}</TooltipContent>\n          ) : null\n        }\n        cursor=\"pointer\"\n        tooltipPosition={TooltipPosition.Bottom}\n      >\n        <UtilityBarButtonBase\n          onClick={() => setRunTutorial(true)}\n          className={joyrideClassNames.guideButton}\n        >\n          <LargeSvg dangerouslySetInnerHTML={{ __html: guideIconSvg }} />\n          <Text>{getString(\"global-ui-guide\")}</Text>\n        </UtilityBarButtonBase>\n      </Tooltip>\n      <CitiesGuide\n        run={runTutorial}\n        onClose={() => setRunTutorial(false)}\n        startGuide={() => setRunTutorial(true)}\n        key={runTutorial.toString()}\n      />\n    </>\n  );\n};\n\nexport default Guide;\n","const getShareWindowParams = (width: number, height: number) =>\n  `menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=${height},width=${width}`;\n\nconst getShareFunctions = (url: string) => {\n  return {\n    shareFacebook: () => {\n      const baseURL = \"https://www.facebook.com/sharer.php\";\n      const shareURL = `${baseURL}?u=${encodeURIComponent(url)}`;\n      window.open(shareURL, \"\", getShareWindowParams(360, 600));\n    },\n\n    shareTwitter: (text: string) => {\n      const baseURL = \"https://twitter.com/intent/tweet\";\n      const shareURL = `${baseURL}?\nurl=${encodeURIComponent(url)}&\ntext=${encodeURIComponent(text)}&\nvia=HarvardGrwthLab`;\n      window.open(shareURL, \"\", getShareWindowParams(420, 550));\n    },\n\n    shareLinkedIn: (title: string, summary: string) => {\n      // Reference:\n      // https://developer.linkedin.com/docs/share-on-linkedin (under \"customized URL\")\n      const baseURL = \"https://www.linkedin.com/shareArticle\";\n      // const source = 'https://atlas.cid.harvard.edu/';\n      const source = encodeURIComponent(url);\n      const shareURL = `${baseURL}\n?mini=true&\nurl=${encodeURIComponent(url)}&\ntitle=${encodeURIComponent(title)}&\nsummary=${encodeURIComponent(summary)}&\nsource=${encodeURIComponent(source)}`;\n      window.open(shareURL, \"\", getShareWindowParams(570, 520));\n    },\n\n    shareEmail: (\n      subjectCopy: string,\n      bodyBeforeLineBreakCopy: string,\n      bodyAfterLineBreakCopy: string,\n    ) => {\n      const subject = encodeURIComponent(subjectCopy);\n      const bodyBeforeLineBreak = encodeURIComponent(bodyBeforeLineBreakCopy);\n      const bodyAfterLineBreak = encodeURIComponent(bodyAfterLineBreakCopy);\n\n      const href = `mailto:?subject=${subject}&body=${bodyBeforeLineBreak}%0D%0A%0D%0A${bodyAfterLineBreak}`;\n\n      window.location.href = href;\n    },\n  };\n};\n\nexport default getShareFunctions;\n","import React, { useState } from \"react\";\nimport Modal from \"../../../standardModal\";\nimport styled, { keyframes } from \"styled-components/macro\";\nimport {\n  baseColor,\n  secondaryFont,\n  primaryFont,\n} from \"../../../../styling/styleUtils\";\n// import useFluent from '../../../../hooks/useFluent';\nimport raw from \"raw.macro\";\nimport getShareFunctions from \"./shareFn\";\n\nconst iconGray = \"#2D363F\";\n\nconst linkSvg = raw(\"../../../templates/informationalPage/assets/link.svg\");\nconst twitterSvg = raw(\n  \"../../../templates/informationalPage/assets/twitter.svg\",\n);\nconst linkedinSvg = raw(\n  \"../../../templates/informationalPage/assets/linkedin.svg\",\n);\nconst facebookSvg = raw(\n  \"../../../templates/informationalPage/assets/facebook.svg\",\n);\nconst emailSvg = raw(\"../../../templates/informationalPage/assets/email.svg\");\n\nconst growIn = keyframes`\n  0% {\n    transform: scale(0.4);\n  }\n\n  100% {\n    transform: scale(1);\n  }\n`;\n\nconst Root = styled.div`\n  background-color: #fff;\n  position: relative;\n  animation: ${growIn} 0.1s normal forwards ease-in-out;\n  animation-iteration-count: 1;\n  color: ${baseColor};\n  height: 100%;\n  padding: 2rem;\n\n  @media screen and (max-height: 800px) {\n    overflow: visible;\n  }\n`;\n\nconst CloseButton = styled.button`\n  background-color: transparent;\n  border-none;\n  padding: 0.5rem;\n  text-transform: uppercase;\n  font-size: 1.25rem;\n  font-family: ${secondaryFont};\n  position: absolute;\n  right: 0;\n  top: 0;\n`;\n\nconst SectionTitle = styled.div`\n  font-size: 1.25rem;\n  text-transform: uppercase;\n  margin-bottom: 0.75rem;\n  font-family: ${primaryFont};\n`;\n\nconst SvgBase = styled.div`\n  svg {\n    width: 100%;\n    height: 100%;\n\n    path {\n      fill: ${iconGray};\n    }\n  }\n`;\n\nconst CopyUrlBar = styled.div`\n  min-height: 1rem;\n  max-width: 450px;\n  white-space: nowrap;\n  display: grid;\n  grid-template-columns: 1.45rem 1fr auto;\n  background-color: lightgray;\n  margin-bottom: 2rem;\n  cursor: pointer;\n`;\n\nconst CopyIcon = styled(SvgBase)`\n  padding-left: 0.45rem;\n`;\n\nconst UrlText = styled.div`\n  overflow: hidden;\n  padding: 0.45rem 0.55rem;\n`;\n\nconst CopyButton = styled.button`\n  font-family: ${primaryFont};\n  text-transform: uppercase;\n  padding: 0.45rem 0.75rem;\n  background-color: ${iconGray};\n  color: #fff;\n  font-size: 1.05rem;\n  letter-spacing: 0.5px;\n`;\n\nconst SocialMediaContainer = styled.div`\n  width: 100%;\n  display: flex;\n  align-items: center;\n`;\n\nconst SocialMediaButton = styled.button`\n  width: 2.875rem;\n  height: 2.875rem;\n  display: flex;\n  align-items: center;\n  margin-right: 1.5rem;\n  background-color: transparent;\n`;\n\ninterface Props {\n  onClose: () => void;\n}\n\nexport default (props: Props) => {\n  const { onClose } = props;\n  // const getString = useFluent();\n  const [copied, setCopied] = useState<boolean>(false);\n  const onCopy = () => {\n    navigator.clipboard.writeText(window.location.href);\n    setCopied(true);\n    setTimeout(() => setCopied(false), 5000);\n  };\n  const copyText = copied ? \"Copied\" : \"Copy\";\n\n  const { shareFacebook, shareTwitter, shareLinkedIn, shareEmail } =\n    getShareFunctions(window.location.href);\n\n  return (\n    <Modal onClose={onClose} height=\"auto\" width=\"500px\">\n      <Root>\n        <SectionTitle>Direct Link</SectionTitle>\n        <CopyUrlBar onClick={onCopy}>\n          <CopyIcon dangerouslySetInnerHTML={{ __html: linkSvg }} />\n          <UrlText>{window.location.href}</UrlText>\n          <CopyButton>{copyText}</CopyButton>\n        </CopyUrlBar>\n        <SectionTitle>Social Media Sharing</SectionTitle>\n        <SocialMediaContainer>\n          <SocialMediaButton\n            onClick={() => shareTwitter(\"Check out the Metroverse\")}\n          >\n            <SvgBase dangerouslySetInnerHTML={{ __html: twitterSvg }} />\n          </SocialMediaButton>\n          <SocialMediaButton\n            onClick={() => shareLinkedIn(\"Check out the Metroverse\", \"\")}\n          >\n            <SvgBase dangerouslySetInnerHTML={{ __html: linkedinSvg }} />\n          </SocialMediaButton>\n          <SocialMediaButton onClick={() => shareFacebook()}>\n            <SvgBase dangerouslySetInnerHTML={{ __html: facebookSvg }} />\n          </SocialMediaButton>\n          <SocialMediaButton\n            style={{ width: \"3.25rem\" }}\n            onClick={() =>\n              shareEmail(\n                \"Check out the Metroverse\",\n                \"Check out the Metroverse\",\n                window.location.href,\n              )\n            }\n          >\n            <SvgBase dangerouslySetInnerHTML={{ __html: emailSvg }} />\n          </SocialMediaButton>\n        </SocialMediaContainer>\n        <CloseButton onClick={onClose}></CloseButton>\n      </Root>\n    </Modal>\n  );\n};\n","import React, { useState } from \"react\";\nimport Tooltip, { TooltipPosition } from \"../../../general/Tooltip\";\nimport raw from \"raw.macro\";\nimport { useWindowWidth } from \"../../../../contextProviders/appContext\";\nimport {\n  UtilityBarButtonBase,\n  columnsToRowsBreakpoint,\n  mediumSmallBreakpoint,\n  Text,\n  TooltipContent,\n  SvgBase,\n} from \"../../Utils\";\nimport useFluent from \"../../../../hooks/useFluent\";\nimport ShareModal from \"./ShareModal\";\n\nconst shareIconSvg = raw(\"../../../../assets/icons/share.svg\");\n\nconst Share = () => {\n  const windowDimensions = useWindowWidth();\n  const getString = useFluent();\n  const [modalOpen, setModalOpen] = useState<boolean>(false);\n  const openModal = () => setModalOpen(true);\n  const closeModal = () => setModalOpen(false);\n  const modal = modalOpen ? <ShareModal onClose={closeModal} /> : null;\n  return (\n    <>\n      <Tooltip\n        explanation={\n          windowDimensions.width < mediumSmallBreakpoint &&\n          windowDimensions.width > columnsToRowsBreakpoint ? (\n            <TooltipContent>{getString(\"global-ui-share\")}</TooltipContent>\n          ) : null\n        }\n        cursor=\"pointer\"\n        tooltipPosition={TooltipPosition.Bottom}\n      >\n        <UtilityBarButtonBase onClick={openModal}>\n          <SvgBase dangerouslySetInnerHTML={{ __html: shareIconSvg }} />\n          <Text>{getString(\"global-ui-share\")}</Text>\n        </UtilityBarButtonBase>\n      </Tooltip>\n      {modal}\n    </>\n  );\n};\n\nexport default Share;\n","import { useStaticData } from '../dataProvider';\nimport { Datum as SearchDatum } from 'react-panel-search';\n\n/**\n * Adapter hook: returns SOC occupations in the same shape as the\n * original NAICS industries data.\n *\n * Key mapping:\n *   naicsId -> socCode\n *   naicsIdTopParent -> majorGroupId (as number)\n *   code -> socCode\n *   parentId -> null (flat structure for now)\n *   tradable -> true (all occupations)\n */\n\ninterface IndustryDatum {\n  id: string;\n  naicsId: string;   // actually socCode\n  code: string;      // socCode\n  name: string | null;\n  level: number | null;\n  parentId: number | null;\n  parentCode: string | null;\n  naicsIdTopParent: number;  // majorGroupId as number\n  tradable: boolean;\n}\n\ninterface SuccessResponse {\n  industries: IndustryDatum[];\n}\n\ninterface IndustryMap {\n  [id: string]: IndustryDatum;\n}\n\nconst useGlobalIndustriesData = () => {\n  const { data: blsData, loading, error } = useStaticData();\n\n  if (!blsData) {\n    return { loading, error, data: undefined };\n  }\n\n  const industries: IndustryDatum[] = blsData.occupations.map((occ) => ({\n    id: occ.socCode,\n    naicsId: occ.socCode,\n    code: occ.socCode,\n    name: occ.name,\n    level: occ.level,\n    parentId: occ.parentCode ? parseInt(occ.parentCode.substring(0, 2), 10) : null,\n    parentCode: occ.parentCode,\n    naicsIdTopParent: parseInt(occ.majorGroupId, 10),\n    tradable: true,\n  }));\n\n  const data: SuccessResponse = { industries };\n  return { loading: false, error: undefined, data };\n};\n\nconst industryDataToHierarchicalTreeData = (\n  data: SuccessResponse | undefined,\n) => {\n  const response: SearchDatum[] = [];\n  if (data !== undefined) {\n    const { industries } = data;\n    industries.forEach(({ naicsId, name, level, parentId }) => {\n      if (name !== null && level !== null) {\n        response.push({\n          id: naicsId,\n          title: name,\n          level,\n          parent_id: parentId === null ? null : parentId.toString(),\n        });\n      }\n    });\n  }\n  return response;\n};\n\nexport const useGlobalIndustryHierarchicalTreeData = () => {\n  const { loading, error, data: responseData } = useGlobalIndustriesData();\n  const data = industryDataToHierarchicalTreeData(responseData);\n  return { loading, error, data };\n};\n\nconst industryDataToMap = (data: SuccessResponse | undefined) => {\n  const response: IndustryMap = {};\n  if (data !== undefined) {\n    const { industries } = data;\n    industries.forEach((industry) => {\n      response[industry.naicsId] = industry;\n    });\n  }\n  return response;\n};\n\nexport const useGlobalIndustryMap = () => {\n  const { loading, error, data: responseData } = useGlobalIndustriesData();\n  const data = industryDataToMap(responseData);\n  return { loading, error, data };\n};\n\nexport default useGlobalIndustriesData;\n","import React from \"react\";\nimport styled from \"styled-components/macro\";\nimport SimpleLoader from \"./SimpleLoader\";\n\nexport const LoadingOverlay = styled.div`\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  bottom: 0;\n  right: 0;\n  background-color: rgba(0, 0, 0, 0.1);\n  backdrop-filter: blur(6px);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 30;\n`;\n\nconst LoadingBlock = () => (\n  <LoadingOverlay>\n    <SimpleLoader size={80} />\n  </LoadingOverlay>\n);\n\nexport default LoadingBlock;\n","import React, { Component, ErrorInfo } from \"react\";\nimport SimpleError from \"../../components/transitionStateComponents/SimpleError\";\nimport { LoadingOverlay } from \"../transitionStateComponents/VizLoadingBlock\";\n\ninterface State {\n  hasError: boolean;\n}\n\nclass ErrorBoundary extends Component<{}, State> {\n  constructor(props: {}) {\n    super(props);\n    this.state = { hasError: false };\n  }\n\n  static getDerivedStateFromError(_error: Error) {\n    // Update state so the next render will show the fallback UI.\n    return { hasError: true };\n  }\n\n  componentDidCatch(error: Error, errorInfo: ErrorInfo) {\n    // You can also log the error to an error reporting service\n    console.error(error, errorInfo);\n  }\n\n  render() {\n    if (this.state.hasError) {\n      // You can render any custom fallback UI\n      return (\n        <LoadingOverlay>\n          <SimpleError fluentMessageId={\"error-message-viz-failure\"} />\n        </LoadingOverlay>\n      );\n    }\n\n    return this.props.children;\n  }\n}\n\nexport default ErrorBoundary;\n","import React from \"react\";\nimport { lightBaseColor } from \"../../styling/styleUtils\";\nimport styled, { keyframes } from \"styled-components/macro\";\n\nconst Spinner = styled.div`\n  height: 1rem;\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n`;\n\nconst bounceDelay = keyframes`\n  0%, 80%, 100% {\n    -webkit-transform: scale(0);\n    transform: scale(0);\n  } 40% {\n    -webkit-transform: scale(1.0);\n    transform: scale(1.0);\n  }\n`;\n\nconst Bounce = styled.div`\n  width: 0.6rem;\n  height: 0.6rem;\n  margin: 0 0.25rem 0;\n  background-color: ${lightBaseColor};\n  border-radius: 100%;\n  display: inline-block;\n  animation: ${bounceDelay} 1.4s infinite ease-in-out both;\n`;\n\nconst Bounce1 = styled(Bounce)`\n  animation-delay: -0.32s;\n`;\n\nconst Bounce2 = styled(Bounce)`\n  animation-delay: -0.16s;\n`;\n\nexport default () => {\n  return (\n    <Spinner>\n      <Bounce1 />\n      <Bounce2 />\n      <Bounce />\n    </Spinner>\n  );\n};\n","import styled from \"styled-components/macro\";\nimport { arrowContainerClassName } from \"../components/general/Tooltip\";\n\ninterface Input {\n  title: string;\n  color: string;\n  rows: string[][];\n  boldColumns?: number[];\n  underlineRows?: number[];\n  additionalHTML?: string;\n  hideArrow?: boolean;\n  simple?: boolean;\n}\n\nexport const RapidTooltipRoot = styled.div`\n  position: fixed;\n  z-index: 3000;\n  max-width: 16rem;\n  padding-bottom: 0.5rem;\n  font-size: 0.7rem;\n  line-height: 1.4;\n  text-transform: none;\n  transition: opacity 0.15s ease;\n  color: #333;\n  background-color: #fff;\n  border: 1px solid #dfdfdf;\n  border-radius: 4px;\n  box-shadow: 0px 0px 5px 0px rgba(0, 0, 0, 0.15);\n  pointer-events: none;\n  transform: translate(-50%, calc(-100% - 1.5rem));\n  display: none;\n`;\n\nexport const getStandardTooltip = (input: Input) => {\n  const columnCount =\n    input.rows.length && input.rows[0].length ? input.rows[0].length : 1;\n\n  let rows: string = \"\";\n  input.rows.forEach((r, i) => {\n    let row = \"\";\n    const underline =\n      input.underlineRows && input.underlineRows.includes(i)\n        ? \"border-bottom: solid 1px #333;margin-top:auto;\"\n        : \"\";\n    r.forEach((c, ii) => {\n      const alignment =\n        ii === 0\n          ? \"justify-content: flex-start; text-align: left;\"\n          : \"justify-content: flex-end; text-align: right;\";\n      const style =\n        input.boldColumns && input.boldColumns.includes(ii)\n          ? `style=\"font-weight: 600;${alignment}${underline}\"`\n          : \"\";\n      row = row + `<div class=\"rapid-tooltip-cell\" ${style}>${c}</div>`;\n    });\n    rows = rows + row;\n  });\n\n  const grid = rows.length\n    ? `\n    <div\n      class=\"rapid-tooltip-subsection-grid\"\n      style=\"display: grid; grid-template-columns: repeat(${columnCount}, auto);\"\n    >\n      ${rows}\n    </div>\n  `\n    : \"\";\n\n  const additionalContent = input.additionalHTML\n    ? `<div>${input.additionalHTML}</div>`\n    : \"\";\n  const arrow = input.hideArrow\n    ? \"\"\n    : `\n    <div class=\"rapid-tooltip-arrow-container ${arrowContainerClassName}\">\n      <div class=\"rapid-tooltip-arrow\"></div>\n    </div>\n  `;\n\n  const titleStyle = input.simple\n    ? `padding-bottom: 0; font-weight: 600;`\n    : `background-color: ${input.color};`;\n\n  return `\n    <div>\n      <div class=\"rapid-tooltip-title\" style=\"${titleStyle}\">\n        ${input.title}\n      </div>\n      ${grid}\n      ${additionalContent}\n    </div>\n    ${arrow}\n  `;\n};\n","import { useStaticData } from '../dataProvider';\nimport {\n  DigitLevel,\n  ClusterLevel,\n} from '../types/graphQL/graphQLTypes';\nimport { filterOutliers } from '../Utils';\n\n/**\n * Adapter hook: replaces the aggregate industries GraphQL query.\n * Returns global min/max/median for wage (hourlyWage) and complexity (yearsEducation)\n * for color scaling in the treemap.\n *\n * Key mapping:\n *   yearsEducation -> complexity score\n *   hourlyWage -> annual mean wage (aMean)\n *   numEmploy -> totEmp\n *   numCompany -> gdp\n */\n\ninterface AggregateDatum {\n  sumNumCompany: number;\n  sumNumEmploy: number;\n  avgNumCompany: number;\n  avgNumEmploy: number;\n}\n\ninterface IndustryDatum extends AggregateDatum {\n  naicsId: number;\n}\n\ninterface ClusterDatum extends AggregateDatum {\n  clusterId: number;\n}\n\nexport interface IndustryMap {\n  globalMinMax: {\n    minSumNumCompany: number;\n    maxSumNumCompany: number;\n    minSumNumEmploy: number;\n    maxSumNumEmploy: number;\n    minAvgNumCompany: number;\n    maxAvgNumCompany: number;\n    minAvgNumEmploy: number;\n    maxAvgNumEmploy: number;\n    minYearsEducation: number;\n    medianYearsEducation: number;\n    maxYearsEducation: number;\n    minHourlyWage: number;\n    medianHourlyWage: number;\n    maxHourlyWage: number;\n  };\n  clusterMinMax: {\n    minSumNumCompany: number;\n    maxSumNumCompany: number;\n    minSumNumEmploy: number;\n    maxSumNumEmploy: number;\n    minAvgNumCompany: number;\n    maxAvgNumCompany: number;\n    minAvgNumEmploy: number;\n    maxAvgNumEmploy: number;\n    minYearsEducation: number;\n    maxYearsEducation: number;\n    medianYearsEducation: number;\n    minHourlyWage: number;\n    medianHourlyWage: number;\n    maxHourlyWage: number;\n  };\n  industries: {\n    [id: string]: IndustryDatum & {\n      yearsEducation: number;\n      hourlyWage: number;\n      yearsEducationRank: number;\n      hourlyWageRank: number;\n    };\n  };\n  clusters: {\n    [id: string]: ClusterDatum & {\n      yearsEducation: number;\n      hourlyWage: number;\n      yearsEducationRank: number;\n      hourlyWageRank: number;\n    };\n  };\n}\n\ninterface CoreVariables {\n  level: DigitLevel;\n  year: number;\n  clusterLevel?: ClusterLevel;\n}\n\nconst defaultMinMax = {\n  minSumNumCompany: 0,\n  maxSumNumCompany: 0,\n  minSumNumEmploy: 0,\n  maxSumNumEmploy: 0,\n  minAvgNumCompany: 0,\n  maxAvgNumCompany: 0,\n  minAvgNumEmploy: 0,\n  maxAvgNumEmploy: 0,\n  minYearsEducation: 0,\n  maxYearsEducation: 0,\n  minHourlyWage: 0,\n  maxHourlyWage: 0,\n  medianHourlyWage: 0,\n  medianYearsEducation: 0,\n};\n\nexport const useAggregateIndustryMap = (variables: CoreVariables) => {\n  const { data: blsData, loading, error } = useStaticData();\n\n  const response: IndustryMap = {\n    industries: {},\n    clusters: {},\n    globalMinMax: { ...defaultMinMax },\n    clusterMinMax: { ...defaultMinMax },\n  };\n\n  if (!blsData) {\n    return { loading, error, data: response };\n  }\n\n  const yearStr = variables.year.toString();\n  const aggregates = blsData.aggregates[yearStr];\n\n  if (!aggregates) {\n    return { loading: false, error: undefined, data: response };\n  }\n\n  const { byOccupation } = aggregates;\n\n  // Compute wage and complexity arrays for outlier filtering\n  const wages = Object.values(byOccupation).map((o) => o.avgWage);\n  const complexities = Object.values(byOccupation).map((o) => o.avgComplexity);\n\n  const wagesFiltered = filterOutliers(wages);\n  const complexitiesFiltered = filterOutliers(complexities);\n\n  const sortedWages = [...wages].sort((a, b) => a - b);\n  const sortedComplexities = [...complexities].sort((a, b) => a - b);\n  const medianWage = sortedWages[Math.round(sortedWages.length / 2)] || 0;\n  const medianComplexity = sortedComplexities[Math.round(sortedComplexities.length / 2)] || 0;\n\n  const minWage = Math.min(...wagesFiltered);\n  const maxWage = Math.max(...wagesFiltered);\n  const minComplexity = Math.min(...complexitiesFiltered);\n  const maxComplexity = Math.max(...complexitiesFiltered);\n\n  response.globalMinMax = {\n    ...response.globalMinMax,\n    minYearsEducation: minComplexity,\n    maxYearsEducation: maxComplexity,\n    medianYearsEducation: medianComplexity,\n    minHourlyWage: minWage,\n    maxHourlyWage: maxWage,\n    medianHourlyWage: medianWage,\n  };\n  // clusterMinMax mirrors globalMinMax for our flat structure\n  response.clusterMinMax = { ...response.globalMinMax };\n\n  // Build per-industry data\n  for (const [socCode, occData] of Object.entries(byOccupation)) {\n    const yearsEducation = occData.avgComplexity;\n    const hourlyWage = occData.avgWage;\n\n    let yearsEducationRank = yearsEducation < minComplexity ? minComplexity : yearsEducation;\n    if (yearsEducationRank > maxComplexity) yearsEducationRank = maxComplexity;\n\n    let hourlyWageRank = hourlyWage < minWage ? minWage : hourlyWage;\n    if (hourlyWageRank > maxWage) hourlyWageRank = maxWage;\n\n    response.industries[socCode] = {\n      naicsId: parseInt(socCode, 10) || 0,\n      sumNumCompany: 0,\n      sumNumEmploy: occData.totalEmploy,\n      avgNumCompany: 0,\n      avgNumEmploy: 0,\n      yearsEducation,\n      hourlyWage,\n      yearsEducationRank,\n      hourlyWageRank,\n    };\n  }\n\n  // Build per-cluster (major group) data - mirrors industries for our data\n  for (const mg of blsData.majorGroups) {\n    const matchingOccs = blsData.occupations\n      .filter((o) => o.majorGroupId === mg.groupId)\n      .map((o) => byOccupation[o.socCode])\n      .filter(Boolean);\n\n    const avgWage = matchingOccs.length > 0\n      ? matchingOccs.reduce((s, o) => s + o.avgWage, 0) / matchingOccs.length\n      : 0;\n    const avgComplexity = matchingOccs.length > 0\n      ? matchingOccs.reduce((s, o) => s + o.avgComplexity, 0) / matchingOccs.length\n      : 0;\n\n    let yearsEducationRank = avgComplexity < minComplexity ? minComplexity : avgComplexity;\n    if (yearsEducationRank > maxComplexity) yearsEducationRank = maxComplexity;\n\n    let hourlyWageRank = avgWage < minWage ? minWage : avgWage;\n    if (hourlyWageRank > maxWage) hourlyWageRank = maxWage;\n\n    response.clusters[mg.groupId] = {\n      clusterId: parseInt(mg.groupId, 10),\n      sumNumCompany: 0,\n      sumNumEmploy: 0,\n      avgNumCompany: 0,\n      avgNumEmploy: 0,\n      yearsEducation: avgComplexity,\n      hourlyWage: avgWage,\n      yearsEducationRank,\n      hourlyWageRank,\n    };\n  }\n\n  return { loading: false, error: undefined, data: response };\n};\n\nexport default useAggregateIndustryMap;\n","import React from \"react\";\nimport { backgroundMedium } from \"../../styling/styleUtils\";\nimport styled, { keyframes } from \"styled-components/macro\";\nimport { rgba } from \"polished\";\n\nconst fadeIn = keyframes`\n  0% {\n    opacity: 0;\n    transform: scale(0.5);\n  }\n\n  100% {\n    opacity: 1;\n    transform: scale(1);\n  }\n`;\n\nconst Root = styled.div`\n  position: absolute;\n  top: 1rem;\n  left: 0;\n  right: 0;\n  pointer-events: none;\n  width: 100%;\n  display: flex;\n  justify-content: center;\n  z-index: 50;\n`;\n\nconst Content = styled.div`\n  background-color: ${rgba(backgroundMedium, 0.9)};\n  box-shadow: 0px 0px 5px 0px rgba(0, 0, 0, 0.15);\n  padding: 1rem;\n  transform: scale(0.5);\n  opacity: 0;\n  animation: ${fadeIn} 0.2s ease-in-out 1 forwards;\n  pointer-events: all;\n  position: relative;\n  max-width: 280px;\n`;\n\nconst CloseButton = styled.button`\n  border: none;\n  background-color: transparent;\n  padding: 0.5rem;\n  color: #333;\n  position: absolute;\n  top: 0;\n  right: 0;\n`;\n\ninterface Props {\n  closeError: () => void;\n  children: React.ReactNode;\n  duration?: number;\n}\n\nconst QuickError = (props: Props) => {\n  const { closeError, duration, children } = props;\n\n  setTimeout(closeError, duration ? duration : 3000);\n\n  return (\n    <Root>\n      <Content>\n        {children}\n        <CloseButton onClick={closeError}></CloseButton>\n      </Content>\n    </Root>\n  );\n};\n\nexport default QuickError;\n","import React, { useRef, useEffect, useState, useCallback } from \"react\";\nimport { useGlobalIndustryMap } from \"../../../hooks/useGlobalIndustriesData\";\nimport {\n  DigitLevel,\n  ClassificationNaicsIndustry,\n  CompositionType,\n} from \"../../../types/graphQL/graphQLTypes\";\nimport { usePrevious } from \"react-use\";\nimport TreeMap, { transformData, Inputs } from \"react-canvas-treemap\";\nimport {\n  sectorColorMap,\n  educationColorRange,\n  wageColorRange,\n} from \"../../../styling/styleUtils\";\nimport { useWindowWidth } from \"../../../contextProviders/appContext\";\nimport styled from \"styled-components/macro\";\nimport noop from \"lodash/noop\";\nimport SimpleError from \"../../transitionStateComponents/SimpleError\";\nimport LoadingBlock, {\n  LoadingOverlay,\n} from \"../../transitionStateComponents/VizLoadingBlock\";\nimport Tooltip from \"../../general/Tooltip\";\nimport ErrorBoundary from \"../ErrorBoundary\";\nimport useFluent from \"../../../hooks/useFluent\";\nimport { numberWithCommas } from \"../../../Utils\";\nimport { breakPoints } from \"../../../styling/GlobalGrid\";\nimport { Indicator } from \"../../general/PreChartRow\";\nimport SimpleTextLoading from \"../../transitionStateComponents/SimpleTextLoading\";\nimport {\n  RapidTooltipRoot,\n  getStandardTooltip,\n} from \"../../../utilities/rapidTooltip\";\nimport { rgba } from \"polished\";\nimport { ColorBy } from \"../../../routing/routes\";\nimport { useAggregateIndustryMap } from \"../../../hooks/useAggregateIndustriesData\";\nimport { defaultYear, formatNumber } from \"../../../Utils\";\nimport { scaleLinear } from \"d3-scale\";\nimport QuickError from \"../../transitionStateComponents/QuickError\";\nimport { useStaticData } from \"../../../dataProvider\";\n\nconst Root = styled.div`\n  width: 100%;\n  height: 100%;\n  grid-column: 1;\n  grid-row: 2;\n  position: relative;\n\n  @media ${breakPoints.small} {\n    grid-row: 3;\n    grid-column: 1;\n  }\n`;\n\nconst TreeMapContainer = styled.div`\n  position: absolute;\n  top: 0;\n  left: 0;\n`;\n\n/** Get parent SOC code for hierarchy traversal.\n *  For level 3 (XX-XXX0), the minor-group parent can be XX-X000 (standard)\n *  or XX-XX00 (SOC 2018 renumbered).  When knownCodes is provided we pick\n *  whichever pattern actually exists; otherwise default to XX-X000.\n */\nfunction socParent(code: string, knownCodes?: Set<string>): string | null {\n  const prefix = code.substring(0, 3); // \"XX-\"\n  const digits = code.substring(3);    // \"YYYY\"\n  if (code.endsWith(\"-0000\")) return null;  // level 1\n  if (code.endsWith(\"00\")) return prefix + \"0000\";  // level 2  level 1\n  if (code.endsWith(\"0\")) {\n    // level 3  level 2: resolve ambiguous minor-group parent\n    const renumbered = prefix + digits.substring(0, 2) + \"00\";\n    const standard   = prefix + digits[0] + \"000\";\n    if (renumbered === standard) return standard;\n    if (knownCodes) {\n      return knownCodes.has(renumbered) ? renumbered : standard;\n    }\n    return standard;\n  }\n  return prefix + digits.substring(0, 3) + \"0\";  // level 4  level 3\n}\n\ninterface EconomicCompositionIndustry {\n  id: string;\n  naicsId: string;\n  numCompany: number | null;\n  numEmploy: number | null;\n  aMean: number | null;\n}\n\ninterface SuccessResponse {\n  industries: EconomicCompositionIndustry[];\n}\n\n/**\n * Static data replacement for the ECONOMIC_COMPOSITION_QUERY.\n * Reads from StaticDataProvider instead of GraphQL.\n */\nconst useEconomicCompositionQuery = (variables: { cityId: string; year: number }) => {\n  const { data: blsData, loading, error } = useStaticData();\n\n  if (!blsData) {\n    return { loading, error, data: undefined };\n  }\n\n  const regionData = blsData.regionData[variables.cityId];\n  if (!regionData) {\n    return { loading: false, error: undefined, data: { industries: [] } as SuccessResponse };\n  }\n\n  const yearData = regionData[variables.year.toString()];\n  if (!yearData) {\n    return { loading: false, error: undefined, data: { industries: [] } as SuccessResponse };\n  }\n\n  const industries: EconomicCompositionIndustry[] = yearData.map((d) => ({\n    id: d.socCode,\n    naicsId: d.socCode,\n    numCompany: d.gdp,      // GDP maps to \"companies/establishments\"\n    numEmploy: d.totEmp,     // Employment maps directly\n    aMean: d.aMean,          // Average annual wage\n  }));\n\n  return { loading: false, error: undefined, data: { industries } as SuccessResponse };\n};\n\nexport { useEconomicCompositionQuery };\n\ninterface Props {\n  cityId: string;\n  year: number;\n  highlighted: string | undefined;\n  clearHighlighted: () => void;\n  digitLevel: DigitLevel;\n  colorBy: ColorBy;\n  compositionType: CompositionType;\n  hiddenSectors: ClassificationNaicsIndustry[\"id\"][];\n  setIndicatorContent: (indicator: Indicator) => void;\n  onDrillDown?: (sectorId: string, currentLevel: number) => void;\n}\n\nconst CompositionTreeMap = (props: Props) => {\n  const {\n    cityId,\n    year,\n    digitLevel,\n    compositionType,\n    highlighted,\n    hiddenSectors,\n    colorBy,\n    setIndicatorContent,\n  } = props;\n  const industryMap = useGlobalIndustryMap();\n  const getString = useFluent();\n  const windowDimensions = useWindowWidth();\n  const rootRef = useRef<HTMLDivElement | null>(null);\n  const tooltipContentRef = useRef<HTMLDivElement | null>(null);\n  const highlightedTooltipRef = useRef<HTMLDivElement | null>(null);\n  const [dimensions, setDimensions] = useState<\n    { width: number; height: number } | undefined\n  >(undefined);\n  const { loading, error, data } = useEconomicCompositionQuery({\n    cityId,\n    year,\n  });\n  const aggregateIndustryDataMap = useAggregateIndustryMap({\n    level: digitLevel,\n    year: defaultYear,\n  });\n\n  const onCellClick = useCallback((id: string) => {\n    if (!props.onDrillDown) return;\n    const industry = industryMap.data[id];\n    if (!industry) return;\n    const sectorId = industry.naicsIdTopParent.toString();\n    props.onDrillDown(sectorId, digitLevel);\n  }, [industryMap, digitLevel, props]);\n\n  useEffect(() => {\n    const node = rootRef.current;\n    if (node) {\n      setTimeout(() => {\n        const { width, height } = node.getBoundingClientRect();\n        setDimensions({ width, height });\n      }, 0);\n    }\n  }, [rootRef, windowDimensions]);\n\n  const prevData = usePrevious(data);\n  let dataToUse: SuccessResponse | undefined;\n  if (data) {\n    dataToUse = data;\n  } else if (prevData) {\n    dataToUse = prevData;\n  } else {\n    dataToUse = undefined;\n  }\n\n  const indicator: Indicator = {\n    text: undefined,\n    tooltipContent: undefined,\n  };\n  let output: React.ReactElement<any> | null;\n  if (\n    industryMap.loading ||\n    !dimensions ||\n    (loading && prevData === undefined) ||\n    ((colorBy === ColorBy.education || colorBy === ColorBy.wage) &&\n      aggregateIndustryDataMap.loading)\n  ) {\n    indicator.text = (\n      <>\n        {getString(\"global-ui-sample-size\") + \": \"}\n        <SimpleTextLoading />\n      </>\n    );\n    output = <LoadingBlock />;\n  } else if (error !== undefined) {\n    indicator.text = getString(\"global-ui-sample-size\") + \": \";\n    output = (\n      <LoadingOverlay>\n        <SimpleError />\n      </LoadingOverlay>\n    );\n    console.error(error);\n  } else if (industryMap.error !== undefined) {\n    indicator.text = getString(\"global-ui-sample-size\") + \": \";\n    output = (\n      <LoadingOverlay>\n        <SimpleError />\n      </LoadingOverlay>\n    );\n    console.error(industryMap.error);\n  } else if (\n    aggregateIndustryDataMap.error !== undefined &&\n    (colorBy === ColorBy.education || colorBy === ColorBy.wage)\n  ) {\n    indicator.text = getString(\"global-ui-sample-size\") + \": \";\n    output = (\n      <LoadingOverlay>\n        <SimpleError />\n      </LoadingOverlay>\n    );\n    console.error(aggregateIndustryDataMap.error);\n  } else if (dataToUse !== undefined) {\n    const { industries } = dataToUse;\n\n    // Smart hierarchical filter: show finest available level per SOC branch,\n    // falling back to parents when children are missing (BLS data suppression).\n    // Walk up the hierarchy to find the nearest available ancestor (handles\n    // gaps like missing level 2 data in state files).\n    const availableCodes = new Set(industries.map((i) => i.naicsId));\n    const childrenOf = new Map<string, string[]>();\n    for (const { naicsId } of industries) {\n      const ind = industryMap.data[naicsId];\n      if (ind && ind.level !== null && ind.level <= digitLevel) {\n        let ancestor = socParent(naicsId, availableCodes);\n        while (ancestor && !availableCodes.has(ancestor)) {\n          ancestor = socParent(ancestor, availableCodes);\n        }\n        if (ancestor) {\n          if (!childrenOf.has(ancestor)) childrenOf.set(ancestor, []);\n          childrenOf.get(ancestor)!.push(naicsId);\n        }\n      }\n    }\n\n    // Pre-compute residual values for parents with partial child coverage.\n    // BLS doesn't publish all intermediate SOC levels for states/metros,\n    // so a parent may have only some branches covered by children.\n    // Show the parent as a residual (parent_total - children_sum) to\n    // avoid both double-counting and losing uncovered branches.\n    const residualValues = new Map<string, { employ: number; company: number }>();\n    childrenOf.forEach((children, parentCode) => {\n      const parentInd = industries.find((i) => i.naicsId === parentCode);\n      if (!parentInd) return;\n      const parentEmploy = parentInd.numEmploy || 0;\n      const parentCompany = parentInd.numCompany || 0;\n      let childEmploySum = 0;\n      let childCompanySum = 0;\n      children.forEach((childCode) => {\n        const childInd = industries.find((i) => i.naicsId === childCode);\n        if (childInd) {\n          childEmploySum += childInd.numEmploy || 0;\n          childCompanySum += childInd.numCompany || 0;\n        }\n      });\n      residualValues.set(parentCode, {\n        employ: Math.max(0, parentEmploy - childEmploySum),\n        company: Math.max(0, parentCompany - childCompanySum),\n      });\n    });\n\n    const treeMapData: Inputs[\"data\"] = [];\n    // Track adjusted values for tooltip consistency (residual for parents, full for leaves)\n    const adjustedValueMap = new Map<string, { employ: number; company: number }>();\n    let total = 0;\n    industries.forEach(({ naicsId, numCompany, numEmploy }) => {\n      const industry = industryMap.data[naicsId];\n      if (industry && industry.level !== null && industry.level <= digitLevel) {\n        const { name, naicsIdTopParent } = industry;\n        if (hiddenSectors.includes(naicsIdTopParent.toString())) return;\n\n        const children = childrenOf.get(naicsId) || [];\n        const hasVisibleChildren = children.some((c) => {\n          const ci = industryMap.data[c];\n          return ci && ci.level !== null && ci.level <= digitLevel && availableCodes.has(c);\n        });\n\n        let companies = numCompany ? numCompany : 0;\n        let employees = numEmploy ? numEmploy : 0;\n\n        if (hasVisibleChildren) {\n          // Parent with children: use residual (uncovered portion)\n          const residual = residualValues.get(naicsId);\n          if (!residual || (residual.employ <= 0 && residual.company <= 0)) {\n            return; // Fully covered by children, skip\n          }\n          companies = residual.company;\n          employees = residual.employ;\n        }\n\n        adjustedValueMap.set(naicsId, { employ: employees, company: companies });\n        total =\n          compositionType === CompositionType.Companies\n            ? total + companies\n            : total + employees;\n        const value =\n          compositionType === CompositionType.Companies\n            ? companies\n            : employees;\n        treeMapData.push({\n          id: naicsId,\n          value,\n          title: name ? name : \"\",\n          topLevelParentId: naicsIdTopParent.toString(),\n        });\n      }\n    });\n    let colorScale: (val: number) => string | undefined;\n    if (\n      colorBy === ColorBy.education &&\n      aggregateIndustryDataMap.data !== undefined\n    ) {\n      colorScale = scaleLinear()\n        .domain([\n          aggregateIndustryDataMap.data.globalMinMax.minYearsEducation,\n          aggregateIndustryDataMap.data.globalMinMax.medianYearsEducation,\n          aggregateIndustryDataMap.data.globalMinMax.maxYearsEducation,\n        ])\n        .range(educationColorRange as any) as any;\n    } else if (\n      colorBy === ColorBy.wage &&\n      aggregateIndustryDataMap.data !== undefined\n    ) {\n      colorScale = scaleLinear()\n        .domain([\n          aggregateIndustryDataMap.data.globalMinMax.minHourlyWage,\n          aggregateIndustryDataMap.data.globalMinMax.medianHourlyWage,\n          aggregateIndustryDataMap.data.globalMinMax.maxHourlyWage,\n        ])\n        .range(wageColorRange as any) as any;\n    } else {\n      colorScale = () => undefined;\n    }\n    for (const i in treeMapData) {\n      if (treeMapData[i] !== undefined) {\n        let fill: string | undefined;\n        if (\n          (colorBy === ColorBy.education || colorBy === ColorBy.wage) &&\n          aggregateIndustryDataMap.data\n        ) {\n          const target =\n            aggregateIndustryDataMap.data.industries[treeMapData[i].id];\n          if (target) {\n            const targetValue =\n              colorBy === ColorBy.education\n                ? target.yearsEducationRank\n                : target.hourlyWageRank;\n            fill = colorScale(targetValue);\n          }\n        }\n        treeMapData[i].fill = fill;\n      }\n    }\n    if (!treeMapData.length) {\n      indicator.text = getString(\"global-ui-sample-size\") + \": \";\n      output = (\n        <LoadingOverlay>\n          <SimpleError\n            fluentMessageId={\"global-ui-error-no-sectors-selected\"}\n          />\n        </LoadingOverlay>\n      );\n    } else {\n      const transformed = transformData({\n        data: treeMapData,\n        width: dimensions.width,\n        height: dimensions.height,\n        colorMap: sectorColorMap,\n      });\n      const loadingOverlay = loading ? <LoadingBlock /> : null;\n      const onHover = (id: string) => {\n        const node = tooltipContentRef.current;\n        const industry = industryMap.data[id];\n        const industryWithData = industries.find(\n          ({ naicsId }) => naicsId === id,\n        );\n        if (industry && industryWithData && node) {\n          const color = sectorColorMap.find(\n            (c) => c.id === industry.naicsIdTopParent.toString(),\n          );\n          // Use adjusted values (residual for parents) for consistent display\n          const adjusted = adjustedValueMap.get(id);\n          const numCompany = adjusted\n            ? adjusted.company\n            : industryWithData.numCompany || 0;\n          const numEmploy = adjusted\n            ? adjusted.employ\n            : industryWithData.numEmploy || 0;\n          const aMean = industryWithData.aMean ? industryWithData.aMean : 0;\n          const value =\n            compositionType === CompositionType.Employees\n              ? numEmploy\n              : numCompany;\n          const share = (value / total) * 100;\n          const shareString = share < 0.01 ? \"<0.01%\" : share.toFixed(2) + \"%\";\n          const rows: string[][] = [\n            [getString(\"global-ui-naics-code\") + \":\", industry.code],\n            [getString(\"global-ui-year\") + \":\", year.toString()],\n            [\"Employees:\", numberWithCommas(formatNumber(Math.round(numEmploy)))],\n            [\n              getString(\"tooltip-share-generic\", { value: compositionType }) +\n                \":\",\n              shareString,\n            ],\n            [\"Avg Annual Wage:\", \"$\" + numberWithCommas(formatNumber(Math.round(aMean)))],\n            [\"Total Income:\", \"$\" + numberWithCommas(formatNumber(Math.round(numCompany)))],\n          ];\n          if (\n            (colorBy === ColorBy.education || colorBy === ColorBy.wage) &&\n            aggregateIndustryDataMap.data\n          ) {\n            const target =\n              aggregateIndustryDataMap.data.industries[industry.naicsId];\n            if (target) {\n              const targetValue =\n                colorBy === ColorBy.education\n                  ? target.yearsEducation\n                  : target.hourlyWage;\n              rows.push([\n                getString(\"global-formatted-color-by\", { type: colorBy }),\n                (colorBy === ColorBy.wage ? \"$\" : \"\") + targetValue.toFixed(2),\n              ]);\n            }\n          }\n          node.innerHTML = getStandardTooltip({\n            title: industry.name ? industry.name : \"\",\n            color: color ? rgba(color.color, 0.3) : \"#fff\",\n            rows,\n            boldColumns: [1, 2],\n          });\n        }\n      };\n\n      const highlightedCell = transformed.treeMapCells.find(\n        (d) => d.id === highlighted,\n      );\n\n      if (highlighted && highlightedCell) {\n        const node = highlightedTooltipRef.current;\n        const industry = industryMap.data[highlighted];\n        const industryWithData = industries.find(\n          ({ naicsId }) => naicsId === highlighted,\n        );\n        if (industry && industryWithData && node) {\n          const color = sectorColorMap.find(\n            (c) => c.id === industry.naicsIdTopParent.toString(),\n          );\n          // Use adjusted values (residual for parents) for consistent display\n          const hAdj = adjustedValueMap.get(highlighted);\n          const numCompany = hAdj\n            ? hAdj.company\n            : industryWithData.numCompany || 0;\n          const numEmploy = hAdj\n            ? hAdj.employ\n            : industryWithData.numEmploy || 0;\n          const aMean = industryWithData.aMean ? industryWithData.aMean : 0;\n          const value =\n            compositionType === CompositionType.Employees\n              ? numEmploy\n              : numCompany;\n          const share = (value / total) * 100;\n          const shareString = share < 0.01 ? \"<0.01%\" : share.toFixed(2) + \"%\";\n          const rows: string[][] = [\n            [getString(\"global-ui-naics-code\") + \":\", industry.code],\n            [getString(\"global-ui-year\") + \":\", year.toString()],\n            [\"Employees:\", numberWithCommas(formatNumber(Math.round(numEmploy)))],\n            [\n              getString(\"tooltip-share-generic\", { value: compositionType }) +\n                \":\",\n              shareString,\n            ],\n            [\"Avg Annual Wage:\", \"$\" + numberWithCommas(formatNumber(Math.round(aMean)))],\n            [\"Total Income:\", \"$\" + numberWithCommas(formatNumber(Math.round(numCompany)))],\n          ];\n          if (\n            (colorBy === ColorBy.education || colorBy === ColorBy.wage) &&\n            aggregateIndustryDataMap.data\n          ) {\n            const target =\n              aggregateIndustryDataMap.data.industries[industry.naicsId];\n            if (target) {\n              const targetValue =\n                colorBy === ColorBy.education\n                  ? target.yearsEducation\n                  : target.hourlyWage;\n              rows.push([\n                getString(\"global-formatted-color-by\", { type: colorBy }),\n                (colorBy === ColorBy.wage ? \"$\" : \"\") + targetValue.toFixed(2),\n              ]);\n            }\n          }\n          node.innerHTML =\n            getStandardTooltip({\n              title: industry.name ? industry.name : \"\",\n              color: color ? rgba(color.color, 0.3) : \"#fff\",\n              rows,\n              boldColumns: [1, 2],\n            }) +\n            `\n           <div style=\"position:absolute;top: -5px;right:2px;font-size:1.1rem;\"></div>\n          `;\n          node.style.position = \"absolute\";\n          node.style.pointerEvents = \"all\";\n          node.style.cursor = \"pointer\";\n          node.style.display = \"block\";\n          node.style.left =\n            highlightedCell.x0 +\n            (highlightedCell.x1 - highlightedCell.x0) / 2 +\n            \"px\";\n          node.style.top = highlightedCell.y0 + 16 + \"px\";\n          const clearHighlighted = () => {\n            props.clearHighlighted();\n            node.removeEventListener(\"click\", clearHighlighted);\n          };\n          node.addEventListener(\"click\", clearHighlighted);\n        }\n      } else {\n        const node = highlightedTooltipRef.current;\n        if (node) {\n          node.style.display = \"none\";\n        }\n      }\n\n      const highlightErrorPopup =\n        highlighted && !highlightedCell ? (\n          <QuickError closeError={props.clearHighlighted}>\n            {getString(\"global-ui-error-industry-not-in-data-set\")}\n          </QuickError>\n        ) : null;\n\n      indicator.text = loading ? (\n        <>\n          {getString(\"global-ui-sample-size\") + \": \"}\n          <SimpleTextLoading />\n        </>\n      ) : (\n        `${getString(\"global-ui-sample-size\")}: ${numberWithCommas(formatNumber(Math.round(total)))} ` +\n        getString(\"global-ui-estimated-total-employees\")\n      );\n      indicator.tooltipContent = getString(\"glossary-total-shown\");\n      const fallbackTitle =\n        \"Treemap displaying the economic composition of the selected region \" +\n        \"based on the number of \" +\n        compositionType +\n        \" found within the region. \" +\n        \"The top values are as follows: \";\n      output = (\n        <TreeMapContainer>\n          <Tooltip\n            explanation={<div ref={tooltipContentRef} />}\n            cursor={\"default\"}\n            overrideStyles={true}\n          >\n            <ErrorBoundary>\n              <TreeMap\n                highlighted={highlighted}\n                cells={transformed.treeMapCells}\n                numCellsTier={0}\n                chartContainerWidth={dimensions.width}\n                chartContainerHeight={dimensions.height}\n                onCellClick={onCellClick}\n                onMouseOverCell={onHover}\n                onMouseLeaveChart={noop}\n                fallbackTitle={fallbackTitle}\n              />\n            </ErrorBoundary>\n          </Tooltip>\n          {loadingOverlay}\n          {highlightErrorPopup}\n        </TreeMapContainer>\n      );\n    }\n  } else {\n    output = null;\n  }\n\n  setIndicatorContent(indicator);\n  return (\n    <>\n      <Root ref={rootRef}>\n        {output}\n        <RapidTooltipRoot ref={highlightedTooltipRef} />\n      </Root>\n    </>\n  );\n};\n\nexport default React.memo(CompositionTreeMap);\n","import React from \"react\";\nimport SimpleLoader from \"../../transitionStateComponents/SimpleLoader\";\nimport PanelSearch, { Datum as SearchDatum } from \"react-panel-search\";\nimport { useGlobalIndustryHierarchicalTreeData } from \"../../../hooks/useGlobalIndustriesData\";\nimport { useGlobalClusterHierarchicalTreeData } from \"../../../hooks/useGlobalClusterData\";\nimport { useGlobalLocationHierarchicalTreeData } from \"../../../hooks/useGlobalLocationData\";\nimport SimpleError from \"../../transitionStateComponents/SimpleError\";\nimport useSectorMap from \"../../../hooks/useSectorMap\";\nimport useClusterMap from \"../../../hooks/useClusterMap\";\nimport { DigitLevel } from \"../../../types/graphQL/graphQLTypes\";\nimport {\n  SearchContainerLight,\n  lightBaseColor,\n} from \"../../../styling/styleUtils\";\nimport {\n  collapsedSizeMediaQueryValues,\n  collapsedSizeMediaQuery,\n} from \"../Utils\";\nimport useFluent from \"../../../hooks/useFluent\";\nimport { useWindowSize } from \"react-use\";\nimport styled from \"styled-components/macro\";\nimport ToggleDropdown from \"./ToggleDropdown\";\nimport { ClusterLevel } from \"../../../routing/routes\";\nimport { joyrideClassNames } from \"../../navigation/secondaryHeader/guide/CitiesGuide\";\n\nconst LoadingContainer = styled.div`\n  border: solid 1px ${lightBaseColor};\n  display: flex;\n  align-items: center;\n  justify-content: center;\n`;\n\nconst SearchContainer = styled(SearchContainerLight)`\n  max-width: 100%;\n  font-size: 0.5rem;\n  margin-right: 0.75rem;\n\n  .react-panel-search-search-results {\n    overflow-x: hidden;\n  }\n\n  .react-panel-search-search-bar-input {\n    font-size: 0.65rem;\n    padding-left: 1.15rem;\n  }\n\n  .react-panel-search-search-bar-search-icon {\n    width: 0.7rem;\n    margin: 0 0.3rem;\n  }\n\n  .react-panel-search-current-tier-static-title-outer,\n  .react-panel-search-current-tier-breadcrumb-outer {\n    padding: 0.55rem 0.45rem 0.55rem 0.4rem;\n  }\n\n  .react-panel-search-list-item,\n  .react-panel-search-current-tier-title {\n    font-size: 0.65rem;\n    padding: 0.55rem 1.25rem 0.55rem 0.5rem;\n  }\n\n  .react-panel-search-current-tier-title {\n    padding-left: 0;\n    padding-right: 0;\n    padding-top: 0.2rem;\n    grid-gap: 0;\n  }\n\n  .react-panel-search-current-tier-text {\n    padding: 0;\n  }\n\n  .react-panel-search-next-button,\n  .react-panel-search-previous-button {\n    width: 0.9rem;\n    height: 0.9rem;\n    padding: 0;\n\n    svg {\n      width: 0.6rem;\n    }\n  }\n  .react-panel-search-next-button {\n    margin: auto 6px;\n  }\n\n  .react-panel-search-search-bar-dropdown-arrow {\n    width: 0.6rem;\n    padding: 0.18rem;\n  }\n\n  .react-panel-search-list-no-results div {\n    font-size: 0.65rem;\n    padding: 0.5rem;\n  }\n\n  @media ${collapsedSizeMediaQuery} {\n    width: auto;\n    flex-shrink: 1;\n    height: 100%;\n    align-items: center;\n    position: relative;\n    min-width: 30px;\n  }\n`;\n\nexport enum Mode {\n  naics = \"naics\",\n  cluster = \"cluster\",\n  geo = \"geo\",\n}\n\nexport interface SearchInGraphOptions {\n  hiddenParents: string[];\n  setHighlighted: (value: string | undefined) => void;\n  digitLevel: DigitLevel | null;\n  clusterLevel: ClusterLevel | null;\n  mode: Mode;\n  hidden?: boolean;\n}\n\nconst SearchIndustryInGraph = (props: SearchInGraphOptions) => {\n  const {\n    hiddenParents,\n    setHighlighted,\n    digitLevel,\n    clusterLevel,\n    mode,\n    hidden,\n  } = props;\n\n  const getString = useFluent();\n  const sectorMap = useSectorMap();\n  const clusterMap = useClusterMap();\n  const industrySearchData = useGlobalIndustryHierarchicalTreeData();\n  const clusterSearchData = useGlobalClusterHierarchicalTreeData();\n  const locationSearchData = useGlobalLocationHierarchicalTreeData();\n  const windowDimensions = useWindowSize();\n\n  let hierarchalSearchData: undefined | SearchDatum[];\n  let tiers: DigitLevel | ClusterLevel | string | null;\n  let disallowSelectionLevels: (number | string)[] | undefined;\n  let defaultPlaceholderText: string;\n  let topLevelTitle: string;\n  if (mode === Mode.naics) {\n    hierarchalSearchData = industrySearchData.data;\n    tiers = digitLevel;\n    disallowSelectionLevels = tiers\n      ? Array.from(Array(tiers).keys())\n      : undefined;\n    defaultPlaceholderText = getString(\"global-ui-search-an-industry-in-graph\");\n    topLevelTitle = getString(\"global-text-industries\");\n  } else if (mode === Mode.cluster) {\n    hierarchalSearchData = clusterSearchData.data;\n    tiers = clusterLevel;\n    disallowSelectionLevels =\n      clusterLevel === ClusterLevel.C3 ? [1] : undefined;\n    defaultPlaceholderText = getString(\"global-ui-search-a-cluster-in-graph\");\n    topLevelTitle = getString(\"global-ui-skill-clusters\");\n  } else if (mode === Mode.geo) {\n    hierarchalSearchData = locationSearchData.data;\n    disallowSelectionLevels = [\"0\"];\n    tiers = null;\n    defaultPlaceholderText = \"Find a city in map\";\n    topLevelTitle = \"Countries\";\n  } else {\n    hierarchalSearchData = [];\n    tiers = null;\n    defaultPlaceholderText = \"\";\n    topLevelTitle = \"\";\n  }\n\n  let searchPanel: React.ReactElement<any> | null;\n  if (\n    (mode === Mode.naics && industrySearchData.loading) ||\n    (mode === Mode.cluster && clusterSearchData.loading) ||\n    (mode === Mode.geo && locationSearchData.loading)\n  ) {\n    searchPanel = (\n      <LoadingContainer>\n        <SimpleLoader />\n      </LoadingContainer>\n    );\n  } else if (mode === Mode.naics && industrySearchData.error !== undefined) {\n    console.error(industrySearchData.error);\n    searchPanel = (\n      <LoadingContainer>\n        <SimpleError />\n      </LoadingContainer>\n    );\n  } else if (mode === Mode.cluster && clusterSearchData.error !== undefined) {\n    console.error(clusterSearchData.error);\n    searchPanel = (\n      <LoadingContainer>\n        <SimpleError />\n      </LoadingContainer>\n    );\n  } else if (mode === Mode.geo && locationSearchData.error !== undefined) {\n    console.error(locationSearchData.error);\n    searchPanel = (\n      <LoadingContainer>\n        <SimpleError />\n      </LoadingContainer>\n    );\n  } else if (\n    (mode === Mode.naics && hiddenParents.length === sectorMap.length) ||\n    (mode === Mode.cluster && hiddenParents.length === clusterMap.length)\n  ) {\n    searchPanel = (\n      <LoadingContainer>\n        <SimpleError fluentMessageId={\"error-message-no-industries\"} />\n      </LoadingContainer>\n    );\n  } else if (hierarchalSearchData !== undefined) {\n    const onSelect = (d: { id: string | number } | null) => {\n      if (d) {\n        setHighlighted(d.id as string);\n      } else {\n        setHighlighted(undefined);\n      }\n    };\n    const searchData: SearchDatum[] = hierarchalSearchData.filter(\n      ({ level, id }) =>\n        (tiers === null || (level !== null && level <= tiers)) &&\n        !hiddenParents.includes(id as string),\n    );\n\n    if (\n      windowDimensions.width > collapsedSizeMediaQueryValues.max ||\n      windowDimensions.width < collapsedSizeMediaQueryValues.min\n    ) {\n      searchPanel = (\n        <PanelSearch\n          key={`PreChartPanelSearchKeyFor${digitLevel}${clusterLevel}${mode}`}\n          data={searchData}\n          topLevelTitle={topLevelTitle}\n          disallowSelectionLevels={disallowSelectionLevels}\n          defaultPlaceholderText={defaultPlaceholderText}\n          showCount={true}\n          resultsIdentation={1}\n          onSelect={onSelect}\n          maxResults={500}\n        />\n      );\n    } else {\n      searchPanel = (\n        <ToggleDropdown\n          disallowSelectionLevels={disallowSelectionLevels}\n          setHighlighted={setHighlighted}\n          rerenderKey={`${digitLevel}${clusterLevel}${mode}`}\n          searchData={searchData}\n          defaultPlaceholderText={defaultPlaceholderText}\n          topLevelTitle={topLevelTitle}\n        />\n      );\n    }\n  } else {\n    searchPanel = null;\n  }\n\n  return (\n    <SearchContainer\n      className={\n        !hidden\n          ? mode === Mode.geo\n            ? joyrideClassNames.searchCountryInGraph\n            : joyrideClassNames.searchInGraph\n          : undefined\n      }\n      style={hidden ? { visibility: \"hidden\" } : undefined}\n    >\n      {searchPanel}\n    </SearchContainer>\n  );\n};\n\nexport default React.memo(SearchIndustryInGraph);\n","import { useStaticData } from '../dataProvider';\nimport { Datum as SearchDatum } from 'react-panel-search';\n\n/**\n * Adapter hook: returns SOC major groups as \"clusters\".\n *\n * Key mapping:\n *   clusterId -> majorGroupId\n *   clusterIdTopParent -> majorGroupId (self, since flat)\n *   name -> majorGroupName\n */\n\ninterface Cluster {\n  clusterId: string;\n  parentId: number | null;\n  clusterIdTopParent: number | null;\n  level: number | null;\n  name: string | null;\n  tradable: boolean;\n  id: string;\n}\n\ninterface SuccessResponse {\n  clusters: Cluster[];\n}\n\ninterface ClusterMap {\n  [id: string]: Cluster;\n}\n\nconst useGlobalClusterData = () => {\n  const { data: blsData, loading, error } = useStaticData();\n\n  if (!blsData) {\n    return { loading, error, data: undefined };\n  }\n\n  const clusters: Cluster[] = blsData.majorGroups.map((mg) => ({\n    clusterId: mg.groupId,\n    parentId: null,\n    clusterIdTopParent: parseInt(mg.groupId, 10),\n    level: 1,\n    name: mg.name,\n    tradable: true,\n    id: mg.groupId,\n  }));\n\n  const data: SuccessResponse = { clusters };\n  return { loading: false, error: undefined, data };\n};\n\nconst clusterDataToHierarchicalTreeData = (\n  data: SuccessResponse | undefined,\n) => {\n  const response: SearchDatum[] = [];\n  if (data !== undefined) {\n    const { clusters } = data;\n    clusters.forEach(({ clusterId, name, level }) => {\n      if (name !== null && level !== null) {\n        response.push({\n          id: clusterId,\n          title: name,\n          level,\n          parent_id: null,\n        });\n      }\n    });\n  }\n  return response;\n};\n\nexport const useGlobalClusterHierarchicalTreeData = () => {\n  const { loading, error, data: responseData } = useGlobalClusterData();\n  const data = clusterDataToHierarchicalTreeData(responseData);\n  return { loading, error, data };\n};\n\nconst clusterDataToMap = (\n  data: SuccessResponse | undefined,\n) => {\n  const response: ClusterMap = {};\n  if (data !== undefined) {\n    const { clusters } = data;\n    clusters.forEach((cluster) => {\n      response[cluster.clusterId] = cluster;\n    });\n  }\n  return response;\n};\n\ninterface Options {\n  skipLevel2?: boolean;\n}\n\nexport const useGlobalClusterMap = (_options?: Options) => {\n  const { loading, error, data: responseData } = useGlobalClusterData();\n  const data = clusterDataToMap(responseData);\n  return { loading, error, data };\n};\n\nexport default useGlobalClusterData;\n","import React, { useRef, useEffect, useState } from \"react\";\nimport { useGlobalClusterMap } from \"../../../hooks/useGlobalClusterData\";\nimport { useStaticData } from \"../../../dataProvider\";\nimport {\n  DigitLevel,\n  CompositionType,\n  ClassificationNaicsCluster,\n} from \"../../../types/graphQL/graphQLTypes\";\nimport { usePrevious } from \"react-use\";\nimport TreeMap, { transformData, Inputs } from \"react-canvas-treemap\";\nimport { clusterColorMap } from \"../../../styling/styleUtils\";\nimport { useWindowWidth } from \"../../../contextProviders/appContext\";\nimport styled from \"styled-components/macro\";\nimport noop from \"lodash/noop\";\nimport SimpleError from \"../../../components/transitionStateComponents/SimpleError\";\nimport LoadingBlock, {\n  LoadingOverlay,\n} from \"../../transitionStateComponents/VizLoadingBlock\";\nimport Tooltip from \"../../general/Tooltip\";\nimport ErrorBoundary from \"../ErrorBoundary\";\nimport useFluent from \"../../../hooks/useFluent\";\nimport { numberWithCommas } from \"../../../Utils\";\nimport { breakPoints } from \"../../../styling/GlobalGrid\";\nimport { Indicator } from \"../../../components/general/PreChartRow\";\nimport SimpleTextLoading from \"../../../components/transitionStateComponents/SimpleTextLoading\";\nimport {\n  RapidTooltipRoot,\n  getStandardTooltip,\n} from \"../../../utilities/rapidTooltip\";\nimport { ColorBy, ClusterLevel } from \"../../../routing/routes\";\nimport { scaleSymlog, scaleLinear } from \"d3-scale\";\nimport { extent } from \"d3-array\";\nimport {\n  intensityColorRange,\n  educationColorRange,\n  wageColorRange,\n} from \"../../../styling/styleUtils\";\nimport { defaultYear, formatNumber } from \"../../../Utils\";\nimport { useAggregateIndustryMap } from \"../../../hooks/useAggregateIndustriesData\";\nimport { rgba } from \"polished\";\nimport QuickError from \"../../transitionStateComponents/QuickError\";\n\nconst Root = styled.div`\n  width: 100%;\n  height: 100%;\n  grid-column: 1;\n  grid-row: 2;\n  position: relative;\n\n  @media ${breakPoints.small} {\n    grid-row: 3;\n    grid-column: 1;\n  }\n`;\n\nconst TreeMapContainer = styled.div`\n  position: absolute;\n  top: 0;\n  left: 0;\n`;\n\ninterface ClusterYearData {\n  clusterId: string;\n  level: number | null;\n  numCompany: number | null;\n  numEmploy: number | null;\n  rcaNumCompany: number | null;\n  rcaNumEmploy: number | null;\n}\n\ninterface SuccessResponse {\n  clusters: ClusterYearData[];\n}\n\ninterface Variables {\n  cityId: string;\n  year: number;\n}\n\nexport const useClusterCompositionQuery = (variables: Variables) => {\n  const { data: blsData, loading: blsLoading } = useStaticData();\n\n  if (blsLoading || !blsData) {\n    return { loading: true, error: undefined, data: undefined };\n  }\n\n  const regionData = blsData.regionData[variables.cityId];\n  if (!regionData) {\n    return { loading: false, error: undefined, data: undefined };\n  }\n\n  const yearData = regionData[variables.year] || regionData[defaultYear];\n  if (!yearData) {\n    return { loading: false, error: undefined, data: undefined };\n  }\n\n  // Build socCode  majorGroupId lookup\n  const socToMajorGroup: Record<string, string> = {};\n  blsData.occupations.forEach((o: any) => {\n    socToMajorGroup[o.socCode] = o.majorGroupId;\n  });\n\n  // Aggregate by major group\n  const majorGroupAgg: Record<string, { employ: number; gdp: number }> = {};\n  yearData.forEach((occ) => {\n    const mgId = socToMajorGroup[occ.socCode] || \"00\";\n    if (!majorGroupAgg[mgId]) {\n      majorGroupAgg[mgId] = { employ: 0, gdp: 0 };\n    }\n    majorGroupAgg[mgId].employ += occ.totEmp;\n    majorGroupAgg[mgId].gdp += occ.gdp;\n  });\n\n  const clusters: ClusterYearData[] = Object.entries(majorGroupAgg).map(\n    ([mgId, agg]) => ({\n      clusterId: mgId,\n      level: 1,\n      numCompany: agg.gdp,\n      numEmploy: agg.employ,\n      rcaNumCompany: 1.0,\n      rcaNumEmploy: 1.0,\n    }),\n  );\n\n  return {\n    loading: false,\n    error: undefined,\n    data: { clusters } as SuccessResponse,\n  };\n};\n\ninterface Props {\n  cityId: string;\n  year: number;\n  highlighted: string | undefined;\n  colorBy: ColorBy;\n  compositionType: CompositionType;\n  hiddenClusters: ClassificationNaicsCluster[\"id\"][];\n  clusterLevel: ClusterLevel;\n  setIndicatorContent: (indicator: Indicator) => void;\n  clearHighlighted: () => void;\n}\n\nconst CompositionTreeMap = (props: Props) => {\n  const {\n    cityId,\n    year,\n    compositionType,\n    highlighted,\n    clusterLevel,\n    setIndicatorContent,\n    colorBy,\n    hiddenClusters,\n  } = props;\n  const clusterMap = useGlobalClusterMap();\n  const getString = useFluent();\n  const windowDimensions = useWindowWidth();\n  const rootRef = useRef<HTMLDivElement | null>(null);\n  const tooltipContentRef = useRef<HTMLDivElement | null>(null);\n  const highlightedTooltipRef = useRef<HTMLDivElement | null>(null);\n  const [dimensions, setDimensions] = useState<\n    { width: number; height: number } | undefined\n  >(undefined);\n  const { loading, error, data } = useClusterCompositionQuery({ cityId, year });\n  const aggregateIndustryDataMap = useAggregateIndustryMap({\n    level: DigitLevel.Four,\n    year: defaultYear,\n    clusterLevel: parseInt(clusterLevel, 10),\n  });\n\n  useEffect(() => {\n    const node = rootRef.current;\n    if (node) {\n      setTimeout(() => {\n        const { width, height } = node.getBoundingClientRect();\n        setDimensions({ width, height });\n      }, 0);\n    }\n  }, [rootRef, windowDimensions]);\n\n  const prevData = usePrevious(data);\n  let dataToUse: SuccessResponse | undefined;\n  if (data) {\n    dataToUse = data;\n  } else if (prevData) {\n    dataToUse = prevData;\n  } else {\n    dataToUse = undefined;\n  }\n\n  const indicator: Indicator = {\n    text: undefined,\n    tooltipContent: undefined,\n  };\n  let output: React.ReactElement<any> | null;\n  if (\n    clusterMap.loading ||\n    !dimensions ||\n    (loading && prevData === undefined) ||\n    ((colorBy === ColorBy.education || colorBy === ColorBy.wage) &&\n      aggregateIndustryDataMap.loading)\n  ) {\n    indicator.text = (\n      <>\n        {getString(\"global-ui-total\") + \": \"}\n        <SimpleTextLoading />\n      </>\n    );\n    output = <LoadingBlock />;\n  } else if (error !== undefined) {\n    indicator.text = getString(\"global-ui-total\") + \": \\u2015\";\n    output = (\n      <LoadingOverlay>\n        <SimpleError />\n      </LoadingOverlay>\n    );\n    console.error(error);\n  } else if (clusterMap.error !== undefined) {\n    indicator.text = getString(\"global-ui-total\") + \": \\u2015\";\n    output = (\n      <LoadingOverlay>\n        <SimpleError />\n      </LoadingOverlay>\n    );\n    console.error(clusterMap.error);\n  } else if (\n    aggregateIndustryDataMap.error !== undefined &&\n    (colorBy === ColorBy.education || colorBy === ColorBy.wage)\n  ) {\n    indicator.text = getString(\"global-ui-total\") + \": \\u2015\";\n    output = (\n      <LoadingOverlay>\n        <SimpleError />\n      </LoadingOverlay>\n    );\n    console.error(aggregateIndustryDataMap.error);\n  } else if (dataToUse !== undefined) {\n    const clusters = dataToUse.clusters.filter(\n      (c) => c.level && c.level.toString() === clusterLevel,\n    );\n    const treeMapData: Inputs[\"data\"] = [];\n\n    const allRCAValues = clusters.map((c) => {\n      if (compositionType === CompositionType.Employees) {\n        return c.rcaNumEmploy ? c.rcaNumEmploy : 0;\n      } else {\n        return c.rcaNumCompany ? c.rcaNumCompany : 0;\n      }\n    });\n\n    const minMax = extent(allRCAValues) as [number, number];\n\n    let total = 0;\n    clusters.forEach(({ clusterId, numCompany, numEmploy }) => {\n      const cluster = clusterMap.data[clusterId];\n      if (\n        cluster &&\n        cluster.level &&\n        cluster.level.toString() === clusterLevel\n      ) {\n        const { name, clusterIdTopParent } = cluster;\n        if (\n          clusterIdTopParent &&\n          !hiddenClusters.includes(clusterIdTopParent.toString())\n        ) {\n          const companies = numCompany ? numCompany : 0;\n          const employees = numEmploy ? numEmploy : 0;\n          total =\n            compositionType === CompositionType.Companies\n              ? total + companies\n              : total + employees;\n          const value =\n            compositionType === CompositionType.Companies\n              ? companies\n              : employees;\n          treeMapData.push({\n            id: clusterId,\n            value,\n            title: name ? name : \"\",\n            topLevelParentId: clusterIdTopParent\n              ? clusterIdTopParent.toString()\n              : clusterId.toString(),\n          });\n        }\n      }\n    });\n\n    let colorScale: (val: number) => string | undefined;\n    if (\n      colorBy === ColorBy.education &&\n      aggregateIndustryDataMap.data !== undefined\n    ) {\n      colorScale = scaleLinear()\n        .domain([\n          aggregateIndustryDataMap.data.clusterMinMax.minYearsEducation,\n          aggregateIndustryDataMap.data.clusterMinMax.medianYearsEducation,\n          aggregateIndustryDataMap.data.clusterMinMax.maxYearsEducation,\n        ])\n        .range(educationColorRange as any) as any;\n    } else if (\n      colorBy === ColorBy.wage &&\n      aggregateIndustryDataMap.data !== undefined\n    ) {\n      colorScale = scaleLinear()\n        .domain([\n          aggregateIndustryDataMap.data.clusterMinMax.minHourlyWage,\n          aggregateIndustryDataMap.data.clusterMinMax.medianHourlyWage,\n          aggregateIndustryDataMap.data.clusterMinMax.maxHourlyWage,\n        ])\n        .range(wageColorRange as any) as any;\n    } else {\n      colorScale = scaleSymlog()\n        .domain(minMax)\n        .range(intensityColorRange as any) as unknown as (\n        value: number,\n      ) => string;\n    }\n    for (const i in treeMapData) {\n      if (treeMapData[i] !== undefined) {\n        let fill: string | undefined;\n        const clusterIndustryDatum =\n          aggregateIndustryDataMap.data.clusters[treeMapData[i].id];\n        if (\n          colorBy === ColorBy.education &&\n          aggregateIndustryDataMap.data !== undefined\n        ) {\n          if (clusterIndustryDatum) {\n            fill = colorScale(\n              clusterIndustryDatum.yearsEducationRank,\n            ) as string;\n          } else {\n            fill = \"gray\";\n          }\n        } else if (\n          colorBy === ColorBy.wage &&\n          aggregateIndustryDataMap.data !== undefined\n        ) {\n          if (clusterIndustryDatum) {\n            fill = colorScale(clusterIndustryDatum.hourlyWageRank) as string;\n          } else {\n            fill = \"gray\";\n          }\n        } else {\n          fill = undefined;\n        }\n        treeMapData[i].fill = fill;\n      }\n    }\n\n    if (!treeMapData.length) {\n      indicator.text = getString(\"global-ui-total\") + \": \\u2015\";\n      output = (\n        <LoadingOverlay>\n          <SimpleError\n            fluentMessageId={\"global-ui-error-no-sectors-selected\"}\n          />\n        </LoadingOverlay>\n      );\n    } else {\n      const transformed = transformData({\n        data: treeMapData,\n        width: dimensions.width,\n        height: dimensions.height,\n        colorMap: clusterColorMap,\n      });\n      const loadingOverlay = loading ? <LoadingBlock /> : null;\n      const onHover = (id: string) => {\n        const node = tooltipContentRef.current;\n        const cluster = clusterMap.data[id];\n        const clusterWithData = clusters.find(\n          ({ clusterId }) => clusterId === id,\n        );\n        if (cluster && clusterWithData && node) {\n          const numCompany = clusterWithData.numCompany\n            ? clusterWithData.numCompany\n            : 0;\n          const numEmploy = clusterWithData.numEmploy\n            ? clusterWithData.numEmploy\n            : 0;\n          const value =\n            compositionType === CompositionType.Employees\n              ? numEmploy\n              : numCompany;\n          const share = (value / total) * 100;\n          const shareString = share < 0.01 ? \"<0.01%\" : share.toFixed(2) + \"%\";\n          const color = clusterColorMap.find(\n            (c) =>\n              cluster.clusterIdTopParent &&\n              c.id === cluster.clusterIdTopParent.toString(),\n          );\n          const rows = [\n            [getString(\"global-ui-year\") + \":\", year.toString()],\n            [\"Employees:\", numberWithCommas(formatNumber(Math.round(numEmploy)))],\n            [\n              getString(\"tooltip-share-generic\", { value: compositionType }) +\n                \":\",\n              shareString,\n            ],\n            [\"Total Income:\", \"$\" + numberWithCommas(formatNumber(Math.round(numCompany)))],\n          ];\n          if (\n            (colorBy === ColorBy.education || colorBy === ColorBy.wage) &&\n            aggregateIndustryDataMap.data\n          ) {\n            const target =\n              aggregateIndustryDataMap.data.clusters[cluster.clusterId];\n            if (target) {\n              const targetValue =\n                colorBy === ColorBy.education\n                  ? target.yearsEducation\n                  : target.hourlyWage;\n              rows.push([\n                getString(\"global-formatted-color-by\", { type: colorBy }),\n                (colorBy === ColorBy.wage ? \"$\" : \"\") + targetValue.toFixed(2),\n              ]);\n            }\n          }\n          node.innerHTML = getStandardTooltip({\n            title: cluster.name ? cluster.name : \"\",\n            color: color ? rgba(color.color, 0.3) : \"#fff\",\n            rows,\n            boldColumns: [1, 2],\n          });\n        }\n      };\n\n      const highlightedCell = transformed.treeMapCells.find(\n        (d) => d.id === highlighted,\n      );\n\n      if (highlighted && highlightedCell) {\n        const node = highlightedTooltipRef.current;\n        const cluster = clusterMap.data[highlighted];\n        const clusterWithData = clusters.find(\n          ({ clusterId }) => clusterId === highlighted,\n        );\n        if (cluster && clusterWithData && node) {\n          const numCompany = clusterWithData.numCompany\n            ? clusterWithData.numCompany\n            : 0;\n          const numEmploy = clusterWithData.numEmploy\n            ? clusterWithData.numEmploy\n            : 0;\n          const value =\n            compositionType === CompositionType.Employees\n              ? numEmploy\n              : numCompany;\n          const share = (value / total) * 100;\n          const shareString = share < 0.01 ? \"<0.01%\" : share.toFixed(2) + \"%\";\n          const color = clusterColorMap.find(\n            (c) =>\n              cluster.clusterIdTopParent &&\n              c.id === cluster.clusterIdTopParent.toString(),\n          );\n          const rows = [\n            [getString(\"global-ui-year\") + \":\", year.toString()],\n            [\"Employees:\", numberWithCommas(formatNumber(Math.round(numEmploy)))],\n            [\n              getString(\"tooltip-share-generic\", { value: compositionType }) +\n                \":\",\n              shareString,\n            ],\n            [\"Total Income:\", \"$\" + numberWithCommas(formatNumber(Math.round(numCompany)))],\n          ];\n          if (\n            (colorBy === ColorBy.education || colorBy === ColorBy.wage) &&\n            aggregateIndustryDataMap.data\n          ) {\n            const target =\n              aggregateIndustryDataMap.data.clusters[cluster.clusterId];\n            if (target) {\n              const targetValue =\n                colorBy === ColorBy.education\n                  ? target.yearsEducation\n                  : target.hourlyWage;\n              rows.push([\n                getString(\"global-formatted-color-by\", { type: colorBy }),\n                (colorBy === ColorBy.wage ? \"$\" : \"\") + targetValue.toFixed(2),\n              ]);\n            }\n          }\n          node.innerHTML =\n            getStandardTooltip({\n              title: cluster.name ? cluster.name : \"\",\n              color: color ? rgba(color.color, 0.3) : \"#fff\",\n              rows,\n              boldColumns: [1, 2],\n            }) +\n            `\n           <div style=\"position:absolute;top: 2px;right:2px;\">\\u00d7</div>\n          `;\n          node.style.position = \"absolute\";\n          node.style.pointerEvents = \"all\";\n          node.style.cursor = \"pointer\";\n          node.style.display = \"block\";\n          node.style.left =\n            highlightedCell.x0 +\n            (highlightedCell.x1 - highlightedCell.x0) / 2 +\n            \"px\";\n          node.style.top = highlightedCell.y0 + 16 + \"px\";\n          const clearHighlighted = () => {\n            props.clearHighlighted();\n            node.removeEventListener(\"click\", clearHighlighted);\n          };\n          node.addEventListener(\"click\", clearHighlighted);\n        }\n      } else {\n        const node = highlightedTooltipRef.current;\n        if (node) {\n          node.style.display = \"none\";\n        }\n      }\n\n      const highlightErrorPopup =\n        highlighted && !highlightedCell ? (\n          <QuickError closeError={props.clearHighlighted}>\n            {getString(\"global-ui-error-industry-not-in-data-set\")}\n          </QuickError>\n        ) : null;\n\n      indicator.text = loading ? (\n        <>\n          {getString(\"global-ui-sample-size\") + \": \"}\n          <SimpleTextLoading />\n        </>\n      ) : (\n        `${getString(\"global-ui-sample-size\")}: ${numberWithCommas(formatNumber(Math.round(total)))} ` +\n        getString(\"global-ui-estimated-total-employees\")\n      );\n      indicator.tooltipContent = getString(\"glossary-total-shown\");\n      const fallbackTitle =\n        \"Treemap displaying the economic composition of the selected city \" +\n        \"based on the number of \" +\n        compositionType +\n        \" found within the city. \" +\n        \"The top values are as follows: \";\n      output = (\n        <TreeMapContainer>\n          <Tooltip\n            explanation={<div ref={tooltipContentRef} />}\n            cursor={\"default\"}\n            overrideStyles={true}\n          >\n            <ErrorBoundary>\n              <TreeMap\n                highlighted={highlighted}\n                cells={transformed.treeMapCells}\n                numCellsTier={0}\n                chartContainerWidth={dimensions.width}\n                chartContainerHeight={dimensions.height}\n                onCellClick={noop}\n                onMouseOverCell={onHover}\n                onMouseLeaveChart={noop}\n                fallbackTitle={fallbackTitle}\n              />\n            </ErrorBoundary>\n          </Tooltip>\n          {loadingOverlay}\n          {highlightErrorPopup}\n        </TreeMapContainer>\n      );\n    }\n  } else {\n    output = null;\n  }\n\n  setIndicatorContent(indicator);\n  return (\n    <>\n      <Root ref={rootRef}>\n        {output}\n        <RapidTooltipRoot ref={highlightedTooltipRef} />\n      </Root>\n    </>\n  );\n};\n\nexport default React.memo(CompositionTreeMap);\n","import React, { useState } from \"react\";\nimport styled from \"styled-components/macro\";\nimport {\n  primaryFont,\n  fadeInAnimation,\n  backgroundDark,\n  secondaryFont,\n  noOutlineOnFocus,\n  radioButtonCss,\n} from \"../../../styling/styleUtils\";\nimport { rgba } from \"polished\";\nimport useFluent from \"../../../hooks/useFluent\";\n\nconst Root = styled.div`\n  position: relative;\n  font-family: ${primaryFont};\n  z-index: 40;\n`;\nconst Button = styled.button`\n  display: flex;\n  align-items: center;\n  margin: 0.1rem;\n  text-transform: uppercase;\n  font-size: 0.65rem;\n  font-size: clamp(0.5rem, 0.75vw, 0.75rem);\n  font-family: ${primaryFont};\n  background-color: #fff;\n  border: none;\n  border-radius: 4px;\n  transition: all 0.2s ease;\n  flex-shrink: 1;\n  flex-grow: 0;\n  flex-basis: 1;\n  width: min-content;\n  height: 28px;\n  white-space: pre-wrap;\n  ${noOutlineOnFocus}\n`;\n\nconst Block = styled.div<{ $checked: boolean }>`\n  width: 0.75rem;\n  height: 0.75rem;\n  width: clamp(0.5rem, 1vw, 1.2rem);\n  height: clamp(0.5rem, 1vw, 1.2rem);\n  margin-right: 0.2rem;\n  position: relative;\n  flex-shrink: 0;\n\n  &:after {\n    ${({ $checked }) => ($checked ? \"content: '';\" : \"\")}\n    width: 0.1rem;\n    border-radius: 80px;\n    height: 180%;\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    right: 0;\n    left: 0;\n    margin: auto;\n    transform: rotate(45deg);\n    background-color: #333;\n  }\n`;\n\nconst HideIsolateRoot = styled.div`\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  transform: translate(0, -100%);\n  pointer-events: none;\n  display: flex;\n  justify-content: center;\n  ${fadeInAnimation}\n`;\n\nconst HideIsolateContent = styled.div`\n  pointer-events: all;\n  margin: auto;\n  position: relative;\n`;\n\nconst HideIsolateText = styled.div`\n  border-radius: 4px;\n  padding: 9px 14px;\n  background-color: ${backgroundDark};\n  color: #fff;\n  border-radius: 4px;\n  box-shadow: 0px 1px 4px 0px rgba(0, 0, 0, 0.25);\n`;\n\nconst ArrowContainer = styled.div`\n  width: 100%;\n  height: 0.5rem;\n  display: flex;\n  justify-content: center;\n`;\n\nconst Arrow = styled.div`\n  width: 0;\n  height: 0;\n  border-left: 0.5rem solid transparent;\n  border-right: 0.5rem solid transparent;\n  border-top: 0.5rem solid ${backgroundDark};\n  position: relative;\n  top: -2px;\n`;\n\nconst Title = styled.div`\n  font-size: 0.9rem;\n  text-transform: uppercase;\n  text-align: center;\n  white-space: nowrap;\n`;\n\nconst Hr = styled.hr`\n  max-width: 5rem;\n  border-top: solid 2px;\n`;\n\nconst CloseButton = styled.button`\n  border: none;\n  padding: 0.2rem;\n  background-color: transparent;\n  color: #fff;\n  position: absolute;\n  top: 0;\n  right: 0;\n`;\n\nconst ButtonWrapper = styled.div`\n  display: flex;\n  justify-content: center;\n`;\nconst HideIsolateButton = styled.button`\n  margin: 8px;\n  text-transform: uppercase;\n  font-family: ${secondaryFont};\n  color: #fff;\n  background-color: transparent;\n  border: none;\n  white-space: nowrap;\n  ${noOutlineOnFocus}\n  ${radioButtonCss}\n\n  &:hover {\n    background-color: #fff;\n    color: ${backgroundDark};\n  }\n`;\n\nexport interface CategoryDatum {\n  id: string;\n  color: string;\n  name: string;\n}\n\ninterface Props {\n  category: CategoryDatum;\n  toggleCategory?: () => void;\n  isolateCategory?: () => void;\n  isHidden: boolean;\n  isIsolated: boolean;\n}\n\nconst Label = ({\n  category: { color, name },\n  toggleCategory,\n  isolateCategory,\n  isHidden,\n  isIsolated,\n}: Props) => {\n  const [isHovered, setIsHovered] = useState<boolean>(false);\n  const getString = useFluent();\n  const toggleButton = toggleCategory ? (\n    <HideIsolateButton $checked={isHidden} onClick={toggleCategory}>\n      {getString(\"global-ui-hide\")}\n    </HideIsolateButton>\n  ) : null;\n  const isolateButton = isolateCategory ? (\n    <HideIsolateButton $checked={isIsolated} onClick={isolateCategory}>\n      {getString(\"global-ui-keep-only\")}\n    </HideIsolateButton>\n  ) : null;\n  const hideIsolateButtons =\n    isolateButton || toggleButton ? (\n      <ButtonWrapper>\n        {toggleButton}\n        {isolateButton}\n      </ButtonWrapper>\n    ) : null;\n  const hideIsolate = isHovered ? (\n    <HideIsolateRoot>\n      <HideIsolateContent>\n        <HideIsolateText>\n          <Title>{name}</Title>\n          <Hr style={{ borderColor: color }} />\n          {hideIsolateButtons}\n        </HideIsolateText>\n        <ArrowContainer>\n          <Arrow />\n        </ArrowContainer>\n        <CloseButton onClick={() => setIsHovered(false)}></CloseButton>\n      </HideIsolateContent>\n    </HideIsolateRoot>\n  ) : null;\n  return (\n    <Root\n      onMouseEnter={() => setIsHovered(true)}\n      onMouseLeave={() => setIsHovered(false)}\n      style={{ zIndex: isHovered ? 150 : undefined }}\n    >\n      <Button\n        style={{\n          backgroundColor: isHovered ? rgba(color, 0.3) : undefined,\n          opacity: isHidden ? 0.5 : undefined,\n        }}\n        onClick={toggleCategory}\n      >\n        <Block style={{ backgroundColor: color }} $checked={isHidden} />\n        {name}\n      </Button>\n      {hideIsolate}\n    </Root>\n  );\n};\n\nexport default Label;\n","import React from \"react\";\nimport styled, { keyframes } from \"styled-components/macro\";\nimport Label, { CategoryDatum } from \"./Label\";\nimport { breakPoints } from \"../../../styling/GlobalGrid\";\nimport { backgroundMedium, baseColor } from \"../../../styling/styleUtils\";\nimport raw from \"raw.macro\";\nimport { joyrideClassNames } from \"../../navigation/secondaryHeader/guide/CitiesGuide\";\n\nconst ReloadImgSrc = raw(\"../../../assets/icons/reload.svg\");\n\nconst RootBase = styled.div`\n  grid-row: 3;\n  display: flex;\n  align-items: center;\n  box-sizing: border-box;\n\n  @media ${breakPoints.small} {\n    grid-row: 4;\n  }\n`;\n\nconst StandardRoot = styled(RootBase)`\n  grid-column: 1;\n  justify-content: center;\n`;\n\nconst FullWidthRoot = styled(RootBase)`\n  grid-column: 1 / -1;\n`;\n\nconst StandardContent = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n  position: relative;\n  align-items: center;\n  box-sizing: border-box;\n  padding: 0.875rem 0;\n\n  @media ${breakPoints.small} {\n    margin-bottom: 3rem;\n  }\n`;\n\nconst FullWidthContent = styled(StandardContent)`\n  padding: 0.875rem 0;\n\n  @media ${breakPoints.small} {\n    padding-right: 0;\n  }\n`;\n\nconst fadeAndSlideIn = keyframes`\n  0% {\n    transform: translate(300%, 0);\n    opacity: 0;\n  }\n\n  70% {\n    transform: translate(90%, 0);\n    opacity: 0.7;\n  }\n\n  100% {\n    transform: translate(110%, 0);\n    opacity: 1;\n  }\n`;\n\nconst fadeAndSlideDown = keyframes`\n  0% {\n    transform: translate(0, -50%);\n    opacity: 0;\n  }\n\n  70% {\n    transform: translate(0, 20%);\n    opacity: 0.7;\n  }\n\n  100% {\n    transform: translate(0, 0);\n    opacity: 1;\n  }\n`;\n\nconst ResetLabelsButtonContainer = styled.div`\n  position: absolute;\n  text-align: center;\n  pointer-events: none;\n  right: 0;\n\n  @media (max-width: 1000px) {\n    left: 0;\n    bottom: -0.5rem;\n  }\n`;\n\nconst ResetLabelsButton = styled.button`\n  pointer-events: all;\n  animation: ${fadeAndSlideIn} 0.2s ease-in-out 1 forwards;\n  text-transform: uppercase;\n  color: ${baseColor};\n  background-color: ${backgroundMedium};\n  font-size: 0.5rem;\n  font-weight: 600;\n  outline-color: ${backgroundMedium};\n  transition: outline 0.1s ease-in-out;\n  padding: 0.3rem 0.5rem;\n  display: inline-flex;\n  align-items: center;\n  width: 5rem;\n\n  &:hover,\n  &:focus {\n    outline: solid 2px ${backgroundMedium};\n  }\n\n  @media (max-width: 1000px) {\n    animation: ${fadeAndSlideDown} 0.2s ease-in-out 1 forwards;\n    width: auto;\n    left: 0;\n    bottom: 0;\n  }\n`;\n\nconst ReloadIcon = styled.div`\n  width: 1rem;\n  height: 1rem;\n  margin-right: 0.5rem;\n\n  svg {\n    width: 100%;\n    height: 100%;\n\n    path {\n      fill: ${baseColor};\n    }\n  }\n\n  @media (max-width: 1000px) {\n    width: 0.7rem;\n    height: 0.7rem;\n  }\n`;\n\ninterface BaseProps {\n  categories: CategoryDatum[];\n  fullWidth?: boolean;\n}\n\ntype Props = BaseProps &\n  (\n    | {\n        allowToggle: true;\n        toggleCategory: (id: string) => void;\n        isolateCategory: (id: string) => void;\n        hiddenCategories: string[];\n        resetCategories: () => void;\n        resetText: string;\n      }\n    | {\n        allowToggle: false;\n      }\n  );\n\nconst CategoryLabels = (props: Props) => {\n  const { categories, fullWidth } = props;\n  let output: React.ReactElement<any>;\n  if (props.allowToggle) {\n    const {\n      toggleCategory,\n      isolateCategory,\n      hiddenCategories,\n      resetCategories,\n      resetText,\n    } = props;\n\n    const labels = categories.map((category) => {\n      const isHidden = !!hiddenCategories.find((id) => id === category.id);\n      const isIsolated =\n        hiddenCategories.length === categories.length - 1 && !isHidden;\n      return (\n        <Label\n          key={\"sector-label-\" + category.id}\n          category={category}\n          toggleCategory={() => toggleCategory(category.id)}\n          isolateCategory={() => isolateCategory(category.id)}\n          isHidden={isHidden}\n          isIsolated={isIsolated}\n        />\n      );\n    });\n\n    const resetButton = hiddenCategories.length ? (\n      <ResetLabelsButtonContainer>\n        <ResetLabelsButton onClick={resetCategories}>\n          <ReloadIcon dangerouslySetInnerHTML={{ __html: ReloadImgSrc }} />{\" \"}\n          {resetText}\n        </ResetLabelsButton>\n      </ResetLabelsButtonContainer>\n    ) : null;\n\n    output = (\n      <>\n        {labels}\n        {resetButton}\n      </>\n    );\n  } else {\n    const labels = categories.map((category) => (\n      <Label\n        key={\"sector-label-\" + category.id}\n        category={category}\n        isHidden={false}\n        isIsolated={false}\n      />\n    ));\n\n    output = <>{labels}</>;\n  }\n\n  const Root = fullWidth ? FullWidthRoot : StandardRoot;\n  const Content = fullWidth ? FullWidthContent : StandardContent;\n\n  return (\n    <Root>\n      <Content\n        className={\n          !props.allowToggle\n            ? joyrideClassNames.colorLegendNoFilter\n            : joyrideClassNames.colorLegend\n        }\n      >\n        {output}\n      </Content>\n    </Root>\n  );\n};\n\nexport default CategoryLabels;\n","import useFluent from \"./useFluent\";\nimport { sectorColorMap } from \"../styling/styleUtils\";\n\nexport default () => {\n  const getString = useFluent();\n  return sectorColorMap.map(({ id, color }) => ({\n    id,\n    color,\n    name: getString(\"global-naics-sector-name-\" + id),\n  }));\n};\n","import useFluent from \"./useFluent\";\nimport { clusterColorMap } from \"../styling/styleUtils\";\n\nexport default () => {\n  const getString = useFluent();\n  return clusterColorMap.map(({ id, color }) => ({\n    id,\n    color,\n    name: getString(\"global-cluster-c1-name-\" + id),\n  }));\n};\n","import queryString from \"query-string\";\nimport { GlobalQueryParams } from \"../routing/routes\";\nimport { useHistory } from \"react-router-dom\";\n\nexport default () => {\n  const history = useHistory();\n  const params = queryString.parse(\n    history.location.search,\n  ) as unknown as GlobalQueryParams;\n  return params;\n};\n","import { useEffect } from 'react';\nimport { useStaticData } from '../dataProvider';\nimport useQueryParams from './useQueryParams';\nimport { DigitLevel } from '../types/graphQL/graphQLTypes';\n\nconst defaultDigitLevel = DigitLevel.Two;\n\n/**\n * Hook that watches the digit_level query param and triggers\n * lazy-loading of level extension data when the user selects\n * a higher level in the Settings panel.\n *\n * Import and call this hook in any page that uses digit_level filtering.\n * It's a no-op if the level data is already loaded.\n */\nexport const useLevelLoader = () => {\n  const { digit_level } = useQueryParams();\n  const { loadLevel, loadedLevels, levelLoading } = useStaticData();\n\n  const digitLevel = digit_level\n    ? parseInt(digit_level, 10)\n    : defaultDigitLevel;\n\n  useEffect(() => {\n    // Load all levels up to the selected digit level\n    for (let lvl = 3; lvl <= digitLevel; lvl++) {\n      if (!loadedLevels.includes(lvl)) {\n        loadLevel(lvl);\n      }\n    }\n  }, [digitLevel, loadLevel, loadedLevels]);\n\n  return { levelLoading, loadedLevels, digitLevel };\n};\n","import React, { useEffect, useState } from \"react\";\nimport { useEconomicCompositionQuery } from \"../../../../../components/dataViz/treeMap/CompositionTreeMap\";\nimport { useClusterCompositionQuery } from \"../../../../../components/dataViz/treeMap/ClusterCompositionTreeMap\";\nimport LoadingBlock from \"../../../../../components/transitionStateComponents/VizLoadingBlock\";\nimport { transformData, Inputs } from \"react-canvas-treemap\";\nimport { useGlobalIndustryMap } from \"../../../../../hooks/useGlobalIndustriesData\";\nimport { useGlobalClusterMap } from \"../../../../../hooks/useGlobalClusterData\";\nimport {\n  DigitLevel,\n  CompositionType,\n} from \"../../../../../types/graphQL/graphQLTypes\";\nimport {\n  sectorColorMap,\n  clusterColorMap,\n  FullPageOverlay,\n  educationColorRange,\n  wageColorRange,\n} from \"../../../../../styling/styleUtils\";\nimport html2canvas from \"html2canvas\";\nimport {\n  AggregationMode,\n  ColorBy,\n  ClusterLevel,\n} from \"../../../../../routing/routes\";\nimport { scaleLinear } from \"d3-scale\";\nimport { defaultYear } from \"../../../../../Utils\";\nimport { useAggregateIndustryMap } from \"../../../../../hooks/useAggregateIndustriesData\";\n\ninterface Props {\n  cityId: string;\n  cityName: string | undefined;\n  year: number;\n  onClose: () => void;\n  compositionType: CompositionType;\n  aggregationMode: AggregationMode;\n  hiddenSectors: string[];\n  hiddenClusters: string[];\n  digitLevel: DigitLevel;\n  clusterLevel: ClusterLevel;\n  colorBy: ColorBy;\n  treeMapCellsNode: HTMLDivElement;\n}\n\nexport default (props: Props) => {\n  const {\n    cityId,\n    year,\n    onClose,\n    compositionType,\n    hiddenSectors,\n    digitLevel,\n    treeMapCellsNode,\n    cityName,\n    hiddenClusters,\n    aggregationMode,\n    clusterLevel,\n    colorBy,\n  } = props;\n\n  const industryResponse = useEconomicCompositionQuery({ cityId, year });\n  const clusterResponse = useClusterCompositionQuery({ cityId, year });\n  const industryMap = useGlobalIndustryMap();\n  const clusterMap = useGlobalClusterMap();\n  const aggregateIndustryDataMap = useAggregateIndustryMap({\n    level: digitLevel,\n    year: defaultYear,\n    clusterLevel: parseInt(clusterLevel, 10),\n  });\n  const [effectRan, setEffectRan] = useState<boolean>(false);\n\n  useEffect(() => {\n    if (\n      industryResponse.data !== undefined &&\n      !industryMap.loading &&\n      !industryMap.error &&\n      clusterResponse.data !== undefined &&\n      !clusterMap.loading &&\n      !clusterMap.error &&\n      aggregateIndustryDataMap.loading !== true &&\n      !aggregateIndustryDataMap.error &&\n      aggregateIndustryDataMap.data !== undefined &&\n      !effectRan\n    ) {\n      setEffectRan(true);\n      const boundingRect = treeMapCellsNode.getBoundingClientRect();\n      const width = boundingRect.width * 2;\n      const height = boundingRect.height * 2;\n      const treeMapData: Inputs[\"data\"] = [];\n      let colorScale: (val: number) => string | undefined;\n      let colorMap: { id: string; color: string }[];\n      if (aggregationMode === AggregationMode.cluster) {\n        const { clusters } = clusterResponse.data;\n        colorMap = clusterColorMap;\n        if (\n          colorBy === ColorBy.education &&\n          aggregateIndustryDataMap.data !== undefined\n        ) {\n          colorScale = scaleLinear()\n            .domain([\n              aggregateIndustryDataMap.data.clusterMinMax.minYearsEducation,\n              aggregateIndustryDataMap.data.clusterMinMax.medianYearsEducation,\n              aggregateIndustryDataMap.data.clusterMinMax.maxYearsEducation,\n            ])\n            .range(educationColorRange as any) as any;\n        } else if (\n          colorBy === ColorBy.wage &&\n          aggregateIndustryDataMap.data !== undefined\n        ) {\n          colorScale = scaleLinear()\n            .domain([\n              aggregateIndustryDataMap.data.clusterMinMax.minHourlyWage,\n              aggregateIndustryDataMap.data.clusterMinMax.medianHourlyWage,\n              aggregateIndustryDataMap.data.clusterMinMax.maxHourlyWage,\n            ])\n            .range(wageColorRange as any) as any;\n        } else {\n          colorScale = () => undefined;\n        }\n        clusters.forEach(({ clusterId, numCompany, numEmploy }) => {\n          const cluster = clusterMap.data[clusterId];\n          if (\n            cluster &&\n            cluster.level !== null &&\n            cluster.level.toString() === clusterLevel\n          ) {\n            const { name, clusterIdTopParent } = cluster;\n            if (\n              !hiddenClusters.includes(\n                (clusterIdTopParent as number).toString(),\n              )\n            ) {\n              const companies = numCompany ? numCompany : 0;\n              const employees = numEmploy ? numEmploy : 0;\n              let fill: string | undefined;\n              const clusterIndustryDatum =\n                aggregateIndustryDataMap.data.clusters[clusterId];\n              if (\n                colorBy === ColorBy.education &&\n                aggregateIndustryDataMap.data !== undefined\n              ) {\n                if (clusterIndustryDatum) {\n                  fill = colorScale(\n                    clusterIndustryDatum.yearsEducationRank,\n                  ) as string;\n                } else {\n                  fill = \"gray\";\n                }\n              } else if (\n                colorBy === ColorBy.wage &&\n                aggregateIndustryDataMap.data !== undefined\n              ) {\n                if (clusterIndustryDatum) {\n                  fill = colorScale(\n                    clusterIndustryDatum.hourlyWageRank,\n                  ) as string;\n                } else {\n                  fill = \"gray\";\n                }\n              } else {\n                fill = undefined;\n              }\n              treeMapData.push({\n                id: clusterId,\n                value:\n                  compositionType === CompositionType.Companies\n                    ? companies\n                    : employees,\n                title: name ? name : \"\",\n                fill,\n                topLevelParentId: (clusterIdTopParent as number).toString(),\n              });\n            }\n          }\n        });\n      } else {\n        const { industries } = industryResponse.data;\n        colorMap = sectorColorMap;\n        if (\n          colorBy === ColorBy.education &&\n          aggregateIndustryDataMap.data !== undefined\n        ) {\n          colorScale = scaleLinear()\n            .domain([\n              aggregateIndustryDataMap.data.globalMinMax.minYearsEducation,\n              aggregateIndustryDataMap.data.globalMinMax.medianYearsEducation,\n              aggregateIndustryDataMap.data.globalMinMax.maxYearsEducation,\n            ])\n            .range(educationColorRange as any) as any;\n        } else if (\n          colorBy === ColorBy.wage &&\n          aggregateIndustryDataMap.data !== undefined\n        ) {\n          colorScale = scaleLinear()\n            .domain([\n              aggregateIndustryDataMap.data.globalMinMax.minHourlyWage,\n              aggregateIndustryDataMap.data.globalMinMax.medianHourlyWage,\n              aggregateIndustryDataMap.data.globalMinMax.maxHourlyWage,\n            ])\n            .range(wageColorRange as any) as any;\n        } else {\n          colorScale = () => undefined;\n        }\n        industries.forEach(({ naicsId, numCompany, numEmploy }) => {\n          const industry = industryMap.data[naicsId];\n          if (industry && industry.level === digitLevel) {\n            const { name, naicsIdTopParent } = industry;\n            if (!hiddenSectors.includes(naicsIdTopParent.toString())) {\n              const companies = numCompany ? numCompany : 0;\n              const employees = numEmploy ? numEmploy : 0;\n              let fill: string | undefined;\n              if (\n                (colorBy === ColorBy.education || colorBy === ColorBy.wage) &&\n                aggregateIndustryDataMap.data\n              ) {\n                const target =\n                  aggregateIndustryDataMap.data.industries[naicsId];\n                const targetValue =\n                  colorBy === ColorBy.education\n                    ? target.yearsEducationRank\n                    : target.hourlyWageRank;\n                fill = colorScale(targetValue);\n              }\n              treeMapData.push({\n                id: naicsId,\n                value:\n                  compositionType === CompositionType.Companies\n                    ? companies\n                    : employees,\n                title: name ? name : \"\",\n                fill,\n                topLevelParentId: naicsIdTopParent.toString(),\n              });\n            }\n          }\n        });\n      }\n      const transformed = transformData({\n        data: treeMapData,\n        width,\n        height,\n        colorMap,\n      });\n      const canvas = document.createElement(\"canvas\");\n      canvas.width = width;\n      canvas.height = height;\n      const context = canvas.getContext(\"2d\");\n      if (context) {\n        transformed.treeMapCells.forEach((cell) => {\n          context.beginPath();\n          context.rect(cell.x0, cell.y0, cell.x1, cell.y1);\n          context.fillStyle = cell.color;\n          context.fill();\n          context.strokeStyle = \"#fff\";\n          context.stroke();\n        });\n        html2canvas(treeMapCellsNode, {\n          allowTaint: true,\n          backgroundColor: \"rgba(0,0,0,0)\",\n        })\n          .then((cellLabels) => {\n            context.drawImage(cellLabels, 0, 0, width, height);\n            const link = document.createElement(\"a\");\n            link.download = cityName\n              ? `${cityName} - Economic Composition of Number of ${compositionType} in ${year}.png`\n              : \"treemap-visualization.png\";\n            link.href = canvas.toDataURL(\"image/png\");\n            link.click();\n            link.remove();\n            onClose();\n          })\n          .catch((e) => {\n            console.error(e);\n            onClose();\n          });\n      } else {\n        console.error(\"Failed to get context for \" + canvas);\n        onClose();\n      }\n    }\n  }, [\n    aggregateIndustryDataMap,\n    aggregationMode,\n    industryResponse,\n    clusterResponse,\n    industryMap,\n    clusterMap,\n    onClose,\n    compositionType,\n    digitLevel,\n    clusterLevel,\n    hiddenSectors,\n    hiddenClusters,\n    treeMapCellsNode,\n    cityName,\n    year,\n    colorBy,\n    effectRan,\n  ]);\n\n  if (industryResponse.error) {\n    console.error(industryResponse.error);\n    onClose();\n  }\n\n  if (clusterResponse.error) {\n    console.error(clusterResponse.error);\n    onClose();\n  }\n\n  return (\n    <FullPageOverlay>\n      <LoadingBlock />\n    </FullPageOverlay>\n  );\n};\n","import React from \"react\";\nimport styled from \"styled-components/macro\";\nimport { breakPoints } from \"../../../styling/GlobalGrid\";\nimport { educationColorRange } from \"../../../styling/styleUtils\";\nimport useFluent from \"../../../hooks/useFluent\";\nimport { joyrideClassNames } from \"../../navigation/secondaryHeader/guide/CitiesGuide\";\n\nconst RootBase = styled.div`\n  grid-row: 3;\n\n  @media ${breakPoints.small} {\n    grid-row: 4;\n  }\n`;\n\nconst StandardRoot = styled(RootBase)`\n  grid-column: 1;\n\n  @media (max-width: 1200px) {\n    grid-column: 1 / -1;\n  }\n`;\n\nconst FullWidthRoot = styled(RootBase)`\n  grid-column: 1 / -1;\n`;\n\nconst Content = styled.div`\n  padding: 0.875rem 0;\n`;\n\nconst Bar = styled.div`\n  width: 100%;\n  height: 0.6rem;\n  background: linear-gradient(\n    90deg,\n    ${educationColorRange[0]} 0%,\n    ${educationColorRange[1]} 50%,\n    ${educationColorRange[2]} 100%\n  );\n`;\n\nconst Labels = styled.div`\n  display: flex;\n  justify-content: space-between;\n  font-size: 0.75rem;\n  text-transform: uppercase;\n`;\n\ninterface Props {\n  fullWidth?: boolean;\n}\n\nconst IntensityLegend = (props: Props) => {\n  const { fullWidth } = props;\n  const Root = fullWidth ? FullWidthRoot : StandardRoot;\n  const getString = useFluent();\n\n  return (\n    <Root className={joyrideClassNames.colorLegendNoFilter}>\n      <Content>\n        <Labels>\n          <div>{getString(\"global-education-low\")}</div>\n          <div>{getString(\"global-education-high\")}</div>\n        </Labels>\n        <Bar />\n      </Content>\n    </Root>\n  );\n};\n\nexport default IntensityLegend;\n","import React from \"react\";\nimport styled from \"styled-components/macro\";\nimport { breakPoints } from \"../../../styling/GlobalGrid\";\nimport { wageColorRange } from \"../../../styling/styleUtils\";\nimport useFluent from \"../../../hooks/useFluent\";\nimport { joyrideClassNames } from \"../../navigation/secondaryHeader/guide/CitiesGuide\";\n\nconst RootBase = styled.div`\n  grid-row: 3;\n\n  @media ${breakPoints.small} {\n    grid-row: 4;\n  }\n`;\n\nconst StandardRoot = styled(RootBase)`\n  grid-column: 1;\n\n  @media (max-width: 1200px) {\n    grid-column: 1 / -1;\n  }\n`;\n\nconst FullWidthRoot = styled(RootBase)`\n  grid-column: 1 / -1;\n`;\n\nconst Content = styled.div`\n  padding: 0.875rem 0;\n`;\n\nconst Bar = styled.div`\n  width: 100%;\n  height: 0.6rem;\n  background: linear-gradient(\n    90deg,\n    ${wageColorRange[0]} 0%,\n    ${wageColorRange[1]} 50%,\n    ${wageColorRange[2]} 100%\n  );\n`;\n\nconst Labels = styled.div`\n  display: flex;\n  justify-content: space-between;\n  font-size: 0.75rem;\n  text-transform: uppercase;\n`;\n\ninterface Props {\n  fullWidth?: boolean;\n}\n\nconst IntensityLegend = (props: Props) => {\n  const { fullWidth } = props;\n  const Root = fullWidth ? FullWidthRoot : StandardRoot;\n  const getString = useFluent();\n\n  return (\n    <Root className={joyrideClassNames.colorLegendNoFilter}>\n      <Content>\n        <Labels>\n          <div>{getString(\"global-wages-low\")}</div>\n          <div>{getString(\"global-wages-high\")}</div>\n        </Labels>\n        <Bar />\n      </Content>\n    </Root>\n  );\n};\n\nexport default IntensityLegend;\n","import React, { useState } from \"react\";\nimport PanelSearch, { Datum as SearchDatum } from \"react-panel-search\";\nimport useFluent from \"../../../hooks/useFluent\";\nimport styled, { keyframes } from \"styled-components/macro\";\nimport {\n  textClassName,\n  ExpandingButton,\n  collapsedSizeMediaQuery,\n} from \"../Utils\";\nimport raw from \"raw.macro\";\n\nconst readThisChartIconSVG = raw(\"../../../assets/icons/magnifying-glass.svg\");\n\nconst Root = styled.div`\n  position: relative;\n  height: 100%;\n  display: flex;\n  align-items: center;\n`;\n\nconst jumpIn = keyframes`\n  0% {\n    transform: scale(0.92);\n  }\n\n  75% {\n    transform: scale(1.03);\n  }\n\n  90% {\n    transform: scale(0.95);\n  }\n\n  100% {\n    transform: scale(1);\n  }\n`;\n\nconst DropdownContainer = styled.div`\n  position: absolute;\n  right: -0.7rem;\n  width: 200px;\n  z-index: 200;\n  transform: scale(0.92);\n  animation: ${jumpIn} 0.2s ease-in-out 1 forwards;\n\n  button.react-panel-search-search-bar-clear-button {\n    padding: 0.4rem 0.1rem;\n  }\n`;\n\nconst ToggleButton = styled(ExpandingButton)`\n  @media ${collapsedSizeMediaQuery} {\n    right: 0;\n    left: auto;\n    z-index: 10;\n\n    &:hover {\n      .${textClassName} {\n        width: 155px;\n        /* max-width needed for safari */\n        max-width: 155px;\n      }\n    }\n  }\n`;\n\nexport interface SearchInGraphOptions {\n  disallowSelectionLevels: (number | string)[] | undefined;\n  setHighlighted: (value: string | undefined) => void;\n  rerenderKey: string;\n  searchData: SearchDatum[];\n  defaultPlaceholderText: string;\n  topLevelTitle: string;\n}\n\nconst SearchIndustryInGraph = (props: SearchInGraphOptions) => {\n  const {\n    setHighlighted,\n    rerenderKey,\n    disallowSelectionLevels,\n    searchData,\n    defaultPlaceholderText,\n    topLevelTitle,\n  } = props;\n\n  const getString = useFluent();\n\n  const [isDropdownVisible, setIsDropdownVisible] = useState<boolean>();\n  const [internalSelectedValue, setInternalSelectedValue] =\n    useState<SearchDatum | null>();\n\n  const onSelect = (d: SearchDatum | null) => {\n    if (d) {\n      setHighlighted(d.id as string);\n    } else {\n      setHighlighted(undefined);\n    }\n    setInternalSelectedValue(d);\n    if (d === null) {\n      setIsDropdownVisible(false);\n    }\n  };\n\n  const dropdown = isDropdownVisible ? (\n    <DropdownContainer>\n      <PanelSearch\n        key={\"ButtonTogglePreChartPanelSearchKeyFor\" + rerenderKey}\n        data={searchData}\n        topLevelTitle={topLevelTitle}\n        disallowSelectionLevels={disallowSelectionLevels}\n        defaultPlaceholderText={defaultPlaceholderText}\n        showCount={true}\n        resultsIdentation={1}\n        onSelect={onSelect}\n        maxResults={500}\n        onClose={() =>\n          !internalSelectedValue ? setIsDropdownVisible(false) : null\n        }\n        focusOnRender={true}\n      />\n    </DropdownContainer>\n  ) : null;\n\n  return (\n    <Root>\n      <ToggleButton onClick={() => setIsDropdownVisible(true)}>\n        <span dangerouslySetInnerHTML={{ __html: readThisChartIconSVG }} />\n        <div className={textClassName}>\n          {getString(\"global-ui-search-an-industry-in-graph\")}\n        </div>\n      </ToggleButton>\n      {dropdown}\n    </Root>\n  );\n};\n\nexport default React.memo(SearchIndustryInGraph);\n","import React, { useState } from \"react\";\nimport styled from \"styled-components/macro\";\nimport { breakPoints } from \"../../styling/GlobalGrid\";\nimport {\n  backgroundDark,\n  ButtonBase,\n  primaryColor,\n  primaryColorLight,\n  baseColor,\n  lightBorderColor,\n} from \"../../styling/styleUtils\";\nimport useFluent from \"../../hooks/useFluent\";\nimport raw from \"raw.macro\";\nimport SearchIndustryInGraph, {\n  SearchInGraphOptions,\n} from \"./searchIndustryInGraphDropdown\";\nimport CurrentSettingsTooltip from \"../dataViz/settings/CurrentSettingsTooltip\";\nimport Settings, { SettingsOptions } from \"../dataViz/settings\";\nimport Tooltip, { TooltipTheme, TooltipPosition } from \"./Tooltip\";\nimport { collapsedSizeMediaQuery } from \"./Utils\";\nimport HowToRead from \"./howToRead\";\nimport { joyrideClassNames } from \"../navigation/secondaryHeader/guide/CitiesGuide\";\n\nconst gearIcon = raw(\"../../assets/icons/settings.svg\");\n\nconst Root = styled.div<{ $hasIndicator: boolean }>`\n  display: contents;\n\n  @media ${collapsedSizeMediaQuery} {\n    grid-row: 1;\n    grid-column: 1 / 3;\n    display: ${({ $hasIndicator }) => ($hasIndicator ? \"contents\" : \"flex\")};\n    flex-direction: row-reverse;\n    justify-content: space-between;\n    position: relative;\n  }\n\n  @media ${breakPoints.small} {\n    grid-row: 2;\n    grid-column: 1;\n    display: block;\n  }\n`;\n\nconst RowBase = styled.div`\n  grid-column: 1;\n  padding: 0.75rem 0 0.25rem;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n`;\n\nconst LeftColumn = styled(RowBase)`\n  grid-row: 1;\n  font-size: 0.75rem;\n  font-size: clamp(0.75rem, 1.5vw, 1rem);\n  text-align: right;\n  font-size: 0.85rem;\n\n  @media ${collapsedSizeMediaQuery} {\n    flex-grow: 1;\n    position: relative;\n    padding-left: 2rem;\n  }\n`;\n\nconst IndicatorTooltipContainer = styled.span`\n  position: relative;\n  top: 0.2rem;\n`;\n\nconst RightColumn = styled(RowBase)`\n  grid-column: 2;\n`;\n\nconst IndicatorRoot = styled.div`\n  margin-left: auto;\n  display: flex;\n  align-items: center;\n`;\n\nconst SettingsButton = styled(ButtonBase)`\n  margin-left: auto;\n  height: 100%;\n  white-space: nowrap;\n`;\n\nconst NavButton = styled(ButtonBase)`\n  border: solid 1px ${backgroundDark};\n  flex-shrink: 1;\n  text-align: center;\n  margin-left: 0.5rem;\n  margin-left: clamp(0.5rem, 1vw, 2rem);\n  margin-top: 0.25rem;\n  margin-bottom: 0.25rem;\n\n  @media ${collapsedSizeMediaQuery} {\n    margin-left: 0;\n  }\n`;\n\nconst HighlightedNavButton = styled(NavButton)`\n  background-color: ${backgroundDark};\n  color: #fff;\n`;\n\nconst UnderlineNavButton = styled.button`\n  font-size: 0.7rem;\n  text-transform: uppercase;\n  font-weight: 600;\n  color: ${baseColor};\n  border-bottom: solid 4px transparent;\n  background-color: transparent;\n  position: relative;\n\n  &:after {\n    content: \"\";\n    display: block;\n    width: 100%;\n    height: 0;\n    border-bottom: solid 1px ${lightBorderColor};\n    position: absolute;\n    bottom: -4px;\n    left: 0;\n    right: 0;\n  }\n\n  &:hover {\n    border-bottom: solid 4px ${primaryColorLight};\n  }\n`;\nconst UnderlineHighlightedNavButton = styled(UnderlineNavButton)`\n  border-bottom: solid 4px ${primaryColor};\n\n  &:hover {\n    border-bottom: solid 4px ${primaryColor};\n  }\n`;\n\nconst NavButtonTooltip = styled.div`\n  position: absolute;\n  display: inline;\n  top: -0.1rem;\n  transform: translateX(0.5rem);\n`;\n\nconst ButtonNavContainer = styled.div`\n  margin: auto;\n  max-width: 100%;\n  display: flex;\n  justify-content: center;\n  flex-wrap: wrap;\n\n  @media ${breakPoints.small} {\n    margin-right: 0;\n    justify-content: flex-end;\n  }\n`;\n\nexport interface Indicator {\n  text: React.ReactNode;\n  tooltipContent?: React.ReactNode;\n}\n\nexport interface VizNavItem {\n  label: string;\n  active: boolean;\n  onClick: () => void;\n  tooltipContent?: React.ReactNode;\n}\n\nexport enum VizNavStyle {\n  Block = \"block\",\n  Underline = \"underline\",\n}\n\ninterface Props {\n  indicator?: Indicator;\n  searchInGraphOptions?: SearchInGraphOptions;\n  settingsOptions?: SettingsOptions;\n  vizNavigation?: VizNavItem[];\n  vizNavigationStyle?: VizNavStyle;\n}\n\nconst PreChartRow = (props: Props) => {\n  const {\n    indicator,\n    searchInGraphOptions,\n    settingsOptions,\n    vizNavigation,\n    vizNavigationStyle,\n  } = props;\n\n  const [settingsOpen, setSettingsOpen] = useState<boolean>(false);\n\n  const getString = useFluent();\n\n  const indicatorTooltip =\n    indicator && indicator.tooltipContent ? (\n      <IndicatorTooltipContainer>\n        <Tooltip explanation={indicator.tooltipContent} />\n      </IndicatorTooltipContainer>\n    ) : null;\n\n  const indicatorElm = indicator ? (\n    <IndicatorRoot>\n      <span>\n        {indicatorTooltip}\n        {indicator.text}\n      </span>\n    </IndicatorRoot>\n  ) : null;\n\n  const rightColumnStyle: React.CSSProperties | undefined = indicatorElm\n    ? {\n        display: \"flex\",\n        justifyContent: \"flex-end\",\n      }\n    : undefined;\n\n  const vizNavigationButtonElms =\n    vizNavigation && vizNavigation.length\n      ? vizNavigation.map((link) => {\n          const Button =\n            vizNavigationStyle === VizNavStyle.Underline\n              ? link.active\n                ? UnderlineHighlightedNavButton\n                : UnderlineNavButton\n              : link.active\n                ? HighlightedNavButton\n                : NavButton;\n          const tooltipContent = link.tooltipContent ? (\n            <IndicatorTooltipContainer>\n              <NavButtonTooltip>\n                <Tooltip explanation={link.tooltipContent} />\n              </NavButtonTooltip>\n            </IndicatorTooltipContainer>\n          ) : null;\n          return (\n            <div key={link.label}>\n              <Button onClick={link.onClick}>\n                {link.label}\n                {tooltipContent}\n              </Button>\n            </div>\n          );\n        })\n      : null;\n  const vizNavigationButtons =\n    vizNavigation && vizNavigation.length ? (\n      <ButtonNavContainer className={joyrideClassNames.vizToggle}>\n        {vizNavigationButtonElms}\n      </ButtonNavContainer>\n    ) : null;\n\n  const searchInGraph = searchInGraphOptions ? (\n    <SearchIndustryInGraph {...searchInGraphOptions} />\n  ) : null;\n\n  const settingsButton = settingsOptions ? (\n    <Tooltip\n      explanation={\n        !settingsOpen ? (\n          <CurrentSettingsTooltip settingsOptions={settingsOptions} />\n        ) : null\n      }\n      theme={TooltipTheme.Dark}\n      tooltipPosition={TooltipPosition.Bottom}\n    >\n      <SettingsButton\n        onClick={() => setSettingsOpen((current) => !current)}\n        className={joyrideClassNames.vizOptions}\n      >\n        <span dangerouslySetInnerHTML={{ __html: gearIcon }} />\n        {getString(\"global-ui-settings\")}\n      </SettingsButton>\n    </Tooltip>\n  ) : null;\n\n  const settingsPanel = settingsOpen ? (\n    <Settings\n      onClose={() => setSettingsOpen(false)}\n      settingsOptions={settingsOptions ? settingsOptions : {}}\n    />\n  ) : null;\n\n  return (\n    <>\n      <Root $hasIndicator={indicatorElm !== null}>\n        <RightColumn style={rightColumnStyle}>\n          {searchInGraph}\n          {settingsButton}\n        </RightColumn>\n        <LeftColumn>\n          <HowToRead />\n          {vizNavigationButtons}\n          {indicatorElm}\n        </LeftColumn>\n      </Root>\n      {settingsPanel}\n    </>\n  );\n};\n\nexport default React.memo(PreChartRow);\n","import React from \"react\";\nimport styled from \"styled-components/macro\";\nimport useQueryParams from \"../../../hooks/useQueryParams\";\nimport useFluent from \"../../../hooks/useFluent\";\nimport {\n  DigitLevel,\n  defaultDigitLevel,\n  defaultCompositionType,\n} from \"../../../types/graphQL/graphQLTypes\";\nimport {\n  defaultClusterMode,\n  ColorBy,\n  CityColorBy,\n  defaultNodeSizing,\n  NodeSizing,\n  defaultCityNodeSizing,\n  defaultAggregationMode,\n} from \"../../../routing/routes\";\nimport { SettingsOptions } from \"./index\";\nimport upperFirst from \"lodash/upperFirst\";\n\nconst Root = styled.div`\n  text-align: center;\n`;\n\nconst Title = styled.div`\n  margin-bottom: 0.2rem;\n  font-size: 0.85rem;\n`;\n\nconst Segment = styled.div`\n  font-size: 0.7rem;\n  margin-top: 0.4rem;\n  display: flex;\n  flex-direction: column;\n  text-transform: capitalize;\n`;\n\nconst Subtitle = styled.em`\n  opacity: 0.55;\n  font-size: 0.65rem;\n`;\n\ninterface Props {\n  settingsOptions: SettingsOptions;\n}\n\nconst CurrentSettingsTooltip = (props: Props) => {\n  const { settingsOptions } = props;\n\n  const params = useQueryParams();\n  const getString = useFluent();\n\n  const compositionText =\n    settingsOptions.compositionType !== undefined ? (\n      <Segment>\n        <Subtitle>{getString(\"global-ui-numbers-based-on\")}</Subtitle>\n        <em>\n          {params.composition_type\n            ? params.composition_type\n            : defaultCompositionType}\n        </em>\n      </Segment>\n    ) : null;\n\n  const aggregationText =\n    settingsOptions.aggregationMode !== undefined ? (\n      <Segment>\n        <Subtitle>{getString(\"global-ui-aggregation-mode\")}</Subtitle>\n        <em>\n          {upperFirst(\n            params.aggregation ? params.aggregation : defaultAggregationMode,\n          )}\n        </em>\n      </Segment>\n    ) : null;\n\n  const detailLevel =\n    settingsOptions.digitLevel !== undefined ? (\n      <Segment>\n        <Subtitle>{getString(\"global-ui-detail-level\")}</Subtitle>\n        <em>\n          {params.digit_level\n            ? params.digit_level\n            : typeof settingsOptions.digitLevel === \"object\" &&\n                settingsOptions.digitLevel.sixDigitOnlyMessage\n              ? DigitLevel.Six\n              : defaultDigitLevel}{\" \"}\n          {getString(\"global-ui-digit-level\")}\n        </em>\n      </Segment>\n    ) : null;\n\n  const clusterLevel =\n    settingsOptions.clusterLevel !== undefined ? (\n      <Segment>\n        <Subtitle>{getString(\"global-ui-cluster-level\")}</Subtitle>\n        <em>\n          {getString(\"global-ui-cluster-aggregation-level\", {\n            cluster:\n              \"cluster_\" + params.cluster_overlay\n                ? params.cluster_overlay\n                : defaultDigitLevel,\n          })}\n        </em>\n      </Segment>\n    ) : null;\n\n  const hideClusters =\n    settingsOptions.clusterOverlayMode !== undefined ? (\n      <Segment>\n        <Subtitle>{getString(\"global-ui-show-clusters\")}</Subtitle>\n        <em>\n          {params.cluster_overlay ? params.cluster_overlay : defaultClusterMode}\n        </em>\n      </Segment>\n    ) : null;\n\n  let nodeSizingValue: NodeSizing | undefined;\n  if (\n    typeof settingsOptions.nodeSizing !== \"object\" &&\n    params.node_sizing === NodeSizing.rca\n  ) {\n    nodeSizingValue = defaultNodeSizing;\n  } else if (\n    typeof settingsOptions.nodeSizing === \"object\" &&\n    settingsOptions.nodeSizing.rca &&\n    !params.node_sizing\n  ) {\n    nodeSizingValue = NodeSizing.rca;\n  } else {\n    nodeSizingValue = !params.node_sizing\n      ? defaultNodeSizing\n      : params.node_sizing;\n  }\n  const sizeBy =\n    settingsOptions.nodeSizing !== undefined ? (\n      <Segment>\n        <Subtitle>{getString(\"global-ui-node-sizing\")}</Subtitle>\n        <em>\n          {getString(\"global-formatted-size-by\", { type: nodeSizingValue })}\n        </em>\n      </Segment>\n    ) : null;\n\n  const defaultColorByText =\n    settingsOptions.clusterLevel !== undefined ? \"Cluster\" : ColorBy.sector;\n  const colorBy =\n    settingsOptions.colorBy !== undefined ? (\n      <Segment>\n        <Subtitle>\n          {typeof settingsOptions.colorBy === \"object\" &&\n          settingsOptions.colorBy.nodes\n            ? getString(\"global-ui-node-color-by\")\n            : getString(\"global-ui-color-by\")}\n        </Subtitle>\n        <em>{params.color_by ? params.color_by : defaultColorByText}</em>\n      </Segment>\n    ) : null;\n\n  const citySizeBy =\n    settingsOptions.cityNodeSizing !== undefined ? (\n      <Segment>\n        <Subtitle>{getString(\"global-ui-node-sizing\")}</Subtitle>\n        <em>\n          {getString(\"global-formatted-size-by\", {\n            type: params.city_node_sizing\n              ? params.city_node_sizing\n              : defaultCityNodeSizing,\n          })}\n        </em>\n      </Segment>\n    ) : null;\n\n  const cityColorBy =\n    settingsOptions.cityColorBy !== undefined ? (\n      <Segment>\n        <Subtitle>{getString(\"global-ui-node-color-by\")}</Subtitle>\n        <em>\n          {upperFirst(\n            params.city_color_by ? params.city_color_by : CityColorBy.proximity,\n          )}\n        </em>\n      </Segment>\n    ) : null;\n\n  const rcaThreshold =\n    settingsOptions.rcaThreshold !== undefined ? (\n      <Segment>\n        <Subtitle>RCA Threshold</Subtitle>\n        <em>{params.rca_threshold !== undefined ? params.rca_threshold : 1}</em>\n      </Segment>\n    ) : null;\n\n  return (\n    <Root>\n      <Title>{getString(\"global-ui-change-settings\")}</Title>\n      <Segment>\n        <em>{getString(\"global-ui-current-settings\")}</em>\n      </Segment>\n      {compositionText}\n      {aggregationText}\n      {detailLevel}\n      {clusterLevel}\n      {hideClusters}\n      {sizeBy}\n      {colorBy}\n      {rcaThreshold}\n      {cityColorBy}\n      {citySizeBy}\n    </Root>\n  );\n};\n\nexport default CurrentSettingsTooltip;\n","import React from \"react\";\nimport styled from \"styled-components/macro\";\nimport ReactSlider from \"react-slider\";\nimport {\n  primaryColor,\n  backgroundDark,\n  backgroundMedium,\n} from \"../../../styling/styleUtils\";\nimport { scaleLog } from \"d3-scale\";\n\nconst slideRootClassName = \"react-slider-root-class\";\nconst slideThumbClassName = \"react-slider-thumb-class\";\nconst slideTrackClassName = \"react-slider-track-class\";\n\nconst Root = styled.div`\n  width: 100%;\n  margin: 0.875rem 0 2rem;\n`;\nconst SliderContainer = styled.div`\n  width: 100%;\n  box-sizing: border-box;\n  padding: 0 1rem 0 2rem;\n  flex-shrink: 0;\n  margin: 0rem auto 1.15rem;\n  position: relative;\n\n  .${slideThumbClassName} {\n    background-color: ${primaryColor};\n    height: 1rem;\n    width: 1rem;\n    border-radius: 1000px;\n    cursor: pointer;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    outline: none;\n\n    span {\n      color: ${primaryColor};\n      transform: translateY(-125%);\n      white-space: nowrap;\n    }\n  }\n  .${slideThumbClassName}-0 {\n    transform: translateX(-0.1rem);\n  }\n  .${slideTrackClassName} {\n    margin-top: 0.25rem;\n  }\n  .${slideTrackClassName}-0 {\n    background-color: ${backgroundMedium};\n    height: 0.5rem;\n  }\n  .${slideTrackClassName}-1 {\n    background-color: ${backgroundDark};\n    height: 0.5rem;\n  }\n  .${slideTrackClassName}-2 {\n    background-color: ${backgroundMedium};\n    height: 0.5rem;\n  }\n`;\n\n// 0.0001\n// 0.001\n// 0.01\n// 0.1\n// 1\n// 10\n// 100\n// 1000\n\ninterface Props {\n  updateValue: (val: number) => void;\n  initialValue: number;\n}\n\ninterface ThumbState {\n  index: number;\n  value: number | number[];\n  valueNow: number;\n}\n\nconst RCAThresholdSlider = ({ updateValue, initialValue }: Props) => {\n  const logScale = scaleLog().domain([0.001, 100]).range([1, 120]);\n\n  const logScaleWithZero = (value: number) => (value ? logScale(value) : 0);\n  const convertValue = (value: number) => {\n    const logValue = value ? logScale.invert(value) : 0;\n    let decimalPlaces = 0;\n    if (logValue < 0.0001) {\n      decimalPlaces = 6;\n    } else if (logValue < 0.001) {\n      decimalPlaces = 5;\n    } else if (logValue < 0.01) {\n      decimalPlaces = 4;\n    } else if (logValue < 0.1) {\n      decimalPlaces = 3;\n    } else if (logValue < 0.9) {\n      decimalPlaces = 2;\n    } else if (logValue < 10 && logValue > 1.15) {\n      decimalPlaces = 1;\n    } else {\n      decimalPlaces = 0;\n    }\n    return value ? parseFloat(logValue.toFixed(decimalPlaces)) : 0;\n  };\n\n  const thumbRender = (\n    p: React.HTMLProps<HTMLDivElement>,\n    state: ThumbState,\n  ) => (\n    <small {...p}>\n      <span>\n        Presence Value {\"\"} {convertValue(state.valueNow)}\n      </span>\n    </small>\n  );\n\n  return (\n    <Root>\n      <SliderContainer>\n        <ReactSlider\n          className={slideRootClassName}\n          thumbClassName={slideThumbClassName}\n          trackClassName={slideTrackClassName}\n          defaultValue={\n            isNaN(initialValue)\n              ? logScaleWithZero(1)\n              : logScaleWithZero(initialValue)\n          }\n          renderThumb={thumbRender}\n          max={120}\n          min={0}\n          onAfterChange={(v: number) => updateValue(convertValue(v))}\n        />\n      </SliderContainer>\n    </Root>\n  );\n};\n\nexport default RCAThresholdSlider;\n","// Google Analytics stub - analytics removed in Phase 1\nconst googleAnalyticsEvent = (\n  _category: string,\n  _action: string,\n  _label?: string,\n) => {\n  // No-op: analytics disabled\n};\n\nexport default googleAnalyticsEvent;\n","import React from \"react\";\nimport styled, { keyframes } from \"styled-components/macro\";\nimport { useHistory } from \"react-router-dom\";\nimport queryString from \"query-string\";\nimport useQueryParams from \"../../../hooks/useQueryParams\";\nimport useFluent from \"../../../hooks/useFluent\";\nimport { useStaticData } from \"../../../dataProvider\";\nimport {\n  secondaryFont,\n  backgroundDark,\n  primaryColorLight,\n  BlockButton,\n  BlockButtonHighlighted,\n  baseColor,\n} from \"../../../styling/styleUtils\";\nimport {\n  CompositionType,\n  defaultDigitLevel,\n  defaultCompositionType,\n  DigitLevel,\n} from \"../../../types/graphQL/graphQLTypes\";\nimport { breakPoints } from \"../../../styling/GlobalGrid\";\nimport {\n  ClusterMode,\n  defaultClusterMode,\n  NodeSizing,\n  defaultNodeSizing,\n  ColorBy,\n  ClusterLevel,\n  defaultClusterLevel,\n  CityNodeSizing,\n  CityColorBy,\n  defaultCityNodeSizing,\n  defaultAggregationMode,\n  AggregationMode,\n} from \"../../../routing/routes\";\nimport raw from \"raw.macro\";\nimport Tooltip, { TooltipTheme } from \"../../general/Tooltip\";\nimport upperFirst from \"lodash/upperFirst\";\nimport RCAThresholdSlider from \"./RCAThresholdSlider\";\nimport googleAnalyticsEvent from \"../../analytics/googleAnalyticsEvent\";\n\nconst gearIcon = raw(\"../../../assets/icons/settings.svg\");\n\nconst slideIn = keyframes`\n  0% {\n    transform: translate(100%, 0);\n  }\n\n  75% {\n    transform: translate(-8%, 0);\n  }\n\n  90% {\n    transform: translate(5, 0);\n  }\n\n  100% {\n    transform: translate(0, 0);\n  }\n`;\n\nconst Root = styled.div`\n  grid-column: 2;\n  grid-row: 2;\n  width: 100%;\n  height: 100%;\n  position: relative;\n  background-color: #fff;\n  box-shadow: 0px 0px 5px 0px rgba(0, 0, 0, 0.15);\n  transform: translate(100%, 0);\n  animation: ${slideIn} 0.4s ease-in-out 1 forwards;\n  z-index: 100;\n\n  @media ${breakPoints.small} {\n    grid-row: 1;\n    grid-column: 1;\n    height: auto;\n  }\n`;\n\nconst ContentRoot = styled.div`\n  width: 100%;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  overflow: auto;\n  ::-webkit-scrollbar {\n    -webkit-appearance: none;\n    width: 7px;\n  }\n  ::-webkit-scrollbar-thumb {\n    border-radius: 4px;\n    background-color: rgba(0, 0, 0, 0.3);\n  }\n  ::-webkit-scrollbar-track {\n    background-color: rgba(0, 0, 0, 0.1);\n  }\n\n  @media ${breakPoints.small} {\n    position: static;\n    overflow: visible;\n  }\n\n  @media ${breakPoints.small} {\n    position: relative;\n  }\n`;\n\nconst Title = styled.h1`\n  margin: 0;\n  padding: 0.5rem 0.8rem;\n  border-bottom: solid 1px ${backgroundDark};\n  background-color: ${primaryColorLight};\n  font-family: ${secondaryFont};\n  font-size: 1rem;\n  text-transform: uppercase;\n  font-weight: 400;\n  display: flex;\n  align-items: center;\n  position: sticky;\n  top: 0;\n  z-index: 5;\n\n  span {\n    width: 1rem;\n    height: 1rem;\n    display: inline-block;\n    line-height: 0;\n    margin-right: 0.25rem;\n\n    svg {\n      width: 100%;\n      height: 100%;\n      fill: ${backgroundDark};\n    }\n  }\n`;\n\nconst CloseButton = styled.button`\n  margin-left: auto;\n  padding: 0 0 0 1rem;\n  border: none;\n  background-color: transparent;\n  font-size: 1.25rem;\n  font-weight: 400;\n  font-family: ${secondaryFont};\n  transform: translate(0, -1px);\n`;\n\nconst Content = styled.div`\n  padding: 1rem 0.4rem;\n  display: flex;\n  flex-direction: column;\n`;\n\nconst SettingGrid = styled.div`\n  display: grid;\n  grid-template-columns: auto 1fr;\n  grid-template-rows: auto auto;\n  grid-row-gap: 0.5rem;\n  align-items: center;\n  margin-bottom: 1rem;\n`;\n\nconst SettingsInputContainer = styled.div`\n  grid-column: 2;\n  grid-row: 2;\n`;\n\nconst DisabledSettingsInputContainer = styled(SettingsInputContainer)`\n  opacity: 0.5;\n  pointer-events: none;\n`;\n\nconst CompostionButtonBase = styled(BlockButton)`\n  text-transform: capitalize;\n\n  &.disabled-option {\n    opacity: 0.5;\n    cursor: default;\n    &:hover {\n      color: ${baseColor};\n      background-color: transparent;\n    }\n  }\n`;\nconst CompostionButtonHighlight = styled(BlockButtonHighlighted)`\n  text-transform: capitalize;\n\n  &.disabled-option {\n    opacity: 0.5;\n    cursor: default;\n    &:hover {\n      color: ${baseColor};\n      background-color: transparent;\n    }\n  }\n`;\n\nconst Label = styled.label`\n  font-size: 1rem;\n  display: block;\n  grid-column: 2;\n  grid-row: 1;\n\n  @media ${breakPoints.medium} {\n    font-size: 0.75rem;\n  }\n`;\n\nconst DisabledLabel = styled(Label)`\n  opacity: 0.5;\n`;\n\nconst DigitLevelButton = styled.button<{ $selected: boolean }>`\n  font-size: 0.85rem;\n  width: 100%;\n  text-transform: none;\n  display: block;\n  background-color: transparent;\n  padding: 0.45rem 0;\n  display: flex;\n  position: relative;\n  margin: 0;\n\n  &:hover:not(.disabled-option) {\n    &:before {\n      background-color: ${backgroundDark};\n    }\n  }\n  &.disabled-option {\n    opacity: 0.5;\n    cursor: default;\n  }\n\n  &:focus,\n  &:active {\n    color: ${backgroundDark};\n  }\n\n  &:before {\n    flex-shrink: 0;\n    content: \"\";\n    display: block;\n    width: 0.85rem;\n    height: 0.85rem;\n    border: solid 1px ${backgroundDark};\n    border-radius: 2000px;\n    background-color: ${({ $selected }) =>\n      $selected ? backgroundDark : \"#fff\"};\n    margin-right: 0.75rem;\n    transition: all 0.1s ease-in-out;\n    position: relative;\n    z-index: 2;\n  }\n\n  &:after {\n    flex-shrink: 0;\n    content: \"\";\n    width: 0.5rem;\n    border-right: solid 1px ${backgroundDark};\n    position: absolute;\n    left: 0;\n    top: 0;\n    bottom: 0;\n  }\n\n  &:first-child:after {\n    top: 0.7rem;\n  }\n\n  &:last-child {\n    align-items: flex-end;\n    &:after {\n      bottom: 0.7rem;\n    }\n  }\n\n  @media ${breakPoints.medium} {\n    font-size: 0.75rem;\n  }\n`;\n\nconst DigitLevelSoloButton = styled(DigitLevelButton)`\n  &:after {\n    display: none;\n  }\n`;\n\nconst ResetButton = styled(BlockButton)`\n  margin: 1rem auto;\n`;\n\nexport interface SettingsOptions {\n  digitLevel?:\n    | boolean\n    | {\n        sixDigitOnlyMessage?: string;\n        defaultDigitLevel?: DigitLevel;\n      };\n  compositionType?:\n    | boolean\n    | {\n        disabledOptions?: CompositionType[];\n      };\n  clusterOverlayMode?: boolean;\n  nodeSizing?:\n    | boolean\n    | {\n        rca: boolean;\n      };\n  colorBy?:\n    | boolean\n    | {\n        nodes: boolean;\n      };\n  clusterLevel?:\n    | boolean\n    | {\n        disabledOptions?: ClusterLevel[];\n      };\n  cityNodeSizing?: boolean;\n  cityColorBy?: boolean;\n  aggregationMode?: boolean;\n  rcaThreshold?: boolean;\n}\n\ninterface Props {\n  onClose: () => void;\n  settingsOptions: SettingsOptions;\n}\n\nconst Settings = (props: Props) => {\n  const { onClose, settingsOptions } = props;\n  const history = useHistory();\n  const params = useQueryParams();\n  const getString = useFluent();\n  const { maxDigitLevel } = useStaticData();\n\n  const updateSetting = (param: string, value: string | number) => {\n    const query = queryString.stringify({ ...params, [param]: value });\n    const newUrl = query\n      ? history.location.pathname + \"?\" + query\n      : history.location.pathname;\n    googleAnalyticsEvent(\"Viz Options\", param, `${value}`);\n    history.push(newUrl);\n  };\n\n  const resetSettings = () => {\n    const {\n      digit_level: _unusedDigitLevel,\n      cluster_level: _unusedClusterLevel,\n      composition_type: _unusedCompositionType,\n      cluster_overlay: _unusedHideClusters,\n      node_sizing: _unusedNodeSizing,\n      color_by: _unusedColorBy,\n      city_color_by: _unusedCityColorBy,\n      city_node_sizing: _unusedCitySizeBy,\n      aggregation: _unusedAggregation,\n      rca_threshold: _rcaThreshold,\n      ...rest\n    } = params;\n    const query = queryString.stringify({ ...rest });\n    const newUrl = query\n      ? history.location.pathname + \"?\" + query\n      : history.location.pathname;\n    history.push(newUrl);\n  };\n\n  let compositionOptions: React.ReactElement<any> | null;\n  if (settingsOptions.compositionType !== undefined) {\n    const CompanyButton =\n      (!params.composition_type &&\n        defaultCompositionType === CompositionType.Companies) ||\n      params.composition_type === CompositionType.Companies\n        ? CompostionButtonHighlight\n        : CompostionButtonBase;\n\n    const EmployeeButton =\n      (!params.composition_type &&\n        defaultCompositionType === CompositionType.Employees) ||\n      params.composition_type === CompositionType.Employees\n        ? CompostionButtonHighlight\n        : CompostionButtonBase;\n    const InputContainer =\n      settingsOptions.compositionType !== false\n        ? SettingsInputContainer\n        : DisabledSettingsInputContainer;\n    const LabelContainer =\n      settingsOptions.compositionType !== false ? Label : DisabledLabel;\n    const tooltipText =\n      settingsOptions.compositionType !== false\n        ? getString(\"glossary-composition\")\n        : getString(\"glossary-composition-disabled\");\n    const disabledOptions =\n      typeof settingsOptions.compositionType === \"object\" &&\n      settingsOptions.compositionType.disabledOptions\n        ? settingsOptions.compositionType.disabledOptions\n        : [];\n    compositionOptions = (\n      <SettingGrid>\n        <Tooltip explanation={tooltipText} />\n        <LabelContainer>\n          {getString(\"global-ui-numbers-based-on\")}\n        </LabelContainer>\n        <InputContainer>\n          <EmployeeButton\n            onClick={\n              disabledOptions.includes(CompositionType.Employees)\n                ? undefined\n                : () =>\n                    updateSetting(\"composition_type\", CompositionType.Employees)\n            }\n            className={\n              disabledOptions.includes(CompositionType.Employees)\n                ? \"disabled-option\"\n                : undefined\n            }\n          >\n            <Tooltip\n              explanation={\n                disabledOptions.includes(CompositionType.Employees)\n                  ? getString(\"global-ui-settings-option-na\")\n                  : null\n              }\n              theme={TooltipTheme.Dark}\n              cursor={\n                disabledOptions.includes(CompositionType.Employees)\n                  ? \"default\"\n                  : \"pointer\"\n              }\n            >\n              {CompositionType.Employees}\n            </Tooltip>\n          </EmployeeButton>\n          <CompanyButton\n            onClick={\n              disabledOptions.includes(CompositionType.Companies)\n                ? undefined\n                : () =>\n                    updateSetting(\"composition_type\", CompositionType.Companies)\n            }\n            className={\n              disabledOptions.includes(CompositionType.Companies)\n                ? \"disabled-option\"\n                : undefined\n            }\n          >\n            <Tooltip\n              explanation={\n                disabledOptions.includes(CompositionType.Companies)\n                  ? getString(\"global-ui-settings-option-na\")\n                  : null\n              }\n              theme={TooltipTheme.Dark}\n              cursor={\n                disabledOptions.includes(CompositionType.Companies)\n                  ? \"default\"\n                  : \"pointer\"\n              }\n            >\n              {CompositionType.Companies}\n            </Tooltip>\n          </CompanyButton>\n        </InputContainer>\n      </SettingGrid>\n    );\n  } else {\n    compositionOptions = null;\n  }\n\n  let aggregationMode: React.ReactElement<any> | null;\n  if (settingsOptions.aggregationMode !== undefined) {\n    const ClusterButton =\n      (!params.aggregation &&\n        defaultAggregationMode === AggregationMode.cluster) ||\n      params.aggregation === AggregationMode.cluster\n        ? CompostionButtonHighlight\n        : CompostionButtonBase;\n    const NaicButton =\n      (!params.aggregation &&\n        defaultAggregationMode === AggregationMode.industries) ||\n      params.aggregation === AggregationMode.industries\n        ? CompostionButtonHighlight\n        : CompostionButtonBase;\n    const InputContainer =\n      settingsOptions.aggregationMode === true\n        ? SettingsInputContainer\n        : DisabledSettingsInputContainer;\n    const LabelContainer =\n      settingsOptions.aggregationMode === true ? Label : DisabledLabel;\n    aggregationMode = (\n      <SettingGrid>\n        <Tooltip explanation={getString(\"glossary-cluster-vs-naics\")} />\n        <LabelContainer>\n          {getString(\"global-ui-aggregation-mode\")}\n        </LabelContainer>\n        <InputContainer>\n          <NaicButton\n            onClick={() =>\n              updateSetting(\"aggregation\", AggregationMode.industries)\n            }\n          >\n            {getString(\"global-text-industry-groups\")}\n          </NaicButton>\n          <ClusterButton\n            onClick={() =>\n              updateSetting(\"aggregation\", AggregationMode.cluster)\n            }\n          >\n            {getString(\"global-ui-skill-clusters\")}\n          </ClusterButton>\n        </InputContainer>\n      </SettingGrid>\n    );\n  } else {\n    aggregationMode = null;\n  }\n\n  let digitLevelOptions: React.ReactElement<any> | null;\n  if (settingsOptions.digitLevel !== undefined) {\n    const InputContainer =\n      settingsOptions.digitLevel !== false\n        ? SettingsInputContainer\n        : DisabledSettingsInputContainer;\n    const LabelContainer =\n      settingsOptions.digitLevel !== false ? Label : DisabledLabel;\n    const tooltipText =\n      settingsOptions.digitLevel !== false\n        ? getString(\"glossary-digit-level\")\n        : getString(\"glossary-digit-level-disabled\");\n    const sixDigitOnlyMessage =\n      typeof settingsOptions.digitLevel === \"object\" &&\n      settingsOptions.digitLevel.sixDigitOnlyMessage\n        ? settingsOptions.digitLevel.sixDigitOnlyMessage\n        : \"\";\n    const defaultValue =\n      typeof settingsOptions.digitLevel === \"object\" &&\n      settingsOptions.digitLevel.defaultDigitLevel\n        ? settingsOptions.digitLevel.defaultDigitLevel\n        : defaultDigitLevel;\n    digitLevelOptions = sixDigitOnlyMessage ? (\n      <SettingGrid>\n        <Tooltip explanation={tooltipText} />\n        <LabelContainer>{getString(\"global-ui-detail-level\")}</LabelContainer>\n        <InputContainer>\n          <DigitLevelSoloButton $selected={true}>\n            {DigitLevel.Six}-{getString(\"global-ui-digit-level\")}\n          </DigitLevelSoloButton>\n          <small>\n            <em>{sixDigitOnlyMessage}</em>\n          </small>\n        </InputContainer>\n      </SettingGrid>\n    ) : (\n      <SettingGrid>\n        <Tooltip explanation={tooltipText} />\n        <LabelContainer>{getString(\"global-ui-detail-level\")}</LabelContainer>\n        <InputContainer>\n          <DigitLevelButton\n            onClick={() => updateSetting(\"digit_level\", DigitLevel.Sector)}\n            $selected={\n              settingsOptions.digitLevel !== false &&\n              ((!params.digit_level && defaultValue === DigitLevel.Sector) ||\n                params.digit_level === DigitLevel.Sector.toString())\n            }\n          >\n            <span>\n              {DigitLevel.Sector}-{getString(\"global-ui-digit-level\")} /{\" \"}\n              {getString(\"global-ui-sector-level\")}\n            </span>\n          </DigitLevelButton>\n          <DigitLevelButton\n            onClick={() => updateSetting(\"digit_level\", DigitLevel.Two)}\n            $selected={\n              settingsOptions.digitLevel !== false &&\n              ((!params.digit_level && defaultValue === DigitLevel.Two) ||\n                params.digit_level === DigitLevel.Two.toString())\n            }\n          >\n            <span>\n              {DigitLevel.Two}-{getString(\"global-ui-digit-level\")}\n            </span>\n          </DigitLevelButton>\n          <DigitLevelButton\n            onClick={() => updateSetting(\"digit_level\", DigitLevel.Three)}\n            $selected={\n              settingsOptions.digitLevel !== false &&\n              ((!params.digit_level && defaultValue === DigitLevel.Three) ||\n                params.digit_level === DigitLevel.Three.toString())\n            }\n          >\n            <span>\n              {DigitLevel.Three}-{getString(\"global-ui-digit-level\")}\n            </span>\n          </DigitLevelButton>\n          <DigitLevelButton\n            onClick={() => updateSetting(\"digit_level\", DigitLevel.Four)}\n            $selected={\n              settingsOptions.digitLevel !== false &&\n              ((!params.digit_level && defaultValue === DigitLevel.Four) ||\n                params.digit_level === DigitLevel.Four.toString())\n            }\n          >\n            <span>\n              {DigitLevel.Four}-{getString(\"global-ui-digit-level\")}\n            </span>\n          </DigitLevelButton>\n          {maxDigitLevel >= DigitLevel.Five && (\n          <DigitLevelButton\n            onClick={() => updateSetting(\"digit_level\", DigitLevel.Five)}\n            $selected={\n              settingsOptions.digitLevel !== false &&\n              ((!params.digit_level && defaultValue === DigitLevel.Five) ||\n                params.digit_level === DigitLevel.Five.toString())\n            }\n          >\n            <span>\n              {DigitLevel.Five}-{getString(\"global-ui-digit-level\")}\n            </span>\n          </DigitLevelButton>\n          )}\n          {maxDigitLevel >= DigitLevel.Six && (\n          <DigitLevelButton\n            onClick={() => updateSetting(\"digit_level\", DigitLevel.Six)}\n            $selected={\n              settingsOptions.digitLevel !== false &&\n              ((!params.digit_level && defaultValue === DigitLevel.Six) ||\n                params.digit_level === DigitLevel.Six.toString())\n            }\n          >\n            <span>\n              {DigitLevel.Six}-{getString(\"global-ui-digit-level\")}\n            </span>\n          </DigitLevelButton>\n          )}\n        </InputContainer>\n      </SettingGrid>\n    );\n  } else {\n    digitLevelOptions = null;\n  }\n  let clusterLevelOptions: React.ReactElement<any> | null;\n  if (settingsOptions.clusterLevel !== undefined) {\n    const InputContainer =\n      settingsOptions.clusterLevel !== false\n        ? SettingsInputContainer\n        : DisabledSettingsInputContainer;\n    const LabelContainer =\n      settingsOptions.clusterLevel !== false ? Label : DisabledLabel;\n    const tooltipText =\n      settingsOptions.clusterLevel !== false\n        ? getString(\"glossary-cluster-level\")\n        : getString(\"glossary-cluster-level-disabled\");\n    const disabledOptions =\n      typeof settingsOptions.clusterLevel === \"object\" &&\n      settingsOptions.clusterLevel.disabledOptions\n        ? settingsOptions.clusterLevel.disabledOptions\n        : [];\n    clusterLevelOptions = (\n      <SettingGrid>\n        <Tooltip explanation={tooltipText} />\n        <LabelContainer>{getString(\"global-ui-cluster-level\")}</LabelContainer>\n        <InputContainer>\n          <DigitLevelButton\n            onClick={\n              !disabledOptions.includes(ClusterLevel.C1)\n                ? () => updateSetting(\"cluster_level\", ClusterLevel.C1)\n                : undefined\n            }\n            className={\n              disabledOptions.includes(ClusterLevel.C1)\n                ? \"disabled-option\"\n                : undefined\n            }\n            $selected={\n              settingsOptions.clusterLevel !== false &&\n              ((!params.cluster_level &&\n                defaultClusterLevel === ClusterLevel.C1) ||\n                params.cluster_level === ClusterLevel.C1)\n            }\n          >\n            <Tooltip\n              explanation={\n                disabledOptions.includes(ClusterLevel.C1)\n                  ? getString(\"global-ui-settings-option-na\")\n                  : null\n              }\n              theme={TooltipTheme.Dark}\n              cursor={\n                disabledOptions.includes(ClusterLevel.C1)\n                  ? \"default\"\n                  : \"pointer\"\n              }\n            >\n              <span>\n                {getString(\"global-ui-cluster-aggregation-level\", {\n                  cluster: \"cluster_\" + ClusterLevel.C1,\n                })}\n              </span>\n            </Tooltip>\n          </DigitLevelButton>\n          <DigitLevelButton\n            onClick={\n              !disabledOptions.includes(ClusterLevel.C3)\n                ? () => updateSetting(\"cluster_level\", ClusterLevel.C3)\n                : undefined\n            }\n            className={\n              disabledOptions.includes(ClusterLevel.C3)\n                ? \"disabled-option\"\n                : undefined\n            }\n            $selected={\n              settingsOptions.clusterLevel !== false &&\n              ((!params.cluster_level &&\n                defaultClusterLevel === ClusterLevel.C3) ||\n                params.cluster_level === ClusterLevel.C3)\n            }\n          >\n            <Tooltip\n              explanation={\n                disabledOptions.includes(ClusterLevel.C3)\n                  ? getString(\"global-ui-settings-option-na\")\n                  : null\n              }\n              theme={TooltipTheme.Dark}\n              cursor={\n                disabledOptions.includes(ClusterLevel.C3)\n                  ? \"default\"\n                  : \"pointer\"\n              }\n            >\n              <span>\n                {getString(\"global-ui-cluster-aggregation-level\", {\n                  cluster: \"cluster_\" + ClusterLevel.C3,\n                })}\n              </span>\n            </Tooltip>\n          </DigitLevelButton>\n        </InputContainer>\n      </SettingGrid>\n    );\n  } else {\n    clusterLevelOptions = null;\n  }\n\n  let clusterOverlayToggle: React.ReactElement<any> | null;\n  if (settingsOptions.clusterOverlayMode !== undefined) {\n    const InputContainer =\n      settingsOptions.clusterOverlayMode === true\n        ? SettingsInputContainer\n        : DisabledSettingsInputContainer;\n    const LabelContainer =\n      settingsOptions.clusterOverlayMode === true ? Label : DisabledLabel;\n    const tooltipText =\n      settingsOptions.clusterOverlayMode === true\n        ? getString(\"glossary-cluster-overlay\")\n        : getString(\"glossary-cluster-overlay-disabled\");\n    clusterOverlayToggle = (\n      <SettingGrid>\n        <Tooltip explanation={tooltipText} />\n        <LabelContainer>{getString(\"global-ui-show-clusters\")}</LabelContainer>\n        <InputContainer>\n          <DigitLevelButton\n            onClick={() =>\n              updateSetting(\"cluster_overlay\", ClusterMode.outline)\n            }\n            $selected={\n              (!params.cluster_overlay &&\n                defaultClusterMode === ClusterMode.outline) ||\n              params.cluster_overlay === ClusterMode.outline\n            }\n          >\n            <span>{upperFirst(ClusterMode.outline)}</span>\n          </DigitLevelButton>\n          <DigitLevelButton\n            onClick={() =>\n              updateSetting(\"cluster_overlay\", ClusterMode.overlay)\n            }\n            $selected={\n              (!params.cluster_overlay &&\n                defaultClusterMode === ClusterMode.overlay) ||\n              params.cluster_overlay === ClusterMode.overlay\n            }\n          >\n            <span>{upperFirst(ClusterMode.overlay)}</span>\n          </DigitLevelButton>\n          <DigitLevelButton\n            onClick={() => updateSetting(\"cluster_overlay\", ClusterMode.none)}\n            $selected={\n              (!params.cluster_overlay &&\n                defaultClusterMode === ClusterMode.none) ||\n              params.cluster_overlay === ClusterMode.none\n            }\n          >\n            <span>{upperFirst(ClusterMode.none)}</span>\n          </DigitLevelButton>\n        </InputContainer>\n      </SettingGrid>\n    );\n  } else {\n    clusterOverlayToggle = null;\n  }\n\n  let nodeSizingOptions: React.ReactElement<any> | null;\n  if (settingsOptions.nodeSizing !== undefined) {\n    const nodeSizingActive =\n      settingsOptions.nodeSizing === true ||\n      typeof settingsOptions.nodeSizing === \"object\";\n    const InputContainer =\n      nodeSizingActive === true\n        ? SettingsInputContainer\n        : DisabledSettingsInputContainer;\n    const LabelContainer = nodeSizingActive === true ? Label : DisabledLabel;\n    const defaultValue =\n      typeof settingsOptions.nodeSizing === \"object\" &&\n      settingsOptions.nodeSizing.rca\n        ? NodeSizing.rca\n        : defaultNodeSizing;\n    const currentValue =\n      typeof settingsOptions.nodeSizing !== \"object\" &&\n      params.node_sizing === NodeSizing.rca\n        ? defaultValue\n        : params.node_sizing;\n    const sizeByRca =\n      typeof settingsOptions.nodeSizing === \"object\" &&\n      settingsOptions.nodeSizing.rca ? (\n        <DigitLevelButton\n          onClick={() => updateSetting(\"node_sizing\", NodeSizing.rca)}\n          $selected={\n            (!currentValue && defaultValue === NodeSizing.rca) ||\n            currentValue === NodeSizing.rca\n          }\n        >\n          <span>\n            {getString(\"global-formatted-size-by\", { type: NodeSizing.rca })}\n          </span>\n        </DigitLevelButton>\n      ) : null;\n    nodeSizingOptions = (\n      <SettingGrid>\n        <Tooltip explanation={getString(\"glossary-node-sizing\")} />\n        <LabelContainer>{getString(\"global-ui-node-sizing\")}</LabelContainer>\n        <InputContainer>\n          {sizeByRca}\n          <DigitLevelButton\n            onClick={() =>\n              updateSetting(\"node_sizing\", NodeSizing.cityEmployees)\n            }\n            $selected={\n              (!currentValue && defaultValue === NodeSizing.cityEmployees) ||\n              currentValue === NodeSizing.cityEmployees\n            }\n          >\n            <span>\n              {getString(\"global-formatted-size-by\", {\n                type: NodeSizing.cityEmployees,\n              })}\n            </span>\n          </DigitLevelButton>\n          <DigitLevelButton\n            onClick={() =>\n              updateSetting(\"node_sizing\", NodeSizing.cityCompanies)\n            }\n            $selected={\n              (!currentValue && defaultValue === NodeSizing.cityCompanies) ||\n              currentValue === NodeSizing.cityCompanies\n            }\n          >\n            <span>\n              {getString(\"global-formatted-size-by\", {\n                type: NodeSizing.cityCompanies,\n              })}\n            </span>\n          </DigitLevelButton>\n          <DigitLevelButton\n            onClick={() => updateSetting(\"node_sizing\", NodeSizing.uniform)}\n            $selected={\n              (!currentValue && defaultValue === NodeSizing.uniform) ||\n              currentValue === NodeSizing.uniform\n            }\n          >\n            <span>\n              {getString(\"global-formatted-size-by\", {\n                type: NodeSizing.uniform,\n              })}\n            </span>\n          </DigitLevelButton>\n          <DigitLevelButton\n            onClick={() =>\n              updateSetting(\"node_sizing\", NodeSizing.globalEmployees)\n            }\n            $selected={\n              (!currentValue && defaultValue === NodeSizing.globalEmployees) ||\n              currentValue === NodeSizing.globalEmployees\n            }\n          >\n            <span>\n              {getString(\"global-formatted-size-by\", {\n                type: NodeSizing.globalEmployees,\n              })}\n            </span>\n          </DigitLevelButton>\n          <DigitLevelButton\n            onClick={() =>\n              updateSetting(\"node_sizing\", NodeSizing.globalCompanies)\n            }\n            $selected={\n              (!currentValue && defaultValue === NodeSizing.globalCompanies) ||\n              currentValue === NodeSizing.globalCompanies\n            }\n          >\n            <span>\n              {getString(\"global-formatted-size-by\", {\n                type: NodeSizing.globalCompanies,\n              })}\n            </span>\n          </DigitLevelButton>\n        </InputContainer>\n      </SettingGrid>\n    );\n  } else {\n    nodeSizingOptions = null;\n  }\n\n  let colorByOptions: React.ReactElement<any> | null;\n  if (settingsOptions.colorBy !== undefined) {\n    const InputContainer =\n      settingsOptions.colorBy !== false\n        ? SettingsInputContainer\n        : DisabledSettingsInputContainer;\n    const LabelContainer =\n      settingsOptions.colorBy !== false ? Label : DisabledLabel;\n    const tooltipText =\n      typeof settingsOptions.colorBy === \"object\" &&\n      settingsOptions.colorBy.nodes\n        ? getString(\"glossary-color-nodes-by\")\n        : getString(\"glossary-color-by\");\n    const labelText =\n      typeof settingsOptions.colorBy === \"object\" &&\n      settingsOptions.colorBy.nodes\n        ? getString(\"global-ui-node-color-by\")\n        : getString(\"global-ui-color-by\");\n    const defaultColorByText =\n      settingsOptions.clusterLevel !== undefined\n        ? \"Knowledge Cluster (High aggregation)\"\n        : \"Industry groups (Sector level)\";\n    const defaultIsSelected =\n      !params.color_by || params.color_by === ColorBy.sector;\n    const rcaThreshold =\n      settingsOptions.rcaThreshold && defaultIsSelected ? (\n        <RCAThresholdSlider\n          key={\"rca-slider-key-\" + params.rca_threshold}\n          updateValue={(v) => updateSetting(\"rca_threshold\", v)}\n          initialValue={\n            params.rca_threshold ? parseFloat(params.rca_threshold) : 1\n          }\n        />\n      ) : null;\n    colorByOptions = (\n      <SettingGrid>\n        <Tooltip explanation={tooltipText} />\n        <LabelContainer>{labelText}</LabelContainer>\n        <InputContainer>\n          <DigitLevelButton\n            onClick={\n              !defaultIsSelected\n                ? () => updateSetting(\"color_by\", ColorBy.sector)\n                : undefined\n            }\n            $selected={defaultIsSelected}\n          >\n            <div>\n              {defaultColorByText}\n              {rcaThreshold}\n            </div>\n          </DigitLevelButton>\n          <DigitLevelButton\n            onClick={() => updateSetting(\"color_by\", ColorBy.education)}\n            $selected={params.color_by === ColorBy.education}\n          >\n            <span>\n              {getString(\"global-formatted-color-by\", {\n                type: ColorBy.education,\n              })}\n            </span>\n          </DigitLevelButton>\n          <DigitLevelButton\n            onClick={() => updateSetting(\"color_by\", ColorBy.wage)}\n            $selected={params.color_by === ColorBy.wage}\n          >\n            <span>\n              {getString(\"global-formatted-color-by\", { type: ColorBy.wage })}\n            </span>\n          </DigitLevelButton>\n        </InputContainer>\n      </SettingGrid>\n    );\n  } else {\n    colorByOptions = null;\n  }\n\n  let cityColorByOptions: React.ReactElement<any> | null;\n  if (settingsOptions.cityColorBy !== undefined) {\n    const InputContainer =\n      settingsOptions.cityColorBy !== false\n        ? SettingsInputContainer\n        : DisabledSettingsInputContainer;\n    const LabelContainer =\n      settingsOptions.cityColorBy !== false ? Label : DisabledLabel;\n    cityColorByOptions = (\n      <SettingGrid>\n        <Tooltip explanation={getString(\"glossary-city-color-by\")} />\n        <LabelContainer>{getString(\"global-ui-node-color-by\")}</LabelContainer>\n        <InputContainer>\n          <DigitLevelSoloButton $selected={true}>\n            {upperFirst(CityColorBy.proximity)}\n          </DigitLevelSoloButton>\n          <small>\n            <em>{getString(\"color-by-proximity-only\")}</em>\n          </small>\n        </InputContainer>\n      </SettingGrid>\n    );\n  } else {\n    cityColorByOptions = null;\n  }\n\n  let cityNodeSizingOptions: React.ReactElement<any> | null;\n  if (settingsOptions.cityNodeSizing !== undefined) {\n    const InputContainer =\n      settingsOptions.cityNodeSizing === true\n        ? SettingsInputContainer\n        : DisabledSettingsInputContainer;\n    const LabelContainer =\n      settingsOptions.cityNodeSizing === true ? Label : DisabledLabel;\n    cityNodeSizingOptions = (\n      <SettingGrid>\n        <Tooltip explanation={getString(\"glossary-city-node-sizing\")} />\n        <LabelContainer>{getString(\"global-ui-node-sizing\")}</LabelContainer>\n        <InputContainer>\n          <DigitLevelButton\n            onClick={() =>\n              updateSetting(\"city_node_sizing\", CityNodeSizing.population)\n            }\n            $selected={\n              (!params.city_node_sizing &&\n                defaultCityNodeSizing === CityNodeSizing.population) ||\n              params.city_node_sizing === CityNodeSizing.population\n            }\n          >\n            <span>\n              {getString(\"global-formatted-size-by\", {\n                type: CityNodeSizing.population,\n              })}\n            </span>\n          </DigitLevelButton>\n          <DigitLevelButton\n            onClick={() =>\n              updateSetting(\"city_node_sizing\", CityNodeSizing.gdpPpp)\n            }\n            $selected={\n              (!params.city_node_sizing &&\n                defaultCityNodeSizing === CityNodeSizing.gdpPpp) ||\n              params.city_node_sizing === CityNodeSizing.gdpPpp\n            }\n          >\n            <span>\n              {getString(\"global-formatted-size-by\", {\n                type: CityNodeSizing.gdpPpp,\n              })}\n            </span>\n          </DigitLevelButton>\n          <DigitLevelButton\n            onClick={() =>\n              updateSetting(\"city_node_sizing\", CityNodeSizing.uniform)\n            }\n            $selected={\n              (!params.city_node_sizing &&\n                defaultCityNodeSizing === CityNodeSizing.uniform) ||\n              params.city_node_sizing === CityNodeSizing.uniform\n            }\n          >\n            <span>\n              {getString(\"global-formatted-size-by\", {\n                type: CityNodeSizing.uniform,\n              })}\n            </span>\n          </DigitLevelButton>\n        </InputContainer>\n      </SettingGrid>\n    );\n  } else {\n    cityNodeSizingOptions = null;\n  }\n\n  return (\n    <Root>\n      <ContentRoot>\n        <Title>\n          <span dangerouslySetInnerHTML={{ __html: gearIcon }} />\n          {getString(\"global-ui-settings\")}\n          <CloseButton onClick={onClose}></CloseButton>\n        </Title>\n        <Content>\n          {compositionOptions}\n          {aggregationMode}\n          {digitLevelOptions}\n          {clusterLevelOptions}\n          {clusterOverlayToggle}\n          {nodeSizingOptions}\n          {colorByOptions}\n          {cityColorByOptions}\n          {cityNodeSizingOptions}\n          <ResetButton onClick={resetSettings}>\n            {getString(\"global-ui-settings-reset\")}\n          </ResetButton>\n        </Content>\n      </ContentRoot>\n    </Root>\n  );\n};\n\nexport default Settings;\n","import React, { useState } from \"react\";\nimport { textClassName, ExpandingButton } from \"../Utils\";\nimport raw from \"raw.macro\";\nimport useFluent from \"../../../hooks/useFluent\";\nimport { joyrideClassNames } from \"../../navigation/secondaryHeader/guide/CitiesGuide\";\nimport { useRouteMatch } from \"react-router-dom\";\nimport { Routes } from \"../../../routing/routes\";\nimport styled, { keyframes } from \"styled-components/macro\";\nimport { baseColor, secondaryFont } from \"../../../styling/styleUtils\";\nimport Modal from \"../../standardModal\";\nimport TreemapPNG from \"./static/treemap.png\";\nimport IndustrySpacePNG from \"./static/industry_space.png\";\nimport SwotPNG from \"./static/swot.png\";\n\nconst growIn = keyframes`\n  0% {\n    transform: scale(0.4);\n  }\n\n  100% {\n    transform: scale(1);\n  }\n`;\n\nconst Root = styled.div`\n  background-color: #fff;\n  position: relative;\n  animation: ${growIn} 0.1s normal forwards ease-in-out;\n  animation-iteration-count: 1;\n  color: ${baseColor};\n  height: 100%;\n  padding: 0;\n  width: 1000px;\n  max-width: 100%;\n  box-sizing: border-box;\n\n  @media (max-width: 1200px) {\n    width: 900px;\n  }\n\n  @media (max-width: 950px) {\n    width: 750px;\n  }\n\n  @media (max-width: 800px) {\n    width: 550px;\n  }\n\n  @media screen and (max-height: 800px) {\n    overflow: visible;\n  }\n`;\n\nconst Image = styled.img`\n  width: 1000px;\n  max-width: 100%;\n`;\n\nconst CloseButton = styled.button`\n  background-color: transparent;\n  border-none;\n  padding: 0 0.5rem;\n  color: ${baseColor};\n  text-transform: uppercase;\n  font-size: 1.5rem;\n  font-family: ${secondaryFont};\n  position: absolute;\n  right: 0;\n  top: 0;\n`;\n\nconst readThisChartIconSVG = raw(\"../../../assets/icons/read-this-chart.svg\");\n\nconst HowToRead = () => {\n  const getString = useFluent();\n\n  const [modalOpen, setModalOpen] = useState<boolean>(false);\n\n  const isTreemap = useRouteMatch(Routes.CityEconomicComposition);\n  const isIndustrySpace = useRouteMatch(Routes.CityIndustrySpacePosition);\n  const isSwot = useRouteMatch(Routes.CityGrowthOpportunities);\n\n  let source: string | undefined;\n  if (isTreemap && isTreemap.isExact) {\n    source = TreemapPNG;\n  } else if (isIndustrySpace && isIndustrySpace.isExact) {\n    source = IndustrySpacePNG;\n  } else if (isSwot && isSwot.isExact) {\n    source = SwotPNG;\n  }\n\n  if (source) {\n    const modal = modalOpen ? (\n      <Modal onClose={() => setModalOpen(false)} width={\"auto\"} height={\"auto\"}>\n        <Root>\n          <Image src={source} />\n          <CloseButton onClick={() => setModalOpen(false)}></CloseButton>\n        </Root>\n      </Modal>\n    ) : null;\n\n    return (\n      <>\n        <ExpandingButton\n          className={joyrideClassNames.howToRead}\n          onClick={() => setModalOpen(true)}\n        >\n          <span dangerouslySetInnerHTML={{ __html: readThisChartIconSVG }} />\n          <div className={textClassName}>\n            {getString(\"global-ui-read-chart\")}\n          </div>\n        </ExpandingButton>\n        {modal}\n      </>\n    );\n  }\n  return null;\n};\n\nexport default HowToRead;\n","import { useStaticData } from \"../../../dataProvider\";\nimport {\n  isValidPeerGroup,\n  PeerGroup,\n} from \"../../../types/graphQL/graphQLTypes\";\nimport { AggregationMode } from \"../../../routing/routes\";\nimport { defaultYear } from \"../../../Utils\";\n\nexport enum RegionGroup {\n  World = \"world\",\n}\n\ninterface IndustriesList {\n  id: string;\n  industryId: string;\n  numCompany: number | null;\n  numEmploy: number | null;\n}\n\nexport interface SuccessResponse {\n  primaryCityIndustries: IndustriesList[];\n  secondaryCityIndustries: IndustriesList[];\n}\n\ninterface InputVariables {\n  primaryCity: number;\n  comparison: number | RegionGroup | PeerGroup;\n  year: number;\n  aggregation: AggregationMode;\n}\n\nexport const useEconomicCompositionComparisonQuery = (variables: {\n  primaryCity: number;\n  secondaryCity: number;\n  year: number;\n}) => {\n  return useComparisonQuery({\n    primaryCity: variables.primaryCity,\n    comparison: variables.secondaryCity,\n    year: variables.year,\n    aggregation: AggregationMode.industries,\n  });\n};\n\nexport const useComparisonQuery = (input: InputVariables) => {\n  const { data: blsData, loading: blsLoading } = useStaticData();\n\n  if (blsLoading || !blsData) {\n    return { loading: true, error: undefined, data: undefined };\n  }\n\n  const primaryId = input.primaryCity.toString();\n  const primaryRegionData = blsData.regionData[primaryId];\n\n  if (!primaryRegionData) {\n    return { loading: false, error: undefined, data: undefined };\n  }\n\n  const primaryYearData = primaryRegionData[input.year] || primaryRegionData[defaultYear];\n  if (!primaryYearData) {\n    return { loading: false, error: undefined, data: undefined };\n  }\n\n  const primaryCityIndustries: IndustriesList[] = primaryYearData.map((occ) => ({\n    id: occ.socCode,\n    industryId: occ.socCode,\n    numCompany: occ.gdp,\n    numEmploy: occ.totEmp,\n  }));\n\n  let secondaryCityIndustries: IndustriesList[] = [];\n\n  // If comparing to another specific city\n  if (\n    typeof input.comparison === \"number\" ||\n    (typeof input.comparison === \"string\" &&\n      !isValidPeerGroup(input.comparison) &&\n      input.comparison !== RegionGroup.World)\n  ) {\n    const secondaryId = input.comparison.toString();\n    const secondaryRegionData = blsData.regionData[secondaryId];\n    if (secondaryRegionData) {\n      const secondaryYearData =\n        secondaryRegionData[input.year] || secondaryRegionData[defaultYear];\n      if (secondaryYearData) {\n        secondaryCityIndustries = secondaryYearData.map((occ) => ({\n          id: occ.socCode,\n          industryId: occ.socCode,\n          numCompany: occ.gdp,\n          numEmploy: occ.totEmp,\n        }));\n      }\n    }\n  }\n  // For peer groups and world: use national average as proxy\n  else {\n    const nationalData = blsData.regionData[\"national_us\"];\n    if (nationalData) {\n      const nationalYearData = nationalData[input.year] || nationalData[defaultYear];\n      if (nationalYearData) {\n        secondaryCityIndustries = nationalYearData.map((occ) => ({\n          id: occ.socCode,\n          industryId: occ.socCode,\n          numCompany: occ.gdp,\n          numEmploy: occ.totEmp,\n        }));\n      }\n    }\n  }\n\n  const data: SuccessResponse = { primaryCityIndustries, secondaryCityIndustries };\n  return { loading: false, error: undefined, data };\n};\n","import React from \"react\";\nimport styled from \"styled-components/macro\";\nimport { backgroundDark } from \"../../styling/styleUtils\";\nimport { breakPoints } from \"../../styling/GlobalGrid\";\n\nconst Root = styled.div`\n  grid-column: 2;\n  grid-row: 2;\n  max-height: 100%;\n  position: relative;\n\n  @media ${breakPoints.small} {\n    grid-row: 1;\n    grid-column: 1;\n  }\n`;\n\nconst ScrollContainer = styled.div`\n  width: 100%;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  overflow-y: auto;\n  overflow-x: hidden;\n  display: flex;\n  align-items: center;\n\n  ::-webkit-scrollbar {\n    -webkit-appearance: none;\n    width: 7px;\n  }\n  ::-webkit-scrollbar-thumb {\n    border-radius: 4px;\n    background-color: rgba(0, 0, 0, 0.3);\n  }\n  ::-webkit-scrollbar-track {\n    background-color: rgba(0, 0, 0, 0.1);\n  }\n\n  @media ${breakPoints.small} {\n    position: static;\n    overflow: visible;\n  }\n`;\n\nconst ContentContainer = styled.div`\n  padding-left: 0.75rem;\n  border-left: solid 2px ${backgroundDark};\n  width: 100%;\n  margin: auto;\n\n  @media ${breakPoints.small} {\n    padding-left: 0;\n    border-left: none;\n  }\n`;\n\nconst StandardSideTextBlock = ({\n  children,\n  clearStyles,\n}: {\n  children: React.ReactNode;\n  clearStyles?: boolean;\n}) => {\n  const Content = clearStyles ? React.Fragment : ContentContainer;\n  return (\n    <Root>\n      <ScrollContainer\n        style={{ alignItems: clearStyles ? \"flex-start\" : undefined }}\n      >\n        <Content>{children}</Content>\n      </ScrollContainer>\n    </Root>\n  );\n};\n\nexport default StandardSideTextBlock;\n","import React from \"react\";\nimport styled, { keyframes } from \"styled-components/macro\";\nimport { backgroundDark } from \"../../styling/styleUtils\";\nimport { breakPoints } from \"../../styling/GlobalGrid\";\n\nconst Root = styled.div`\n  grid-column: 2;\n  grid-row: 2;\n  max-height: 100%;\n  position: relative;\n\n  @media ${breakPoints.small} {\n    grid-row: 1;\n    grid-column: 1;\n  }\n`;\n\nconst ScrollContainer = styled.div`\n  width: 100%;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  overflow-y: auto;\n  overflow-x: hidden;\n  display: flex;\n  align-items: center;\n\n  ::-webkit-scrollbar {\n    -webkit-appearance: none;\n    width: 7px;\n  }\n  ::-webkit-scrollbar-thumb {\n    border-radius: 4px;\n    background-color: rgba(0, 0, 0, 0.3);\n  }\n  ::-webkit-scrollbar-track {\n    background-color: rgba(0, 0, 0, 0.1);\n  }\n\n  @media ${breakPoints.small} {\n    position: static;\n    overflow: visible;\n  }\n`;\n\nconst ContentContainer = styled.div`\n  padding-left: 0.75rem;\n  border-left: solid 2px ${backgroundDark};\n  width: 100%;\n  margin: auto;\n\n  @media ${breakPoints.small} {\n    padding-left: 0;\n    border-left: none;\n  }\n`;\nconst flickerAnimation = keyframes`\n  0%   { opacity: 1; }\n  50%  { opacity: 0.5; }\n  100% { opacity: 1; }\n`;\n\nconst TitleBar = styled.div`\n  height: 1.5rem;\n  background-color: #efefef;\n  margin-bottom: 0.4rem;\n  animation: ${flickerAnimation} 1s infinite;\n`;\n\nconst ParaBar = styled.div`\n  height: 0.845rem;\n  background-color: #efefef;\n  margin-bottom: 0.35rem;\n  animation: ${flickerAnimation} 1s infinite;\n`;\n\nconst StandardSideTextLoading = ({\n  clearStyles,\n}: {\n  clearStyles?: boolean;\n}) => {\n  const Content = clearStyles ? React.Fragment : ContentContainer;\n  return (\n    <Root>\n      <ScrollContainer\n        style={{ alignItems: clearStyles ? \"flex-start\" : undefined }}\n      >\n        <Content>\n          <TitleBar style={{ width: \"95%\" }} />\n          <TitleBar style={{ width: \"60%\", marginBottom: \"1rem\" }} />\n          <ParaBar style={{ width: \"93%\" }} />\n          <ParaBar style={{ width: \"87%\" }} />\n          <ParaBar style={{ width: \"76%\" }} />\n          <ParaBar style={{ width: \"90%\" }} />\n          <ParaBar style={{ width: \"84%\" }} />\n          <ParaBar style={{ width: \"76%\" }} />\n          <ParaBar style={{ width: \"59%\" }} />\n        </Content>\n      </ScrollContainer>\n    </Root>\n  );\n};\n\nexport default StandardSideTextLoading;\n","import React from \"react\";\nimport StandardSideTextBlock from \"../../../../../components/general/StandardSideTextBlock\";\nimport {\n  ContentParagraph,\n  ContentTitle,\n} from \"../../../../../styling/styleUtils\";\nimport useFluent, {\n  possessive,\n  ordinalNumber,\n} from \"../../../../../hooks/useFluent\";\nimport useCurrentCity from \"../../../../../hooks/useCurrentCity\";\nimport useGlobalLocationData from \"../../../../../hooks/useGlobalLocationData\";\nimport StandardSideTextLoading from \"../../../../../components/transitionStateComponents/StandardSideTextLoading\";\nimport { formatNumberLong } from \"../../../../../Utils\";\nimport { useEconomicCompositionQuery } from \"../../../../../components/dataViz/treeMap/CompositionTreeMap\";\nimport { useGlobalIndustryMap } from \"../../../../../hooks/useGlobalIndustriesData\";\nimport {\n  DigitLevel,\n  CompositionType,\n} from \"../../../../../types/graphQL/graphQLTypes\";\nimport orderBy from \"lodash/orderBy\";\nimport Helmet from \"react-helmet\";\n\ninterface Props {\n  year: number;\n  cityId: string;\n  compositionType: CompositionType;\n}\n\ninterface IndustryDatum {\n  name: string;\n  sector: string;\n  count: number;\n}\n\nconst SideText = ({ year, cityId, compositionType }: Props) => {\n  const getString = useFluent();\n  const { loading, city } = useCurrentCity();\n  const locations = useGlobalLocationData();\n  const composition = useEconomicCompositionQuery({ year, cityId });\n  const industryMap = useGlobalIndustryMap();\n\n  if (\n    loading ||\n    locations.loading ||\n    composition.loading\n  ) {\n    return <StandardSideTextLoading />;\n  } else if (\n    city &&\n    locations.data &&\n    composition.data &&\n    composition.data.industries.length\n  ) {\n    const cityName = city.name ? city.name : \"\";\n    const cityNamePlural = possessive([cityName]);\n    const { countries } = locations.data;\n    const { industries } = composition.data;\n    const country = countries.find(\n      (d) =>\n        city.countryId !== null && d.countryId === city.countryId.toString(),\n    );\n\n    let total = 0;\n    let totalEmploy = 0;\n    const allSectors: IndustryDatum[] = [];\n    industries.forEach(({ naicsId, numCompany, numEmploy }) => {\n      const industry = industryMap.data[naicsId];\n      const companies = numCompany ? numCompany : 0;\n      const employees = numEmploy ? numEmploy : 0;\n      const count =\n        compositionType === CompositionType.Companies ? companies : employees;\n      if (industry && industry.level !== null && industry.level <= DigitLevel.Sector) {\n        total =\n          compositionType === CompositionType.Companies\n            ? total + companies\n            : total + employees;\n        totalEmploy = totalEmploy + employees;\n        const { name, naicsIdTopParent } = industry;\n        allSectors.push({\n          count,\n          name: name ? name : \"\",\n          sector: naicsIdTopParent.toString(),\n        });\n      }\n    });\n\n    const largestSector: IndustryDatum | undefined = orderBy(\n      allSectors,\n      [\"count\"],\n      [\"desc\"],\n    )[0];\n    if (!largestSector) {\n      return <StandardSideTextLoading />;\n    }\n\n    const secondLargestSector: IndustryDatum | undefined = orderBy(\n      allSectors,\n      [\"count\"],\n      [\"desc\"],\n    )[1];\n    if (!secondLargestSector) {\n      return <StandardSideTextLoading />;\n    }\n\n    const title = getString(\"economic-composition-title\", {\n      \"name-plural\": cityNamePlural,\n    });\n    const para1 = getString(\"economic-composition-para-1\", {\n      name: cityName,\n      \"name-plural\": cityNamePlural,\n      \"income-level\": \"\",\n      country: country ? country.nameShortEn : \"\",\n      \"pop-year\": \"2024\",\n      population: formatNumberLong(city.population ? city.population : 0),\n      gdppc: formatNumberLong(city.gdppc ? city.gdppc : 0),\n      \"region-size-rank\": ordinalNumber([1]),\n      \"region-wealth-rank\": ordinalNumber([1]),\n      \"region-name\": \"\",\n      \"region-city-count\": 1,\n      \"num-employ\": formatNumberLong(totalEmploy),\n    });\n\n    const para2 = getString(\"economic-composition-para-2\", {\n      name: cityName,\n      \"largest-sector\": largestSector.name,\n      \"largest-sector-share-percent\": parseFloat(\n        ((largestSector.count / total) * 100).toFixed(2),\n      ),\n      \"composition-type\": compositionType,\n      \"largest-3-digit-industry-in-sector\": largestSector.name,\n      \"largest-3-digit-industry-in-sector-share-percent\": parseFloat(\n        ((largestSector.count / total) * 100).toFixed(2),\n      ),\n      \"second-largest-sector\": secondLargestSector.name,\n      \"second-largest-sector-share-percent\": parseFloat(\n        ((secondLargestSector.count / total) * 100).toFixed(2),\n      ),\n      \"second-largest-3-digit-industry-in-sector\":\n        secondLargestSector.name,\n      \"second-largest-3-digit-industry-in-sector-share-percent\": parseFloat(\n        ((secondLargestSector.count / total) * 100).toFixed(2),\n      ),\n    });\n\n    return (\n      <StandardSideTextBlock>\n        <Helmet>\n          <title>\n            {title + \" | \" + getString(\"meta-data-title-default-suffix\")}\n          </title>\n          <meta\n            property=\"og:title\"\n            content={\n              title + \" | \" + getString(\"meta-data-title-default-suffix\")\n            }\n          />\n        </Helmet>\n        <ContentTitle>{title}</ContentTitle>\n        <ContentParagraph>{para1}</ContentParagraph>\n        <ContentParagraph>{para2}</ContentParagraph>\n      </StandardSideTextBlock>\n    );\n  } else {\n    return null;\n  }\n};\n\nexport default SideText;\n","import React, { useState, useRef, useCallback, useEffect } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport queryString from \"query-string\";\nimport UtilityBar, {\n  DownloadType,\n} from \"../../../../../components/navigation/secondaryHeader/UtilityBar\";\nimport CompositionTreeMap from \"../../../../../components/dataViz/treeMap/CompositionTreeMap\";\nimport ClusterCompositionTreeMap from \"../../../../../components/dataViz/treeMap/ClusterCompositionTreeMap\";\nimport { defaultYear } from \"../../../../../Utils\";\nimport { ContentGrid } from \"../../../../../styling/styleUtils\";\nimport {\n  ClassificationNaicsIndustry,\n  ClassificationNaicsCluster,\n  CompositionType,\n  defaultDigitLevel,\n  defaultCompositionType,\n} from \"../../../../../types/graphQL/graphQLTypes\";\nimport CategoryLabels from \"../../../../../components/dataViz/legend/CategoryLabels\";\nimport styled from \"styled-components/macro\";\nimport useGlobalLocationData from \"../../../../../hooks/useGlobalLocationData\";\nimport useSectorMap from \"../../../../../hooks/useSectorMap\";\nimport useClusterMap from \"../../../../../hooks/useClusterMap\";\nimport { useLevelLoader } from \"../../../../../hooks/useLevelLoader\";\nimport { useStaticData } from \"../../../../../dataProvider\";\nimport DownloadImageOverlay from \"./DownloadImageOverlay\";\nimport useQueryParams from \"../../../../../hooks/useQueryParams\";\nimport useFluent from \"../../../../../hooks/useFluent\";\nimport EducationLegend from \"../../../../../components/dataViz/legend/EducationLegend\";\nimport WageLegend from \"../../../../../components/dataViz/legend/WageLegend\";\nimport {\n  ColorBy,\n  AggregationMode,\n  defaultAggregationMode,\n  ClusterLevel,\n  defaultClusterLevel,\n} from \"../../../../../routing/routes\";\nimport PreChartRow, {\n  Indicator,\n} from \"../../../../../components/general/PreChartRow\";\nimport { usePrevious } from \"react-use\";\nimport { Mode } from \"../../../../../components/general/searchIndustryInGraphDropdown\";\nimport SideText from \"./SideText\";\n\nconst TreeMapRoot = styled.div`\n  display: contents;\n`;\n\ninterface Props {\n  cityId: string;\n}\n\nconst EconomicComposition = (props: Props) => {\n  const { cityId } = props;\n  const history = useHistory();\n  const { maxDigitLevel } = useStaticData();\n  useLevelLoader();\n  const [highlighted, setHighlighted] = useState<string | undefined>(undefined);\n  const clearHighlighted = useCallback(\n    () => setHighlighted(undefined),\n    [setHighlighted],\n  );\n  const prevHighlighted = usePrevious(highlighted);\n  const [hiddenSectors, setHiddenSectors] = useState<\n    ClassificationNaicsIndustry[\"id\"][]\n  >([]);\n  const [hiddenClusters, setHiddenClusters] = useState<\n    ClassificationNaicsCluster[\"id\"][]\n  >([]);\n  const queryParams = useQueryParams();\n  const {\n    digit_level,\n    cluster_level,\n    composition_type,\n    color_by,\n    aggregation,\n  } = queryParams;\n  const compositionType = composition_type\n    ? (composition_type as CompositionType)\n    : defaultCompositionType;\n  const sectorMap = useSectorMap();\n  const clusterMap = useClusterMap();\n\n  useEffect(() => clearHighlighted, [digit_level, clearHighlighted]);\n\n  const toggleSector = (sectorId: ClassificationNaicsIndustry[\"id\"]) =>\n    hiddenSectors.includes(sectorId)\n      ? setHiddenSectors(hiddenSectors.filter((sId) => sId !== sectorId))\n      : setHiddenSectors([...hiddenSectors, sectorId]);\n  const isolateSector = (sectorId: ClassificationNaicsIndustry[\"id\"]) =>\n    hiddenSectors.length === sectorMap.length - 1 &&\n    !hiddenSectors.find((sId) => sId === sectorId)\n      ? setHiddenSectors([])\n      : setHiddenSectors([\n          ...sectorMap.map((s) => s.id).filter((sId) => sId !== sectorId),\n        ]);\n  const resetSectors = () => setHiddenSectors([]);\n\n  const sectorMapRef = useRef(sectorMap);\n  sectorMapRef.current = sectorMap;\n  const queryParamsRef = useRef(queryParams);\n  queryParamsRef.current = queryParams;\n  const maxDigitLevelRef = useRef(maxDigitLevel);\n  maxDigitLevelRef.current = maxDigitLevel;\n  const onDrillDown = useCallback((sectorId: string, currentLevel: number) => {\n    // Isolate the clicked sector\n    const allSectorIds = sectorMapRef.current.map((s) => s.id);\n    setHiddenSectors(allSectorIds.filter((id) => id !== sectorId));\n    // Increase digit level by 1 (cap at max available)\n    const nextLevel = Math.min(currentLevel + 1, maxDigitLevelRef.current);\n    const { digit_level: _, ...otherParams } = queryParamsRef.current;\n    const query = queryString.stringify({ ...otherParams, digit_level: nextLevel });\n    history.push(history.location.pathname + \"?\" + query);\n  }, [history]);\n\n  const toggleCluster = (clusterId: ClassificationNaicsCluster[\"id\"]) =>\n    hiddenClusters.includes(clusterId)\n      ? setHiddenClusters(hiddenClusters.filter((sId) => sId !== clusterId))\n      : setHiddenClusters([...hiddenClusters, clusterId]);\n  const isolateCluster = (clusterId: ClassificationNaicsCluster[\"id\"]) =>\n    hiddenClusters.length === clusterMap.length - 1 &&\n    !hiddenClusters.find((sId) => sId === clusterId)\n      ? setHiddenClusters([])\n      : setHiddenClusters([\n          ...clusterMap.map((s) => s.id).filter((sId) => sId !== clusterId),\n        ]);\n  const resetClusters = () => setHiddenClusters([]);\n\n  const [activeDownload, setActiveDownload] = useState<DownloadType | null>(\n    null,\n  );\n  const closeDownload = () => setActiveDownload(null);\n\n  const [indicatorContent, setIndicatorContent] = useState<Indicator>({\n    text: undefined,\n    tooltipContent: undefined,\n  });\n\n  const treeMapRef = useRef<HTMLDivElement | null>(null);\n  const globalLocationData = useGlobalLocationData();\n  const getString = useFluent();\n\n  const isClusterTreeMap =\n    (!aggregation && defaultAggregationMode === AggregationMode.cluster) ||\n    aggregation === AggregationMode.cluster;\n\n  let download: React.ReactElement<any> | null;\n  if (activeDownload === DownloadType.Image && treeMapRef.current) {\n    const cellsNode = treeMapRef.current.querySelector(\n      \"div.react-canvas-tree-map-masterContainer\",\n    );\n    if (cellsNode) {\n      const targetCity =\n        globalLocationData.data &&\n        globalLocationData.data.cities.find((c) => c.cityId === cityId);\n      download = (\n        <DownloadImageOverlay\n          onClose={closeDownload}\n          cityId={cityId}\n          cityName={targetCity && targetCity.name ? targetCity.name : undefined}\n          year={defaultYear}\n          digitLevel={\n            digit_level ? parseInt(digit_level, 10) : defaultDigitLevel\n          }\n          clusterLevel={cluster_level ? cluster_level : defaultClusterLevel}\n          aggregationMode={\n            isClusterTreeMap\n              ? AggregationMode.cluster\n              : AggregationMode.industries\n          }\n          colorBy={color_by ? color_by : ColorBy.sector}\n          compositionType={compositionType}\n          hiddenClusters={hiddenClusters}\n          hiddenSectors={hiddenSectors}\n          treeMapCellsNode={cellsNode as HTMLDivElement}\n        />\n      );\n    } else {\n      download = null;\n      setActiveDownload(null);\n    }\n  } else {\n    download = null;\n  }\n\n  let legend: React.ReactElement<any> | null;\n  if (color_by === ColorBy.education) {\n    legend = <EducationLegend />;\n  } else if (color_by === ColorBy.wage) {\n    legend = <WageLegend />;\n  } else {\n    if (isClusterTreeMap) {\n      legend = (\n        <CategoryLabels\n          categories={clusterMap}\n          allowToggle={true}\n          toggleCategory={toggleCluster}\n          isolateCategory={isolateCluster}\n          hiddenCategories={hiddenClusters}\n          resetCategories={resetClusters}\n          resetText={getString(\"global-ui-reset-clusters\")}\n          fullWidth={false}\n        />\n      );\n    } else {\n      legend = (\n        <CategoryLabels\n          categories={sectorMap}\n          allowToggle={true}\n          toggleCategory={toggleSector}\n          isolateCategory={isolateSector}\n          hiddenCategories={hiddenSectors}\n          resetCategories={resetSectors}\n          resetText={getString(\"global-ui-reset-sectors\")}\n          fullWidth={true}\n        />\n      );\n    }\n  }\n\n  const treeMapViz = isClusterTreeMap ? (\n    <ClusterCompositionTreeMap\n      cityId={cityId}\n      year={defaultYear}\n      clusterLevel={cluster_level ? cluster_level : defaultClusterLevel}\n      colorBy={color_by ? color_by : ColorBy.sector}\n      compositionType={compositionType}\n      highlighted={highlighted}\n      clearHighlighted={clearHighlighted}\n      hiddenClusters={hiddenClusters}\n      setIndicatorContent={setIndicatorContent}\n    />\n  ) : (\n    <CompositionTreeMap\n      cityId={cityId}\n      year={defaultYear}\n      digitLevel={digit_level ? parseInt(digit_level, 10) : defaultDigitLevel}\n      colorBy={color_by ? color_by : ColorBy.sector}\n      compositionType={compositionType}\n      highlighted={highlighted}\n      clearHighlighted={clearHighlighted}\n      hiddenSectors={hiddenSectors}\n      setIndicatorContent={setIndicatorContent}\n      onDrillDown={onDrillDown}\n    />\n  );\n\n  return (\n    <>\n      <ContentGrid>\n        <SideText\n          cityId={cityId}\n          year={defaultYear}\n          compositionType={compositionType}\n        />\n        <TreeMapRoot ref={treeMapRef}>\n          <PreChartRow\n            key={\"tree-map-search-\" + Boolean(!highlighted && prevHighlighted)}\n            indicator={\n              compositionType === CompositionType.Employees\n                ? indicatorContent\n                : undefined\n            }\n            searchInGraphOptions={{\n              hiddenParents: isClusterTreeMap ? hiddenClusters : hiddenSectors,\n              digitLevel: isClusterTreeMap\n                ? null\n                : digit_level\n                  ? parseInt(digit_level, 10)\n                  : defaultDigitLevel,\n              clusterLevel: isClusterTreeMap\n                ? cluster_level\n                  ? (parseInt(cluster_level, 10).toString() as ClusterLevel)\n                  : defaultClusterLevel\n                : null,\n              setHighlighted,\n              mode: isClusterTreeMap ? Mode.cluster : Mode.naics,\n            }}\n            settingsOptions={{\n              compositionType: true,\n              colorBy: true,\n              aggregationMode: true,\n              clusterLevel: isClusterTreeMap ? true : undefined,\n              digitLevel: isClusterTreeMap ? undefined : true,\n            }}\n          />\n          {treeMapViz}\n        </TreeMapRoot>\n        {legend}\n        {download}\n      </ContentGrid>\n\n      <UtilityBar\n        onDownloadImageButtonClick={() => setActiveDownload(DownloadType.Image)}\n      />\n    </>\n  );\n};\n\nexport default EconomicComposition;\n","import React from \"react\";\nimport { DefaultContentWrapper } from \"../../../../styling/GlobalGrid\";\nimport CityComposition from \"./cityComposition\";\nimport useCurrentCityId from \"../../../../hooks/useCurrentCityId\";\nimport SimpleError from \"../../../../components/transitionStateComponents/SimpleError\";\nimport { LoadingOverlay } from \"../../../../components/transitionStateComponents/VizLoadingBlock\";\n\nconst EconomicComposition = () => {\n  const cityId = useCurrentCityId();\n\n  if (cityId === null) {\n    return (\n      <DefaultContentWrapper>\n        <LoadingOverlay>\n          <SimpleError fluentMessageId={\"global-ui-error-invalid-city\"} />\n        </LoadingOverlay>\n      </DefaultContentWrapper>\n    );\n  }\n\n  return (\n    <DefaultContentWrapper>\n      <CityComposition cityId={cityId} />\n    </DefaultContentWrapper>\n  );\n};\n\nexport default EconomicComposition;\n","import React, { useState, useRef } from \"react\";\nimport BasicModal from \"../../../standardModal/BasicModal\";\nimport styled from \"styled-components/macro\";\nimport {\n  secondaryFont,\n  primaryFont,\n  SearchContainerDark,\n  backgroundDark,\n} from \"../../../../styling/styleUtils\";\nimport useFluent from \"../../../../hooks/useFluent\";\nimport PanelSearch, { Datum } from \"react-panel-search\";\nimport useCurrentCityId from \"../../../../hooks/useCurrentCityId\";\nimport useGlobalLocationData from \"../../../../hooks/useGlobalLocationData\";\nimport { useHistory } from \"react-router-dom\";\nimport queryString from \"query-string\";\nimport useQueryParams from \"../../../../hooks/useQueryParams\";\nimport { RegionGroup } from \"../../../dataViz/comparisonBarChart/cityIndustryComparisonQuery\";\nimport matchingKeywordFormatter from \"../../../../styling/utils/panelSearchKeywordFormatter\";\nimport { TooltipTheme } from \"../../../general/Tooltip\";\nimport BenchmarkSVG from \"../../../../assets/icons/benchmark_comparator.svg\";\n\n// Stub: peer group counts not available in static data\nexport const usePeerGroupCityCount = (_cityId: string | null): {\n  loading: boolean;\n  error: any;\n  data: { cityPeerGroupCounts: any } | undefined;\n} => ({\n  loading: false,\n  error: undefined,\n  data: undefined,\n});\n\nconst mobileWidth = 750; // in px\n\nconst Root = styled.div`\n  font-family: ${secondaryFont};\n  color: #fff;\n  width: 800px;\n  max-width: 100%;\n  height: 750px;\n  max-height: 90vh;\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  box-sizing: border-box;\n\n  @media (max-width: 990px), (max-height: 800px) {\n    width: 100%;\n    height: auto;\n    max-height: initial;\n    padding: 1rem;\n  }\n`;\n\nconst benchmarkButtonClassName = \"benchmark-open-modal-button-class-name\";\n\nconst H1 = styled.h1`\n  text-transform: uppercase;\n  font-weight: 400;\n  text-align: center;\n  margin-top: 2rem;\n  margin-bottom: 2rem;\n\n  @media (max-width: 990px), (max-height: 800px) {\n    font-size: 1.5rem;\n    margin-top: 1rem;\n    margin-bottom: 1rem;\n  }\n`;\n\nconst Icon = styled.img`\n  width: 2.5rem;\n  height: 2.5rem;\n  position: relative;\n  top: 0.75rem;\n  margin-right: 1rem;\n`;\n\nconst Grid = styled.div`\n  display: grid;\n  grid-template-columns: 1fr;\n  grid-gap: 2rem;\n\n  @media (max-width: ${mobileWidth}px) {\n    grid-template-columns: auto;\n    grid-template-rows: auto;\n  }\n\n  .react-panel-search-search-bar-input {\n    background-color: ${backgroundDark};\n  }\n\n  .react-panel-search-highlighted-item {\n    background-color: rgba(255, 255, 255, 0.25);\n  }\n\n  .react-panel-search-search-results {\n    background-color: ${backgroundDark};\n  }\n`;\n\nconst ContinueButtonContainer = styled.div`\n  margin-top: auto;\n  display: flex;\n  justify-content: flex-end;\n  padding: 0 1rem 1rem;\n  position: sticky;\n  bottom: 0;\n  pointer-events: none;\n\n  @media (max-width: 750px) {\n    position: relative;\n    padding-top: 1rem;\n  }\n\n  @media (max-height: 800px) {\n    margin-top: 0;\n  }\n`;\n\nconst ContinueButton = styled.button`\n  background-color: transparent;\n  border: solid 1px #fff;\n  text-transform: uppercase;\n  color: #fff;\n  font-family: ${secondaryFont};\n  font-size: 1.25rem;\n  padding: 0.6rem 1rem;\n  transition: opacity 0.2s ease-in-out;\n  background-color: ${backgroundDark};\n  pointer-events: all;\n\n  &:hover:not(:disabled) {\n    background-color: #fff;\n    color: ${backgroundDark};\n  }\n\n  &:disabled {\n    cursor: not-allowed;\n    color: rgba(255, 255, 255, 0.5);\n    border-color: rgba(255, 255, 255, 0.5);\n  }\n\n  @media (max-width: 990px), (max-height: 800px) {\n    font-size: 1rem;\n  }\n`;\n\nconst ContainerTitle = styled.h3`\n  color: #fff;\n  font-weight: 400;\n  margin: 0 0 0.4rem;\n  font-family: ${primaryFont};\n\n  @media (max-width: 990px), (max-height: 800px) {\n    font-size: 1.1rem;\n  }\n`;\n\nconst AboutText = styled.p`\n  color: #fff;\n  padding: 0 1.5rem;\n  margin: 0 0 1rem;\n  font-family: ${primaryFont};\n\n  @media (max-width: 990px), (max-height: 800px) {\n    font-size: 0.8rem;\n  }\n`;\n\nexport const defaultBenchmark = RegionGroup.World;\n\nexport enum ComparisonType {\n  Relative = \"relative\", // RCA\n  Absolute = \"absolute\", // Econ composition\n}\n\ninterface Props {\n  closeModal: (value: string | undefined) => void;\n  data: Datum[];\n  comparisonType: ComparisonType;\n}\n\nconst AddComparisonModal = (props: Props) => {\n  const { closeModal, data, comparisonType } = props;\n  const getString = useFluent();\n  const cityId = useCurrentCityId();\n  const continueButtonRef = useRef<HTMLButtonElement | null>(null);\n  const { data: globalData } = useGlobalLocationData();\n  const history = useHistory();\n  const { benchmark, ...otherParams } = useQueryParams();\n  let intialSelected: Datum | null | RegionGroup = RegionGroup.World;\n  if (benchmark === RegionGroup.World) {\n    intialSelected = benchmark as RegionGroup;\n  }\n  const [selected, setSelected] = useState<\n    Datum | null | RegionGroup\n  >(intialSelected);\n\n  const currentCity = globalData\n    ? globalData.cities.find((c) => c.cityId === cityId)\n    : undefined;\n  const name = currentCity ? currentCity.name : \"\";\n\n  const selectCity = (city: Datum | null) => {\n    setSelected(city);\n    if (continueButtonRef && continueButtonRef.current) {\n      const node = continueButtonRef.current;\n      setTimeout(() => {\n        node.focus();\n      }, 0);\n    }\n  };\n\n  const onContinue = () => {\n    if (selected && typeof selected === \"object\") {\n      const query = queryString.stringify({\n        ...otherParams,\n        benchmark: selected.id,\n      });\n      const newUrl = query\n        ? history.location.pathname + \"?\" + query\n        : history.location.pathname;\n      history.push(newUrl);\n      closeModal(selected.id.toString());\n    } else if (typeof selected === \"string\") {\n      const query = queryString.stringify({\n        ...otherParams,\n        benchmark: selected,\n      });\n      const newUrl = query\n        ? history.location.pathname + \"?\" + query\n        : history.location.pathname;\n      history.push(newUrl);\n      closeModal(RegionGroup.World);\n    }\n  };\n\n  const prevValue = benchmark;\n  const closeModalWithoutConfirming =\n    prevValue === undefined\n      ? () => closeModal(RegionGroup.World as string)\n      : () => closeModal(prevValue);\n\n  const title =\n    comparisonType === ComparisonType.Relative\n      ? getString(\"global-ui-benchmark-title\")\n      : getString(\"global-ui-compare-title\", { name });\n\n  const selectCityTitle =\n    comparisonType === ComparisonType.Relative\n      ? getString(\"global-ui-select-benchmark-city\")\n      : getString(\"global-ui-select-a-city-name\");\n\n  const about =\n    comparisonType === ComparisonType.Relative ? (\n      <AboutText>\n        Select a region to compare against.\n      </AboutText>\n    ) : null;\n\n  return (\n    <BasicModal\n      onClose={closeModalWithoutConfirming}\n      width={\"auto\"}\n      height={\"inherit\"}\n    >\n      <Root>\n        <H1\n          style={\n            comparisonType === ComparisonType.Absolute\n              ? { marginBottom: \"4rem\" }\n              : undefined\n          }\n          className={\n            comparisonType === ComparisonType.Absolute\n              ? undefined\n              : benchmarkButtonClassName\n          }\n        >\n          <Icon src={BenchmarkSVG} />\n          {title}:\n        </H1>\n        {about}\n        <SearchContainerDark>\n          <Grid>\n            <div>\n              <ContainerTitle>{selectCityTitle}</ContainerTitle>\n              <PanelSearch\n                data={data.filter(({ id }) => id !== cityId)}\n                topLevelTitle={getString(\"global-text-countries\")}\n                disallowSelectionLevels={[\"0\"]}\n                defaultPlaceholderText={getString(\"global-ui-type-a-city-name\")}\n                showCount={true}\n                resultsIdentation={1.75}\n                neverEmpty={false}\n                maxResults={500}\n                selectedValue={typeof selected === \"object\" ? selected : null}\n                onSelect={selectCity}\n                focusOnRender={\n                  window.innerHeight > 800 && window.innerWidth > 990\n                }\n                matchingKeywordFormatter={matchingKeywordFormatter(\n                  TooltipTheme.Dark,\n                )}\n              />\n            </div>\n          </Grid>\n        </SearchContainerDark>\n        <ContinueButtonContainer>\n          <ContinueButton\n            onClick={onContinue}\n            ref={continueButtonRef}\n            disabled={!selected}\n          >\n            {getString(\"global-ui-continue\")}\n          </ContinueButton>\n        </ContinueButtonContainer>\n      </Root>\n    </BasicModal>\n  );\n};\n\nexport default AddComparisonModal;\n","import { useStaticData } from \"../../../../dataProvider\";\nimport {\n  DigitLevel,\n  CompositionType,\n  defaultCompositionType,\n  isValidPeerGroup,\n  PeerGroup,\n} from \"../../../../types/graphQL/graphQLTypes\";\nimport useCurrentCityId from \"../../../../hooks/useCurrentCityId\";\nimport { defaultYear } from \"../../../../Utils\";\nimport useQueryParams from \"../../../../hooks/useQueryParams\";\nimport useCurrentBenchmark from \"../../../../hooks/useCurrentBenchmark\";\n\nexport enum RegionGroup {\n  World = \"world\",\n  SimilarCities = \"similarcities\",\n}\n\ninterface ClusterData {\n  clusterId: string;\n  level: number | null;\n  numEmploy: number | null;\n}\n\ninterface NaicsData {\n  naicsId: string;\n  numCompany: number | null;\n  numEmploy: number | null;\n}\n\ninterface NaicsRca {\n  naicsId: string;\n  rca: number | null;\n}\n\ninterface ClusterRca {\n  clusterId: string;\n  rca: number | null;\n}\n\nexport interface SuccessResponse {\n  clusterData: ClusterData[];\n  naicsData: NaicsData[];\n  naicsRca: NaicsRca[];\n  c1Rca: ClusterRca[];\n  c3Rca: ClusterRca[];\n}\n\ninterface Variables {\n  cityId: number | null;\n  year: number;\n  level: DigitLevel;\n  peerGroup: PeerGroup | \"\";\n  partnerCityIds: [number] | [];\n  variable: \"employ\" | \"company\";\n}\n\nexport const useClusterIntensityQuery = (variables: Variables) => {\n  const { data: blsData, loading: blsLoading } = useStaticData();\n\n  if (variables.cityId === null || blsLoading || !blsData) {\n    return { loading: true, error: undefined, data: undefined };\n  }\n\n  const cityId = variables.cityId.toString();\n  const regionData = blsData.regionData[cityId];\n  if (!regionData) {\n    return { loading: false, error: undefined, data: undefined };\n  }\n\n  const yearData = regionData[variables.year] || regionData[defaultYear];\n  if (!yearData) {\n    return { loading: false, error: undefined, data: undefined };\n  }\n\n  // Build socCode  majorGroupId lookup\n  const socToMajorGroup: Record<string, string> = {};\n  blsData.occupations.forEach((o) => {\n    socToMajorGroup[o.socCode] = o.majorGroupId;\n  });\n\n  const naicsData: NaicsData[] = [];\n  const naicsRca: NaicsRca[] = [];\n\n  yearData.forEach((occ) => {\n    naicsData.push({\n      naicsId: occ.socCode,\n      numCompany: occ.gdp,\n      numEmploy: occ.totEmp,\n    });\n    naicsRca.push({\n      naicsId: occ.socCode,\n      rca: 1.0,\n    });\n  });\n\n  // Aggregate by major group for cluster data\n  const majorGroupAgg: Record<string, { employ: number }> = {};\n  yearData.forEach((occ) => {\n    const mgId = socToMajorGroup[occ.socCode] || \"00\";\n    if (!majorGroupAgg[mgId]) {\n      majorGroupAgg[mgId] = { employ: 0 };\n    }\n    majorGroupAgg[mgId].employ += occ.totEmp;\n  });\n\n  const clusterData: ClusterData[] = [];\n  const c1Rca: ClusterRca[] = [];\n  const c3Rca: ClusterRca[] = [];\n\n  Object.entries(majorGroupAgg).forEach(([mgId, agg]) => {\n    clusterData.push({\n      clusterId: mgId,\n      level: 1,\n      numEmploy: agg.employ,\n    });\n    c1Rca.push({ clusterId: mgId, rca: 1.0 });\n    c3Rca.push({ clusterId: mgId, rca: 1.0 });\n  });\n\n  const data: SuccessResponse = { clusterData, naicsData, naicsRca, c1Rca, c3Rca };\n  return { loading: false, error: undefined, data };\n};\n\nconst useRCAData = (level: DigitLevel) => {\n  const cityId = useCurrentCityId();\n  const { composition_type } = useQueryParams();\n  const { benchmark } = useCurrentBenchmark();\n\n  const defaultCompositionVariable =\n    defaultCompositionType === CompositionType.Companies ? \"company\" : \"employ\";\n  let variable: \"employ\" | \"company\" = defaultCompositionVariable;\n  if (composition_type === CompositionType.Companies) {\n    variable = \"company\";\n  } else if (composition_type === CompositionType.Employees) {\n    variable = \"employ\";\n  }\n\n  const peerGroup = isValidPeerGroup(benchmark) ? (benchmark as PeerGroup) : \"\";\n\n  const partnerCityIds: [number] | [] =\n    benchmark !== undefined && !isNaN(parseInt(benchmark, 10))\n      ? [parseInt(benchmark, 10)]\n      : [];\n\n  const { loading, error, data } = useClusterIntensityQuery({\n    cityId: cityId !== null ? parseInt(cityId, 10) : null,\n    year: defaultYear,\n    level,\n    peerGroup,\n    partnerCityIds,\n    variable,\n  });\n\n  return cityId !== null\n    ? { loading, error, data }\n    : { loading: true, error: undefined, data: undefined };\n};\n\nexport default useRCAData;\n","import styled from \"styled-components\";\nimport {\n  breakPointValues,\n  breakPoints as globalBreakPoints,\n} from \"../../../../../styling/GlobalGrid\";\nimport {\n  backgroundMedium,\n  baseColor,\n  primaryColor,\n  secondaryFont,\n} from \"../../../../../styling/styleUtils\";\n\nconst breakPoints = {\n  medium: \"screen and (max-width: 1250px)\",\n  small: `screen and (max-width: 1070px) and (min-width: ${breakPointValues.width.small}px)`,\n};\n\nexport const TitleBase = styled.h2`\n  background-color: ${backgroundMedium};\n  font-family: ${secondaryFont};\n  font-size: 0.9rem;\n  margin: 0 0.25rem 0.25rem;\n  padding: 0.5rem 0 0.5rem 0.35rem;\n  height: 1.75rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  white-space: nowrap;\n\n  @media (max-height: 800px) {\n    font-size: 0.85rem;\n    padding: 0.25rem 0 0.25rem 0.15rem;\n  }\n\n  @media ${breakPoints.medium} {\n    font-size: 0.85rem;\n    padding: 0.25rem 0 0.25rem 0.15rem;\n    height: auto;\n    white-space: initial;\n    text-align: center;\n  }\n\n  @media ${breakPoints.small} {\n    font-size: 0.75rem;\n    height: auto;\n    white-space: initial;\n    flex-direction: column;\n  }\n\n  @media ${globalBreakPoints.small} {\n    flex-direction: row;\n  }\n`;\n\nexport const WrappableText = styled.div`\n  white-space: normal;\n`;\n\nexport const YearText = styled.small`\n  color: ${primaryColor};\n  font-size: 0.7rem;\n  line-height: 0;\n  font-weight: 600;\n  display: inline-block;\n  padding: 0.5rem;\n  white-space: nowrap;\n\n  @media ${breakPoints.medium} {\n    font-size: 0.65rem;\n  }\n`;\n\nexport const Icon = styled.img`\n  width: 1.75rem;\n  margin-right: 0.5rem;\n\n  @media (max-height: 800px) {\n    width: 1rem;\n  }\n\n  @media ${breakPoints.small} {\n    display: none;\n  }\n`;\n\nexport const ValueBase = styled.h3`\n  color: ${baseColor};\n  font-weight: 400;\n  font-variant: small-caps;\n  font-size: 1.8rem;\n  text-align: center;\n  margin: 0;\n\n  @media ${breakPoints.medium}, (max-height: 800px) {\n    font-size: 1.2rem;\n  }\n\n  @media ${globalBreakPoints.small} {\n    margin-bottom: 1.5rem;\n  }\n`;\n\nexport const ListItem = styled.div`\n  font-size: 1.1rem;\n\n  @media ${breakPoints.medium}, (max-height: 800px) {\n    font-size: 0.85rem;\n  }\n`;\n","import React from \"react\";\nimport { usePeerGroupCityCount } from \"../../../../../../components/navigation/secondaryHeader/comparisons/AddComparisonModal\";\nimport useCurrentCity from \"../../../../../../hooks/useCurrentCity\";\nimport { TitleBase, YearText, Icon, ValueBase, ListItem } from \"../styleUtils\";\nimport PopulationSVG from \"../../../../../../assets/icons/population.svg\";\nimport RankingSVG from \"../../../../../../assets/icons/ranking.svg\";\nimport GdpPerCapitaSVG from \"../../../../../../assets/icons/gdppercapita.svg\";\nimport DataReliabilitySVG from \"../../../../../../assets/icons/datareliability.svg\";\nimport {\n  populationDisplayYear,\n  gdpPerCapitaDisplayYear,\n  rankingDisplayYear,\n  defaultYear,\n  formatNumberLong,\n  numberWithCommas,\n} from \"../../../../../../Utils\";\nimport useFluent, { ordinalNumber } from \"../../../../../../hooks/useFluent\";\n\nimport styled from \"styled-components\";\nimport Tooltip from \"../../../../../../components/general/Tooltip\";\nimport SimpleTextLoading from \"../../../../../../components/transitionStateComponents/SimpleTextLoading\";\nimport {\n  getNewDataQualityLevel,\n  NewDataQualityLevel,\n  dataQualityColors,\n} from \"../../../../../../components/general/Utils\";\n\nconst DataLegend = styled.div`\n  margin-right: 0.2rem;\n  display: inline-flex;\n  flex-direction: row;\n  align-items: center;\n`;\n\nconst SmallDot = styled.div`\n  width: 0.45rem;\n  height: 0.45rem;\n  border-radius: 1000px;\n  margin-right: 0.2rem;\n`;\n\nconst LargeDot = styled.div`\n  width: 0.9rem;\n  height: 0.9rem;\n  border-radius: 1000px;\n  margin-right: 0.075rem;\n`;\n\nconst LegendContainer = styled.div`\n  margin-top: 0.5rem;\n\n  & h1 {\n    font-size: inherit;\n  }\n`;\n\nconst LegendRow = styled.div`\n  margin-top: 0.25rem;\n  font-size: 0.85em;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n`;\n\nconst TopRow = () => {\n  const { loading: cityLoading, city } = useCurrentCity();\n  const { loading, error, data } = usePeerGroupCityCount(\n    city && city.cityId ? city.cityId : null,\n  );\n  const getString = useFluent();\n\n  let population: React.ReactElement<any> | null;\n  let gdppc: React.ReactElement<any> | null;\n  let flagColor: React.ReactElement<any> | null = null;\n  let alertTitle: string = \"---\";\n  let description: string = \"---\";\n  let dataQualityTooltip: React.ReactElement<any> | null = null;\n  let regionPopRank: string = \"---\";\n  let regionGdppcRank: string = \"---\";\n  if (loading || cityLoading) {\n    population = <SimpleTextLoading />;\n    gdppc = <SimpleTextLoading />;\n  } else if (error) {\n    console.error(error);\n    population = <>---</>;\n    gdppc = <>---</>;\n  } else if (data && city) {\n    const dataFlag = city.dataFlag;\n    const dataQualityLevel = getNewDataQualityLevel(dataFlag);\n\n    if (dataQualityLevel === NewDataQualityLevel.HIGH) {\n      alertTitle = getString(\"data-disclaimer-high-quality-title\");\n      description = getString(\"data-disclaimer-high-quality-desc\");\n    } else if (dataQualityLevel === NewDataQualityLevel.MEDIUM) {\n      alertTitle = getString(\"data-disclaimer-medium-quality-title\");\n      description = getString(\"data-disclaimer-medium-quality-desc\");\n    } else if (dataQualityLevel === NewDataQualityLevel.LOW) {\n      alertTitle = getString(\"data-disclaimer-low-quality-title\");\n      description = getString(\"data-disclaimer-low-quality-desc\");\n    }\n\n    flagColor = (\n      <DataLegend>\n        <LargeDot\n          style={{ backgroundColor: dataQualityColors.get(dataQualityLevel) }}\n        />\n      </DataLegend>\n    );\n\n    dataQualityTooltip = (\n      <>\n        <div dangerouslySetInnerHTML={{ __html: description }}></div>\n        <LegendContainer>\n          <h1>Metroverse Data Quality Scale</h1>\n          <LegendRow>\n            <SmallDot\n              style={{\n                backgroundColor: dataQualityColors.get(\n                  NewDataQualityLevel.HIGH,\n                ),\n              }}\n            />\n            High Quality\n          </LegendRow>\n          <LegendRow>\n            <SmallDot\n              style={{\n                backgroundColor: dataQualityColors.get(\n                  NewDataQualityLevel.MEDIUM,\n                ),\n              }}\n            />\n            Medium Quality\n          </LegendRow>\n          <LegendRow>\n            <SmallDot\n              style={{\n                backgroundColor: dataQualityColors.get(NewDataQualityLevel.LOW),\n              }}\n            />\n            Low Quality\n          </LegendRow>\n        </LegendContainer>\n      </>\n    );\n\n    population = <>{formatNumberLong(city.population ? city.population : 0)}</>;\n    gdppc = <>${numberWithCommas(city.gdppc ? Math.round(city.gdppc) : 0)}</>;\n    regionPopRank = ordinalNumber([\n      city.regionPopRank ?? 0,\n    ]).toUpperCase();\n    regionGdppcRank = ordinalNumber([\n      city.regionGdppcRank ?? 0,\n    ]).toUpperCase();\n  } else {\n    population = <>---</>;\n    gdppc = <>---</>;\n  }\n\n  return (\n    <>\n      <div>\n        <TitleBase>\n          <Icon src={PopulationSVG} />\n          {getString(\"global-text-population\")}\n          <YearText>\n            {populationDisplayYear}\n            <Tooltip explanation={getString(\"global-text-population-about\")} />\n          </YearText>\n        </TitleBase>\n        <ValueBase>{population}</ValueBase>\n      </div>\n      <div>\n        <TitleBase>\n          <Icon src={GdpPerCapitaSVG} />\n          {getString(\"global-text-gdp-per-capita\")}\n          <YearText>\n            {gdpPerCapitaDisplayYear}\n            <Tooltip\n              explanation={getString(\"global-text-gdp-per-capita-about\")}\n            />\n          </YearText>\n        </TitleBase>\n        <ValueBase>{gdppc}</ValueBase>\n      </div>\n      <div>\n        <TitleBase>\n          <Icon src={RankingSVG} />\n          {getString(\"city-overview-ranking-title\")}*\n          <YearText>{rankingDisplayYear}</YearText>\n        </TitleBase>\n        <ValueBase>\n          <ListItem>\n            {getString(\"city-overview-ranking-pop\", { value: regionPopRank })}\n          </ListItem>\n          <ListItem>\n            {getString(\"city-overview-ranking-gdp\", { value: regionGdppcRank })}\n          </ListItem>\n        </ValueBase>\n      </div>\n      <div>\n        <TitleBase>\n          <Icon src={DataReliabilitySVG} />\n          {getString(\"city-overview-data-quality\")}\n          <YearText>\n            {defaultYear}\n            <Tooltip explanation={dataQualityTooltip} />\n          </YearText>\n        </TitleBase>\n        <ValueBase>\n          {flagColor}\n          {alertTitle}\n        </ValueBase>\n      </div>\n    </>\n  );\n};\n\nexport default TopRow;\n","/**\n * Stub for Phase 1 - benchmark comparison is not yet implemented.\n * Returns a null-like benchmark so downstream components can render without errors.\n */\n\nconst useCurrentBenchmark = () => {\n  return {\n    benchmarkName: '',\n    benchmarkNameShort: '',\n    benchmark: '' as string,\n  };\n};\n\nexport default useCurrentBenchmark;\n","import React, { useState } from \"react\";\nimport useFluent from \"../../../hooks/useFluent\";\nimport styled from \"styled-components\";\nimport {\n  backgroundDark,\n  benchmarkColor,\n  lightBorderColor,\n  primaryFont,\n  secondaryFont,\n} from \"../../../styling/styleUtils\";\nimport Tooltip from \"../../general/Tooltip\";\nimport BenchmarkSVG from \"../../../assets/icons/benchmark_comparator.svg\";\nimport { breakPoints } from \"../../../styling/GlobalGrid\";\n\nconst Root = styled.div`\n  display: flex;\n  align-items: center;\n`;\n\nconst ButtonsRoot = styled.div`\n  padding: 0 0.5rem;\n  display: flex;\n  flex-direction: column;\n`;\n\nconst Button = styled.button`\n  pointer-events: all;\n  font-family: ${primaryFont};\n  font-size: 0.75rem;\n  font-weight: 600;\n  text-transform: uppercase;\n  border: solid 1px ${benchmarkColor};\n  background-color: transparent;\n  display: block;\n  width: 100%;\n`;\n\nconst ToggleButton = styled(Button)`\n  border: solid 1px ${lightBorderColor};\n\n  &:hover {\n    background-color: ${lightBorderColor};\n  }\n`;\n\nconst OneTimeTooltip = styled.div`\n  position: absolute;\n  background-color: ${backgroundDark};\n  color: #fff;\n  padding: 0.5rem 0.75rem;\n  font-size: 0.8rem;\n  z-index: 100;\n  pointer-events: all;\n  max-width: 190px;\n  white-space: normal;\n  text-transform: none;\n  font-weight: 400;\n  transform: translateX(calc(100% - 2rem));\n\n  &:before {\n    content: \"\";\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    left: -0.4rem;\n    margin: auto;\n    width: 0;\n    height: 0;\n    border-top: 0.4rem solid transparent;\n    border-bottom: 0.4rem solid transparent;\n    border-right: 0.4rem solid ${backgroundDark};\n  }\n\n  @media ${breakPoints.small} {\n    transform: translate(-8%, -76%);\n\n    &:before {\n      width: 0;\n      height: 0;\n      left: 0;\n      right: 0;\n      top: auto;\n      bottom: -0.4rem;\n      border-left: 0.4rem solid transparent;\n      border-right: 0.4rem solid transparent;\n      border-top: 0.4rem solid ${backgroundDark};\n      border-bottom: none;\n    }\n  }\n`;\n\nconst DismissTooltipButton = styled.button`\n  border: solid 1px #fff;\n  background-color: transparent;\n  color: #fff;\n  font-family: ${primaryFont};\n  font-size: 0.875rem;\n  margin-top: 0.75rem;\n\n  &:hover {\n    background-color: #fff;\n    color: ${backgroundDark};\n  }\n`;\n\nconst Icon = styled.img`\n  width: 1rem;\n  height: 1rem;\n  position: relative;\n  top: 0.25rem;\n  margin-right: 0.25rem;\n`;\n\nconst HighlightedTooltipText = styled.span`\n  font-weight: 600;\n  text-transform: uppercase;\n  font-size: 0.875em;\n  color: ${benchmarkColor};\n  margin: 0 0.2rem;\n  white-space: nowrap;\n`;\n\nconst EquationContainer = styled.div`\n  margin-top: 0.5rem;\n`;\nconst Division = styled.div`\n  margin-top: 0.25rem;\n  font-size: 0.85em;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  text-align: center;\n  font-family: ${secondaryFont};\n`;\nconst Subtraction = styled.div`\n  margin-top: 0.25rem;\n  font-size: 0.85em;\n  display: flex;\n  text-align: center;\n  font-family: ${secondaryFont};\n`;\nconst Top = styled.div`\n  padding-bottom: 0.1rem;\n  margin-bottom: 0.1rem;\n  border-bottom: solid 1px #333;\n  max-width: min-content;\n  flex-grow: 0;\n  white-space: nowrap;\n`;\nconst Bottom = styled.div``;\n\nconst BenchmarkText = () => {\n  return (\n    <HighlightedTooltipText>\n      <Icon src={BenchmarkSVG} />\n      Change Peer Group\n    </HighlightedTooltipText>\n  );\n};\n\nconst oneTimeTooltipLocalStorageKey =\n  \"benchmarkPresenceToggleAxisOneTimeTooltipLocalStorageKeyv2\";\nenum StringBoolean {\n  \"TRUE\" = \"TRUE\",\n  \"FALSE\" = \"FALSE\",\n}\n\nexport enum Highlighted {\n  relative = \"relative\",\n  absolute = \"absolute\",\n}\n\ninterface Props {\n  togglePresence?: boolean;\n  highlight?: Highlighted;\n  onButtonClick?: (highlighted: Highlighted) => void;\n  showArrows?: boolean;\n}\n\nconst PresenceToggle = (props: Props) => {\n  const { togglePresence, highlight, showArrows, onButtonClick } = props;\n  const getString = useFluent();\n\n  const initialShowOverviewTooltip =\n    localStorage.getItem(oneTimeTooltipLocalStorageKey) === StringBoolean.TRUE\n      ? false\n      : true;\n  const [showOverviewTooltip, setShowOverviewTooltip] = useState<boolean>(\n    initialShowOverviewTooltip,\n  );\n  const dismissOverviewTooltip = () => {\n    setShowOverviewTooltip(false);\n    localStorage.setItem(oneTimeTooltipLocalStorageKey, StringBoolean.TRUE);\n  };\n\n  const highlightedStyles: React.CSSProperties = {\n    backgroundColor: lightBorderColor,\n    borderColor: benchmarkColor,\n  };\n  const relativePresenceTooltip = (\n    <>\n      <div>{getString(\"global-ui-relative-presence-tooltip\")}</div>\n      <EquationContainer>\n        <div>It is calculated as:</div>\n        <Division>\n          <Top>employment share of industry in city</Top>\n          <Bottom>employment share of industry in peer group</Bottom>\n        </Division>\n      </EquationContainer>\n    </>\n  );\n  const absolutePresenceTooltip = (\n    <>\n      <div>{getString(\"global-ui-absolute-presence-tooltip\")}</div>\n      <EquationContainer>\n        <div>It is calculated as:</div>\n        <Subtraction>\n          (employment share of industry in city) - (employment share of industry\n          in peer group)\n        </Subtraction>\n      </EquationContainer>\n    </>\n  );\n  const presenceButtons = togglePresence ? (\n    <>\n      <Tooltip explanation={relativePresenceTooltip}>\n        <ToggleButton\n          style={\n            highlight === Highlighted.relative ? highlightedStyles : undefined\n          }\n          onClick={\n            onButtonClick\n              ? () => onButtonClick(Highlighted.relative)\n              : undefined\n          }\n        >\n          <Tooltip explanation={relativePresenceTooltip} />\n          {getString(\"global-ui-relative-presence\")}\n        </ToggleButton>\n      </Tooltip>\n      <Tooltip explanation={absolutePresenceTooltip}>\n        <ToggleButton\n          style={\n            highlight === Highlighted.absolute ? highlightedStyles : undefined\n          }\n          onClick={\n            onButtonClick\n              ? () => onButtonClick(Highlighted.absolute)\n              : undefined\n          }\n        >\n          <Tooltip explanation={absolutePresenceTooltip} />\n          {getString(\"global-ui-absolute-presence\")}\n        </ToggleButton>\n      </Tooltip>\n    </>\n  ) : (\n    <Tooltip explanation={relativePresenceTooltip}>\n      <Button>\n        <Tooltip explanation={relativePresenceTooltip} />\n        {getString(\"global-ui-relative-presence\")}\n      </Button>\n    </Tooltip>\n  );\n\n  const arrowLeft = showArrows ? \"\" : null;\n  const arrowRight = showArrows ? \"\" : null;\n\n  const oneTimeTooltip = showOverviewTooltip ? (\n    <OneTimeTooltip>\n      Hover on labels to learn more. Click on <BenchmarkText /> to select a\n      different benchmark.\n      <br />\n      <DismissTooltipButton onClick={dismissOverviewTooltip}>\n        {getString(\"city-overview-one-time-tooltip-got-it\")}\n      </DismissTooltipButton>\n    </OneTimeTooltip>\n  ) : (\n    false\n  );\n\n  return (\n    <Root>\n      {arrowLeft}\n      <ButtonsRoot>{presenceButtons}</ButtonsRoot>\n      {arrowRight}\n      {oneTimeTooltip}\n    </Root>\n  );\n};\n\nexport default PresenceToggle;\n","import React from \"react\";\nimport { defaultYear } from \"../../../../../../Utils\";\nimport {\n  DigitLevel,\n  PeerGroup,\n} from \"../../../../../../types/graphQL/graphQLTypes\";\nimport { useClusterIntensityQuery } from \"../../../../../../components/dataViz/industrySpace/chart/useRCAData\";\nimport orderBy from \"lodash/orderBy\";\nimport useGlobalClusterData from \"../../../../../../hooks/useGlobalClusterData\";\nimport useGlobalIndustriesData from \"../../../../../../hooks/useGlobalIndustriesData\";\nimport useFluent from \"../../../../../../hooks/useFluent\";\nimport {\n  Icon,\n  ListItem,\n  TitleBase,\n  ValueBase,\n  WrappableText,\n  YearText,\n} from \"../styleUtils\";\nimport Tooltip from \"../../../../../../components/general/Tooltip\";\nimport TopIndustriesSVG from \"../../../../../../assets/icons/topindustries.svg\";\nimport TopClustersSVG from \"../../../../../../assets/icons/topknowledgecluster.svg\";\nimport SimpleTextLoading from \"../../../../../../components/transitionStateComponents/SimpleTextLoading\";\nimport styled from \"styled-components\";\nimport { breakPoints } from \"../../../../../../styling/GlobalGrid\";\n\nconst Cell = styled.div`\n  max-width: 380px;\n  @media ${breakPoints.small} {\n    max-width: 100%;\n  }\n`;\n\ninterface Props {\n  cityId: string;\n}\n\nconst TopRCA = ({ cityId }: Props) => {\n  const getString = useFluent();\n  const { loading, error, data } = useClusterIntensityQuery({\n    cityId: cityId !== null ? parseInt(cityId, 10) : null,\n    year: defaultYear,\n    level: DigitLevel.Sector,\n    peerGroup: PeerGroup.GlobalPopulation,\n    partnerCityIds: [],\n    variable: \"employ\",\n  });\n  const clusters = useGlobalClusterData();\n  const industries = useGlobalIndustriesData();\n\n  let topIndustriesElement: React.ReactElement<any> | null;\n  let topClustersElement: React.ReactElement<any> | null;\n  if (loading || clusters.loading || industries.loading) {\n    topIndustriesElement = <SimpleTextLoading />;\n    topClustersElement = <SimpleTextLoading />;\n  } else if (error) {\n    console.error(error);\n    topIndustriesElement = null;\n    topClustersElement = null;\n  } else if (clusters.error) {\n    console.error(clusters.error);\n    topIndustriesElement = null;\n    topClustersElement = null;\n  } else if (industries.error) {\n    console.error(industries.error);\n    topIndustriesElement = null;\n    topClustersElement = null;\n  } else if (data && clusters.data && industries.data) {\n    const { c3Rca, naicsRca } = data;\n\n    const industriesGreaterThan1 = naicsRca.filter((d) => {\n      const industry = industries.data?.industries.find(\n        (dd) => dd.naicsId === d.naicsId + \"\",\n      );\n      return d.rca && d.rca >= 1 && industry && industry.name !== \"Other\";\n    });\n    const topIndustries = orderBy(\n      industriesGreaterThan1 ? industriesGreaterThan1 : naicsRca,\n      [\"rca\"],\n      [\"desc\"],\n    )\n      .slice(0, industriesGreaterThan1 ? 3 : 1)\n      .map((d) => {\n        const industry = industries.data?.industries.find(\n          (dd) => dd.naicsId === d.naicsId + \"\",\n        );\n        return (\n          <ListItem key={d.naicsId}>{industry?.name?.toUpperCase()}</ListItem>\n        );\n      });\n    topIndustriesElement = <>{topIndustries}</>;\n\n    const clustersGreaterThan1 = c3Rca.filter((d) => d.rca && d.rca >= 1);\n    const topClusters = orderBy(\n      clustersGreaterThan1 ? clustersGreaterThan1 : c3Rca,\n      [\"rca\"],\n      [\"desc\"],\n    )\n      .slice(0, clustersGreaterThan1 ? 3 : 1)\n      .map((d) => {\n        const cluster = clusters.data?.clusters.find(\n          (dd) => dd.clusterId === d.clusterId + \"\",\n        );\n        return (\n          <ListItem key={d.clusterId}>{cluster?.name?.toUpperCase()}</ListItem>\n        );\n      });\n    topClustersElement = <>{topClusters}</>;\n  } else {\n    topIndustriesElement = null;\n    topClustersElement = null;\n  }\n\n  return (\n    <>\n      <Cell>\n        <TitleBase>\n          <Icon src={TopIndustriesSVG} />\n          <WrappableText>\n            {getString(\"city-overview-top-specialized-industries\")}**\n          </WrappableText>\n          <YearText>\n            {defaultYear}\n            <Tooltip\n              explanation={\n                <div\n                  dangerouslySetInnerHTML={{\n                    __html: getString(\n                      \"city-overview-top-specialized-industries-tooltip\",\n                    ),\n                  }}\n                />\n              }\n            />\n          </YearText>\n        </TitleBase>\n        <ValueBase>{topIndustriesElement}</ValueBase>\n      </Cell>\n      <Cell>\n        <TitleBase>\n          <Icon src={TopClustersSVG} />\n          <WrappableText>\n            {getString(\"city-overview-top-knowledge-clusters\")}**\n          </WrappableText>\n          <YearText>\n            {defaultYear}\n            <Tooltip\n              explanation={getString(\n                \"city-overview-top-knowledge-clusters-tooltip\",\n              )}\n            />\n          </YearText>\n        </TitleBase>\n        <ValueBase>{topClustersElement}</ValueBase>\n      </Cell>\n    </>\n  );\n};\n\nexport default TopRCA;\n","import useCurrentCityId from \"../../../hooks/useCurrentCityId\";\n\nexport interface SuccessResponse {\n  cities: {\n    cityId: string;\n    partnerId: string;\n    eucdist: number | null;\n    id: string;\n  }[];\n  cityPartnerEucdistScale: {\n    minGlobalEucdist: number;\n    p20GlobalEucdist: number;\n    p40GlobalEucdist: number;\n    p60GlobalEucdist: number;\n    p80GlobalEucdist: number;\n    maxGlobalEucdist: number;\n  };\n}\n\n// Stubbed: no proximity/similarity data in BLS static dataset\nconst useProximityData = () => {\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  const _cityId = useCurrentCityId();\n\n  return {\n    loading: false,\n    error: undefined,\n    data: {\n      cities: [],\n      cityPartnerEucdistScale: {\n        minGlobalEucdist: 0,\n        p20GlobalEucdist: 0,\n        p40GlobalEucdist: 0,\n        p60GlobalEucdist: 0,\n        p80GlobalEucdist: 0,\n        maxGlobalEucdist: 0,\n      },\n    } as SuccessResponse,\n  };\n};\n\nexport default useProximityData;\n","import orderBy from \"lodash/orderBy\";\nimport React from \"react\";\nimport useProximityData from \"../../../../../../components/dataViz/similarCitiesMap/useProximityData\";\nimport Tooltip from \"../../../../../../components/general/Tooltip\";\nimport useCurrentCity from \"../../../../../../hooks/useCurrentCity\";\nimport useFluent from \"../../../../../../hooks/useFluent\";\nimport useGlobalLocationData from \"../../../../../../hooks/useGlobalLocationData\";\nimport { defaultYear } from \"../../../../../../Utils\";\nimport { Icon, ListItem, TitleBase, ValueBase, YearText } from \"../styleUtils\";\nimport TopCitiesSVG from \"../../../../../../assets/icons/topsimilarcities.svg\";\nimport SimpleTextLoading from \"../../../../../../components/transitionStateComponents/SimpleTextLoading\";\n\nconst TopCities = () => {\n  const getString = useFluent();\n  const { loading, error, data } = useProximityData();\n  const globalLocations = useGlobalLocationData();\n  const currentCity = useCurrentCity();\n  let topCitiesElement: React.ReactElement<any> | null;\n  if (loading || globalLocations.loading || currentCity.loading) {\n    topCitiesElement = <SimpleTextLoading />;\n  } else if (error) {\n    console.error(error);\n    topCitiesElement = null;\n  } else if (globalLocations.error) {\n    console.error(globalLocations.error);\n    topCitiesElement = null;\n  } else if (data && globalLocations.data && currentCity.city) {\n    const minPop = currentCity.city.population\n      ? currentCity.city.population / 2\n      : 0;\n    const maxPop = currentCity.city.population\n      ? currentCity.city.population * 2\n      : 0;\n    const topLocations = orderBy(data.cities, [\"eucdist\"])\n      .map((d) => {\n        const city = globalLocations.data?.cities.find(\n          (dd) => dd.cityId === d.partnerId,\n        );\n        return { ...d, city };\n      })\n      .filter(\n        (d) =>\n          d.partnerId !== currentCity.city?.cityId &&\n          d.city?.population &&\n          d.city.population > minPop &&\n          d.city.population < maxPop,\n      )\n      .slice(0, 3)\n      .map((d) => {\n        const country = globalLocations.data?.countries.find(\n          (cntry) => cntry.countryId === d.city?.countryId + \"\",\n        );\n        const countryText = country ? \", \" + country.code : \"\";\n        return (\n          <ListItem key={d.city?.cityId}>\n            {d.city?.name?.toUpperCase()}\n            {countryText.toUpperCase()}\n          </ListItem>\n        );\n      });\n    topCitiesElement = <>{topLocations}</>;\n  } else {\n    topCitiesElement = null;\n  }\n  return (\n    <div>\n      <TitleBase>\n        <Icon src={TopCitiesSVG} />\n        <div>{getString(\"city-overview-top-similar-cities\")}</div>\n        <YearText>\n          {defaultYear}\n          <Tooltip\n            explanation={getString(\"city-overview-top-similar-cities-tooltip\")}\n          />\n        </YearText>\n      </TitleBase>\n      <ValueBase>{topCitiesElement}</ValueBase>\n    </div>\n  );\n};\n\nexport default TopCities;\n","import React from \"react\";\nimport TopRCA from \"./TopRCA\";\nimport useCurrentCityId from \"../../../../../../hooks/useCurrentCityId\";\nimport TopCities from \"./TopCities\";\n\nconst BottomRow = () => {\n  const cityId = useCurrentCityId();\n\n  if (!cityId) {\n    return null;\n  }\n\n  return (\n    <>\n      <TopRCA cityId={cityId} />\n      <TopCities />\n    </>\n  );\n};\n\nexport default BottomRow;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { usePeerGroupCityCount } from \"../../../../../components/navigation/secondaryHeader/comparisons/AddComparisonModal\";\nimport useFluent from \"../../../../../hooks/useFluent\";\nimport useGlobalLocationData from \"../../../../../hooks/useGlobalLocationData\";\n\nconst Root = styled.small`\n  text-align: center;\n  font-size: 0.65rem;\n  width: 100%;\n  display: block;\n`;\n\ninterface Props {\n  cityId: string;\n  regionId: number | null;\n}\n\nconst DisclaimerText = ({ cityId, regionId }: Props) => {\n  const getString = useFluent();\n  const { data } = usePeerGroupCityCount(cityId);\n  const globalLocations = useGlobalLocationData();\n\n  let cityPeerGroupCountsRegion: string | number = \"---\";\n  let regionName: string = \"---\";\n  if (globalLocations.data) {\n    const region = globalLocations.data.regions.find(\n      (d) => d.regionId === regionId + \"\",\n    );\n    regionName = region && region.regionName ? region.regionName : \"\";\n    if (data && data.cityPeerGroupCounts) {\n      cityPeerGroupCountsRegion = data.cityPeerGroupCounts.region + 1;\n    }\n  }\n\n  return (\n    <Root>\n      <div>\n        *\n        {getString(\"city-overview-ranking-disclaimer\", {\n          \"city-peer-group-counts-region\": cityPeerGroupCountsRegion,\n          \"region-name\": regionName,\n        })}\n      </div>\n      <div>**{getString(\"city-overview-benchmark-disclaimer\")}</div>\n    </Root>\n  );\n};\n\nexport default DisclaimerText;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { breakPoints } from \"../../../../../styling/GlobalGrid\";\nimport TopRow from \"./topRow\";\nimport BottomRow from \"./bottomRow\";\nimport useCurrentCity from \"../../../../../hooks/useCurrentCity\";\nimport DisclaimerText from \"./DisclaimerText\";\n\nconst Root = styled.div`\n  width: 100%;\n  height: 100%;\n  display: grid;\n  grid-template-rows: auto 1fr auto;\n  gap: 1rem;\n\n  @media (max-width: 1200px), (max-height: 800px) {\n    gap: 0.5rem;\n  }\n`;\n\nconst Row = styled.div`\n  display: flex;\n  width: 100%;\n  justify-content: space-between;\n\n  @media ${breakPoints.small} {\n    flex-direction: column;\n  }\n`;\n\nconst Widgets = () => {\n  const { city } = useCurrentCity();\n  const disclaimer = city ? (\n    <DisclaimerText cityId={city.cityId} regionId={city.region} />\n  ) : null;\n  return (\n    <Root>\n      <Row>\n        <TopRow />\n      </Row>\n      <Row>\n        <BottomRow />\n      </Row>\n      <Row>{disclaimer}</Row>\n    </Root>\n  );\n};\n\nexport default Widgets;\n","import React from \"react\";\nimport useFluent from \"../../../../../hooks/useFluent\";\nimport styled from \"styled-components\";\nimport { primaryColor, secondaryFont } from \"../../../../../styling/styleUtils\";\nimport { breakPoints } from \"../../../../../styling/GlobalGrid\";\n\nconst Root = styled.div`\n  height: 100%;\n  width: 100%;\n  overflow: auto;\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  padding: 1rem;\n  box-sizing: border-box;\n\n  @media ${breakPoints.small} {\n    position: static;\n    height: auto;\n  }\n`;\n\nconst Title = styled.h1`\n  margin: 0 0 1rem;\n  text-transform: uppercase;\n\n  @media (max-width: 920px), (max-height: 800px) {\n    font-size: 1.25rem;\n  }\n`;\n\nconst SectionHeader = styled.h2`\n  font-size: 1rem;\n  color: ${primaryColor};\n  font-family: ${secondaryFont};\n  margin-bottom: 0.2rem;\n\n  @media (max-width: 920px), (max-height: 800px) {\n    font-size: 0.85rem;\n  }\n`;\n\nconst Section = styled.div`\n  font-size: 0.85rem;\n\n  @media (max-width: 920px), (max-height: 800px) {\n    font-size: 0.75rem;\n  }\n`;\n\nconst Concepts = () => {\n  const getString = useFluent();\n  return (\n    <Root>\n      <Title>{getString(\"city-overview-metroverse-concepts\")}</Title>\n      <SectionHeader>\n        {getString(\"city-overview-relative-presence-title\")}\n      </SectionHeader>\n      <Section\n        dangerouslySetInnerHTML={{\n          __html: getString(\"city-overview-relative-presence-desc\"),\n        }}\n      />\n      <SectionHeader>\n        {getString(\"city-overview-knowledge-cluster-title\")}\n      </SectionHeader>\n      <Section\n        dangerouslySetInnerHTML={{\n          __html: getString(\"city-overview-knowledge-cluster-desc\"),\n        }}\n      />\n      <SectionHeader>\n        {getString(\"city-overview-industry-space-title\")}\n      </SectionHeader>\n      <Section\n        dangerouslySetInnerHTML={{\n          __html: getString(\"city-overview-industry-space-desc\"),\n        }}\n      />\n      <SectionHeader>\n        {getString(\"city-overview-city-similarity-title\")}\n      </SectionHeader>\n      <Section\n        dangerouslySetInnerHTML={{\n          __html: getString(\"city-overview-city-similarity-desc\"),\n        }}\n      />\n    </Root>\n  );\n};\n\nexport default Concepts;\n","import React from \"react\";\nimport styled from \"styled-components/macro\";\nimport {\n  backgroundMedium,\n  baseColor,\n} from \"../../../../../styling/styleUtils\";\n\nconst Placeholder = styled.div`\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: ${backgroundMedium};\n  color: ${baseColor};\n  font-size: 0.9rem;\n  text-align: center;\n  padding: 2rem;\n`;\n\nexport interface BoundsConfig {\n  bounds: [[number, number], [number, number]];\n  padding: { top: number; left: number; right: number; bottom: number };\n}\n\ninterface Props {\n  loading: boolean;\n  error: any;\n  data: any;\n  currentCityId: string | null;\n  fitBounds: BoundsConfig;\n}\n\n// Replaced Mapbox map with placeholder for static BLS site\nconst CityMap = (_props: Props) => {\n  return (\n    <Placeholder>\n      Region overview  map visualization not available in static mode.\n    </Placeholder>\n  );\n};\n\nexport default CityMap;\n","import React from \"react\";\nimport styled from \"styled-components/macro\";\nimport useCurrentCityId from \"../../../../../hooks/useCurrentCityId\";\nimport CityMap, { BoundsConfig } from \"./CityMap\";\nimport {\n  backgroundMedium,\n} from \"../../../../../styling/styleUtils\";\n\nconst Root = styled.div`\n  width: 100%;\n  height: 100%;\n  position: relative;\n  background-color: ${backgroundMedium};\n`;\n\nconst MapRoot = () => {\n  const currentCityId = useCurrentCityId();\n\n  const fitBounds: BoundsConfig = {\n    bounds: [[0, 0], [0, 0]],\n    padding: { top: 0, bottom: 0, left: 0, right: 0 },\n  };\n\n  return (\n    <Root>\n      <CityMap\n        loading={false}\n        error={undefined}\n        data={undefined}\n        currentCityId={currentCityId}\n        fitBounds={fitBounds}\n      />\n    </Root>\n  );\n};\n\nexport default MapRoot;\n","import {\n  breakPoints,\n  DefaultContentWrapper,\n} from \"../../../../styling/GlobalGrid\";\nimport useCurrentCityId from \"../../../../hooks/useCurrentCityId\";\nimport SimpleError from \"../../../../components/transitionStateComponents/SimpleError\";\nimport { LoadingOverlay } from \"../../../../components/transitionStateComponents/VizLoadingBlock\";\nimport React from \"react\";\nimport UtilityBar from \"../../../../components/navigation/secondaryHeader/UtilityBar\";\nimport styled from \"styled-components\";\nimport Widgets from \"./widgets\";\nimport Concepts from \"./concepts\";\nimport Map from \"./map\";\n\nconst Root = styled.div`\n  padding: 1.5rem 0.75rem 2.5rem;\n  box-sizing: border-box;\n  display: grid;\n  width: 100%;\n  min-height: 100%;\n  grid-template-rows: auto 1fr;\n  grid-template-columns: 1fr 1.25fr;\n  grid-template-areas:\n    \"widgets widgets\"\n    \"map concepts\";\n  gap: 1.5rem;\n\n  @media (max-height: 750px) {\n    gap: 0.75rem;\n  }\n\n  @media ${breakPoints.small} {\n    grid-template-rows: auto auto auto;\n    grid-template-columns: 1fr;\n    grid-template-areas:\n      \"widgets\"\n      \"map\"\n      \"concepts\";\n  }\n`;\n\nconst ContentBlock = styled.div`\n  box-shadow: 0px 1px 4px 0px rgba(0, 0, 0, 0.25);\n`;\n\nconst WidgetContainer = styled(ContentBlock)`\n  grid-area: widgets;\n  padding: 1rem;\n\n  @media (max-height: 750px) {\n    padding: 0.5rem 0.25rem;\n  }\n`;\n\nconst MapContainer = styled(ContentBlock)`\n  grid-area: map;\n`;\n\nconst ConceptsContainer = styled(ContentBlock)`\n  grid-area: concepts;\n  position: relative;\n`;\n\nconst SimilarCities = () => {\n  const cityId = useCurrentCityId();\n\n  if (cityId === null) {\n    return (\n      <DefaultContentWrapper>\n        <LoadingOverlay>\n          <SimpleError fluentMessageId={\"global-ui-error-invalid-city\"} />\n        </LoadingOverlay>\n      </DefaultContentWrapper>\n    );\n  }\n\n  return (\n    <DefaultContentWrapper>\n      <Root>\n        <WidgetContainer>\n          <Widgets />\n        </WidgetContainer>\n        <MapContainer>\n          <Map />\n        </MapContainer>\n        <ConceptsContainer>\n          <Concepts />\n        </ConceptsContainer>\n      </Root>\n      <UtilityBar />\n    </DefaultContentWrapper>\n  );\n};\n\nexport default SimilarCities;\n","export const tickMarksForMinMax = (min: number, max: number) => {\n  const digits = min.toString().length + max.toString().length;\n  return digits - 3;\n};\n","import React, { useState, useRef } from \"react\";\nimport { scaleLog } from \"d3-scale\";\nimport {\n  sectorColorMap,\n  educationColorRange,\n  wageColorRange,\n  Mult,\n  FractionMult,\n} from \"../../../styling/styleUtils\";\nimport ComparisonBarChart, {\n  RowHoverEvent,\n  BarDatum,\n  Direction,\n} from \"react-comparison-bar-chart\";\nimport { SuccessResponse } from \"../industrySpace/chart/useRCAData\";\nimport { useGlobalIndustryMap } from \"../../../hooks/useGlobalIndustriesData\";\nimport {\n  ClassificationNaicsIndustry,\n  DigitLevel,\n} from \"../../../types/graphQL/graphQLTypes\";\nimport { ColorBy } from \"../../../routing/routes\";\nimport {\n  getStandardTooltip,\n  RapidTooltipRoot,\n} from \"../../../utilities/rapidTooltip\";\nimport useFluent from \"../../../hooks/useFluent\";\nimport QuickError from \"../../transitionStateComponents/QuickError\";\nimport { rgba } from \"polished\";\nimport { defaultYear, decimalToFraction } from \"../../../Utils\";\nimport { tickMarksForMinMax } from \"./getNiceLogValues\";\nimport { scaleLinear } from \"d3-scale\";\nimport { useAggregateIndustryMap } from \"../../../hooks/useAggregateIndustriesData\";\nimport LoadingBlock from \"../../transitionStateComponents/VizLoadingBlock\";\n\ninterface Props {\n  data: SuccessResponse[\"naicsRca\"];\n  highlighted: string | undefined;\n  hiddenSectors: ClassificationNaicsIndustry[\"id\"][];\n  colorBy: ColorBy;\n  digitLevel: DigitLevel;\n}\n\nconst Industries = (props: Props) => {\n  const { data, highlighted, hiddenSectors, colorBy, digitLevel } = props;\n\n  const industryMap = useGlobalIndustryMap();\n  const aggregateIndustryDataMap = useAggregateIndustryMap({\n    level: digitLevel,\n    year: defaultYear,\n  });\n  const getString = useFluent();\n\n  let colorScale: (val: number) => string;\n  if (\n    colorBy === ColorBy.education &&\n    aggregateIndustryDataMap.data !== undefined\n  ) {\n    colorScale = scaleLinear()\n      .domain([\n        aggregateIndustryDataMap.data.globalMinMax.minYearsEducation,\n        aggregateIndustryDataMap.data.globalMinMax.medianYearsEducation,\n        aggregateIndustryDataMap.data.globalMinMax.maxYearsEducation,\n      ])\n      .range(educationColorRange as any) as any;\n  } else if (\n    colorBy === ColorBy.wage &&\n    aggregateIndustryDataMap.data !== undefined\n  ) {\n    colorScale = scaleLinear()\n      .domain([\n        aggregateIndustryDataMap.data.globalMinMax.minHourlyWage,\n        aggregateIndustryDataMap.data.globalMinMax.medianHourlyWage,\n        aggregateIndustryDataMap.data.globalMinMax.maxHourlyWage,\n      ])\n      .range(wageColorRange as any) as any;\n  } else {\n    colorScale = () => \"lightgray\";\n  }\n\n  const [highlightError, setHighlightError] = useState<boolean>(false);\n  const tooltipRef = useRef<HTMLDivElement | null>(null);\n\n  if (\n    (colorBy === ColorBy.education && aggregateIndustryDataMap.loading) ||\n    (colorBy === ColorBy.wage && aggregateIndustryDataMap.loading)\n  ) {\n    return <LoadingBlock />;\n  }\n\n  const filteredIndustryRCA = data.filter((d) => {\n    const industry =\n      d.naicsId !== null ? industryMap.data[d.naicsId] : undefined;\n    if (\n      industry &&\n      !hiddenSectors.includes(industry.naicsIdTopParent.toString())\n    ) {\n      return d.rca && (d.rca as number) > 0;\n    } else {\n      return false;\n    }\n  });\n  let max =\n    Math.ceil(\n      (Math.max(...filteredIndustryRCA.map((d) => d.rca as number)) * 1.1) / 10,\n    ) * 10;\n  let min = Math.min(...filteredIndustryRCA.map((d) => d.rca as number));\n  if (max < 10) {\n    max = 10;\n  }\n  if (min >= 1) {\n    min = 0.1;\n  }\n  let scale = scaleLog().domain([min, max]).range([0, 100]).nice();\n\n  min = parseFloat(scale.invert(0).toFixed(5));\n  max = parseFloat(scale.invert(100).toFixed(5));\n\n  if (max.toString().length > min.toString().length - 1) {\n    min = 1 / max;\n  } else if (max.toString().length < min.toString().length - 1) {\n    max = 1 / min;\n  }\n\n  scale = scaleLog().domain([min, max]).range([0, 100]).nice();\n  const numberOfXAxisTicks = tickMarksForMinMax(\n    parseFloat(scale.invert(0).toFixed(5)),\n    parseFloat(scale.invert(100).toFixed(5)),\n  );\n\n  const highPresenceScale = scaleLog().domain([1, max]).range([0, 100]).nice();\n\n  const lowPresenceScale = scaleLog().domain([1, min]).range([0, 100]).nice();\n\n  const highPresenceData: BarDatum[] = [];\n  const lowPresenceData: BarDatum[] = [];\n  filteredIndustryRCA.forEach((d) => {\n    const industry =\n      d.naicsId !== null ? industryMap.data[d.naicsId] : undefined;\n    let color: string;\n    if (\n      (colorBy === ColorBy.education || colorBy === ColorBy.wage) &&\n      aggregateIndustryDataMap.data\n    ) {\n      const target =\n        d.naicsId !== null\n          ? aggregateIndustryDataMap.data.industries[d.naicsId]\n          : undefined;\n      if (target) {\n        const targetValue =\n          colorBy === ColorBy.education\n            ? target.yearsEducationRank\n            : target.hourlyWageRank;\n        color = colorScale(targetValue);\n      } else {\n        color = \"lightgray\";\n      }\n    } else {\n      const colorDatum = industry\n        ? sectorColorMap.find(\n            (s) => s.id === industry.naicsIdTopParent.toString(),\n          )\n        : undefined;\n      color = colorDatum ? colorDatum.color : \"lightgray\";\n    }\n    let value: number = 0;\n    if (d.rca && d.rca < 1) {\n      value = lowPresenceScale(d.rca) as number;\n    } else if (d.rca && d.rca >= 1) {\n      value = highPresenceScale(d.rca) as number;\n    }\n    // const value = d.rca ? scale(d.rca as number) as number : 0;\n    const datum: BarDatum = {\n      id: d.naicsId !== null ? d.naicsId.toString() : \"\",\n      title: industry && industry.name ? industry.name : \"\",\n      value,\n      color,\n    };\n    if (d.rca && d.rca >= 1) {\n      highPresenceData.push(datum);\n    } else {\n      lowPresenceData.push(datum);\n    }\n  });\n  const formatValue = (value: number, direction: Direction) => {\n    const scaleToUse =\n      direction === Direction.Over ? highPresenceScale : lowPresenceScale;\n    const scaledValue = parseFloat(scaleToUse.invert(value).toFixed(5));\n    if (scaledValue >= 1) {\n      return (\n        <>\n          {scaledValue}\n          <Mult></Mult>\n        </>\n      );\n    } else {\n      const { top, bottom } = decimalToFraction(scaledValue);\n      return (\n        <>\n          <sup>{top}</sup>&frasl;<sub>{bottom}</sub>\n          <FractionMult></FractionMult>\n        </>\n      );\n    }\n  };\n\n  const setHovered = (e: RowHoverEvent | undefined) => {\n    const node = tooltipRef.current;\n    if (node) {\n      if (e && e.datum) {\n        const { datum, mouseCoords } = e;\n        const industry = filteredIndustryRCA.find(\n          (d) => d.naicsId && d.naicsId.toString() === datum.id,\n        );\n        const rows = [\n          [getString(\"global-ui-naics-code\") + \":\", datum.id],\n          [getString(\"global-ui-year\") + \":\", defaultYear.toString()],\n          [\n            getString(\"global-intensity\") + \":\",\n            industry && industry.rca ? industry.rca.toFixed(3) : \"0.000\",\n          ],\n        ];\n        if (\n          (colorBy === ColorBy.education || colorBy === ColorBy.wage) &&\n          aggregateIndustryDataMap.data\n        ) {\n          const target = aggregateIndustryDataMap.data.industries[datum.id];\n          const targetValue =\n            colorBy === ColorBy.education\n              ? target.yearsEducation\n              : target.hourlyWage;\n          rows.push([\n            getString(\"global-formatted-color-by\", { type: colorBy }),\n            (colorBy === ColorBy.wage ? \"$\" : \"\") + targetValue.toFixed(2),\n          ]);\n        }\n        node.innerHTML = getStandardTooltip({\n          title: datum.title,\n          color: rgba(datum.color, 0.3),\n          rows,\n          boldColumns: [1, 2],\n        });\n        node.style.top = mouseCoords.y + \"px\";\n        node.style.left = mouseCoords.x + \"px\";\n        node.style.display = \"block\";\n      } else {\n        node.style.display = \"none\";\n      }\n    }\n  };\n\n  const highlightErrorPopup = highlightError ? (\n    <QuickError closeError={() => setHighlightError(false)}>\n      {getString(\"global-ui-error-industry-not-in-data-set\")}\n    </QuickError>\n  ) : null;\n\n  return (\n    <>\n      <ComparisonBarChart\n        primaryData={highPresenceData}\n        secondaryData={lowPresenceData}\n        formatValue={formatValue}\n        highlighted={highlighted}\n        onRowHover={setHovered}\n        onHighlightError={() => setHighlightError(true)}\n        nValuesToShow={10}\n        numberOfXAxisTicks={numberOfXAxisTicks}\n        expandCollapseText={{\n          toExpand: getString(\"cities-top-10-comparison-chart-expand\"),\n          toCollapse: getString(\"cities-top-10-comparison-chart-collapse\"),\n        }}\n      />\n      <RapidTooltipRoot ref={tooltipRef} />\n      {highlightErrorPopup}\n    </>\n  );\n};\n\nexport default Industries;\n","import React, { useRef, useState } from \"react\";\nimport { scaleLog, scaleLinear } from \"d3-scale\";\nimport ComparisonBarChart, {\n  RowHoverEvent,\n  BarDatum,\n  Direction,\n} from \"react-comparison-bar-chart\";\nimport { SuccessResponse } from \"../industrySpace/chart/useRCAData\";\nimport {\n  DigitLevel,\n  ClassificationNaicsCluster,\n} from \"../../../types/graphQL/graphQLTypes\";\nimport {\n  getStandardTooltip,\n  RapidTooltipRoot,\n} from \"../../../utilities/rapidTooltip\";\nimport useFluent from \"../../../hooks/useFluent\";\nimport { defaultYear, decimalToFraction } from \"../../../Utils\";\nimport {\n  clusterColorMap,\n  intensityColorRange,\n  educationColorRange,\n  wageColorRange,\n  Mult,\n  FractionMult,\n} from \"../../../styling/styleUtils\";\nimport { ClusterLevel, ColorBy } from \"../../../routing/routes\";\nimport { useGlobalClusterMap } from \"../../../hooks/useGlobalClusterData\";\nimport { tickMarksForMinMax } from \"./getNiceLogValues\";\nimport { useAggregateIndustryMap } from \"../../../hooks/useAggregateIndustriesData\";\nimport { rgba } from \"polished\";\nimport LoadingBlock from \"../../transitionStateComponents/VizLoadingBlock\";\nimport QuickError from \"../../transitionStateComponents/QuickError\";\n\ninterface Props {\n  data: SuccessResponse[\"c3Rca\"] | SuccessResponse[\"c1Rca\"];\n  clusterLevel: ClusterLevel;\n  colorBy: ColorBy;\n  highlighted: string | undefined;\n  hiddenClusters: ClassificationNaicsCluster[\"id\"][];\n}\n\nconst Clusters = (props: Props) => {\n  const { data, clusterLevel, colorBy, hiddenClusters, highlighted } = props;\n  const [highlightError, setHighlightError] = useState<boolean>(false);\n  const tooltipRef = useRef<HTMLDivElement | null>(null);\n  const getString = useFluent();\n  const clusterMap = useGlobalClusterMap();\n  const aggregateIndustryDataMap = useAggregateIndustryMap({\n    level: DigitLevel.Six,\n    year: defaultYear,\n    clusterLevel: parseInt(clusterLevel, 10),\n  });\n\n  if (\n    (colorBy === ColorBy.education && aggregateIndustryDataMap.loading) ||\n    (colorBy === ColorBy.wage && aggregateIndustryDataMap.loading)\n  ) {\n    return <LoadingBlock />;\n  }\n\n  const filteredClusterRCA = data.filter((d) => {\n    const cluster =\n      d.clusterId !== null ? clusterMap.data[d.clusterId] : undefined;\n    const clusterIdTopParent =\n      cluster && cluster.clusterIdTopParent ? cluster.clusterIdTopParent : \"\";\n    if (cluster && !hiddenClusters.includes(clusterIdTopParent.toString())) {\n      return d.rca && (d.rca as number) > 0;\n    } else {\n      return false;\n    }\n  });\n\n  let max =\n    Math.ceil(\n      (Math.max(...filteredClusterRCA.map((d) => d.rca as number)) * 1.1) / 10,\n    ) * 10;\n  let min = Math.min(...filteredClusterRCA.map((d) => d.rca as number));\n  if (max < 10) {\n    max = 10;\n  }\n  if (min >= 1) {\n    min = 0.1;\n  }\n  let scale = scaleLog().domain([min, max]).range([0, 100]).nice();\n\n  min = parseFloat(scale.invert(0).toFixed(5));\n  max = parseFloat(scale.invert(100).toFixed(5));\n\n  if (max.toString().length > min.toString().length - 1) {\n    min = 1 / max;\n  } else if (max.toString().length < min.toString().length - 1) {\n    max = 1 / min;\n  }\n\n  scale = scaleLog().domain([min, max]).range([0, 100]).nice();\n  const numberOfXAxisTicks = tickMarksForMinMax(\n    parseFloat(scale.invert(0).toFixed(5)),\n    parseFloat(scale.invert(100).toFixed(5)),\n  );\n\n  let colorScale: (val: number) => string | undefined;\n  if (\n    colorBy === ColorBy.education &&\n    aggregateIndustryDataMap.data !== undefined\n  ) {\n    colorScale = scaleLinear()\n      .domain([\n        aggregateIndustryDataMap.data.clusterMinMax.minYearsEducation,\n        aggregateIndustryDataMap.data.clusterMinMax.medianYearsEducation,\n        aggregateIndustryDataMap.data.clusterMinMax.maxYearsEducation,\n      ])\n      .range(educationColorRange as any) as any;\n  } else if (\n    colorBy === ColorBy.wage &&\n    aggregateIndustryDataMap.data !== undefined\n  ) {\n    colorScale = scaleLinear()\n      .domain([\n        aggregateIndustryDataMap.data.clusterMinMax.minHourlyWage,\n        aggregateIndustryDataMap.data.clusterMinMax.medianHourlyWage,\n        aggregateIndustryDataMap.data.clusterMinMax.maxHourlyWage,\n      ])\n      .range(wageColorRange as any) as any;\n  } else {\n    colorScale = scaleLog()\n      .domain([min, max])\n      .range(intensityColorRange as any)\n      .nice() as any;\n  }\n\n  const highPresenceScale = scaleLog().domain([1, max]).range([0, 100]).nice();\n\n  const lowPresenceScale = scaleLog().domain([1, min]).range([0, 100]).nice();\n\n  const highPresenceData: BarDatum[] = [];\n  const lowPresenceData: BarDatum[] = [];\n  filteredClusterRCA.forEach((d) => {\n    const cluster =\n      d.clusterId !== null ? clusterMap.data[d.clusterId] : undefined;\n    const title = cluster && cluster.name !== null ? cluster.name : \"\";\n    let color: string;\n    const clusterIndustryDatum =\n      d.clusterId !== null\n        ? aggregateIndustryDataMap.data.clusters[d.clusterId]\n        : undefined;\n    if (\n      colorBy === ColorBy.education &&\n      aggregateIndustryDataMap.data !== undefined\n    ) {\n      if (clusterIndustryDatum) {\n        color = colorScale(clusterIndustryDatum.yearsEducationRank) as string;\n      } else {\n        color = \"gray\";\n      }\n    } else if (\n      colorBy === ColorBy.wage &&\n      aggregateIndustryDataMap.data !== undefined\n    ) {\n      if (clusterIndustryDatum) {\n        color = colorScale(clusterIndustryDatum.hourlyWageRank) as string;\n      } else {\n        color = \"gray\";\n      }\n    } else {\n      const colorDatum = clusterColorMap.find(\n        (s) =>\n          cluster &&\n          cluster.clusterIdTopParent &&\n          s.id === cluster.clusterIdTopParent.toString(),\n      );\n      color = colorDatum ? colorDatum.color : \"lightgray\";\n    }\n    let value: number = 0;\n    if (d.rca && d.rca < 1) {\n      value = lowPresenceScale(d.rca) as number;\n    } else if (d.rca && d.rca >= 1) {\n      value = highPresenceScale(d.rca) as number;\n    }\n    // const value = d.rca ? scale(d.rca as number) as number : 0;\n    const datum: BarDatum = {\n      id: d.clusterId !== null ? d.clusterId.toString() : \"\",\n      title,\n      value,\n      color,\n    };\n    if (d.rca && d.rca >= 1) {\n      highPresenceData.push(datum);\n    } else {\n      lowPresenceData.push(datum);\n    }\n  });\n  const formatValue = (value: number, direction: Direction) => {\n    const scaleToUse =\n      direction === Direction.Over ? highPresenceScale : lowPresenceScale;\n    const scaledValue = parseFloat(scaleToUse.invert(value).toFixed(5));\n    if (scaledValue >= 1) {\n      return (\n        <>\n          {scaledValue}\n          <Mult></Mult>\n        </>\n      );\n    } else {\n      const { top, bottom } = decimalToFraction(scaledValue);\n      return (\n        <>\n          <sup>{top}</sup>&frasl;<sub>{bottom}</sub>\n          <FractionMult></FractionMult>\n        </>\n      );\n    }\n  };\n\n  const setHovered = (e: RowHoverEvent | undefined) => {\n    const node = tooltipRef.current;\n    if (node) {\n      if (e && e.datum) {\n        const { datum, mouseCoords } = e;\n        const cluster = filteredClusterRCA.find(\n          (d) => d.clusterId && d.clusterId.toString() === datum.id,\n        );\n        const rows = [\n          [getString(\"global-ui-year\") + \":\", defaultYear.toString()],\n          [\n            getString(\"global-intensity\") + \":\",\n            cluster && cluster.rca ? cluster.rca.toFixed(3) : \"0.000\",\n          ],\n        ];\n        if (\n          (colorBy === ColorBy.education || colorBy === ColorBy.wage) &&\n          aggregateIndustryDataMap.data\n        ) {\n          const target = aggregateIndustryDataMap.data.clusters[datum.id];\n          const targetValue =\n            colorBy === ColorBy.education\n              ? target.yearsEducation\n              : target.hourlyWage;\n          rows.push([\n            getString(\"global-formatted-color-by\", { type: colorBy }),\n            (colorBy === ColorBy.wage ? \"$\" : \"\") + targetValue.toFixed(2),\n          ]);\n        }\n        node.innerHTML = getStandardTooltip({\n          title: datum.title,\n          color: rgba(datum.color, 0.3),\n          rows,\n          boldColumns: [1, 2],\n        });\n        node.style.top = mouseCoords.y + \"px\";\n        node.style.left = mouseCoords.x + \"px\";\n        node.style.display = \"block\";\n      } else {\n        node.style.display = \"none\";\n      }\n    }\n  };\n\n  const highlightErrorPopup = highlightError ? (\n    <QuickError closeError={() => setHighlightError(false)}>\n      {getString(\"global-ui-error-industry-not-in-data-set\")}\n    </QuickError>\n  ) : null;\n\n  return (\n    <>\n      <ComparisonBarChart\n        primaryData={highPresenceData}\n        secondaryData={lowPresenceData}\n        formatValue={formatValue}\n        highlighted={highlighted}\n        onRowHover={setHovered}\n        onHighlightError={() => setHighlightError(true)}\n        nValuesToShow={10}\n        numberOfXAxisTicks={numberOfXAxisTicks}\n        expandCollapseText={{\n          toExpand: getString(\"cities-top-10-comparison-chart-expand-clusters\"),\n          toCollapse: getString(\n            \"cities-top-10-comparison-chart-collapse-clusters\",\n          ),\n        }}\n      />\n      <RapidTooltipRoot ref={tooltipRef} />\n      {highlightErrorPopup}\n    </>\n  );\n};\n\nexport default Clusters;\n","import { useStaticData } from \"../dataProvider\";\nimport {\n  ClusterLevel,\n  CompositionType,\n  defaultCompositionType,\n} from \"../types/graphQL/graphQLTypes\";\nimport useCurrentCityId from \"./useCurrentCityId\";\nimport { defaultYear } from \"../Utils\";\nimport useQueryParams from \"./useQueryParams\";\n\nexport enum RegionGroup {\n  World = \"world\",\n  SimilarCities = \"similarcities\",\n}\n\ninterface ClusterDensity {\n  clusterId: string;\n  densityCompany: number | null;\n  densityEmploy: number | null;\n}\n\ninterface ClusterRca {\n  clusterId: string;\n  rca: number | null;\n  comparableIndustry: number | null;\n}\n\ninterface ClusterData {\n  clusterId: string;\n  level: number | null;\n  numCompany: number | null;\n  numEmploy: number | null;\n}\n\nexport interface SuccessResponse {\n  clusterDensity: ClusterDensity[];\n  clusterRca: ClusterRca[];\n  clusterData: ClusterData[];\n}\n\nconst useClusterRCAData = (_level: ClusterLevel) => {\n  const cityId = useCurrentCityId();\n  const { data: blsData, loading: blsLoading } = useStaticData();\n\n  const { composition_type } = useQueryParams();\n\n  const defaultCompositionVariable =\n    defaultCompositionType === CompositionType.Companies ? \"company\" : \"employ\";\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  let _variable: \"employ\" | \"company\" = defaultCompositionVariable;\n  if (composition_type === CompositionType.Companies) {\n    _variable = \"company\";\n  } else if (composition_type === CompositionType.Employees) {\n    _variable = \"employ\";\n  }\n\n  if (cityId === null || blsLoading || !blsData) {\n    return { loading: true, error: undefined, data: undefined };\n  }\n\n  const regionData = blsData.regionData[cityId];\n  if (!regionData) {\n    return { loading: false, error: undefined, data: undefined };\n  }\n\n  const yearData = regionData[defaultYear];\n  if (!yearData) {\n    return { loading: false, error: undefined, data: undefined };\n  }\n\n  // Build socCode  majorGroupId lookup\n  const socToMajorGroup: Record<string, string> = {};\n  blsData.occupations.forEach((o) => {\n    socToMajorGroup[o.socCode] = o.majorGroupId;\n  });\n\n  // Build cluster data from occupations grouped by major group\n  const clusterData: ClusterData[] = [];\n  const clusterRca: ClusterRca[] = [];\n  const clusterDensity: ClusterDensity[] = [];\n\n  // Aggregate by major group\n  const majorGroupAgg: Record<string, { employ: number; gdp: number }> = {};\n  yearData.forEach((occ) => {\n    const mgId = socToMajorGroup[occ.socCode] || \"00\";\n    if (!majorGroupAgg[mgId]) {\n      majorGroupAgg[mgId] = { employ: 0, gdp: 0 };\n    }\n    majorGroupAgg[mgId].employ += occ.totEmp;\n    majorGroupAgg[mgId].gdp += occ.gdp;\n  });\n\n  Object.entries(majorGroupAgg).forEach(([mgId, agg]) => {\n    clusterData.push({\n      clusterId: mgId,\n      level: 1,\n      numCompany: agg.gdp,\n      numEmploy: agg.employ,\n    });\n    // RCA placeholder: 1.0 for all (no cross-region comparison available)\n    clusterRca.push({\n      clusterId: mgId,\n      rca: 1.0,\n      comparableIndustry: null,\n    });\n    clusterDensity.push({\n      clusterId: mgId,\n      densityCompany: null,\n      densityEmploy: null,\n    });\n  });\n\n  const data: SuccessResponse = { clusterDensity, clusterRca, clusterData };\n  return { loading: false, error: undefined, data };\n};\n\nexport default useClusterRCAData;\n","import React, { useState } from \"react\";\nimport styled, { keyframes } from \"styled-components\";\nimport useCurrentBenchmark from \"../../../hooks/useCurrentBenchmark\";\nimport useFluent from \"../../../hooks/useFluent\";\nimport { benchmarkColor } from \"../../../styling/styleUtils\";\nimport BenchmarkSVG from \"../../../assets/icons/benchmark_comparator.svg\";\nimport AddComparisonModal, {\n  ComparisonType,\n} from \"../../navigation/secondaryHeader/comparisons/AddComparisonModal\";\nimport { useGlobalLocationHierarchicalTreeData } from \"../../../hooks/useGlobalLocationData\";\n\nconst rotate = keyframes`\n  0% {\n    transform: rotate(0deg);\n  }\n\n  10% {\n    transform: rotate(-30deg);\n  }\n\n  15% {\n    transform: rotate(-40deg);\n  }\n\n  20% {\n    transform: rotate(-45deg);\n  }\n\n  60% {\n    transform: rotate(360deg);\n  }\n\n  100% {\n    transform: rotate(360deg);\n  }\n`;\n\nconst Root = styled.button`\n  pointer-events: all;\n  text-align: center;\n  background-color: transparent;\n  font-size: 0.65rem;\n  margin: 0.25rem 0 1rem;\n  color: ${benchmarkColor};\n  max-width: 100%;\n\n  &:hover {\n    img {\n      animation: ${rotate} 2s ease-in-out infinite;\n    }\n  }\n`;\n\nconst Title = styled.strong`\n  text-transform: uppercase;\n  font-size: 0.75rem;\n  margin-right: 0.25rem;\n\n  @media (max-width: 950px) {\n    display: block;\n  }\n`;\n\nconst Icon = styled.img`\n  width: 1rem;\n  height: 1rem;\n  position: relative;\n  top: 0.25rem;\n  margin-right: 0.25rem;\n`;\n\ninterface Props {\n  comparisonType?: ComparisonType;\n}\n\nconst BenchmarkLegend = (props: Props) => {\n  const comparisonType = props.comparisonType\n    ? props.comparisonType\n    : ComparisonType.Relative;\n  const getString = useFluent();\n  const { benchmark, benchmarkName } = useCurrentBenchmark();\n  const [modalOpen, setModalOpen] = useState<boolean>(benchmark === undefined);\n  const { data } = useGlobalLocationHierarchicalTreeData();\n  const openBenchmarkModal = () => setModalOpen(true);\n\n  const closeModal = (newBenchmark: string | undefined) => {\n    if (newBenchmark !== undefined) {\n      setModalOpen(false);\n    }\n  };\n  const benchmarkModal = modalOpen ? (\n    <AddComparisonModal\n      closeModal={closeModal}\n      data={data}\n      comparisonType={comparisonType}\n    />\n  ) : null;\n\n  const text =\n    comparisonType === ComparisonType.Relative\n      ? getString(\"global-ui-change-benchmark\")\n      : getString(\"global-ui-change-comparator\");\n\n  return (\n    <>\n      <Root onClick={openBenchmarkModal}>\n        <Title>\n          <Icon src={BenchmarkSVG} />\n          {text}\n        </Title>\n        ({benchmarkName})\n      </Root>\n      {benchmarkModal}\n    </>\n  );\n};\n\nexport default BenchmarkLegend;\n","import React, { useEffect, useState, useRef } from \"react\";\nimport {\n  DigitLevel,\n  ClassificationNaicsIndustry,\n  ClassificationNaicsCluster,\n} from \"../../../types/graphQL/graphQLTypes\";\nimport { useGlobalIndustryMap } from \"../../../hooks/useGlobalIndustriesData\";\nimport { usePrevious } from \"react-use\";\nimport { useWindowWidth } from \"../../../contextProviders/appContext\";\nimport { breakPoints } from \"../../../styling/GlobalGrid\";\nimport { baseColor } from \"../../../styling/styleUtils\";\nimport PreChartRow from \"../../../components/general/PreChartRow\";\nimport ErrorBoundary from \"../ErrorBoundary\";\nimport styled from \"styled-components/macro\";\nimport SimpleError from \"../../transitionStateComponents/SimpleError\";\nimport LoadingBlock, {\n  LoadingOverlay,\n} from \"../../transitionStateComponents/VizLoadingBlock\";\nimport useRCAData, { SuccessResponse } from \"../industrySpace/chart/useRCAData\";\nimport Industries from \"./Industries\";\nimport Clusters from \"./Clusters\";\nimport { CityRoutes, ColorBy } from \"../../../routing/routes\";\nimport useFluent from \"../../../hooks/useFluent\";\nimport { ClusterLevel } from \"../../../routing/routes\";\nimport { Mode } from \"../../general/searchIndustryInGraphDropdown\";\nimport PresenceToggle, { Highlighted } from \"../legend/PresenceToggle\";\nimport BenchmarkLegend from \"../legend/BenchmarkLegend\";\nimport { ComparisonType } from \"../../navigation/secondaryHeader/comparisons/AddComparisonModal\";\nimport { useHistory } from \"react-router-dom\";\nimport { createRoute } from \"../../../routing/Utils\";\nimport useCurrentCityId from \"../../../hooks/useCurrentCityId\";\n\nconst Root = styled.div`\n  width: 100%;\n  height: 100%;\n  grid-column: 1;\n  grid-row: 2;\n  position: relative;\n  display: grid;\n  grid-template-rows: 1fr 3rem auto;\n  grid-template-columns: 3.5rem 1fr;\n\n  @media ${breakPoints.small} {\n    grid-row: 3;\n    grid-column: 1;\n  }\n`;\n\nexport const LeftAxisRoot = styled.div`\n  grid-row: 1;\n  grid-column: 1;\n  white-space: nowrap;\n  display: flex;\n  transform: rotate(-90deg);\n  align-items: center;\n  justify-content: center;\n  pointer-events: none;\n`;\n\nexport const BottomAxisRoot = styled.div`\n  grid-row: 2;\n  grid-column: 2;\n  white-space: nowrap;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  pointer-events: none;\n  padding-left: 15%;\n  padding-left: clamp(75px, 300px, 15%);\n\n  @media (max-width: 1225px) {\n    padding-left: 0;\n    justify-content: flex-end;\n  }\n  @media (max-width: 990px) {\n    grid-template-columns: 1 / -1;\n  }\n\n  @media (max-width: 920px) {\n    padding-left: 15%;\n    padding-left: clamp(75px, 300px, 15%);\n    justify-content: center;\n  }\n`;\n\nexport const BenchmarkRoot = styled(BottomAxisRoot)`\n  grid-row: 3;\n  justify-content: center;\n  white-space: normal;\n`;\n\nexport const AxisLabelBase = styled.div`\n  font-weight: 600;\n  font-size: 0.75rem;\n  color: ${baseColor};\n  text-transform: uppercase;\n\n  @media (max-width: 1000px) {\n    font-size: 0.6rem;\n  }\n\n  @media (max-height: 600px) {\n    font-size: 0.65rem;\n  }\n`;\n\nexport const AxisLabelLeft = styled(AxisLabelBase)`\n  margin-right: 1rem;\n  font-weight: 400;\n\n  @media (max-width: 990px) {\n    margin-right: 0.75rem;\n  }\n\n  @media (max-width: 920px) {\n    display: none;\n  }\n`;\n\nexport const AxisLabelRight = styled(AxisLabelBase)`\n  margin-left: 1rem;\n  font-weight: 400;\n\n  @media (max-width: 990px) {\n    margin-left: 0.75rem;\n  }\n\n  @media (max-width: 920px) {\n    display: none;\n  }\n`;\n\nexport const AxisLabelHigh = styled(AxisLabelBase)`\n  margin-left: 3rem;\n\n  @media (max-height: 800px) {\n    margin-left: 1rem;\n  }\n`;\n\nconst VizRoot = styled.div`\n  width: 100%;\n  height: 100%;\n  position: relative;\n  grid-column: 2;\n  grid-row: 1;\n`;\n\nconst VizContainer = styled.div`\n  width: 100%;\n  height: 100%;\n  position: absolute;\n\n  .react-comparison-bar-chart-title {\n    h2 {\n      text-transform: none;\n    }\n  }\n`;\n\ninterface Props {\n  isClusterView: boolean;\n  highlighted: string | undefined;\n  setHighlighted: (value: string | undefined) => void;\n  hiddenSectors: ClassificationNaicsIndustry[\"id\"][];\n  hiddenClusters: ClassificationNaicsCluster[\"id\"][];\n  clusterLevel: ClusterLevel;\n  digitLevel: DigitLevel;\n  colorBy: ColorBy;\n}\n\nconst RCABarChart = (props: Props) => {\n  const {\n    hiddenSectors,\n    setHighlighted,\n    highlighted,\n    isClusterView,\n    clusterLevel,\n    digitLevel,\n    colorBy,\n    hiddenClusters,\n  } = props;\n  const getString = useFluent();\n  const industryMap = useGlobalIndustryMap();\n  const windowDimensions = useWindowWidth();\n  const { loading, error, data } = useRCAData(digitLevel);\n  const history = useHistory();\n  const cityId = useCurrentCityId();\n\n  const rootRef = useRef<HTMLDivElement | null>(null);\n  const [dimensions, setDimensions] = useState<\n    { width: number; height: number } | undefined\n  >(undefined);\n  useEffect(() => {\n    const node = rootRef.current;\n    if (node) {\n      const { width, height } = node.getBoundingClientRect();\n      setDimensions({ width, height });\n    }\n  }, [rootRef, windowDimensions]);\n\n  const prevData = usePrevious(data);\n  let dataToUse: SuccessResponse | undefined;\n  if (data) {\n    dataToUse = data;\n  } else if (prevData) {\n    dataToUse = prevData;\n  } else {\n    dataToUse = undefined;\n  }\n\n  let output: React.ReactElement<any> | null;\n  if (\n    industryMap.loading ||\n    !dimensions ||\n    (loading && prevData === undefined)\n  ) {\n    output = <LoadingBlock />;\n  } else if (error !== undefined) {\n    output = (\n      <LoadingOverlay>\n        <SimpleError />\n      </LoadingOverlay>\n    );\n    console.error(error);\n  } else if (industryMap.error !== undefined) {\n    output = (\n      <LoadingOverlay>\n        <SimpleError />\n      </LoadingOverlay>\n    );\n    console.error(error);\n  } else if (dataToUse !== undefined) {\n    const clusterData =\n      clusterLevel === ClusterLevel.C1 ? dataToUse.c1Rca : dataToUse.c3Rca;\n    const industryData = dataToUse.naicsRca;\n    const loadingOverlay = loading ? <LoadingBlock /> : null;\n    const viz = isClusterView ? (\n      <Clusters\n        key={\n          \"ClustersRCAChart\" +\n          dimensions.height.toString() +\n          dimensions.width.toString()\n        }\n        data={clusterData}\n        clusterLevel={clusterLevel}\n        colorBy={colorBy}\n        hiddenClusters={hiddenClusters}\n        highlighted={highlighted}\n      />\n    ) : (\n      <Industries\n        key={\n          \"IndustriesRCAChart\" +\n          dimensions.height.toString() +\n          dimensions.width.toString()\n        }\n        data={industryData}\n        highlighted={highlighted}\n        hiddenSectors={hiddenSectors}\n        colorBy={colorBy}\n        digitLevel={digitLevel}\n      />\n    );\n    output = (\n      <VizContainer style={{ height: dimensions.height }}>\n        <ErrorBoundary>{viz}</ErrorBoundary>\n        {loadingOverlay}\n      </VizContainer>\n    );\n  } else {\n    output = null;\n  }\n\n  const onButtonClick = (value: Highlighted) => {\n    if (value === Highlighted.absolute && cityId !== null) {\n      const route = createRoute.city(\n        CityRoutes.CityGoodAtAbsolutePresence,\n        cityId,\n      );\n      history.push(route + history.location.search);\n    }\n  };\n\n  return (\n    <>\n      <PreChartRow\n        searchInGraphOptions={{\n          hiddenParents: isClusterView ? hiddenClusters : hiddenSectors,\n          digitLevel,\n          clusterLevel,\n          setHighlighted,\n          mode: isClusterView ? Mode.cluster : Mode.naics,\n        }}\n        settingsOptions={{\n          compositionType: true,\n          clusterLevel: isClusterView ? true : undefined,\n          digitLevel: isClusterView ? undefined : true,\n          colorBy: true,\n          aggregationMode: true,\n        }}\n      />\n      <Root>\n        <LeftAxisRoot>\n          <AxisLabelBase> {getString(\"global-intensity-lower\")}</AxisLabelBase>\n          <AxisLabelHigh>\n            {getString(\"global-intensity-higher\")} \n          </AxisLabelHigh>\n        </LeftAxisRoot>\n        <BottomAxisRoot>\n          <AxisLabelLeft\n            dangerouslySetInnerHTML={{\n              __html: getString(\"relative-presence-axis-labels-bottom-left\"),\n            }}\n          />\n          <AxisLabelBase>\n            <PresenceToggle\n              togglePresence={true}\n              highlight={Highlighted.relative}\n              showArrows={true}\n              onButtonClick={onButtonClick}\n            />\n          </AxisLabelBase>\n          <AxisLabelRight\n            dangerouslySetInnerHTML={{\n              __html: getString(\"relative-presence-axis-labels-bottom-right\"),\n            }}\n          />\n        </BottomAxisRoot>\n        <BenchmarkRoot>\n          <BenchmarkLegend comparisonType={ComparisonType.Relative} />\n        </BenchmarkRoot>\n        <VizRoot ref={rootRef}>{output}</VizRoot>\n      </Root>\n    </>\n  );\n};\n\nexport default RCABarChart;\n","import React, { useRef, useEffect, useCallback } from \"react\";\nimport {\n  getStandardTooltip,\n  RapidTooltipRoot,\n} from \"../../../utilities/rapidTooltip\";\nimport DataViz, { VizType, ClusterBarChartDatum } from \"react-fast-charts\";\nimport { CompositionType } from \"../../../types/graphQL/graphQLTypes\";\nimport useFluent from \"../../../hooks/useFluent\";\nimport { max } from \"d3\";\nimport { usePrevious } from \"react-use\";\nimport { rgba } from \"polished\";\n\ninterface Props {\n  data: ClusterBarChartDatum[];\n  compositionType: CompositionType;\n  height: number;\n  loading: boolean;\n  primaryName: string;\n  secondaryName: string;\n}\n\n// A/B strings used to allow for sorting in order\nexport enum Group {\n  Primary = \"A\",\n  Secondary = \"B\",\n}\n\nconst Chart = (props: Props) => {\n  const { data, compositionType, height, loading, primaryName, secondaryName } =\n    props;\n  const getString = useFluent();\n  const tooltipRef = useRef<HTMLDivElement | null>(null);\n\n  const setHovered = (\n    datum: ClusterBarChartDatum,\n    coords: { x: number; y: number },\n  ) => {\n    const node = tooltipRef.current;\n    if (node) {\n      const filteredData = data.filter((d) => d.x === datum.x);\n      const primaryDatum = filteredData.find(\n        (d) => d.groupName === Group.Primary,\n      );\n      const secondaryDatum = filteredData.find(\n        (d) => d.groupName === Group.Secondary,\n      );\n      const primaryValue = primaryDatum ? primaryDatum.y : 0;\n      const secondaryValue = secondaryDatum ? secondaryDatum.y : 0;\n      const primaryValueText =\n        primaryValue === 0 || primaryValue >= 0.01\n          ? primaryValue.toFixed(2) + \"%\"\n          : \"<0.01%\";\n      const secondaryValueText =\n        secondaryValue === 0 || secondaryValue >= 0.01\n          ? secondaryValue.toFixed(2) + \"%\"\n          : \"<0.01%\";\n      const primaryDiff = primaryValue - secondaryValue;\n      const secondaryDiff = secondaryValue - primaryValue;\n      let primaryDiffValue: string;\n      if (primaryDiff < 0) {\n        primaryDiffValue = \"\";\n      } else if (primaryDiff < 0.01) {\n        primaryDiffValue = \"+<0.01%\";\n      } else {\n        primaryDiffValue = \"+\" + primaryDiff.toFixed(2) + \"%\";\n      }\n      let secondaryDiffValue: string;\n      if (secondaryDiff < 0) {\n        secondaryDiffValue = \"\";\n      } else if (secondaryDiff < 0.01) {\n        secondaryDiffValue = \"+<0.01%\";\n      } else {\n        secondaryDiffValue = \"+\" + secondaryDiff.toFixed(2) + \"%\";\n      }\n      node.innerHTML = getStandardTooltip({\n        title: datum.x,\n        color: rgba(datum.fill ? datum.fill : \"gray\", 0.3),\n        rows: [\n          [\"\", primaryName, secondaryName],\n          [\n            getString(\"tooltip-text-share-of\", { value: compositionType }),\n            primaryValueText,\n            secondaryValueText,\n          ],\n          [\"Difference\", primaryDiffValue, secondaryDiffValue],\n        ],\n        boldColumns: [1, 2],\n        underlineRows: [0],\n        additionalHTML: datum.onClick\n          ? `<div style=\"padding: 0.35rem; font-style: italic; font-size: 0.7rem; text-align: center;\">\n              ${getString(\"global-click-to-expand-industry\")}\n            </div>`\n          : undefined,\n      });\n      node.style.top = coords.y + \"px\";\n      node.style.left = coords.x + \"px\";\n      node.style.display = \"block\";\n    }\n  };\n\n  const removeHovered = useCallback(() => {\n    const node = tooltipRef.current;\n    if (node) {\n      node.style.display = \"none\";\n    }\n  }, [tooltipRef]);\n\n  useEffect(() => {\n    removeHovered();\n  }, [data, removeHovered]);\n\n  const allYValues: number[] = [];\n\n  const dataWithHover = data.map((d) => {\n    allYValues.push(d.y);\n    return {\n      ...d,\n      onMouseMove: setHovered,\n      onMouseLeave: removeHovered,\n    };\n  });\n\n  const maxY = max(allYValues);\n  const prevMaxY = usePrevious(maxY);\n\n  return (\n    <>\n      <DataViz\n        id={\"example-cluster-bar-chart\"}\n        vizType={VizType.ClusterBarChart}\n        data={dataWithHover}\n        axisLabels={{\n          left: getString(\"axis-text-percent-total-value\", {\n            value: compositionType,\n          }),\n        }}\n        height={height}\n        formatAxis={{ y: (v) => parseFloat(v.toFixed(2)) + \"%\" }}\n        animateBars={loading ? undefined : 300}\n        axisMinMax={{ minY: 0, maxY }}\n        animateAxis={{\n          animationDuration: 500,\n          startMaxY: prevMaxY ? prevMaxY : 0.1,\n          startMinY: 0,\n        }}\n        chartTitle={`${primaryName} - ${secondaryName} Industry Comparison`}\n      />\n      <RapidTooltipRoot ref={tooltipRef} />\n    </>\n  );\n};\n\nexport default React.memo(Chart);\n","import React from \"react\";\nimport StandardSideTextBlock from \"../../../../components/general/StandardSideTextBlock\";\nimport { ContentParagraph, ContentTitle } from \"../../../../styling/styleUtils\";\nimport useFluent, { possessive } from \"../../../../hooks/useFluent\";\nimport useCurrentCity from \"../../../../hooks/useCurrentCity\";\nimport StandardSideTextLoading from \"../../../../components/transitionStateComponents/StandardSideTextLoading\";\nimport useCurrentBenchmark from \"../../../../hooks/useCurrentBenchmark\";\nimport Helmet from \"react-helmet\";\nimport { isValidPeerGroup } from \"../../../../types/graphQL/graphQLTypes\";\nimport { RegionGroup } from \"../../../../hooks/useClusterRCAData\";\n\ninterface Props {\n  isClusterView: boolean;\n  prefix:\n    | \"relative-presence\"\n    | \"absolute-presence\"\n    | \"absolute-nested-bar-chart\";\n}\n\nconst SideText = (props: Props) => {\n  const { isClusterView, prefix } = props;\n  const getString = useFluent();\n  const { loading, city } = useCurrentCity();\n  const { benchmark, benchmarkNameShort } = useCurrentBenchmark();\n  const benchmarkType =\n    isValidPeerGroup(benchmark) || benchmark === RegionGroup.World\n      ? benchmark\n      : benchmarkNameShort;\n  if (loading) {\n    return <StandardSideTextLoading />;\n  } else if (city) {\n    const cityName = city.name ? city.name : \"\";\n    const cityNamePossessive = possessive([cityName]);\n    const its = getString(\"good-at-its\", { \"benchmark-type\": benchmarkType });\n    const the = getString(\"good-at-the\", { \"benchmark-type\": benchmarkType });\n    const peerGroupName = getString(\"good-at-benchmark\", {\n      \"benchmark-type\": benchmarkType,\n    });\n    const peerGroupPossessive = possessive([peerGroupName]);\n    const industrialKnowledgeCluster = isClusterView\n      ? \"knowledge cluster\"\n      : \"industrial\";\n    const industrysClusters = isClusterView ? \"clusters\" : \"industries\";\n    const industryCluster = isClusterView ? \"cluster\" : \"industry\";\n    const title = getString(\"good-at-title\", {\n      name: cityNamePossessive,\n    });\n    const para1 = getString(prefix + \"-para-1\", {\n      city: cityName,\n      \"city-posessive\": cityName,\n      \"peer-group\": peerGroupName,\n      \"peer-group-possessive\": peerGroupPossessive,\n      its: its,\n      the: the,\n      \"industrial-knowledge-cluster\": industrialKnowledgeCluster,\n      \"industries-clusters\": industrysClusters,\n      \"industry-cluster\": industryCluster,\n    });\n    const para2 = getString(prefix + \"-para-2\", {\n      city: cityName,\n      \"city-posessive\": cityName,\n      \"peer-group\": peerGroupName,\n      \"peer-group-possessive\": peerGroupPossessive,\n      its: its,\n      the: the,\n      \"industrial-knowledge-cluster\": industrialKnowledgeCluster,\n      \"industries-clusters\": industrysClusters,\n      \"industry-cluster\": industryCluster,\n    });\n    const para3 = getString(prefix + \"-para-3\", {\n      city: cityName,\n      \"city-posessive\": cityName,\n      \"peer-group\": peerGroupName,\n      \"peer-group-possessive\": peerGroupPossessive,\n      its: its,\n      the: the,\n      \"industrial-knowledge-cluster\": industrialKnowledgeCluster,\n      \"industries-clusters\": industrysClusters,\n      \"industry-cluster\": industryCluster,\n    });\n    const para4 =\n      prefix !== \"absolute-nested-bar-chart\"\n        ? getString(prefix + \"-para-4\", {\n            city: cityName,\n            \"city-posessive\": cityName,\n            \"peer-group\": peerGroupName,\n            \"peer-group-possessive\": peerGroupPossessive,\n            its: its,\n            the: the,\n            \"industrial-knowledge-cluster\": industrialKnowledgeCluster,\n            \"industries-clusters\": industrysClusters,\n            \"industry-cluster\": industryCluster,\n          })\n        : \"\";\n\n    return (\n      <StandardSideTextBlock>\n        <Helmet>\n          <title>\n            {title + \" | \" + getString(\"meta-data-title-default-suffix\")}\n          </title>\n          <meta\n            property=\"og:title\"\n            content={\n              title + \" | \" + getString(\"meta-data-title-default-suffix\")\n            }\n          />\n        </Helmet>\n        <ContentTitle>{title}</ContentTitle>\n        <ContentParagraph>{para1}</ContentParagraph>\n        <ContentParagraph>{para2}</ContentParagraph>\n        <ContentParagraph>{para3}</ContentParagraph>\n        <ContentParagraph>{para4}</ContentParagraph>\n      </StandardSideTextBlock>\n    );\n  } else {\n    return null;\n  }\n};\n\nexport default SideText;\n","import React from \"react\";\nimport { Route } from \"react-router-dom\";\n\n// Simplified route without Google Analytics tracking\nconst TrackedRoute = (props: any) => {\n  return <Route {...props} />;\n};\n\nexport default TrackedRoute;\n","import React, { useRef, useState } from \"react\";\nimport ComparisonBarChart, {\n  BarDatum,\n  RowHoverEvent,\n  Layout,\n} from \"react-comparison-bar-chart\";\nimport { rgba } from \"polished\";\nimport useGlobalLocationData from \"../../../hooks/useGlobalLocationData\";\nimport useFluent from \"../../../hooks/useFluent\";\nimport {\n  getStandardTooltip,\n  RapidTooltipRoot,\n} from \"../../../utilities/rapidTooltip\";\nimport {\n  CityIndustryYear,\n  CompositionType,\n  isValidPeerGroup,\n  PeerGroup,\n} from \"../../../types/graphQL/graphQLTypes\";\nimport QuickError from \"../../transitionStateComponents/QuickError\";\nimport { RegionGroup } from \"./cityIndustryComparisonQuery\";\n\nexport interface FilteredDatum {\n  id: CityIndustryYear[\"naicsId\"];\n  title: string;\n  value: number;\n  color: string;\n  topParent: CityIndustryYear[\"naicsId\"];\n}\n\nconst formatAxisValue = (value: number) => {\n  return parseFloat(value.toFixed(1)) + \"%\";\n};\n\ninterface Props {\n  filteredPrimaryData: FilteredDatum[];\n  filteredSecondaryData: FilteredDatum[];\n  primaryTotal: number;\n  secondaryTotal: number;\n  primaryCityId: number;\n  secondaryCityId: number | RegionGroup | PeerGroup;\n  highlighted: string | undefined;\n  compositionType: CompositionType;\n  isClusterView: boolean;\n}\n\nconst Chart = (props: Props) => {\n  const {\n    filteredPrimaryData,\n    filteredSecondaryData,\n    primaryTotal,\n    secondaryTotal,\n    primaryCityId,\n    secondaryCityId,\n    highlighted,\n    compositionType,\n    isClusterView,\n  } = props;\n\n  const tooltipRef = useRef<HTMLDivElement | null>(null);\n\n  const { data: globalData } = useGlobalLocationData();\n  const getString = useFluent();\n\n  const [highlightError, setHighlightError] = useState<boolean>(false);\n\n  const primaryData: BarDatum[] = [];\n  const secondaryData: BarDatum[] = [];\n  filteredPrimaryData.forEach((d) => {\n    const secondaryDatum = filteredSecondaryData.find((d2) => d2.id === d.id);\n    const primaryShare = d.value / primaryTotal;\n    const secondaryShare = secondaryDatum\n      ? secondaryDatum.value / secondaryTotal\n      : 0;\n    const difference = primaryShare - secondaryShare;\n    if (difference > 0) {\n      primaryData.push({ ...d, value: difference * 100 });\n    }\n  });\n  filteredSecondaryData.forEach((d) => {\n    const primaryDatum = filteredPrimaryData.find((d2) => d2.id === d.id);\n    const secondaryShare = d.value / secondaryTotal;\n    const primaryShare = primaryDatum ? primaryDatum.value / primaryTotal : 0;\n    const difference = secondaryShare - primaryShare;\n    if (difference > 0) {\n      secondaryData.push({ ...d, value: difference * 100 });\n    }\n  });\n\n  const primaryCityDatum = globalData\n    ? globalData.cities.find((c) => parseInt(c.cityId, 10) === primaryCityId)\n    : undefined;\n  const primaryCityName =\n    primaryCityDatum && primaryCityDatum.name ? primaryCityDatum.name : \"\";\n\n  let secondaryCityName: string;\n  if (secondaryCityId === RegionGroup.World) {\n    secondaryCityName = getString(\"global-text-world\");\n  } else if (isValidPeerGroup(secondaryCityId)) {\n    secondaryCityName = getString(\"global-formatted-peer-groups\", {\n      type: secondaryCityId,\n    });\n  } else {\n    const secondaryCityDatum = globalData\n      ? globalData.cities.find(\n          (c) => parseInt(c.cityId, 10) === secondaryCityId,\n        )\n      : undefined;\n    secondaryCityName =\n      secondaryCityDatum && secondaryCityDatum.name\n        ? secondaryCityDatum.name\n        : \"\";\n  }\n\n  const setHovered = (e: RowHoverEvent | undefined) => {\n    const node = tooltipRef.current;\n    if (node) {\n      if (e && e.datum) {\n        const { datum, mouseCoords } = e;\n        const primaryDatum = filteredPrimaryData.find((d) => d.id === datum.id);\n        const secondaryDatum = filteredSecondaryData.find(\n          (d) => d.id === datum.id,\n        );\n        const primaryValue = primaryDatum\n          ? (primaryDatum.value / primaryTotal) * 100\n          : 0;\n        const secondaryValue = secondaryDatum\n          ? (secondaryDatum.value / secondaryTotal) * 100\n          : 0;\n        const primaryValueText =\n          primaryValue === 0 || primaryValue >= 0.01\n            ? primaryValue.toFixed(2) + \"%\"\n            : \"<0.01%\";\n        const secondaryValueText =\n          secondaryValue === 0 || secondaryValue >= 0.01\n            ? secondaryValue.toFixed(2) + \"%\"\n            : \"<0.01%\";\n        const primaryDiff = primaryValue - secondaryValue;\n        const secondaryDiff = secondaryValue - primaryValue;\n        let primaryDiffValue: string;\n        if (primaryDiff < 0) {\n          primaryDiffValue = \"\";\n        } else if (primaryDiff < 0.01) {\n          primaryDiffValue = \"+<0.01%\";\n        } else {\n          primaryDiffValue = \"+\" + primaryDiff.toFixed(2) + \"%\";\n        }\n        let secondaryDiffValue: string;\n        if (secondaryDiff < 0) {\n          secondaryDiffValue = \"\";\n        } else if (secondaryDiff < 0.01) {\n          secondaryDiffValue = \"+<0.01%\";\n        } else {\n          secondaryDiffValue = \"+\" + secondaryDiff.toFixed(2) + \"%\";\n        }\n\n        node.innerHTML = getStandardTooltip({\n          title: datum.title,\n          color: rgba(datum.color, 0.3),\n          rows: [\n            [\"\", secondaryCityName, primaryCityName],\n            [\n              getString(\"tooltip-text-share-of\", { value: compositionType }),\n              secondaryValueText,\n              primaryValueText,\n            ],\n            [\"Difference\", secondaryDiffValue, primaryDiffValue],\n          ],\n          boldColumns: [1, 2],\n          underlineRows: [0],\n        });\n        node.style.top = mouseCoords.y + \"px\";\n        node.style.left = mouseCoords.x + \"px\";\n        node.style.display = \"block\";\n      } else {\n        node.style.display = \"none\";\n      }\n    }\n  };\n\n  const highlightErrorPopup = highlightError ? (\n    <QuickError closeError={() => setHighlightError(false)}>\n      {getString(\"global-ui-error-industry-not-in-data-set\")}\n    </QuickError>\n  ) : null;\n\n  const expandCollapseText = {\n    toExpand: isClusterView\n      ? getString(\"cities-top-10-comparison-chart-expand-clusters\")\n      : getString(\"cities-top-10-comparison-chart-expand\"),\n    toCollapse: isClusterView\n      ? getString(\"cities-top-10-comparison-chart-collapse-clusters\")\n      : getString(\"cities-top-10-comparison-chart-collapse\"),\n  };\n  return (\n    <>\n      <ComparisonBarChart\n        primaryData={primaryData}\n        secondaryData={secondaryData}\n        nValuesToShow={10}\n        formatValue={formatAxisValue}\n        expandCollapseText={expandCollapseText}\n        onRowHover={setHovered}\n        highlighted={highlighted}\n        onHighlightError={() => setHighlightError(true)}\n        layout={Layout.Left}\n      />\n      <RapidTooltipRoot ref={tooltipRef} />\n      {highlightErrorPopup}\n    </>\n  );\n};\n\nexport default React.memo(Chart);\n","import React, { useEffect, useState, useRef } from \"react\";\nimport {\n  DigitLevel,\n  ClassificationNaicsIndustry,\n  CompositionType,\n  PeerGroup,\n  ClassificationNaicsCluster,\n} from \"../../../types/graphQL/graphQLTypes\";\nimport { useGlobalIndustryMap } from \"../../../hooks/useGlobalIndustriesData\";\nimport { usePrevious } from \"react-use\";\nimport { useWindowWidth } from \"../../../contextProviders/appContext\";\nimport { breakPoints } from \"../../../styling/GlobalGrid\";\nimport PreChartRow, {\n  VizNavItem,\n} from \"../../../components/general/PreChartRow\";\nimport ErrorBoundary from \"../ErrorBoundary\";\nimport styled from \"styled-components/macro\";\nimport {\n  clusterColorMap,\n  educationColorRange,\n  sectorColorMap,\n  wageColorRange,\n} from \"../../../styling/styleUtils\";\nimport SimpleError from \"../../transitionStateComponents/SimpleError\";\nimport LoadingBlock, {\n  LoadingOverlay,\n} from \"../../transitionStateComponents/VizLoadingBlock\";\nimport Chart, { FilteredDatum } from \"./Chart\";\nimport {\n  useComparisonQuery,\n  SuccessResponse,\n  RegionGroup,\n} from \"./cityIndustryComparisonQuery\";\nimport { Mode } from \"../../general/searchIndustryInGraphDropdown\";\nimport {\n  BottomAxisRoot,\n  BenchmarkRoot,\n  AxisLabelLeft,\n  AxisLabelRight,\n  AxisLabelBase,\n  LeftAxisRoot,\n  AxisLabelHigh,\n} from \"../verticalBarChart/RCABarChart\";\nimport PresenceToggle, { Highlighted } from \"../legend/PresenceToggle\";\nimport { ComparisonType } from \"../../navigation/secondaryHeader/comparisons/AddComparisonModal\";\nimport BenchmarkLegend from \"../legend/BenchmarkLegend\";\nimport {\n  AggregationMode,\n  CityRoutes,\n  ClusterLevel,\n  ColorBy,\n} from \"../../../routing/routes\";\nimport { createRoute } from \"../../../routing/Utils\";\nimport { useHistory } from \"react-router-dom\";\nimport useFluent, { possessive } from \"../../../hooks/useFluent\";\nimport { useGlobalClusterMap } from \"../../../hooks/useGlobalClusterData\";\nimport { scaleLinear } from \"d3-scale\";\nimport { useAggregateIndustryMap } from \"../../../hooks/useAggregateIndustriesData\";\nimport { defaultYear } from \"../../../Utils\";\nimport useCurrentCity from \"../../../hooks/useCurrentCity\";\n\nconst Root = styled.div`\n  width: 100%;\n  height: 100%;\n  grid-column: 1;\n  grid-row: 2;\n  position: relative;\n  display: grid;\n  grid-template-rows: 1fr 3rem auto;\n  grid-template-columns: 3.5rem 1fr;\n\n  @media ${breakPoints.small} {\n    grid-row: 3;\n    grid-column: 1;\n  }\n\n  @media ${breakPoints.small} {\n    grid-row: 3;\n    grid-column: 1;\n  }\n`;\n\nconst VizRoot = styled.div`\n  width: 100%;\n  height: 100%;\n  position: relative;\n  grid-column: 2;\n  grid-row: 1;\n`;\n\nconst VizContainer = styled.div`\n  width: 100%;\n  height: 100%;\n  position: absolute;\n\n  .react-comparison-bar-chart-title {\n    h2 {\n      text-transform: none;\n      font-weight: 600;\n    }\n  }\n`;\n\ninterface Props {\n  primaryCity: number;\n  comparison: number | RegionGroup | PeerGroup;\n  year: number;\n  highlighted: string | undefined;\n  setHighlighted: (value: string | undefined) => void;\n  digitLevel: DigitLevel;\n  compositionType: CompositionType;\n  hiddenSectors: ClassificationNaicsIndustry[\"id\"][];\n  vizNavigation: VizNavItem[];\n  clusterLevel: ClusterLevel;\n  isClusterView: boolean;\n  hiddenClusters: ClassificationNaicsCluster[\"id\"][];\n  colorBy: ColorBy;\n}\n\nconst TopIndustryComparisonBarChart = (props: Props) => {\n  const {\n    primaryCity,\n    comparison,\n    year,\n    digitLevel,\n    compositionType,\n    hiddenSectors,\n    highlighted,\n    setHighlighted,\n    vizNavigation,\n    clusterLevel,\n    isClusterView,\n    hiddenClusters,\n    colorBy,\n  } = props;\n\n  const currentCity = useCurrentCity();\n  const industryMap = useGlobalIndustryMap();\n  const clusterMap = useGlobalClusterMap();\n  const aggregateIndustryDataMap = useAggregateIndustryMap({\n    level: digitLevel,\n    year: defaultYear,\n    clusterLevel: parseInt(clusterLevel, 10),\n  });\n  const aggregateData = isClusterView\n    ? aggregateIndustryDataMap.data.clusters\n    : aggregateIndustryDataMap.data.industries;\n  const globalAggregateData = isClusterView\n    ? aggregateIndustryDataMap.data.clusterMinMax\n    : aggregateIndustryDataMap.data.globalMinMax;\n  const industryOrClusterMap = isClusterView ? clusterMap : industryMap;\n  const parentField = isClusterView ? \"clusterIdTopParent\" : \"naicsIdTopParent\";\n  const colorMap = isClusterView ? clusterColorMap : sectorColorMap;\n  const level = isClusterView ? clusterLevel : digitLevel;\n  const hiddenIndustriesOrClusters = isClusterView\n    ? hiddenClusters\n    : hiddenSectors;\n  const windowDimensions = useWindowWidth();\n  const getString = useFluent();\n  const history = useHistory();\n  const { loading, error, data } = useComparisonQuery({\n    primaryCity,\n    comparison,\n    year,\n    aggregation: isClusterView\n      ? AggregationMode.cluster\n      : AggregationMode.industries,\n  });\n  const rootRef = useRef<HTMLDivElement | null>(null);\n  const [dimensions, setDimensions] = useState<\n    { width: number; height: number } | undefined\n  >(undefined);\n  useEffect(() => {\n    const node = rootRef.current;\n    if (node) {\n      const { width, height } = node.getBoundingClientRect();\n      setDimensions({ width, height });\n    }\n  }, [rootRef, windowDimensions]);\n\n  let colorScale: (val: number) => string;\n  if (\n    colorBy === ColorBy.education &&\n    aggregateIndustryDataMap.data !== undefined\n  ) {\n    colorScale = scaleLinear()\n      .domain([\n        globalAggregateData.minYearsEducation,\n        globalAggregateData.medianYearsEducation,\n        globalAggregateData.maxYearsEducation,\n      ])\n      .range(educationColorRange as any) as any;\n  } else if (\n    colorBy === ColorBy.wage &&\n    aggregateIndustryDataMap.data !== undefined\n  ) {\n    colorScale = scaleLinear()\n      .domain([\n        globalAggregateData.minHourlyWage,\n        globalAggregateData.medianHourlyWage,\n        globalAggregateData.maxHourlyWage,\n      ])\n      .range(wageColorRange as any) as any;\n  } else {\n    colorScale = () => \"lightgray\";\n  }\n\n  const prevData = usePrevious(data);\n  let dataToUse: SuccessResponse | undefined;\n  if (data) {\n    dataToUse = data;\n  } else if (prevData) {\n    dataToUse = prevData;\n  } else {\n    dataToUse = undefined;\n  }\n\n  let output: React.ReactElement<any> | null;\n  if (\n    industryOrClusterMap.loading ||\n    !dimensions ||\n    (loading && prevData === undefined)\n  ) {\n    output = <LoadingBlock />;\n  } else if (error !== undefined) {\n    output = (\n      <LoadingOverlay>\n        <SimpleError />\n      </LoadingOverlay>\n    );\n    console.error(error);\n  } else if (industryOrClusterMap.error !== undefined) {\n    output = (\n      <LoadingOverlay>\n        <SimpleError />\n      </LoadingOverlay>\n    );\n    console.error(error);\n  } else if (dataToUse !== undefined) {\n    const { primaryCityIndustries, secondaryCityIndustries } = dataToUse;\n    let primaryTotal = 0;\n    let secondaryTotal = 0;\n    const filteredPrimaryData: FilteredDatum[] = [];\n    primaryCityIndustries.forEach(({ industryId, numCompany, numEmploy }) => {\n      const industry = industryOrClusterMap.data[industryId];\n      if (industry && industry.level + \"\" === level + \"\") {\n        const { name } = industry;\n        let color: string;\n        if (\n          (colorBy === ColorBy.education || colorBy === ColorBy.wage) &&\n          aggregateIndustryDataMap.data\n        ) {\n          const target =\n            industryId !== null ? aggregateData[industryId + \"\"] : undefined;\n          if (target) {\n            const targetValue =\n              colorBy === ColorBy.education\n                ? target.yearsEducationRank\n                : target.hourlyWageRank;\n            color = colorScale(targetValue);\n          } else {\n            color = \"lightgray\";\n          }\n        } else {\n          const colorDatum = industry\n            ? colorMap.find(\n                (s) => s.id === (industry as any)[parentField].toString(),\n              )\n            : undefined;\n          color = colorDatum ? colorDatum.color : \"lightgray\";\n        }\n        const topParent = (industry as any)[parentField];\n        const companies = numCompany ? numCompany : 0;\n        const employees = numEmploy ? numEmploy : 0;\n        primaryTotal =\n          compositionType === CompositionType.Companies\n            ? primaryTotal + companies\n            : primaryTotal + employees;\n        if (!hiddenIndustriesOrClusters.includes(topParent.toString())) {\n          filteredPrimaryData.push({\n            id: industryId,\n            value:\n              compositionType === CompositionType.Companies\n                ? companies\n                : employees,\n            title: name ? name : \"\",\n            topParent: topParent.toString(),\n            color,\n          });\n        }\n      }\n    });\n    const filteredSecondaryData: FilteredDatum[] = [];\n    secondaryCityIndustries.forEach(({ industryId, numCompany, numEmploy }) => {\n      const industry = industryOrClusterMap.data[industryId];\n      if (industry && industry.level + \"\" === level + \"\") {\n        const { name } = industry;\n        let color: string;\n        if (\n          (colorBy === ColorBy.education || colorBy === ColorBy.wage) &&\n          aggregateIndustryDataMap.data\n        ) {\n          const target =\n            industryId !== null ? aggregateData[industryId + \"\"] : undefined;\n          if (target) {\n            const targetValue =\n              colorBy === ColorBy.education\n                ? target.yearsEducationRank\n                : target.hourlyWageRank;\n            color = colorScale(targetValue);\n          } else {\n            color = \"lightgray\";\n          }\n        } else {\n          const colorDatum = industry\n            ? colorMap.find(\n                (s) => s.id === (industry as any)[parentField].toString(),\n              )\n            : undefined;\n          color = colorDatum ? colorDatum.color : \"lightgray\";\n        }\n        const topParent = (industry as any)[parentField];\n        const companies = numCompany ? numCompany : 0;\n        const employees = numEmploy ? numEmploy : 0;\n        secondaryTotal =\n          compositionType === CompositionType.Companies\n            ? secondaryTotal + companies\n            : secondaryTotal + employees;\n        if (!hiddenIndustriesOrClusters.includes(topParent.toString())) {\n          filteredSecondaryData.push({\n            id: industryId,\n            value:\n              compositionType === CompositionType.Companies\n                ? companies\n                : employees,\n            title: name ? name : \"\",\n            topParent: topParent.toString(),\n            color,\n          });\n        }\n      }\n    });\n    if (!filteredPrimaryData.length && !filteredSecondaryData.length) {\n      output = (\n        <LoadingOverlay>\n          <SimpleError\n            fluentMessageId={\"global-ui-error-no-sectors-selected\"}\n          />\n        </LoadingOverlay>\n      );\n    } else {\n      const loadingOverlay = loading ? <LoadingBlock /> : null;\n      output = (\n        <VizContainer>\n          <ErrorBoundary>\n            <Chart\n              key={dimensions.height.toString() + dimensions.width.toString()}\n              filteredPrimaryData={filteredPrimaryData}\n              filteredSecondaryData={filteredSecondaryData}\n              primaryTotal={primaryTotal}\n              secondaryTotal={secondaryTotal}\n              primaryCityId={primaryCity}\n              secondaryCityId={comparison}\n              highlighted={highlighted}\n              compositionType={compositionType}\n              isClusterView={isClusterView}\n            />\n          </ErrorBoundary>\n          {loadingOverlay}\n        </VizContainer>\n      );\n    }\n  } else {\n    output = null;\n  }\n\n  const onButtonClick = (value: Highlighted) => {\n    if (value === Highlighted.relative) {\n      const route = createRoute.city(CityRoutes.CityGoodAt, primaryCity + \"\");\n      history.push(route + history.location.search);\n    }\n  };\n\n  const cityName =\n    currentCity && currentCity.city && currentCity.city.name\n      ? currentCity.city.name\n      : \"---\";\n\n  const textLeft = getString(\"cities-top-10-comparison-chart-title\", {\n    name: \"Peers'\",\n    other: possessive([cityName]),\n  });\n  const textRight = getString(\"cities-top-10-comparison-chart-title\", {\n    name: possessive([cityName]),\n    other: \"Peers'\",\n  });\n\n  return (\n    <>\n      <PreChartRow\n        searchInGraphOptions={{\n          hiddenParents: isClusterView ? hiddenClusters : hiddenSectors,\n          digitLevel,\n          clusterLevel,\n          setHighlighted,\n          mode: isClusterView ? Mode.cluster : Mode.naics,\n        }}\n        settingsOptions={{\n          compositionType: true,\n          clusterLevel: isClusterView ? true : undefined,\n          digitLevel: isClusterView ? undefined : true,\n          colorBy: true,\n          aggregationMode: true,\n        }}\n        vizNavigation={vizNavigation}\n      />\n      <Root ref={rootRef}>\n        <LeftAxisRoot>\n          <AxisLabelBase>\n             {getString(\"global-absolute-presence-lower\")}\n          </AxisLabelBase>\n          <AxisLabelHigh>\n            {getString(\"global-absolute-presence-higher\")} \n          </AxisLabelHigh>\n        </LeftAxisRoot>\n        <BottomAxisRoot>\n          <AxisLabelLeft\n            dangerouslySetInnerHTML={{ __html: textLeft }}\n            style={{ whiteSpace: \"normal\" }}\n          />\n          <AxisLabelBase>\n            <PresenceToggle\n              togglePresence={true}\n              highlight={Highlighted.absolute}\n              showArrows={true}\n              onButtonClick={onButtonClick}\n            />\n          </AxisLabelBase>\n          <AxisLabelRight\n            dangerouslySetInnerHTML={{ __html: textRight }}\n            style={{ whiteSpace: \"normal\" }}\n          />\n        </BottomAxisRoot>\n        <BenchmarkRoot>\n          <BenchmarkLegend comparisonType={ComparisonType.Absolute} />\n        </BenchmarkRoot>\n        <VizRoot>{output}</VizRoot>\n      </Root>\n    </>\n  );\n};\n\nexport default TopIndustryComparisonBarChart;\n","import React, { useEffect, useState } from \"react\";\nimport EconomicComposition from \"./economicComposition\";\nimport Overview from \"./overview\";\nimport GoodAt from \"./goodAt\";\nimport { Switch, useHistory, matchPath, Route } from \"react-router-dom\";\nimport {\n  CityRoutes,\n  cityIdParam,\n  GlobalQueryParams,\n} from \"../../../routing/routes\";\nimport { createRoute } from \"../../../routing/Utils\";\nimport InnerPage from \"../../../components/templates/InnerPage\";\nimport useFluent from \"../../../hooks/useFluent\";\nimport useCurrentCityId from \"../../../hooks/useCurrentCityId\";\nimport { usePrevious } from \"react-use\";\nimport styled from \"styled-components\";\nimport { backgroundDark, primaryFont } from \"../../../styling/styleUtils\";\n\nconst Button = styled.button`\n  border: solid 1px #fff;\n  background-color: transparent;\n  color: #fff;\n  font-family: ${primaryFont};\n  font-size: 0.875rem;\n  margin-top: 0.75rem;\n\n  &:hover {\n    background-color: #fff;\n    color: ${backgroundDark};\n  }\n`;\n\nconst overviewTooltipLocalStorageKey =\n  \"cityProfileOverviewOneTimeTooltipLocalStorageKeyv1\";\nenum StringBoolean {\n  \"TRUE\" = \"TRUE\",\n  \"FALSE\" = \"FALSE\",\n}\n\nconst City = () => {\n  const getString = useFluent();\n  const getStringWithNewLines = (value: string) =>\n    getString(value).replace(/\\\\n/g, \"\\n\");\n  const history = useHistory();\n  const match = matchPath<{ [cityIdParam]: string }>(\n    history.location.pathname,\n    CityRoutes.CityBase,\n  );\n  const matchOverview = matchPath<{ [cityIdParam]: string }>(\n    history.location.pathname,\n    CityRoutes.CityOverview,\n  );\n  const cityId = useCurrentCityId();\n  const prevCityId = usePrevious(cityId);\n\n  const [showOverviewTooltip, setShowOverviewTooltip] =\n    useState<boolean>(false);\n  const dismissOverviewTooltip = () => {\n    setShowOverviewTooltip(false);\n    localStorage.setItem(overviewTooltipLocalStorageKey, StringBoolean.TRUE);\n  };\n\n  useEffect(() => {\n    const dismissed = localStorage.getItem(overviewTooltipLocalStorageKey);\n    if (\n      cityId &&\n      prevCityId &&\n      cityId !== prevCityId &&\n      !matchOverview?.isExact &&\n      dismissed !== StringBoolean.TRUE\n    ) {\n      setShowOverviewTooltip(true);\n    }\n  }, [matchOverview, cityId, prevCityId]);\n\n  useEffect(() => {\n    if (showOverviewTooltip && matchOverview?.isExact) {\n      setShowOverviewTooltip(false);\n      localStorage.setItem(overviewTooltipLocalStorageKey, StringBoolean.TRUE);\n    }\n  }, [matchOverview, showOverviewTooltip]);\n\n  useEffect(() => {\n    // If route is blank, default to first slide\n    if (match && match.isExact && match.params[cityIdParam]) {\n      history.replace(\n        createRoute.city(CityRoutes.CityOverview, match.params[cityIdParam]),\n      );\n    }\n  }, [history, match]);\n\n  const baseLinkData =\n    cityId !== null\n      ? [\n          {\n            label: getStringWithNewLines(\n              \"cities-single-page-titles-question-1\",\n            ),\n            url: createRoute.city(CityRoutes.CityOverview, cityId),\n            removeParams: [] as (keyof GlobalQueryParams)[],\n            tooltipText: showOverviewTooltip ? (\n              <>\n                {getString(\"city-overview-one-time-tooltip\")}\n                <br />\n                <Button onClick={dismissOverviewTooltip}>\n                  {getString(\"city-overview-one-time-tooltip-got-it\")}\n                </Button>\n              </>\n            ) : undefined,\n          },\n          {\n            label: getStringWithNewLines(\n              \"cities-single-page-titles-question-2\",\n            ),\n            url: createRoute.city(CityRoutes.CityEconomicComposition, cityId),\n            removeParams: [] as (keyof GlobalQueryParams)[],\n          },\n          {\n            label: getStringWithNewLines(\n              \"cities-single-page-titles-question-3\",\n            ),\n            url: createRoute.city(CityRoutes.CityGoodAt, cityId),\n            removeParams: [] as (keyof GlobalQueryParams)[],\n          },\n        ]\n      : [];\n\n  return (\n    <InnerPage baseLinkData={baseLinkData}>\n      <Switch>\n        <Route path={CityRoutes.CityOverview} component={Overview} />\n        <Route\n          path={CityRoutes.CityEconomicComposition}\n          component={EconomicComposition}\n        />\n        <Route path={CityRoutes.CityGoodAt} component={GoodAt} />\n      </Switch>\n    </InnerPage>\n  );\n};\n\nexport default City;\n","import React, { useEffect, useState, useRef } from \"react\";\nimport {\n  DigitLevel,\n  ClassificationNaicsIndustry,\n  CompositionType,\n  isValidPeerGroup,\n  PeerGroup,\n  ClassificationNaicsCluster,\n} from \"../../../types/graphQL/graphQLTypes\";\nimport { useGlobalIndustryMap } from \"../../../hooks/useGlobalIndustriesData\";\nimport { usePrevious } from \"react-use\";\nimport { useWindowWidth } from \"../../../contextProviders/appContext\";\nimport { breakPoints } from \"../../../styling/GlobalGrid\";\nimport PreChartRow, {\n  VizNavItem,\n} from \"../../../components/general/PreChartRow\";\nimport ErrorBoundary from \"../ErrorBoundary\";\nimport styled from \"styled-components/macro\";\nimport {\n  sectorColorMap,\n  secondaryFont,\n  baseColor,\n  clusterColorMap,\n} from \"../../../styling/styleUtils\";\nimport SimpleError from \"../../transitionStateComponents/SimpleError\";\nimport LoadingBlock, {\n  LoadingOverlay,\n} from \"../../transitionStateComponents/VizLoadingBlock\";\nimport { ClusterBarChartDatum } from \"react-fast-charts\";\nimport {\n  useComparisonQuery,\n  SuccessResponse,\n  RegionGroup,\n} from \"../comparisonBarChart/cityIndustryComparisonQuery\";\nimport orderBy from \"lodash/orderBy\";\nimport { rgba } from \"polished\";\nimport useGlobalLocationData from \"../../../hooks/useGlobalLocationData\";\nimport useFluent from \"../../../hooks/useFluent\";\nimport Chart, { Group } from \"./Chart\";\nimport { Mode } from \"../../general/searchIndustryInGraphDropdown\";\nimport PresenceToggle, { Highlighted } from \"../legend/PresenceToggle\";\nimport { ComparisonType } from \"../../navigation/secondaryHeader/comparisons/AddComparisonModal\";\nimport BenchmarkLegend from \"../legend/BenchmarkLegend\";\nimport {\n  AggregationMode,\n  CityRoutes,\n  ClusterLevel,\n} from \"../../../routing/routes\";\nimport { createRoute } from \"../../../routing/Utils\";\nimport { useHistory } from \"react-router-dom\";\nimport { useGlobalClusterMap } from \"../../../hooks/useGlobalClusterData\";\n\nconst Root = styled.div`\n  width: 100%;\n  height: 100%;\n  grid-column: 1;\n  grid-row: 2;\n  position: relative;\n  display: grid;\n  grid-template-rows: 4rem 2rem 1fr 3rem auto;\n\n  @media ${breakPoints.small} {\n    grid-row: 3;\n    grid-column: 1;\n  }\n`;\n\nconst BottomAxisRoot = styled.div`\n  grid-row: 4;\n  grid-column: 1;\n  white-space: nowrap;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  pointer-events: none;\n\n  @media (max-width: 990px) {\n    grid-template-columns: 1 / -1;\n  }\n\n  @media (max-width: 920px) {\n    justify-content: center;\n  }\n`;\n\nconst BenchmarkRoot = styled(BottomAxisRoot)`\n  grid-row: 5;\n  justify-content: center;\n  white-space: normal;\n`;\n\nconst AxisLabelBase = styled.div`\n  font-weight: 600;\n  font-size: 0.75rem;\n  color: ${baseColor};\n  text-transform: uppercase;\n\n  @media (max-width: 1000px) {\n    font-size: 0.6rem;\n  }\n\n  @media (max-height: 600px) {\n    font-size: 0.65rem;\n  }\n`;\n\nconst SizingContainer = styled.div`\n  width: 100%;\n  grid-row: 3;\n`;\n\nconst VizContainer = styled.div`\n  width: 100%;\n  height: 100%;\n  position: absolute;\n\n  .cluster-bar-chart-y-axis-label {\n    text-transform: uppercase;\n    font-size: 0.75rem;\n  }\n`;\n\nconst BreadCrumbList = styled.ul`\n  list-style: none;\n  padding: 0;\n  margin: 0;\n  display: flex;\n  align-items: center;\n\n  @media ${breakPoints.small} {\n    flex-wrap: wrap;\n  }\n`;\n\nconst breadCrumbFontSize = \"clamp(0.55rem, 0.9vw, 0.85rem)\";\n\nconst BreadCrumb = styled.li`\n  font-size: 0.6rem;\n  font-size: ${breadCrumbFontSize};\n  max-width: 20%;\n  padding-right: 2rem;\n  box-sizing: border-box;\n  font-family: ${secondaryFont};\n  position: relative;\n`;\n\nconst BreadCrumbLink = styled.button`\n  border: none;\n  background-color: transparent;\n  padding: 0;\n  font-size: 0.6rem;\n  font-size: ${breadCrumbFontSize};\n  font-family: ${secondaryFont};\n  color: rgb(78, 140, 141);\n  cursor: pointer;\n  text-align: left;\n  display: flex;\n  align-items: center;\n\n  span {\n    text-decoration: underline;\n  }\n\n  &:after {\n    content: \"\";\n    margin: 0 0.5rem;\n    font-size: 1rem;\n    text-decoration: none;\n    display: inline-block;\n    position: absolute;\n    right: 0;\n  }\n`;\n\nconst PrimarySecondaryLegend = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n`;\n\nconst LegendItem = styled.div`\n  display: flex;\n  align-items: center;\n`;\n\nconst LegendBlock = styled.div`\n  width: 2em;\n  height: 1rem;\n  margin: 0 0.1rem;\n`;\n\nconst LegendText = styled.div`\n  font-size: 0.75rem;\n  text-transform: uppercase;\n  margin: 0 0.5rem;\n`;\n\ninterface Props {\n  primaryCity: number;\n  comparison: number | RegionGroup | PeerGroup;\n  year: number;\n  highlighted: number | null;\n  setHighlighted: (value: string | undefined) => void;\n  compositionType: CompositionType;\n  hiddenSectors: ClassificationNaicsIndustry[\"id\"][];\n  vizNavigation: VizNavItem[];\n  isClusterView: boolean;\n  hiddenClusters: ClassificationNaicsCluster[\"id\"][];\n}\n\nconst IndustryZoomableBarChart = (props: Props) => {\n  const {\n    primaryCity,\n    comparison,\n    year,\n    compositionType,\n    highlighted,\n    hiddenSectors,\n    setHighlighted,\n    vizNavigation,\n    isClusterView,\n    hiddenClusters,\n  } = props;\n\n  const { loading, error, data } = useComparisonQuery({\n    primaryCity,\n    comparison,\n    year,\n    aggregation: isClusterView\n      ? AggregationMode.cluster\n      : AggregationMode.industries,\n  });\n  const history = useHistory();\n  const industryMap = useGlobalIndustryMap();\n  const clusterMap = useGlobalClusterMap({ skipLevel2: true });\n  const industryOrClusterMap = isClusterView ? clusterMap : industryMap;\n  const parentField = isClusterView ? \"clusterIdTopParent\" : \"naicsIdTopParent\";\n  const idField = isClusterView ? \"clusterId\" : \"naicsId\";\n  const colorMap = isClusterView ? clusterColorMap : sectorColorMap;\n  const hiddenIndustriesOrClusters = isClusterView\n    ? hiddenClusters\n    : hiddenSectors;\n  const windowDimensions = useWindowWidth();\n  const rootRef = useRef<HTMLDivElement | null>(null);\n  const [dimensions, setDimensions] = useState<\n    { width: number; height: number } | undefined\n  >(undefined);\n  const getString = useFluent();\n  const { data: globalData } = useGlobalLocationData();\n\n  useEffect(() => {\n    setHighlighted(undefined);\n  }, [isClusterView, setHighlighted]);\n\n  const primaryCityDatum = globalData\n    ? globalData.cities.find((c) => parseInt(c.cityId, 10) === primaryCity)\n    : undefined;\n  const primaryCityName =\n    primaryCityDatum && primaryCityDatum.name ? primaryCityDatum.name : \"\";\n\n  let secondaryCityName: string;\n  if (comparison === RegionGroup.World) {\n    secondaryCityName = getString(\"global-text-world\");\n  } else if (isValidPeerGroup(comparison)) {\n    secondaryCityName = getString(\"global-formatted-peer-groups\", {\n      type: comparison,\n    });\n  } else {\n    const secondaryCityDatum = globalData\n      ? globalData.cities.find((c) => parseInt(c.cityId, 10) === comparison)\n      : undefined;\n    secondaryCityName =\n      secondaryCityDatum && secondaryCityDatum.name\n        ? secondaryCityDatum.name\n        : \"\";\n  }\n\n  useEffect(() => {\n    const node = rootRef.current;\n    if (node) {\n      const { width, height } = node.getBoundingClientRect();\n      setDimensions({ width, height });\n    }\n  }, [rootRef, windowDimensions]);\n\n  const highlightIndustry = highlighted\n    ? industryOrClusterMap.data[highlighted]\n    : undefined;\n\n  const prevData = usePrevious(data);\n  let dataToUse: SuccessResponse | undefined;\n  if (data) {\n    dataToUse = data;\n  } else if (prevData) {\n    dataToUse = prevData;\n  } else {\n    dataToUse = undefined;\n  }\n\n  let output: React.ReactElement<any> | null;\n  if (\n    industryOrClusterMap.loading ||\n    !dimensions ||\n    (loading && prevData === undefined)\n  ) {\n    output = <LoadingBlock />;\n  } else if (error !== undefined) {\n    output = (\n      <LoadingOverlay>\n        <SimpleError />\n      </LoadingOverlay>\n    );\n    console.error(error);\n  } else if (industryOrClusterMap.error !== undefined) {\n    output = (\n      <LoadingOverlay>\n        <SimpleError />\n      </LoadingOverlay>\n    );\n    console.error(error);\n  } else if (dataToUse !== undefined) {\n    const { primaryCityIndustries, secondaryCityIndustries } = dataToUse;\n    const highlightedParent =\n      (highlightIndustry && highlightIndustry.level === DigitLevel.Six) ||\n      (isClusterView &&\n        highlightIndustry &&\n        highlightIndustry.level + \"\" === ClusterLevel.C3)\n        ? highlightIndustry.parentId\n        : highlighted;\n    const primaryTotal = primaryCityIndustries.reduce(\n      (total, { industryId, numCompany, numEmploy }) => {\n        const industry = industryOrClusterMap.data[industryId];\n        if (industry && industry.parentId === null) {\n          const companies = numCompany ? numCompany : 0;\n          const employees = numEmploy ? numEmploy : 0;\n          const increment =\n            compositionType === CompositionType.Companies\n              ? companies\n              : employees;\n          return total + increment;\n        } else {\n          return total;\n        }\n      },\n      0,\n    );\n    const secondaryTotal = secondaryCityIndustries.reduce(\n      (total, { industryId, numCompany, numEmploy }) => {\n        const industry = industryMap.data[industryId];\n        if (industry && industry.parentId === null) {\n          const companies = numCompany ? numCompany : 0;\n          const employees = numEmploy ? numEmploy : 0;\n          const increment =\n            compositionType === CompositionType.Companies\n              ? companies\n              : employees;\n          return total + increment;\n        } else {\n          return total;\n        }\n      },\n      0,\n    );\n    const barChartData: ClusterBarChartDatum[] = [];\n    [...primaryCityIndustries, ...secondaryCityIndustries].forEach(\n      ({ industryId, numCompany, numEmploy }, i) => {\n        const industry = industryOrClusterMap.data[industryId];\n        if (\n          industry &&\n          industry.name &&\n          industry.parentId === highlightedParent &&\n          !hiddenIndustriesOrClusters.includes(\n            (industry as any)[parentField].toString(),\n          )\n        ) {\n          const groupName =\n            i < primaryCityIndustries.length ? Group.Primary : Group.Secondary;\n          const companies = numCompany ? numCompany : 0;\n          const employees = numEmploy ? numEmploy : 0;\n          const colorDatum = colorMap.find(\n            (s) => s.id === (industry as any)[parentField].toString(),\n          );\n          let fill: string | undefined;\n          if (colorDatum) {\n            fill =\n              i < primaryCityIndustries.length\n                ? colorDatum.color\n                : rgba(colorDatum.color, 0.4);\n          } else {\n            fill = undefined;\n          }\n          const value =\n            compositionType === CompositionType.Companies\n              ? companies\n              : employees;\n          const total =\n            i < primaryCityIndustries.length ? primaryTotal : secondaryTotal;\n          barChartData.push({\n            groupName,\n            x: industry.name.replace(/ and /g, \" & \"),\n            y: (value / total) * 100,\n            fill,\n            onClick:\n              (!isClusterView && industry.level !== DigitLevel.Six) ||\n              (isClusterView && industry.level + \"\" !== ClusterLevel.C3 + \"\")\n                ? () => setHighlighted(industryId)\n                : undefined,\n          });\n        }\n      },\n    );\n    const sortedData = orderBy(\n      barChartData,\n      [\"groupName\", \"y\"],\n      [\"asc\", \"desc\"],\n    );\n    const loadingOverlay = loading ? <LoadingBlock /> : null;\n\n    output = (\n      <VizContainer style={{ height: dimensions.height }}>\n        <ErrorBoundary>\n          <Chart\n            data={sortedData}\n            compositionType={compositionType}\n            height={dimensions.height}\n            loading={loading}\n            primaryName={primaryCityName}\n            secondaryName={secondaryCityName}\n          />\n        </ErrorBoundary>\n        {loadingOverlay}\n      </VizContainer>\n    );\n  } else {\n    output = null;\n  }\n\n  const breadCrumbList = [];\n  let current = highlightIndustry;\n  while (current !== undefined) {\n    breadCrumbList.push(current);\n    const currentParentId = current.parentId;\n    current = currentParentId\n      ? industryOrClusterMap.data[currentParentId]\n      : undefined;\n  }\n  const breadCrumbs = breadCrumbList.reverse().map((industry, i) => {\n    const industryName = industry.name\n      ? industry.name.replace(\" and \", \" & \")\n      : \"\";\n    if (i === breadCrumbList.length - 1) {\n      return <BreadCrumb key={industry.id}>{industryName}</BreadCrumb>;\n    }\n    return (\n      <BreadCrumb key={industry.id}>\n        <BreadCrumbLink\n          onClick={() => setHighlighted((industry as any)[idField])}\n        >\n          <span>{industryName}</span>\n        </BreadCrumbLink>\n      </BreadCrumb>\n    );\n  });\n  const topLevelText = isClusterView\n    ? getString(\"global-ui-cluster-aggregation-level\", {\n        cluster: \"cluster_1\",\n      })\n    : getString(\"global-ui-sector-level\");\n  const topLevelBreadCrumb = breadCrumbList.length ? (\n    <BreadCrumb>\n      <BreadCrumbLink onClick={() => setHighlighted(undefined)}>\n        <span>{topLevelText}</span>\n      </BreadCrumbLink>\n    </BreadCrumb>\n  ) : (\n    <BreadCrumb>{topLevelText}</BreadCrumb>\n  );\n\n  const onButtonClick = (value: Highlighted) => {\n    if (value === Highlighted.relative) {\n      const route = createRoute.city(CityRoutes.CityGoodAt, primaryCity + \"\");\n      history.push(route + history.location.search);\n    }\n  };\n\n  return (\n    <>\n      <PreChartRow\n        searchInGraphOptions={{\n          hiddenParents: isClusterView ? hiddenClusters : hiddenSectors,\n          digitLevel: null,\n          clusterLevel: null,\n          setHighlighted,\n          mode: isClusterView ? Mode.cluster : Mode.naics,\n        }}\n        settingsOptions={{\n          compositionType: true,\n          aggregationMode: true,\n          digitLevel: isClusterView ? undefined : false,\n          clusterLevel: isClusterView ? false : undefined,\n        }}\n        vizNavigation={vizNavigation}\n      />\n      <Root>\n        <BreadCrumbList>\n          {topLevelBreadCrumb}\n          {breadCrumbs}\n        </BreadCrumbList>\n        <PrimarySecondaryLegend>\n          <LegendItem>\n            <LegendText>{primaryCityName}</LegendText>\n            <LegendBlock style={{ backgroundColor: \"#666\" }} />\n          </LegendItem>\n          <LegendItem>\n            <LegendBlock style={{ backgroundColor: rgba(\"#666\", 0.4) }} />\n            <LegendText>{secondaryCityName}</LegendText>\n          </LegendItem>\n        </PrimarySecondaryLegend>\n\n        <BottomAxisRoot>\n          <AxisLabelBase>\n            <PresenceToggle\n              togglePresence={true}\n              highlight={Highlighted.absolute}\n              showArrows={false}\n              onButtonClick={onButtonClick}\n            />\n          </AxisLabelBase>\n        </BottomAxisRoot>\n        <BenchmarkRoot>\n          <BenchmarkLegend comparisonType={ComparisonType.Absolute} />\n        </BenchmarkRoot>\n        <SizingContainer ref={rootRef}>{output}</SizingContainer>\n      </Root>\n    </>\n  );\n};\n\nexport default IndustryZoomableBarChart;\n","import React, { useState } from \"react\";\nimport TopIndustryComparisonBarChart from \"../../../../../components/dataViz/comparisonBarChart/TopIndustryComparisonBarChart\";\nimport IndustryZoomableBarChart from \"../../../../../components/dataViz/zoomableComparisonBarChart/IndustryZoomableBarChart\";\nimport { defaultYear } from \"../../../../../Utils\";\nimport {\n  defaultCompositionType,\n  CompositionType,\n  defaultDigitLevel,\n  isValidPeerGroup,\n  PeerGroup,\n  ClassificationNaicsCluster,\n  ClusterLevel,\n} from \"../../../../../types/graphQL/graphQLTypes\";\nimport useQueryParams from \"../../../../../hooks/useQueryParams\";\nimport { RegionGroup } from \"../../../../../components/dataViz/comparisonBarChart/cityIndustryComparisonQuery\";\nimport { createRoute } from \"../../../../../routing/Utils\";\nimport TrackedRoute from \"../../../../../routing/TrackedRoute\";\nimport {\n  CityRoutes,\n  cityIdParam,\n  ColorBy,\n} from \"../../../../../routing/routes\";\nimport { useHistory, Switch, matchPath } from \"react-router-dom\";\nimport SideText from \"../SideText\";\n\ninterface Props {\n  primaryCity: string;\n  secondaryCity: string;\n  hiddenSectors: string[];\n  clusterLevel: ClusterLevel;\n  isClusterView: boolean;\n  hiddenClusters: ClassificationNaicsCluster[\"id\"][];\n  colorBy: ColorBy;\n}\n\nconst CompositionComparison = (props: Props) => {\n  const {\n    primaryCity,\n    secondaryCity,\n    hiddenSectors,\n    clusterLevel,\n    isClusterView,\n    hiddenClusters,\n    colorBy,\n  } = props;\n\n  const { digit_level, composition_type } = useQueryParams();\n  const [highlighted, setHighlighted] = useState<string | undefined>(undefined);\n  const history = useHistory();\n  const isIndustryComparison = matchPath<{ [cityIdParam]: string }>(\n    history.location.pathname,\n    CityRoutes.CityGoodAtAbsolutePresenceComparison,\n  );\n  const vizNavigation = [\n    {\n      label: \"Bar Graph\",\n      active: !!(!isIndustryComparison || !isIndustryComparison.isExact),\n      onClick: () => {\n        setHighlighted(undefined);\n        history.push(\n          createRoute.city(CityRoutes.CityGoodAtAbsolutePresence, primaryCity) +\n            history.location.search,\n        );\n      },\n    },\n    {\n      label: \"Nested Bar Graph\",\n      active: !!(isIndustryComparison && isIndustryComparison.isExact),\n      onClick: () => {\n        setHighlighted(undefined);\n        history.push(\n          createRoute.city(\n            CityRoutes.CityGoodAtAbsolutePresenceComparison,\n            primaryCity,\n          ) + history.location.search,\n        );\n      },\n    },\n  ];\n\n  let comparison: number | RegionGroup | PeerGroup;\n  if (secondaryCity === RegionGroup.World) {\n    comparison = RegionGroup.World;\n  } else if (isValidPeerGroup(secondaryCity)) {\n    comparison = secondaryCity as PeerGroup;\n  } else {\n    comparison = parseInt(secondaryCity, 10);\n  }\n\n  return (\n    <>\n      <Switch>\n        <TrackedRoute\n          path={CityRoutes.CityGoodAtAbsolutePresenceComparison}\n          render={() => (\n            <>\n              <SideText\n                isClusterView={Boolean(isClusterView)}\n                prefix={\"absolute-nested-bar-chart\"}\n              />\n              <IndustryZoomableBarChart\n                primaryCity={parseInt(primaryCity, 10)}\n                comparison={comparison}\n                year={defaultYear}\n                setHighlighted={setHighlighted}\n                highlighted={highlighted ? parseInt(highlighted, 10) : null}\n                compositionType={\n                  composition_type\n                    ? (composition_type as CompositionType)\n                    : defaultCompositionType\n                }\n                hiddenSectors={hiddenSectors}\n                vizNavigation={vizNavigation}\n                isClusterView={isClusterView}\n                hiddenClusters={hiddenClusters}\n              />\n            </>\n          )}\n        />\n        <TrackedRoute\n          path={CityRoutes.CityGoodAtAbsolutePresence}\n          render={() => (\n            <>\n              <SideText\n                isClusterView={Boolean(isClusterView)}\n                prefix={\"absolute-presence\"}\n              />\n              <TopIndustryComparisonBarChart\n                primaryCity={parseInt(primaryCity, 10)}\n                comparison={comparison}\n                year={defaultYear}\n                setHighlighted={setHighlighted}\n                highlighted={highlighted}\n                digitLevel={\n                  digit_level ? parseInt(digit_level, 10) : defaultDigitLevel\n                }\n                compositionType={\n                  composition_type\n                    ? (composition_type as CompositionType)\n                    : defaultCompositionType\n                }\n                hiddenSectors={hiddenSectors}\n                vizNavigation={vizNavigation}\n                clusterLevel={clusterLevel}\n                isClusterView={isClusterView}\n                hiddenClusters={hiddenClusters}\n                colorBy={colorBy}\n              />\n            </>\n          )}\n        />\n      </Switch>\n    </>\n  );\n};\n\nexport default CompositionComparison;\n","import { DefaultContentWrapper } from \"../../../../styling/GlobalGrid\";\nimport useCurrentCityId from \"../../../../hooks/useCurrentCityId\";\nimport SimpleError from \"../../../../components/transitionStateComponents/SimpleError\";\nimport { LoadingOverlay } from \"../../../../components/transitionStateComponents/VizLoadingBlock\";\nimport React, { useState } from \"react\";\nimport {\n  ClassificationNaicsIndustry,\n  ClassificationNaicsCluster,\n} from \"../../../../types/graphQL/graphQLTypes\";\nimport { ContentGrid } from \"../../../../styling/styleUtils\";\nimport useQueryParams from \"../../../../hooks/useQueryParams\";\nimport useFluent from \"../../../../hooks/useFluent\";\nimport CategoryLabels from \"../../../../components/dataViz/legend/CategoryLabels\";\nimport EducationLegend from \"../../../../components/dataViz/legend/EducationLegend\";\nimport WageLegend from \"../../../../components/dataViz/legend/WageLegend\";\nimport useSectorMap from \"../../../../hooks/useSectorMap\";\nimport useClusterMap from \"../../../../hooks/useClusterMap\";\nimport { useLevelLoader } from \"../../../../hooks/useLevelLoader\";\nimport UtilityBar from \"../../../../components/navigation/secondaryHeader/UtilityBar\";\nimport {\n  ColorBy,\n  defaultClusterLevel,\n  defaultColorBy,\n  AggregationMode,\n  defaultAggregationMode,\n  CityRoutes,\n  Routes,\n} from \"../../../../routing/routes\";\nimport RCABarChart from \"../../../../components/dataViz/verticalBarChart/RCABarChart\";\nimport { defaultDigitLevel } from \"../../../../types/graphQL/graphQLTypes\";\nimport SideText from \"./SideText\";\nimport { Switch } from \"react-router-dom\";\nimport TrackedRoute from \"../../../../routing/TrackedRoute\";\nimport AbsolutePresence from \"./absolutePresence\";\nimport useCurrentBenchmark from \"../../../../hooks/useCurrentBenchmark\";\nimport { useRouteMatch } from \"react-router-dom\";\n\nconst CityGoodAt = () => {\n  const cityId = useCurrentCityId();\n  useLevelLoader();\n\n  const { cluster_level, digit_level, color_by, aggregation } =\n    useQueryParams();\n  const { benchmark } = useCurrentBenchmark();\n  const sectorMap = useSectorMap();\n  const clusterMap = useClusterMap();\n  const matchZoomableBarChart = useRouteMatch(\n    Routes.CityGoodAtAbsolutePresenceComparison,\n  );\n  const [hiddenSectors, setHiddenSectors] = useState<\n    ClassificationNaicsIndustry[\"id\"][]\n  >([]);\n  const [hiddenClusters, setHiddenClusters] = useState<\n    ClassificationNaicsCluster[\"id\"][]\n  >([]);\n  const toggleSector = (sectorId: ClassificationNaicsIndustry[\"id\"]) =>\n    hiddenSectors.includes(sectorId)\n      ? setHiddenSectors(hiddenSectors.filter((sId) => sId !== sectorId))\n      : setHiddenSectors([...hiddenSectors, sectorId]);\n  const isolateSector = (sectorId: ClassificationNaicsIndustry[\"id\"]) =>\n    hiddenSectors.length === sectorMap.length - 1 &&\n    !hiddenSectors.find((sId) => sId === sectorId)\n      ? setHiddenSectors([])\n      : setHiddenSectors([\n          ...sectorMap.map((s) => s.id).filter((sId) => sId !== sectorId),\n        ]);\n  const resetSectors = () => setHiddenSectors([]);\n\n  const toggleCluster = (clusterId: ClassificationNaicsCluster[\"id\"]) =>\n    hiddenClusters.includes(clusterId)\n      ? setHiddenClusters(hiddenClusters.filter((sId) => sId !== clusterId))\n      : setHiddenClusters([...hiddenClusters, clusterId]);\n  const isolateCluster = (clusterId: ClassificationNaicsCluster[\"id\"]) =>\n    hiddenClusters.length === clusterMap.length - 1 &&\n    !hiddenClusters.find((sId) => sId === clusterId)\n      ? setHiddenClusters([])\n      : setHiddenClusters([\n          ...clusterMap.map((s) => s.id).filter((sId) => sId !== clusterId),\n        ]);\n  const resetClusters = () => setHiddenClusters([]);\n\n  const [highlighted, setHighlighted] = useState<string | undefined>(undefined);\n  const getString = useFluent();\n\n  const isClusterView =\n    (!aggregation && defaultAggregationMode === AggregationMode.cluster) ||\n    aggregation === AggregationMode.cluster;\n\n  if (cityId === null) {\n    return (\n      <DefaultContentWrapper>\n        <LoadingOverlay>\n          <SimpleError fluentMessageId={\"global-ui-error-invalid-city\"} />\n        </LoadingOverlay>\n      </DefaultContentWrapper>\n    );\n  }\n\n  let legend: React.ReactElement<any> | null;\n  if (color_by === ColorBy.education && !matchZoomableBarChart) {\n    legend = <EducationLegend />;\n  } else if (color_by === ColorBy.wage && !matchZoomableBarChart) {\n    legend = <WageLegend />;\n  } else {\n    if (isClusterView) {\n      legend = (\n        <CategoryLabels\n          categories={clusterMap}\n          allowToggle={true}\n          toggleCategory={toggleCluster}\n          isolateCategory={isolateCluster}\n          hiddenCategories={hiddenClusters}\n          resetCategories={resetClusters}\n          resetText={getString(\"global-ui-reset-clusters\")}\n          fullWidth={false}\n        />\n      );\n    } else {\n      legend = (\n        <CategoryLabels\n          categories={sectorMap}\n          allowToggle={true}\n          toggleCategory={toggleSector}\n          isolateCategory={isolateSector}\n          hiddenCategories={hiddenSectors}\n          resetCategories={resetSectors}\n          resetText={getString(\"global-ui-reset-sectors\")}\n          fullWidth={true}\n        />\n      );\n    }\n  }\n\n  const clusterLevel = cluster_level ? cluster_level : defaultClusterLevel;\n  const digitLevel = digit_level\n    ? parseInt(digit_level, 10)\n    : defaultDigitLevel;\n  const colorBy = color_by ? color_by : defaultColorBy;\n\n  return (\n    <DefaultContentWrapper>\n      <ContentGrid>\n        <Switch>\n          <TrackedRoute\n            path={CityRoutes.CityGoodAtAbsolutePresence}\n            render={() => (\n              <>\n                <AbsolutePresence\n                  primaryCity={cityId}\n                  secondaryCity={benchmark}\n                  hiddenSectors={hiddenSectors}\n                  clusterLevel={clusterLevel}\n                  isClusterView={isClusterView}\n                  hiddenClusters={hiddenClusters}\n                  colorBy={colorBy}\n                />\n              </>\n            )}\n          />\n          <TrackedRoute\n            path={CityRoutes.CityGoodAt}\n            render={() => (\n              <>\n                <SideText\n                  isClusterView={Boolean(isClusterView)}\n                  prefix={\"relative-presence\"}\n                />\n                <RCABarChart\n                  isClusterView={Boolean(isClusterView)}\n                  highlighted={highlighted}\n                  setHighlighted={setHighlighted}\n                  hiddenSectors={hiddenSectors}\n                  hiddenClusters={hiddenClusters}\n                  clusterLevel={clusterLevel}\n                  digitLevel={digitLevel}\n                  colorBy={colorBy}\n                />\n              </>\n            )}\n          />\n        </Switch>\n        {legend}\n      </ContentGrid>\n      <UtilityBar />\n    </DefaultContentWrapper>\n  );\n};\n\nexport default CityGoodAt;\n","import React from \"react\";\nimport styled from \"styled-components/macro\";\nimport {\n  secondaryFont,\n  lightBaseColor,\n} from \"../../../styling/styleUtils\";\nimport { useStaticData } from \"../../../dataProvider\";\nimport useCurrentCityId from \"../../../hooks/useCurrentCityId\";\nimport { useHistory, matchPath } from \"react-router-dom\";\nimport { CityRoutes, cityIdParam } from \"../../../routing/routes\";\nimport { ValueOfCityRoutes, createRoute } from \"../../../routing/Utils\";\nimport queryString from \"query-string\";\nimport useQueryParams from \"../../../hooks/useQueryParams\";\n\nconst Root = styled.div`\n  display: flex;\n  gap: 0.5rem;\n  align-items: center;\n  height: 100%;\n\n  @media (max-width: 600px) {\n    flex-direction: column;\n    align-items: stretch;\n    gap: 0.3rem;\n  }\n`;\n\nconst StyledSelect = styled.select`\n  font-family: ${secondaryFont};\n  font-size: 0.7rem;\n  text-transform: uppercase;\n  background-color: #fff;\n  border: solid 1px ${lightBaseColor};\n  padding: 0.35rem 1.5rem 0.35rem 0.5rem;\n  cursor: pointer;\n  appearance: none;\n  background-image: url(\"data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23333' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e\");\n  background-repeat: no-repeat;\n  background-position: right 0.3rem center;\n  background-size: 0.8rem;\n  min-width: 0;\n\n  &:focus {\n    outline: none;\n    border-color: #333;\n  }\n\n  @media (max-width: 600px) {\n    width: 100%;\n  }\n`;\n\nconst CountrySelect = styled(StyledSelect)`\n  width: 130px;\n\n  @media (max-width: 600px) {\n    width: 100%;\n  }\n`;\n\nconst YearSelect = styled(StyledSelect)`\n  width: 80px;\n\n  @media (max-width: 600px) {\n    width: 100%;\n  }\n`;\n\nconst RegionSelect = styled(StyledSelect)`\n  width: clamp(200px, 30vw, 400px);\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n\n  @media (max-width: 600px) {\n    width: 100%;\n  }\n`;\n\nconst Label = styled.span`\n  font-family: ${secondaryFont};\n  font-size: 0.6rem;\n  text-transform: uppercase;\n  color: #666;\n  letter-spacing: 0.05em;\n\n  @media (max-width: 600px) {\n    display: none;\n  }\n`;\n\nconst CitySearch = () => {\n  const { data: blsData, loading } = useStaticData();\n  const cityId = useCurrentCityId();\n  const history = useHistory();\n  const params = useQueryParams();\n\n  if (loading || !blsData) {\n    return <Root />;\n  }\n\n  const years = blsData.metadata.years;\n  const currentYear = params.year || years[years.length - 1]?.toString() || \"2024\";\n\n  // Group regions by type\n  const nationals = blsData.regions\n    .filter((r) => r.regionType === \"National\")\n    .sort((a, b) => a.name.localeCompare(b.name));\n  const metros = blsData.regions\n    .filter((r) => r.regionType === \"Metro\")\n    .sort((a, b) => a.name.localeCompare(b.name));\n  const states = blsData.regions\n    .filter((r) => r.regionType === \"State\")\n    .sort((a, b) => a.name.localeCompare(b.name));\n\n  const onRegionChange = (e: React.ChangeEvent<HTMLSelectElement>) => {\n    const regionId = e.target.value;\n    Object.entries(CityRoutes).forEach(([_key, value]) => {\n      const match = matchPath<{ [cityIdParam]: string }>(\n        history.location.pathname,\n        value,\n      );\n      if (match && match.isExact && match.path) {\n        history.push(\n          createRoute.city(\n            match.path as ValueOfCityRoutes,\n            regionId,\n          ) + history.location.search,\n        );\n      }\n    });\n  };\n\n  const onYearChange = (e: React.ChangeEvent<HTMLSelectElement>) => {\n    const year = e.target.value;\n    const { year: _oldYear, ...otherParams } = params;\n    const query = queryString.stringify({ ...otherParams, year });\n    history.push(history.location.pathname + (query ? \"?\" + query : \"\"));\n  };\n\n  return (\n    <Root>\n      <Label>Country</Label>\n      <CountrySelect value=\"us\" onChange={() => {}}>\n        <option value=\"us\">United States</option>\n      </CountrySelect>\n\n      <Label>Year</Label>\n      <YearSelect value={currentYear} onChange={onYearChange}>\n        {years.map((y) => (\n          <option key={y} value={y.toString()}>\n            {y}\n          </option>\n        ))}\n      </YearSelect>\n\n      <Label>Region</Label>\n      <RegionSelect value={cityId || \"\"} onChange={onRegionChange}>\n        {nationals.length > 0 && (\n          <optgroup label=\"National\">\n            {nationals.map((r) => (\n              <option key={r.regionId} value={r.regionId}>\n                {r.name}\n              </option>\n            ))}\n          </optgroup>\n        )}\n        {states.length > 0 && (\n          <optgroup label=\"States\">\n            {states.map((r) => (\n              <option key={r.regionId} value={r.regionId}>\n                {r.name}\n              </option>\n            ))}\n          </optgroup>\n        )}\n        {metros.length > 0 && (\n          <optgroup label=\"Metropolitan Areas\">\n            {metros.map((r) => (\n              <option key={r.regionId} value={r.regionId}>\n                {r.name}\n              </option>\n            ))}\n          </optgroup>\n        )}\n      </RegionSelect>\n    </Root>\n  );\n};\n\nexport default CitySearch;\n","import React from \"react\";\nimport { SecondaryHeaderContainer } from \"../../../styling/GlobalGrid\";\nimport styled from \"styled-components/macro\";\nimport {\n  backgroundMedium,\n  defaultPadding,\n} from \"../../../styling/styleUtils\";\nimport { UtilityBarPortal } from \"./UtilityBar\";\nimport { columnsToRowsBreakpoint } from \"../Utils\";\nimport CitySearch from \"./CitySearch\";\nimport { Route, Switch } from \"react-router-dom\";\nimport { CityRoutes } from \"../../../routing/routes\";\n\nconst Root = styled(SecondaryHeaderContainer)`\n  background-color: ${backgroundMedium};\n  padding: 0.4rem ${defaultPadding}rem;\n  box-sizing: border-box;\n  display: grid;\n  grid-template-columns: 1fr auto;\n  grid-gap: 0.7rem;\n  pointer-events: auto;\n  min-height: 40px;\n\n  @media (max-width: 1100px) {\n    padding: 0.55rem;\n  }\n\n  @media (max-width: ${columnsToRowsBreakpoint}px) {\n    grid-template-columns: auto;\n    grid-rows-columns: auto auto;\n    padding-bottom: 0.45rem;\n    min-height: 83px;\n  }\n`;\n\nconst SecondaryHeader = () => {\n  return (\n    <Root>\n      <Switch>\n        <Route path={CityRoutes.CityBase} component={CitySearch} />\n      </Switch>\n      <UtilityBarPortal />\n    </Root>\n  );\n};\n\nexport default SecondaryHeader;\n","import React from \"react\";\nimport styled from \"styled-components/macro\";\nimport { breakPoints } from \"../../../styling/GlobalGrid\";\nimport { Link, useHistory, matchPath } from \"react-router-dom\";\nimport { Props as BaseProps } from \"./\";\nimport {\n  baseColor,\n  primaryColorLight,\n  secondaryFont,\n} from \"../../../styling/styleUtils\";\nimport raw from \"raw.macro\";\n\nconst Root = styled.div`\n  padding-top: 0.75rem;\n  display: none;\n  align-items: center;\n  justify-content: center;\n  grid-template-columns: auto 1fr auto;\n\n  @media ${breakPoints.small} {\n    display: grid;\n  }\n`;\n\nconst MobileButtonContainer = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n`;\n\nconst MobileButton = styled.button`\n  background-color: ${primaryColorLight};\n  border: none;\n  padding: 0.75rem 1.25rem;\n  font-family: ${secondaryFont};\n  text-transform: uppercase;\n  font-size: 0.85rem;\n  color: ${baseColor};\n  max-width: 300px;\n  display: flex;\n  align-items: center;\n  pointer-events: all;\n`;\n\nconst ChevronSVG = raw(\"../../../assets/icons/chevron.svg\");\n\nconst arrowStyles = `\n  margin: 1rem 0.5rem;\n  color: ${baseColor};\n  text-decoration: none;\n  pointer-events: all;\n`;\n\nconst ArrowBase = styled(Link)`\n  ${arrowStyles}\n`;\n\nconst DisabledArrow = styled.div`\n  ${arrowStyles}\n  opacity: 0.25;\n`;\n\nconst SvgBase = styled.div`\n  width: 2.75rem;\n  height: 1.85rem;\n  padding: 0.35rem 0.5rem;\n  box-sizing: border-box;\n\n  svg {\n    width: 100%;\n    height: 100%;\n\n    polyline {\n      stroke: ${baseColor};\n    }\n  }\n`;\n\nconst NextSvg = styled(SvgBase)`\n  svg {\n    transform: rotate(-90deg);\n  }\n`;\nconst PrevSvg = styled(SvgBase)`\n  svg {\n    transform: rotate(90deg);\n  }\n`;\n\nconst DownArrow = styled.span`\n  width: 0.9rem;\n  height: 0.9rem;\n  margin: 0 0.7rem;\n  flex-shrink: 0;\n  display: inline-block;\n  box-sizing: border-box;\n\n  svg {\n    width: 100%;\n    height: 100%;\n\n    polyline {\n      fill: ${baseColor};\n    }\n  }\n`;\n\nconst UpArrow = styled(DownArrow)`\n  svg {\n    transform: rotate(180deg);\n  }\n`;\n\ninterface Props extends BaseProps {\n  mobileMenuOpen: boolean;\n  toggleMenu: () => void;\n  closeMenu: () => void;\n}\n\nconst MobileMenu = ({\n  baseLinkData,\n  toggleMenu,\n  mobileMenuOpen,\n  closeMenu,\n}: Props) => {\n  const history = useHistory();\n\n  if (baseLinkData.length === 0) {\n    console.warn(\"MobileMenu component are recieving baseLinkData of length 0\");\n    return null;\n  }\n\n  const linkIndex = baseLinkData.findIndex((d) => {\n    const match = matchPath(history.location.pathname, d.url);\n    return match ? true : false;\n  });\n\n  if (linkIndex === -1) {\n    console.warn(\n      \"URL did not match any links provided to MobileMenu component\",\n    );\n    return null;\n  } else {\n    const pageTitle = baseLinkData[linkIndex].label;\n    const prevLink =\n      linkIndex > 0 ? (\n        <ArrowBase\n          to={baseLinkData[linkIndex - 1].url + history.location.search}\n          onClick={() => closeMenu()}\n        >\n          <PrevSvg dangerouslySetInnerHTML={{ __html: ChevronSVG }} />\n        </ArrowBase>\n      ) : (\n        <DisabledArrow>\n          <PrevSvg dangerouslySetInnerHTML={{ __html: ChevronSVG }} />\n        </DisabledArrow>\n      );\n    const nextLink =\n      linkIndex < baseLinkData.length - 1 ? (\n        <ArrowBase\n          to={baseLinkData[linkIndex + 1].url + history.location.search}\n          onClick={() => closeMenu()}\n        >\n          <NextSvg dangerouslySetInnerHTML={{ __html: ChevronSVG }} />\n        </ArrowBase>\n      ) : (\n        <DisabledArrow>\n          <NextSvg dangerouslySetInnerHTML={{ __html: ChevronSVG }} />\n        </DisabledArrow>\n      );\n\n    const toggleArrow = mobileMenuOpen ? (\n      <UpArrow dangerouslySetInnerHTML={{ __html: ChevronSVG }} />\n    ) : (\n      <DownArrow dangerouslySetInnerHTML={{ __html: ChevronSVG }} />\n    );\n\n    return (\n      <Root>\n        {prevLink}\n        <MobileButtonContainer>\n          <MobileButton onClick={toggleMenu}>\n            {pageTitle}\n            {toggleArrow}\n          </MobileButton>\n        </MobileButtonContainer>\n        {nextLink}\n      </Root>\n    );\n  }\n};\n\nexport default MobileMenu;\n","import React, { useRef, useEffect, useState, useContext } from \"react\";\nimport {\n  NavigationContainer,\n  breakPoints,\n  breakPointValues,\n} from \"../../../styling/GlobalGrid\";\nimport {\n  secondaryFont,\n  baseColor,\n  primaryColor,\n  primaryColorLight,\n  lightBorderColor,\n  backgroundDark,\n} from \"../../../styling/styleUtils\";\nimport styled from \"styled-components/macro\";\nimport { Link, useHistory, matchPath } from \"react-router-dom\";\nimport AppContext from \"../../../contextProviders/appContext\";\nimport MobileMenu from \"./MobileMenu\";\nimport { GlobalQueryParams } from \"../../../routing/routes\";\nimport useQueryParams from \"../../../hooks/useQueryParams\";\nimport queryString from \"query-string\";\n\nconst collapsibleMenuClassName = \"collapsible-side-menu-root\";\n\nconst Container = styled(NavigationContainer)`\n  pointer-events: all;\n\n  &:hover {\n    .${collapsibleMenuClassName} {\n      outline: dashed 1px ${lightBorderColor};\n    }\n  }\n\n  @media ${breakPoints.small} {\n    &:hover {\n      .${collapsibleMenuClassName} {\n        outline: none;\n      }\n    }\n  }\n`;\n\nconst rootWidth = {\n  default: 240, // in px\n  medium: 205, // in px\n};\n\nconst Root = styled.div`\n  width: ${rootWidth.default}px;\n  position: relative;\n  padding-top: 1rem;\n  margin: auto;\n  box-sizing: border-box;\n\n  svg {\n    height: 380px;\n    position: relative;\n    pointer-events: none;\n    left: -2px;\n\n    path {\n      fill: none;\n      stroke: #1f262b;\n      stroke-miterlimit: 10;\n      stroke-width: 2px;\n\n      @media not all and (min-resolution: 0.001dpcm) {\n        @media {\n          fill: #fff;\n        }\n      }\n    }\n\n    circle {\n      fill: #151f26;\n    }\n  }\n\n  @media ${breakPoints.medium} {\n    width: ${rootWidth.medium}px;\n\n    svg {\n      height: 280px;\n    }\n  }\n\n  @media ${breakPoints.small} {\n    display: none;\n    height: auto;\n    max-height: initial;\n    width: 100%;\n    max-width: 300px;\n    position: absolute;\n    z-index: 150;\n    background-color: #fff;\n    border: solid 1px ${lightBorderColor};\n    margin: 0 auto;\n    right: 0;\n    left: 0;\n\n    svg {\n      display: none;\n    }\n  }\n`;\n\nconst clipPathIdDesktop = \"side-navigation-circle-menu-clip-path-desktop\";\nconst clipPathIdTablet = \"side-navigation-circle-menu-clip-path-tablet\";\n\nconst LinkContainer = styled.div`\n  clip-path: url(#${clipPathIdDesktop});\n\n  @media ${breakPoints.medium} {\n    webkit-clip-path: none;\n    clip-path: url(#${clipPathIdTablet});\n  }\n\n  @media ${breakPoints.small} {\n    clip-path: none;\n  }\n\n  @media not all and (min-resolution: 0.001dpcm) {\n    @media {\n      clip-path: none;\n    }\n  }\n`;\n\nconst acitveLinkClass = \"main-circle-side-nav-active-nav-link-page\";\n\nconst NavLink = styled(Link)`\n  position: absolute;\n  font-family: ${secondaryFont};\n  text-transform: uppercase;\n  font-size: 0.7rem;\n  letter-spacing: -0.3px;\n  font-weight: 600;\n  text-decoration: none;\n  white-space: pre-line;\n  padding-left: 1.25rem;\n  transform: translate(0, -40%);\n  color: ${baseColor};\n  transition: all 0.2s ease;\n  box-sizing: border-box;\n  pointer-events: auto;\n\n  &:after {\n    content: \"\";\n    z-index: -1;\n    position: absolute;\n    left: 0;\n    top: 0;\n    width: 100%;\n    height: 150%;\n  }\n\n  &:before {\n    content: \"\";\n    z-index: -1;\n    position: absolute;\n    width: 200%;\n    height: 120%;\n    background-color: ${primaryColorLight};\n    top: -10%;\n    left: -250%;\n    transition: all 0.2s ease;\n  }\n\n  &:hover:before,\n  &.${acitveLinkClass}:before {\n    left: -95%;\n  }\n\n  @media ${breakPoints.medium} {\n    font-size: 0.6rem;\n  }\n\n  @media ${breakPoints.small} {\n    position: static;\n    display: block;\n    transform: translate(0);\n    font-size: 0.85rem;\n    margin: 0.5rem 0.5rem;\n    padding: 0.5rem 0.5rem 0.85rem;\n    border-bottom: solid 1px ${lightBorderColor};\n    white-space: normal;\n\n    &:before,\n    &:after {\n      display: none;\n    }\n\n    &:last-of-type {\n      border-bottom: none;\n    }\n  }\n`;\n\nconst BetaIcon = styled.div`\n  position: absolute;\n  font-family: ${secondaryFont};\n  text-transform: uppercase;\n  letter-spacing: -0.3px;\n  font-style: italic;\n  font-weight: 600;\n  color: #fff;\n  background-color: ${primaryColor};\n  font-size: 8px;\n  padding: 1px 3px 1px 2px;\n  top: 0;\n  transform: translate(0, calc(-100% - 0.1rem));\n  text-align: center;\n  font-size: 0.6rem;\n\n  @media ${breakPoints.small} {\n    top: -0.3rem;\n    right: 0;\n  }\n`;\n\nconst CollapseButton = styled.button`\n  position: absolute;\n  top: 0;\n  right: 0;\n  transform: translate(0, -100%);\n  font-family: ${secondaryFont};\n  text-transform: uppercase;\n  background-color: transparent;\n  border: none;\n  font-size: 0.6rem;\n\n  &:hover {\n    background-color: ${baseColor};\n    color: #fff;\n  }\n\n  @media ${breakPoints.small} {\n    display: none;\n  }\n`;\n\nconst CollapsedMenu = styled.div`\n  position: relative;\n  padding-top: 1rem;\n  margin: auto;\n  box-sizing: border-box;\n  height: 380px;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  width: 2rem;\n\n  &:hover {\n    z-index: 1000;\n  }\n\n  @media ${breakPoints.medium} {\n    height: 280px;\n  }\n\n  @media ${breakPoints.small} {\n    display: none;\n  }\n`;\n\nconst CollapsedLink = styled(Link)`\n  white-space: nowrap;\n  min-width: 1rem;\n  width: 1rem;\n  height: 1rem;\n  border-radius: 1000px;\n  border: solid 2px ${baseColor};\n  font-size: 0;\n  color: rgba(0, 0, 0, 0);\n  margin-left: 0.3rem;\n  transition: all 0.2s ease;\n  letter-spacing: -0.3px;\n  font-weight: 600;\n  text-decoration: none;\n  display: flex;\n\n  &:hover {\n    font-family: ${secondaryFont};\n    text-transform: uppercase;\n    font-size: 0.7rem;\n    padding: 0 1.25rem;\n    color: #fff;\n    background-color: ${baseColor};\n    width: min-content;\n  }\n\n  &.${acitveLinkClass}:before {\n    content: \"\";\n    display: block;\n    width: 0.75rem;\n    height: 0.75rem;\n    background-color: ${baseColor};\n    margin: auto;\n    border-radius: 1000px;\n  }\n`;\n\nconst ExpandButton = styled.div`\n  width: 1.15rem;\n  writing-mode: vertical-rl;\n  text-orientation: mixed;\n  background-color: ${baseColor};\n  color: #fff;\n  transform: rotate(180deg);\n  padding: 0.4rem 0.2rem;\n  text-transform: uppercase;\n  font-size: 0.75rem;\n  font-family: ${secondaryFont};\n  cursor: pointer;\n  letter-spacing: 1px;\n`;\n\nconst ExtendArrow = styled.span`\n  display: inline-block;\n  transform: rotate(90deg);\n  position: relative;\n  left: -0.1rem;\n  padding: 3px 0;\n  cursor: pointer;\n`;\n\nconst Tooltip = styled.div`\n  position: fixed;\n  transform: translate(120px, -50%);\n  background-color: ${backgroundDark};\n  color: #fff;\n  padding: 0.5rem 0.75rem;\n  font-size: 0.8rem;\n  z-index: 100;\n  pointer-events: all;\n  max-width: 170px;\n\n  &:before {\n    content: \"\";\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    left: -0.4rem;\n    margin: auto;\n    width: 0;\n    height: 0;\n    border-top: 0.4rem solid transparent;\n    border-bottom: 0.4rem solid transparent;\n\n    border-right: 0.4rem solid ${backgroundDark};\n  }\n`;\n\ninterface LinkDatum {\n  label: string;\n  url: string;\n  top: number;\n  absoluteTop: number;\n  left: number;\n  beta?: boolean;\n  tooltipText?: React.ReactNode;\n  removeParams?: (keyof GlobalQueryParams)[];\n}\n\nconst radius = 4.37;\n\nexport interface Props {\n  baseLinkData: {\n    label: string;\n    url: string;\n    beta?: boolean;\n    tooltipText?: React.ReactNode;\n    removeParams?: (keyof GlobalQueryParams)[];\n  }[];\n}\n\ninterface SideNavProps extends Props {\n  setCollapsed: (value: boolean) => void;\n  collapsed: boolean;\n}\n\nconst SideNavigation = ({\n  baseLinkData,\n  collapsed,\n  setCollapsed,\n}: SideNavProps) => {\n  const history = useHistory();\n  const params = useQueryParams();\n  const { windowDimensions } = useContext(AppContext);\n\n  const [linkData, setLinkData] = useState<LinkDatum[]>([]);\n  const [mobileMenuOpen, setMobileMenuOpen] = useState<boolean>(false);\n  const [containerHovered, setContainerHovered] = useState<boolean>(false);\n\n  const rootRef = useRef<HTMLDivElement | null>(null);\n\n  const circle_0 = useRef<SVGCircleElement | null>(null);\n  const circle_1 = useRef<SVGCircleElement | null>(null);\n  const circle_2 = useRef<SVGCircleElement | null>(null);\n  const circle_3 = useRef<SVGCircleElement | null>(null);\n  const circle_4 = useRef<SVGCircleElement | null>(null);\n\n  useEffect(() => {\n    if (collapsed) {\n      setLinkData(\n        baseLinkData.map((l) => ({ ...l, top: 0, left: 0, absoluteTop: 0 })),\n      );\n    } else {\n      const refArray = [circle_0, circle_1, circle_2, circle_3, circle_4];\n      const pageScrollTop =\n        document.documentElement.scrollTop || document.body.scrollTop;\n      const containerPosition =\n        rootRef && rootRef.current ? rootRef.current.offsetTop : 0;\n      const offset = pageScrollTop - containerPosition;\n      const newLinkDatum: LinkDatum[] = [];\n      refArray.forEach((ref, i) => {\n        if (i >= baseLinkData.length) return;\n        const node = ref.current;\n        if (node) {\n          const { top, left } = node.getBoundingClientRect();\n          newLinkDatum.push({\n            ...baseLinkData[i],\n            top: top + offset,\n            left,\n            absoluteTop: top,\n          });\n        }\n      });\n      setLinkData([...newLinkDatum]);\n    }\n  }, [\n    rootRef,\n    circle_0,\n    circle_1,\n    circle_2,\n    circle_3,\n    circle_4,\n    baseLinkData,\n    windowDimensions,\n    collapsed,\n    mobileMenuOpen,\n  ]);\n\n  const tooltips: React.ReactElement[] = [];\n\n  const links = linkData.map((d, i) => {\n    const match = matchPath(history.location.pathname, baseLinkData[i].url);\n    const className = match ? acitveLinkClass : undefined;\n    const beta = d.beta ? <BetaIcon>Beta</BetaIcon> : null;\n    let url = d.url;\n    if (d.removeParams) {\n      const newParams: any = {};\n      for (const key in params) {\n        if (!d.removeParams.includes(key as any)) {\n          newParams[key] = params[key as keyof GlobalQueryParams];\n        }\n      }\n      const query = queryString.stringify(newParams);\n      url = query ? url + \"?\" + query : url;\n    } else {\n      url = url + history.location.search;\n    }\n    if (d.tooltipText && !mobileMenuOpen && !collapsed) {\n      tooltips.push(\n        <Tooltip style={{ top: d.absoluteTop, left: d.left }}>\n          {d.tooltipText}\n        </Tooltip>,\n      );\n    }\n    const LinkRoot = mobileMenuOpen || !collapsed ? NavLink : CollapsedLink;\n    return (\n      <LinkRoot\n        to={url}\n        key={d.label + d.url}\n        style={{ top: d.top, left: d.left }}\n        className={className}\n        onClick={() => (mobileMenu ? setMobileMenuOpen(false) : null)}\n      >\n        {d.label}\n        {beta}\n      </LinkRoot>\n    );\n  });\n\n  const mobileMenu =\n    windowDimensions.width <= breakPointValues.width.small ||\n    windowDimensions.height <= breakPointValues.height.small ? (\n      <MobileMenu\n        baseLinkData={baseLinkData}\n        mobileMenuOpen={mobileMenuOpen}\n        toggleMenu={() => setMobileMenuOpen((current) => !current)}\n        closeMenu={() => setMobileMenuOpen(false)}\n      />\n    ) : null;\n\n  const collapseButton = containerHovered ? (\n    <CollapseButton onClick={() => setCollapsed(true)}>\n      {\"<\"} Collapse\n    </CollapseButton>\n  ) : null;\n\n  const menu =\n    mobileMenuOpen || !collapsed ? (\n      <Root\n        ref={rootRef}\n        style={{\n          display: mobileMenuOpen ? \"block\" : undefined,\n        }}\n        className={collapsibleMenuClassName}\n      >\n        {collapseButton}\n        <LinkContainer>{links}</LinkContainer>\n        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 70 377.85\">\n          <clipPath id={clipPathIdDesktop}>\n            <path d=\"M0,0v0.8C41.6,35.5,68.3,112,64.4,199.4C61,274.8,35.6,340.1,0,376.4l0,4.4h366.4V0H0z\" />\n          </clipPath>\n          <clipPath id={clipPathIdTablet}>\n            <path d=\"M0,0v0.6c30.7,25.5,50.4,81.9,47.5,146.3C44.9,202.5,26.2,250.6,0,277.3l0,3.2h270V0H0z\" />\n          </clipPath>\n          <path\n            d=\"M569.33,197.85c42.17,34.26,69.37,111.25,65.4,199.38-3.4,75.47-28.83,140.75-64.37,177\"\n            transform=\"translate(-568.7 -197.07)\"\n          />\n          <circle ref={circle_0} cx=\"20.1\" cy=\"20.4\" r={radius} />\n          <circle ref={circle_1} cx=\"53.4\" cy=\"90.1\" r={radius} />\n          <circle ref={circle_2} cx=\"65.7\" cy=\"184.6\" r={radius} />\n          {baseLinkData.length > 3 && <circle ref={circle_3} cx=\"55.8\" cy=\"269.3\" r={radius} />}\n          {baseLinkData.length > 4 && <circle ref={circle_4} cx=\"25.3\" cy=\"347\" r={radius} />}\n        </svg>\n      </Root>\n    ) : (\n      <CollapsedMenu>\n        <ExpandButton onClick={() => setCollapsed(false)}>\n          Extend\n          <ExtendArrow>{\">\"}</ExtendArrow>\n        </ExpandButton>\n        {links}\n      </CollapsedMenu>\n    );\n\n  return (\n    <>\n      <Container\n        onMouseEnter={() => setContainerHovered(true)}\n        onMouseLeave={() => setContainerHovered(false)}\n      >\n        {mobileMenu}\n        {menu}\n      </Container>\n      {tooltips}\n    </>\n  );\n};\n\nexport default SideNavigation;\n","import React, { useState } from \"react\";\nimport Header from \"../navigation/header\";\nimport SecondaryHeader from \"../navigation/secondaryHeader\";\nimport SideNavigation, { Props as NavProps } from \"../navigation/sideNav\";\nimport { Root as RootBase, ContentContainer } from \"../../styling/GlobalGrid\";\nimport styled from \"styled-components/macro\";\n\nconst Root = styled(RootBase)`\n  pointer-events: none;\n`;\n\ntype Props = NavProps & {\n  children: React.ReactNode;\n};\n\nconst InnerPage = (props: Props) => {\n  const { children, baseLinkData } = props;\n  const [collapsed, setCollapsed] = useState<boolean>(false);\n  return (\n    <Root>\n      <Header />\n      <SecondaryHeader />\n      <SideNavigation\n        baseLinkData={baseLinkData}\n        collapsed={collapsed}\n        setCollapsed={setCollapsed}\n      />\n      <ContentContainer key={\"container-collapsed-\" + collapsed}>\n        {children}\n      </ContentContainer>\n    </Root>\n  );\n};\n\nexport default InnerPage;\n","import React from \"react\";\nimport { primaryFont } from \"../../../styling/styleUtils\";\nimport styled, { css } from \"styled-components/macro\";\nimport CityverseLogoSVG from \"../../../assets/icons/cities-logo-dark.svg\";\nimport GitHubIconSVG from \"./assets/github.svg\";\nimport { Routes } from \"../../../routing/routes\";\nimport { Link } from \"react-router-dom\";\n\nconst Root = styled.div`\n  grid-column: 1 / -1;\n  grid-row: -1;\n  color: #333;\n`;\n\nconst Container = styled.div`\n  padding: 2rem 2rem 2rem;\n  background-color: #e6e6e6;\n`;\n\nconst smallMediaWidth = 900; // in px\n\nconst Content = styled.div`\n  display: grid;\n  grid-column-gap: 3rem;\n  grid-template-columns: 2fr auto auto 2fr;\n  max-width: 1200px;\n  margin: 0 auto;\n\n  @media (max-width: 1000px) {\n    grid-column-gap: 1.5rem;\n  }\n  @media (max-width: ${smallMediaWidth}px) {\n    grid-template-columns: 1fr 1fr;\n    grid-template-rows: auto auto auto;\n  }\n`;\n\nconst ColumnOrRow = styled.div`\n  display: flex;\n  flex-direction: column;\n  margin-bottom: 1rem;\n`;\n\nconst CityverseLogo = styled.img`\n  width: 250px;\n  max-width: 100%;\n  height: 100%;\n`;\n\nconst Subtitle = styled.h4`\n  margin: 0.25rem 0 0;\n  font-weight: 400;\n  text-transform: none;\n  font-size: 0.865rem;\n  text-decoration: none;\n  color: #333;\n`;\n\nconst CityverseVersion = styled.p`\n  margin: 0.5rem 0 0;\n  font-style: italic;\n  text-align: center;\n  width: 100%;\n`;\n\nconst CenteredColumn = styled(ColumnOrRow)`\n  justify-content: flex-start;\n  margin-bottom: 0;\n`;\n\nconst InternalLinksColumn = styled(ColumnOrRow)`\n  display: flex;\n  flex-direction: column;\n\n  @media (max-width: ${smallMediaWidth}px) {\n    grid-column: 1;\n    grid-row: 2;\n    padding: 2rem 0 0;\n    display: flex;\n    align-items: center;\n    text-align: center;\n  }\n`;\n\nconst ExternalLinksColumn = styled(ColumnOrRow)`\n  display: flex;\n  flex-direction: column;\n\n  @media (max-width: ${smallMediaWidth}px) {\n    grid-column: 2;\n    grid-row: 2;\n    padding: 2rem 0 0;\n    display: flex;\n    align-items: center;\n    text-align: center;\n  }\n`;\n\nconst CityverseLogoColumn = styled(CenteredColumn)`\n  display: flex;\n  align-items: center;\n  text-align: center;\n\n  @media (max-width: ${smallMediaWidth}px) {\n    grid-column: 1 / -1;\n    grid-row: 1;\n  }\n`;\n\nconst AttributionColumn = styled(CenteredColumn)`\n  display: flex;\n  align-items: flex-start;\n  justify-content: flex-start;\n\n  @media (max-width: ${smallMediaWidth}px) {\n    grid-column: 1 / -1;\n    grid-row: 3;\n    align-items: center;\n    text-align: center;\n  }\n`;\n\nconst AttributionInfo = styled.small`\n  margin-top: 0;\n  width: 100%;\n  max-width: 300px;\n  font-family: ${primaryFont};\n  font-size: 0.75rem;\n  line-height: 1.6;\n\n  a {\n    color: #333;\n  }\n`;\n\nconst GitHubLink = styled.a`\n  display: inline-flex;\n  align-items: center;\n  gap: 0.4rem;\n  margin-top: 0.75rem;\n  color: #333;\n  text-decoration: none;\n  font-size: 0.85rem;\n\n  &:hover {\n    text-decoration: underline;\n  }\n`;\n\nconst GitHubIcon = styled.img`\n  width: 1.25rem;\n  height: 1.25rem;\n`;\n\nconst linkStyles = css`\n  color: #333;\n  text-decoration: none;\n  text-transform: uppercase;\n  margin-bottom: 0.5rem;\n\n  &:hover {\n    text-decoration: underline;\n  }\n\n  @media (max-width: 1000px) {\n    font-size: 0.75rem;\n  }\n`;\n\nconst StyledInternalLink = styled(Link)`\n  ${linkStyles}\n`;\nconst StyledExternalLink = styled.a`\n  ${linkStyles}\n`;\n\nconst LicenseAndReadme = styled.div`\n  padding: 0.5rem;\n  text-align: center;\n  background-color: #333;\n  color: #fff;\n  font-size: 0.875rem;\n  margin-bottom: 0;\n\n  a {\n    color: #fff;\n    text-decoration: none;\n    border-bottom: solid 1px transparent;\n\n    &:hover {\n      border-bottom-color: #fff;\n    }\n  }\n`;\n\nconst StandardFooter = () => {\n  return (\n    <Root>\n      <Container>\n        <Content>\n          <CityverseLogoColumn>\n            <Link to={Routes.Landing}>\n              <CityverseLogo\n                src={CityverseLogoSVG}\n                alt={\"Metroverse-Jobs\"}\n              />\n            </Link>\n            <Subtitle>BLS Occupation Data Explorer</Subtitle>\n            <CityverseVersion>\n              Version {process.env.REACT_APP_METROVERSE_VERSION}\n            </CityverseVersion>\n          </CityverseLogoColumn>\n          <InternalLinksColumn>\n            <StyledInternalLink to={Routes.Landing}>\n              Region Profiles\n            </StyledInternalLink>\n            <StyledInternalLink to={Routes.AboutBase}>About</StyledInternalLink>\n            <StyledInternalLink to={Routes.ContactBase}>\n              Contact\n            </StyledInternalLink>\n            <StyledInternalLink to={Routes.FaqBase}>FAQ</StyledInternalLink>\n          </InternalLinksColumn>\n          <ExternalLinksColumn>\n            <StyledExternalLink\n              href=\"https://metroverse.cid.harvard.edu/\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n            >\n              Original Metroverse\n            </StyledExternalLink>\n            <StyledExternalLink\n              href=\"https://github.com/shahzorkhan123/metroverse-jobs\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n            >\n              GitHub Repo\n            </StyledExternalLink>\n            <StyledExternalLink\n              href=\"https://www.bls.gov/oes/\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n            >\n              BLS OES Data\n            </StyledExternalLink>\n          </ExternalLinksColumn>\n          <AttributionColumn>\n            <AttributionInfo>\n              Built on the open-source{\" \"}\n              <a\n                href=\"https://metroverse.cid.harvard.edu/\"\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n              >\n                Metroverse\n              </a>{\" \"}\n              by the{\" \"}\n              <a\n                href=\"https://growthlab.cid.harvard.edu/\"\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n              >\n                Growth Lab\n              </a>{\" \"}\n              at Harvard University.\n            </AttributionInfo>\n            <GitHubLink\n              href=\"https://github.com/shahzorkhan123/metroverse-jobs\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n            >\n              <GitHubIcon\n                src={GitHubIconSVG}\n                alt=\"GitHub\"\n              />\n              View on GitHub\n            </GitHubLink>\n          </AttributionColumn>\n        </Content>\n      </Container>\n      <LicenseAndReadme>\n        <div>\n          Licensed under{\" \"}\n          <a\n            href=\"https://creativecommons.org/licenses/by-nc-sa/4.0/\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n            Attribution-NonCommercial-ShareAlike 4.0 International (CC BY-NC-SA\n            4.0)\n          </a>\n          .\n        </div>\n        <div style={{ marginTop: \"0.4rem\" }}>\n          Built on{\" \"}\n          <a\n            href=\"https://github.com/cid-harvard/cities-atlas-front-end\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n            Metroverse\n          </a>\n          {\" by \"}\n          <a\n            href=\"https://growthlab.cid.harvard.edu/\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n            Harvard Growth Lab\n          </a>\n          {\" | \"}\n          Data from{\" \"}\n          <a\n            href=\"https://www.bls.gov/oes/\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n            BLS OES\n          </a>\n        </div>\n      </LicenseAndReadme>\n    </Root>\n  );\n};\n\nexport default StandardFooter;\n","import React from \"react\";\nimport Header from \"../../navigation/header\";\nimport {\n  InformationalPageRoot as RootBase,\n  ContentContainer,\n  breakPoints,\n} from \"../../../styling/GlobalGrid\";\nimport {\n  primaryColorDark,\n  primaryHoverColor,\n  lightBaseColor,\n  baseColor,\n} from \"../../../styling/styleUtils\";\nimport styled from \"styled-components/macro\";\nimport Footer from \"./Footer\";\n\nexport const rootId = \"infromational-page-root-scroll-id\";\n\nconst Root = styled(RootBase)`\n  overflow: auto;\n`;\n\nconst ContentStandard = styled(ContentContainer)`\n  display: grid;\n  padding: 1rem;\n  grid-template-columns: auto 15rem;\n  grid-column-gap: 5rem;\n  max-width: 950px;\n  width: 100%;\n  box-sizing: border-box;\n  margin: 0 auto;\n  position: relative;\n\n  h3 {\n    color: ${baseColor};\n  }\n\n  h4 {\n    color: ${lightBaseColor};\n    font-weight: 600;\n    margin-bottom: 0.5rem;\n  }\n\n  p a,\n  h4 a {\n    color: ${primaryColorDark};\n\n    &:hover {\n      color: ${primaryHoverColor};\n    }\n  }\n\n  li {\n    margin-bottom: 0.5rem;\n  }\n\n  cite {\n    display: block;\n    margin: 2rem 0 2rem;\n    font-style: normal;\n    padding-left: 0.875rem;\n    border-left: solid 1px #dfdfdf;\n    color: ${lightBaseColor};\n  }\n\n  @media (max-width: 760px) {\n    grid-template-columns: auto 8rem;\n    grid-column-gap: 1rem;\n  }\n\n  @media (max-width: 400px) {\n    grid-template-columns: auto 4rem;\n    grid-column-gap: 0.75rem;\n  }\n\n  @media ${breakPoints.small} {\n    height: initial;\n  }\n`;\n\nconst ContentFull = styled(ContentContainer)`\n  padding: 1rem;\n  width: 100%;\n  position: relative;\n  box-sizing: border-box;\n`;\n\ninterface Props {\n  children: React.ReactNode;\n  contentFull?: boolean;\n}\n\nconst InformationalPage = (props: Props) => {\n  const { children, contentFull } = props;\n  const Content = contentFull ? ContentFull : ContentStandard;\n  return (\n    <Root id={rootId}>\n      <Header />\n      <Content>{children}</Content>\n      <Footer />\n    </Root>\n  );\n};\n\nexport default InformationalPage;\n","import React, { useEffect, useState } from \"react\";\nimport styled from \"styled-components/macro\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport {\n  primaryColor,\n  backgroundMedium,\n  backgroundDark,\n} from \"../../../styling/styleUtils\";\nimport debounce from \"lodash/debounce\";\nimport { rootId } from \"./\";\n\nconst StickyContainer = styled.div`\n  position: sticky;\n  top: 1rem;\n  display: flex;\n  flex-direction: column;\n`;\n\nconst LinkBase = styled(Link)`\n  padding: 0.75rem 0.65rem;\n  border-left: solid 4px rgba(0, 0, 0, 0);\n  text-transform: uppercase;\n  color: ${backgroundDark};\n  text-decoration: none;\n  margin-bottom: 0.65rem;\n  font-size: 1.1rem;\n\n  &:hover,\n  &.active {\n    background-color: ${backgroundMedium};\n    border-left-color: ${primaryColor};\n  }\n\n  @media (max-width: 760px) {\n    font-size: 0.9rem;\n    padding: 0.5rem 0.35rem;\n  }\n\n  @media (max-width: 400px) {\n    font-size: 0.75rem;\n    padding: 0.35rem 0.15rem;\n  }\n`;\n\nexport interface Section {\n  label: string;\n  route: string;\n  active: boolean;\n  Component: (props: any) => JSX.Element;\n  ref: React.MutableRefObject<HTMLDivElement | null>;\n}\n\ninterface Props {\n  sections: Section[];\n}\n\nconst Content = (props: Props) => {\n  const { sections } = props;\n  const { replace } = useHistory();\n  const [firstRender, setFirstRender] = useState<boolean>(true);\n\n  useEffect(() => {\n    const node = document.querySelector(\"#\" + rootId);\n    const onScroll = debounce(() => {\n      if (node) {\n        const currentSection = [...sections].reverse().find(({ ref }) => {\n          const section = ref.current;\n          if (section && section.offsetTop < node.scrollTop + 200) {\n            return true;\n          } else {\n            return false;\n          }\n        });\n        if (currentSection) {\n          replace(currentSection.route);\n        }\n      }\n    }, 50);\n    if (node) {\n      node.addEventListener(\"scroll\", onScroll);\n    }\n    return () => {\n      if (node) {\n        node.removeEventListener(\"scroll\", onScroll);\n      }\n    };\n  }, [sections, replace]);\n\n  useEffect(() => {\n    if (firstRender) {\n      const currentSection = sections.findIndex(({ active }) => active);\n      if (currentSection !== -1 && sections[currentSection]) {\n        const node = sections[currentSection].ref.current;\n        const root = document.querySelector(\"#\" + rootId);\n        if (currentSection === 0 && root) {\n          root.scrollTo({ top: 0, behavior: \"smooth\" });\n        } else if (node) {\n          node.scrollIntoView({ behavior: \"smooth\" });\n        }\n      }\n      setFirstRender(false);\n    }\n  }, [sections, firstRender]);\n\n  const navLinks: React.ReactElement<any>[] = [];\n  const contentSections: React.ReactElement<any>[] = [];\n  sections.forEach(({ route, label, active, ref, Component }) => {\n    navLinks.push(\n      <LinkBase\n        to={route}\n        key={\"side-nav-to-\" + route}\n        className={active ? \"active\" : undefined}\n        onClick={() => setFirstRender(true)}\n      >\n        {label}\n      </LinkBase>,\n    );\n    contentSections.push(\n      <div key={\"component-for-\" + route} ref={ref}>\n        <Component />\n      </div>,\n    );\n  });\n  return (\n    <>\n      <div>{contentSections}</div>\n      <div>\n        <StickyContainer>{navLinks}</StickyContainer>\n      </div>\n    </>\n  );\n};\n\nexport default Content;\n","import React from \"react\";\nimport useFluent from \"../../../hooks/useFluent\";\n\nconst AboutWhatIs = () => {\n  const getString = useFluent();\n  return (\n    <>\n      <h1>{getString(\"about-what-is-title\")}</h1>\n      <div\n        dangerouslySetInnerHTML={{ __html: getString(\"about-what-is-html\") }}\n      />\n    </>\n  );\n};\n\nexport default AboutWhatIs;\n","import React from \"react\";\nimport useFluent from \"../../../hooks/useFluent\";\nimport styled from \"styled-components/macro\";\nimport { baseColor } from \"../../../styling/styleUtils\";\n\nconst Content = styled.div`\n  .team-member-name {\n    color: ${baseColor};\n  }\n`;\n\nconst AboutTeam = () => {\n  const getString = useFluent();\n  return (\n    <>\n      <h1>{getString(\"about-team-title\")}</h1>\n      <Content\n        dangerouslySetInnerHTML={{ __html: getString(\"about-team-html\") }}\n      />\n    </>\n  );\n};\n\nexport default AboutTeam;\n","import React from \"react\";\nimport useFluent from \"../../../hooks/useFluent\";\n\nconst AboutPilotUserGroup = () => {\n  const getString = useFluent();\n  return (\n    <>\n      <h1>{getString(\"about-pilot-user-group-title\")}</h1>\n      <div\n        dangerouslySetInnerHTML={{\n          __html: getString(\"about-pilot-user-group-html\"),\n        }}\n      />\n    </>\n  );\n};\n\nexport default AboutPilotUserGroup;\n","import React from \"react\";\nimport useFluent from \"../../../hooks/useFluent\";\n\nconst AboutResearch = () => {\n  const getString = useFluent();\n  return (\n    <>\n      <h1>{getString(\"about-research-title\")}</h1>\n      <div\n        dangerouslySetInnerHTML={{ __html: getString(\"about-research-html\") }}\n      />\n    </>\n  );\n};\n\nexport default AboutResearch;\n","import React from \"react\";\nimport useFluent from \"../../../hooks/useFluent\";\n\nconst AboutGrowthLab = () => {\n  const getString = useFluent();\n  return (\n    <>\n      <h1>{getString(\"about-growth-lab-title\")}</h1>\n      <div\n        dangerouslySetInnerHTML={{ __html: getString(\"about-growth-lab-html\") }}\n      />\n      {/*buffer needed in order to compensate for such a small amount of content*/}\n      <div style={{ height: \"25vh\" }} />\n    </>\n  );\n};\n\nexport default AboutGrowthLab;\n","import React, { useRef } from \"react\";\nimport Content, {\n  Section,\n} from \"../../../components/templates/informationalPage/Content\";\nimport { AboutRoutes } from \"../../../routing/routes\";\nimport { useRouteMatch } from \"react-router-dom\";\nimport Helmet from \"react-helmet\";\nimport useFluent from \"../../../hooks/useFluent\";\nimport AboutWhatIs from \"./AboutWhatIs\";\nimport AboutTeam from \"./AboutTeam\";\nimport AboutPilotUserGroup from \"./AboutPilotUserGroup\";\nimport AboutResearch from \"./AboutResearch\";\nimport AboutGrowthLab from \"./AboutGrowthLab\";\n\nconst About = () => {\n  const getString = useFluent();\n  const sections: Section[] = [\n    {\n      label: getString(\"about-what-is-title\"),\n      route: AboutRoutes.AboutWhatIs,\n      active: Boolean(useRouteMatch(AboutRoutes.AboutWhatIs)),\n      Component: AboutWhatIs,\n      ref: useRef<HTMLDivElement | null>(null),\n    },\n    {\n      label: getString(\"about-team-title\"),\n      route: AboutRoutes.AboutTeam,\n      active: Boolean(useRouteMatch(AboutRoutes.AboutTeam)),\n      Component: AboutTeam,\n      ref: useRef<HTMLDivElement | null>(null),\n    },\n    {\n      label: getString(\"about-pilot-user-group-title\"),\n      route: AboutRoutes.AboutPilotUserGroup,\n      active: Boolean(useRouteMatch(AboutRoutes.AboutPilotUserGroup)),\n      Component: AboutPilotUserGroup,\n      ref: useRef<HTMLDivElement | null>(null),\n    },\n    {\n      label: getString(\"about-research-title\"),\n      route: AboutRoutes.AboutResearch,\n      active: Boolean(useRouteMatch(AboutRoutes.AboutResearch)),\n      Component: AboutResearch,\n      ref: useRef<HTMLDivElement | null>(null),\n    },\n    {\n      label: getString(\"about-growth-lab-title\"),\n      route: AboutRoutes.AboutGrowthLab,\n      active: Boolean(useRouteMatch(AboutRoutes.AboutGrowthLab)),\n      Component: AboutGrowthLab,\n      ref: useRef<HTMLDivElement | null>(null),\n    },\n  ];\n\n  return (\n    <>\n      <Helmet>\n        <title>\n          {\"About | \" + getString(\"meta-data-title-default-suffix\")}\n        </title>\n        <meta\n          property=\"og:title\"\n          content={\"About | \" + getString(\"meta-data-title-default-suffix\")}\n        />\n      </Helmet>\n      <Content sections={sections} />\n    </>\n  );\n};\n\nexport default About;\n","import React from \"react\";\nimport useFluent from \"../../../hooks/useFluent\";\nimport Helmet from \"react-helmet\";\n\nconst Contact = () => {\n  const getString = useFluent();\n  return (\n    <div>\n      <Helmet>\n        <title>\n          {getString(\"navigation-contact\") +\n            \" | \" +\n            getString(\"meta-data-title-default-suffix\")}\n        </title>\n        <meta\n          property=\"og:title\"\n          content={\n            getString(\"navigation-contact\") +\n            \" | \" +\n            getString(\"meta-data-title-default-suffix\")\n          }\n        />\n      </Helmet>\n      <h1>{getString(\"contact-us-title\")}</h1>\n      <p dangerouslySetInnerHTML={{ __html: getString(\"contact-us-para-1\") }} />\n      <p dangerouslySetInnerHTML={{ __html: getString(\"contact-us-para-2\") }} />\n    </div>\n  );\n};\n\nexport default Contact;\n","import React, { useLayoutEffect, useRef, useState } from \"react\";\nimport styled from \"styled-components\";\n\nexport const borderColor = \"#999\";\n\nconst LargeTerm = styled.dt`\n  font-size: 1.5rem;\n  line-height: 1.14;\n  color: rgb(51, 51, 51);\n  border-top: 1px solid ${borderColor};\n  background-color: rgba(90, 111, 140, 0.1);\n  padding: 1rem;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n\n  &:hover {\n    background-color: rgba(90, 111, 140, 0.35);\n    cursor: pointer;\n  }\n`;\nconst SmallTerm = styled(LargeTerm)`\n  font-size: 1rem;\n  padding: 0.75rem;\n  line-height: 0.75rem;\n`;\n\nconst Definition = styled.dd`\n  transition: height 200ms ease-in-out;\n  overflow: hidden;\n  box-sizing: border-box;\n  margin-left: 0;\n\n  a {\n    color: rgb(39, 86, 197);\n\n    &:hover {\n      text-decoration: underline;\n    }\n  }\n`;\n\nconst Paragraph = styled.p`\n  padding: 1rem;\n  border-top: 1px solid ${borderColor};\n`;\n\nconst Icon = styled.div`\n  font-size: 2rem;\n`;\n\nexport interface IProps {\n  term: string;\n  definition: string;\n  smallLabel?: boolean;\n}\n\nconst GlossaryItem = (props: IProps) => {\n  const { term, definition, smallLabel } = props;\n\n  const [domElmHeight, setDomElmHeight] = useState<number>(0);\n  const [expandedHeight, setExpandedHeight] = useState<\"auto\" | number>(\"auto\");\n  const [icon, setIcon] = useState<\"+\" | \"-\">(\"+\");\n  const definitionElm = useRef<HTMLElement | null>(null);\n\n  useLayoutEffect(() => {\n    const node = definitionElm.current;\n    if (node !== null) {\n      setDomElmHeight(node.clientHeight);\n      setExpandedHeight(0);\n    }\n  }, [definitionElm]);\n\n  const toggleDefinition = () => {\n    if (expandedHeight === 0) {\n      setExpandedHeight(domElmHeight);\n      setIcon(\"-\");\n    } else {\n      setExpandedHeight(0);\n      setIcon(\"+\");\n    }\n  };\n\n  const Term = smallLabel === true ? SmallTerm : LargeTerm;\n\n  return (\n    <>\n      <Term onClick={toggleDefinition}>\n        {term}\n        <Icon>{icon}</Icon>\n      </Term>\n      <Definition ref={definitionElm} style={{ height: expandedHeight }}>\n        <Paragraph dangerouslySetInnerHTML={{ __html: definition }} />\n      </Definition>\n    </>\n  );\n};\n\nexport default GlossaryItem;\n","import React from \"react\";\nimport useFluent from \"../../../hooks/useFluent\";\nimport Helmet from \"react-helmet\";\nimport Item from \"./GlossaryItem\";\n\ninterface IDatum {\n  question: string;\n  answer: string;\n}\n\nconst Faq = () => {\n  const getString = useFluent();\n\n  const content: IDatum[] = [\n    {\n      question: getString(\"faq-list-Q1-q\"),\n      answer: getString(\"faq-list-Q1-a\"),\n    },\n    {\n      question: getString(\"faq-list-Q2-q\"),\n      answer: getString(\"faq-list-Q2-a\"),\n    },\n    {\n      question: getString(\"faq-list-Q3-q\"),\n      answer: getString(\"faq-list-Q3-a\"),\n    },\n    {\n      question: getString(\"faq-list-Q4-q\"),\n      answer: getString(\"faq-list-Q4-a\"),\n    },\n    {\n      question: getString(\"faq-list-Q5-q\"),\n      answer: getString(\"faq-list-Q5-a\"),\n    },\n    {\n      question: getString(\"faq-list-Q6-q\"),\n      answer: getString(\"faq-list-Q6-a\"),\n    },\n    {\n      question: getString(\"faq-list-Q7-q\"),\n      answer: getString(\"faq-list-Q7-a\"),\n    },\n    {\n      question: getString(\"faq-list-Q8-q\"),\n      answer: getString(\"faq-list-Q8-a\"),\n    },\n    {\n      question: getString(\"faq-list-Q9-q\"),\n      answer: getString(\"faq-list-Q9-a\"),\n    },\n    {\n      question: getString(\"faq-list-Q10-q\"),\n      answer: getString(\"faq-list-Q10-a\"),\n    },\n  ];\n\n  const pairs = content.map(({ question, answer }, index) => (\n    <Item key={index} term={question} definition={answer} />\n  ));\n\n  return (\n    <div>\n      <Helmet>\n        <title>\n          {getString(\"navigation-faq\") +\n            \" | \" +\n            getString(\"meta-data-title-default-suffix\")}\n        </title>\n        <meta\n          property=\"og:title\"\n          content={\n            getString(\"navigation-faq\") +\n            \" | \" +\n            getString(\"meta-data-title-default-suffix\")\n          }\n        />\n      </Helmet>\n      <h1>{getString(\"faq-title\")}</h1>\n      {pairs}\n      <div style={{ marginBottom: \"5rem\" }} />\n    </div>\n  );\n};\n\nexport default Faq;\n","import React from \"react\";\nimport { Route, Switch } from \"react-router-dom\";\nimport { Routes } from \"../../routing/routes\";\nimport InformationalPage from \"../../components/templates/informationalPage\";\nimport About from \"./about\";\nimport Contact from \"./contact\";\nimport Faq from \"./faq\";\n\nconst City = () => {\n  return (\n    <InformationalPage>\n      <Switch>\n        <Route path={Routes.AboutBase} component={About} />\n        <Route path={Routes.ContactBase} component={Contact} />\n        <Route path={Routes.FaqBase} component={Faq} />\n      </Switch>\n    </InformationalPage>\n  );\n};\n\nexport default City;\n","import React from \"react\";\nimport GlobalStyles from \"./styling/GlobalStyles\";\nimport Helmet from \"react-helmet\";\nimport { Route, Switch } from \"react-router-dom\";\nimport Landing from \"./pages/landing\";\nimport City from \"./pages/cities/profiles\";\nimport Informational from \"./pages/informational\";\nimport { Routes } from \"./routing/routes\";\nimport \"./styling/fonts/fonts.css\";\nimport AppContext, { useWindowWidth } from \"./contextProviders/appContext\";\nimport { OverlayPortal } from \"./components/standardModal\";\nimport useFluent from \"./hooks/useFluent\";\n\nfunction App() {\n  const windowDimensions = useWindowWidth();\n  const getString = useFluent();\n  const defaultMetaTitle = getString(\"meta-data-title-default\");\n  return (\n    <>\n      <Helmet>\n        <title>{defaultMetaTitle}</title>\n        <meta property=\"og:title\" content={defaultMetaTitle} />\n      </Helmet>\n      <GlobalStyles />\n      <AppContext.Provider value={{ windowDimensions }}>\n        <Switch>\n          <Route exact path={Routes.Landing} component={Landing} />\n          <Route path={Routes.CityBase} component={City} />\n          <Route path={Routes.AboutBase} component={Informational} />\n          <Route path={Routes.ContactBase} component={Informational} />\n          <Route path={Routes.FaqBase} component={Informational} />\n          <Route component={Landing} />\n        </Switch>\n        <OverlayPortal />\n      </AppContext.Provider>\n    </>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === \"localhost\" ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === \"[::1]\" ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/,\n    ),\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener(\"load\", () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            \"This web app is being served cache-first by a service \" +\n              \"worker. To learn more, visit https://bit.ly/CRA-PWA\",\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === \"installed\") {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                \"New content is available and will be used when all \" +\n                  \"tabs for this page are closed. See https://bit.ly/CRA-PWA.\",\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log(\"Content is cached for offline use.\");\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error(\"Error during service worker registration:\", error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { \"Service-Worker\": \"script\" },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get(\"content-type\");\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf(\"javascript\") === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        \"No internet connection found. App is running in offline mode.\",\n      );\n    });\n}\n\nexport function unregister() {\n  if (\"serviceWorker\" in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport {\n  appLocalizationAndBundle as fluentValue,\n  AppLocalizationAndBundleContext as FluentText,\n} from \"./contextProviders/getFluentLocalizationContext\";\nimport { HashRouter } from \"react-router-dom\";\nimport * as serviceWorker from \"./serviceWorker\";\nimport { StaticDataProvider } from \"./dataProvider\";\n\nReactDOM.render(\n  <StaticDataProvider>\n    <FluentText.Provider value={fluentValue}>\n      <HashRouter>\n        <App />\n      </HashRouter>\n    </FluentText.Provider>\n  </StaticDataProvider>,\n  document.getElementById(\"root\"),\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.register();\n","module.exports = __webpack_public_path__ + \"static/media/benchmark_comparator.1146d6d7.svg\";"],"sourceRoot":""}